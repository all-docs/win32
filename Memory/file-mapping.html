<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>File Mapping</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: File mapping is the association of a file's contents with a portion of the virtual address space of a process.
ms.assetid: 86a8bc81-914d-46a2-99fd-65dfd03bbcdd
title: File Mapping
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>File Mapping</h1>
<p><em>File mapping</em> is the association of a file's contents with a portion of the virtual address space of a process. The system creates a <em>file mapping object</em> (also known as a <em>section object</em>) to maintain this association. A <em>file view</em> is the portion of virtual address space that a process uses to access the file's contents. File mapping allows the process to use both random input and output (I/O) and sequential I/O. It also allows the process to work efficiently with a large data file, such as a database, without having to map the whole file into memory. Multiple processes can also use memory-mapped files to share data.</p>
<p>Processes read from and write to the file view using pointers, just as they would with dynamically allocated memory. The use of file mapping improves efficiency because the file resides on disk, but the file view resides in memory. Processes can also manipulate the file view with the <a href="/windows/win32/api/memoryapi/nf-memoryapi-virtualprotect"><strong>VirtualProtect</strong></a> function.</p>
<p>The following illustration shows the relationship between the file on disk, a file mapping object, and a file view.</p>
<p><img src="images/fmap.png" alt="relationship between the file on disk, a file mapping object, and a file view." /></p>
<p>The file on disk can be any file that you want to map into memory, or it can be the system page file. The file mapping object can consist of all or only part of the file. It is backed by the file on disk. This means that when the system swaps out pages of the file mapping object, any changes made to the file mapping object are written to the file. When the pages of the file mapping object are swapped back in, they are restored from the file.</p>
<p>A file view can consist of all or only part of the file mapping object. A process manipulates the file through the file views. A process can create multiple views for a file mapping object. The file views created by each process reside in the virtual address space of that process. When the process needs data from a portion of the file other than what is in the current file view, it can unmap the current file view, then create a new file view.</p>
<p>When multiple processes use the same file mapping object to create views for a local file, the data is coherent. That is, the views contain identical copies of the file on disk. The file cannot reside on a remote computer if you want to share memory between multiple processes.</p>
<p>For more information, see the following topics:</p>
<ul>
<li><a href="creating-a-file-mapping-object.html">Creating a File Mapping Object</a></li>
<li><a href="creating-a-file-view.html">Creating a File View</a></li>
<li><a href="sharing-files-and-memory.html">Sharing Files and Memory</a></li>
<li><a href="reading-and-writing-from-a-file-view.html">Reading and Writing From a File View</a></li>
<li><a href="closing-a-file-mapping-object.html">Closing a File Mapping Object</a></li>
<li><a href="file-mapping-security-and-access-rights.html">File Mapping Security and Access Rights</a></li>
<li><a href="using-file-mapping.html">Using File Mapping</a></li>
</ul>
<p>Â </p>
<p>Â </p>
</body>
