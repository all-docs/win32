<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>How Clients Compose a Service's SPN</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<p>title: How Clients Compose a Service's SPN
description: To authenticate a service, a client application composes an SPN for the service instance to which it must connect.
ms.assetid: cf6c491a-d84d-4c9c-bd69-1f2264f395b6
ms.tgt_platform: multiple
keywords:</p>
<ul>
<li>How Clients Compose a Service's SPN AD</li>
<li>service principal name AD , how clients compose a service's SPN
ms.topic: article
ms.date: 05/31/2018</li>
</ul>
<hr />
<h1>How Clients Compose a Service's SPN</h1>
<p>To authenticate a service, a client application composes an SPN for the service instance to which it must connect. The client application can use the <a href="/windows/desktop/api/Dsparse/nf-dsparse-dsmakespna"><strong>DsMakeSpn</strong></a> function to compose an SPN. The client specifies the components of the SPN using known data or data retrieved from sources other than the service itself.</p>
<p>The form of an SPN is as shown in the following form:</p>
<pre lang="C++"><code>&lt;service class&gt;/&lt;host&gt;:&lt;port&gt;/&lt;service name&gt;
</code></pre>
<p>In this form, &quot;&lt;service class&gt;&quot; and &quot;&lt;host&gt;&quot; are required. &quot;&lt;port&gt;&quot; and &quot;&lt;service name&gt;&quot; are optional.</p>
<p>Typically, the client recognizes the &quot;&lt;service class&gt;&quot; part of the name, and recognizes which of the optional components to include in the SPN. The client can retrieve components of the SPN from sources such as a service connection point (SCP) or user input. For example, the client can read the <strong>serviceDNSName</strong> attribute of a service's SCP to get the &quot;&lt;host&gt;&quot; component. The <strong>serviceDNSName</strong> attribute contains either the DNS name of the server on which the service instance is running or the DNS name of SRV records containing the host data for service replicas. The &quot;&lt;service name&gt;&quot; component, used only for replicable services, can be the distinguished name of the service's SCP, the DNS name of the domain served by the service, or the DNS name of SRV or MX records.</p>
<p>For more information and a code example used to compose an SPN for a service, see <a href="how-a-client-authenticates-an-scp-based-windows-sockets-service.html">How a Client Authenticates an SCP-based Windows Sockets Service</a>.</p>
<p>For more information and a description of the SPN components, see <a href="name-formats-for-unique-spns.html">Name Formats for Unique SPNs</a>.</p>
</body>
