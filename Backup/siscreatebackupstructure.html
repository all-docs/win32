<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>SisCreateBackupStructure function</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<p>title: SisCreateBackupStructure function (Sisbkup.h)
description: Creates a SIS backup structure based on the supplied information.
ms.assetid: a8c48961-fa24-4eb6-92cd-1b9bc83cec41
keywords:</p>
<ul>
<li>SisCreateBackupStructure function Backup
topic_type:</li>
<li>apiref
api_name:</li>
<li>SisCreateBackupStructure
api_location:</li>
<li>Sisbkup.dll
api_type:</li>
<li>DllExport
ms.topic: reference
ms.date: 05/31/2018</li>
</ul>
<hr />
<h1>SisCreateBackupStructure function</h1>
<p>The <strong>SisCreateBackupStructure</strong> function creates a SIS backup structure based on the supplied information.</p>
<h2>Syntax</h2>
<pre lang="C++"><code>BOOL SisCreateBackupStructure(
  _In_  PWCHAR volumeRoot,
  _Out_ PVOID  *sisBackupStructure,
  _Out_ PWCHAR *commonStoreRootPathname,
  _Out_ PULONG countOfCommonStoreFilesToBackUp,
  _Out_ PWCHAR **commonStoreFilesToBackUp
);
</code></pre>
<h2>Parameters</h2>
<!-- raw HTML omitted -->
<p><em>volumeRoot</em> [in]</p>
<!-- raw HTML omitted -->
<p>File name of the volume root, without the trailing backslash, of the volume to be backed up. For example, specify &quot;C:&quot; and not &quot;C:\&quot;.</p>
<!-- raw HTML omitted -->
<p><em>sisBackupStructure</em> [out]</p>
<!-- raw HTML omitted -->
<p>Returned SIS backup structure.</p>
<!-- raw HTML omitted -->
<p><em>commonStoreRootPathname</em> [out]</p>
<!-- raw HTML omitted -->
<p>Fully qualified path name of the specified volume's common store. For example, &quot;c:\SIS Common Store&quot;.</p>
<!-- raw HTML omitted -->
<p><em>countOfCommonStoreFilesToBackUp</em> [out]</p>
<!-- raw HTML omitted -->
<p>Number of files listed in the <em>commonStoreFilesToBackUp</em> parameter.</p>
<!-- raw HTML omitted -->
<p><em>commonStoreFilesToBackUp</em> [out]</p>
<!-- raw HTML omitted -->
<p>Pointer to an array of file names that specifies a list of internal files used by SIS to manage the specified volume. These files should be backed up at the same time and in the same manner as the common-store files requested by <a href="siscsfilestobackupforlink.html"><strong>SisCSFilesToBackupForLink</strong></a></p>
<!-- raw HTML omitted -->
<h2>Return value</h2>
<p>This function returns <strong>TRUE</strong> if it completes successfully and <strong>FALSE</strong> otherwise. Call <a href="/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror"><strong>GetLastError</strong></a> to get more information about the reason the call failed.</p>
<h2>Remarks</h2>
<p>This function creates a SIS backup structure, which is used by the SIS backup API to create and maintain a list of the file links on the volume and the original files the links point to. This function should be called only once for each SIS-enabled volume being backed up. All files within the specified volume should be treated as common-store files and backed up only if SIS indicates that they should.</p>
<p>The <em>countOfCommonStoreFilesToBackUp</em> and <em>commonStoreFilesToBackUp</em> parameters together return a list of files that must be backed up regardless of which links are backed up.</p>
<p>If <em>countOfCommonStoreFilesToBackUp</em> is 0, <em>commonStoreFilesToBackUp</em> may be a <strong>NULL</strong> pointer. The value of the <em>commonStoreFilesToBackUp</em> parameter should be ignored.</p>
<p>After the backup operation is complete, deallocate the memory used by the <em>commonStoreFilesToBackUp</em> array of strings by calling <a href="sisfreeallocatedmemory.html"><strong>SisFreeAllocatedMemory</strong></a>.</p>
<h2>Requirements</h2>
<table>
<thead>
<tr>
<th>Requirement</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Minimum supported client<!-- raw HTML omitted --></td>
<td>Windows XP [desktop apps only]<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Minimum supported server<!-- raw HTML omitted --></td>
<td>Windows Server 2003 [desktop apps only]<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Header<!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted -->Sisbkup.h<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Library<!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted -->Sisbkup.lib<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
<tr>
<td>DLL<!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted -->Sisbkup.dll<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<h2>See also</h2>
<!-- raw HTML omitted -->
<p><a href="siscreaterestorestructure.html"><strong>SisCreateRestoreStructure</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="siscsfilestobackupforlink.html"><strong>SisCSFilesToBackupForLink</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="sisfreeallocatedmemory.html"><strong>SisFreeAllocatedMemory</strong></a></p>
<!-- raw HTML omitted -->
</body>
