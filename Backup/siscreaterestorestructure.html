<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>SisCreateRestoreStructure function</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<p>title: SisCreateRestoreStructure function (Sisbkup.h)
description: Creates a SIS restore structure based on the supplied information.
ms.assetid: acdd4258-813d-42af-a2e1-e59a1426f86c
keywords:</p>
<ul>
<li>SisCreateRestoreStructure function Backup
topic_type:</li>
<li>apiref
api_name:</li>
<li>SisCreateRestoreStructure
api_location:</li>
<li>Sisbkup.dll
api_type:</li>
<li>DllExport
ms.topic: reference
ms.date: 05/31/2018</li>
</ul>
<hr />
<h1>SisCreateRestoreStructure function</h1>
<p>The <strong>SisCreateRestoreStructure</strong> function creates a SIS restore structure based on the supplied information.</p>
<h2>Syntax</h2>
<pre lang="C++"><code>BOOL SisCreateRestoreStructure(
  _In_  PWCHAR volumeRoot,
  _Out_ PVOID  *sisRestoreStructure,
  _Out_ PWCHAR *commonStoreRootPathname,
  _Out_ PULONG countOfCommonStoreFilesToRestore,
  _Out_ PWCHAR **commonStoreFilesToRestore
);
</code></pre>
<h2>Parameters</h2>
<!-- raw HTML omitted -->
<p><em>volumeRoot</em> [in]</p>
<!-- raw HTML omitted -->
<p>File name of the volume root, without the trailing backslash, of the volume to be backed up. For example, specify &quot;C:&quot; and not &quot;C:\&quot;. The volume cannot be the system or boot volume.</p>
<!-- raw HTML omitted -->
<p><em>sisRestoreStructure</em> [out]</p>
<!-- raw HTML omitted -->
<p>Returned SIS restore structure. This structure should be treated as opaque by the caller.</p>
<!-- raw HTML omitted -->
<p><em>commonStoreRootPathname</em> [out]</p>
<!-- raw HTML omitted -->
<p>Fully qualified path name of the specified volume's common store. For example, &quot;c:\SIS Common Store&quot;.</p>
<!-- raw HTML omitted -->
<p><em>countOfCommonStoreFilesToRestore</em> [out]</p>
<!-- raw HTML omitted -->
<p>Number of files listed in the <em>commonStoreFilesToRestore</em> parameter.</p>
<!-- raw HTML omitted -->
<p><em>commonStoreFilesToRestore</em> [out]</p>
<!-- raw HTML omitted -->
<p>Pointer to an array of file names that specifies the list of internal files used by SIS to manage the specified volume. These files should be restored at the same time and in the same manner as the common-store files requested by <a href="siscsfilestobackupforlink.html"><strong>SisCSFilesToBackupForLink</strong></a>.</p>
<!-- raw HTML omitted -->
<h2>Return value</h2>
<p>This function returns <strong>TRUE</strong> if it completes successfully and <strong>FALSE</strong> otherwise. Call <a href="/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror"><strong>GetLastError</strong></a> to get more information about the reason the call failed.</p>
<h2>Remarks</h2>
<p>This function establishes the restore environment on the specified volume in the way that <a href="siscreatebackupstructure.html"><strong>SisCreateBackupStructure</strong></a> establishes the backup environment on the specified volume.</p>
<p>Note that this function will not necessarily identify the common-store file or files corresponding to a set of SIS links on the backup media if those common store file or files still exist on disk. The contents of a common-store file's data stream never change once it is created, so if the file already exists on the disk there is no need to restore it.</p>
<p>Common-store file names are globally unique to ensure the integrity of the restore operation even if it does not occur on the same SIS-enabled volume that the backup operation has accessed.</p>
<p>After the restore operation is complete, deallocate the memory used by the <em>commonStoreFilesToRestore</em> array of strings by calling <a href="sisfreeallocatedmemory.html"><strong>SisFreeAllocatedMemory</strong></a>.</p>
<h2>Requirements</h2>
<table>
<thead>
<tr>
<th>Requirement</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Minimum supported client<!-- raw HTML omitted --></td>
<td>Windows XP [desktop apps only]<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Minimum supported server<!-- raw HTML omitted --></td>
<td>Windows Server 2003 [desktop apps only]<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Header<!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted -->Sisbkup.h<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Library<!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted -->Sisbkup.lib<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
<tr>
<td>DLL<!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted -->Sisbkup.dll<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<h2>See also</h2>
<!-- raw HTML omitted -->
<p><a href="siscreatebackupstructure.html"><strong>SisCreateBackupStructure</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="siscsfilestobackupforlink.html"><strong>SisCSFilesToBackupForLink</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="sisfreeallocatedmemory.html"><strong>SisFreeAllocatedMemory</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="sisfreebackupstructure.html"><strong>SisFreeBackupStructure</strong></a></p>
<!-- raw HTML omitted -->
</body>
