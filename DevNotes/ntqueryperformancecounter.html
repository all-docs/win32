<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>NtQueryPerformanceCounter function</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<p>description: Returns the current value of a performance counter and, optionally, the frequency of the performance counter.
ms.assetid: ab8973b7-a358-4e50-85e8-9dbff4e67010
title: NtQueryPerformanceCounter function
ms.topic: reference
ms.date: 05/31/2018
topic_type:</p>
<ul>
<li>APIRef</li>
<li>kbSyntax
api_name:</li>
<li>NtQueryPerformanceCounter
api_type:</li>
<li>DllExport
api_location:</li>
<li>Ntdll.dll</li>
</ul>
<hr />
<h1>NtQueryPerformanceCounter function</h1>
<p>[This function is not supported and should not be used. Use the <strong>QueryPerformanceCounter</strong> and <strong>QueryPerformanceFrequency</strong> functions instead.]</p>
<p>Returns the current value of a performance counter and, optionally, the frequency of the performance counter.</p>
<h2>Syntax</h2>
<pre lang="C++"><code>NTSTATUS NtQueryPerformanceCounter(
  _Out_Â Â Â Â Â PLARGE_INTEGER PerformanceCounter,
  _Out_opt_Â PLARGE_INTEGER PerformanceFrequency
);
</code></pre>
<h2>Parameters</h2>
<!-- raw HTML omitted -->
<p><em>PerformanceCounter</em> [out]</p>
<!-- raw HTML omitted -->
<p>The address of a variable to receive the current performance counter value.</p>
<!-- raw HTML omitted -->
<p><em>PerformanceFrequency</em> [out, optional]</p>
<!-- raw HTML omitted -->
<p>The address of a variable to receive the performance counter frequency.</p>
<!-- raw HTML omitted -->
<h2>Return value</h2>
<p>If the function succeeds, it returns the <strong>NTSTATUS</strong> code <strong>STATUS_SUCCESS</strong>; otherwise, it returns an error code such as <strong>STATUS_ACCESS_VIOLATION</strong>.</p>
<h2>Remarks</h2>
<p>No header file is available for <strong>NtQueryPerformanceCounter</strong>. You should use the alternative functions named above, although you can also use the <a href="/windows/win32/api/libloaderapi/nf-libloaderapi-loadlibrarya"><strong>LoadLibrary</strong></a> and <a href="/windows/win32/api/libloaderapi/nf-libloaderapi-getprocaddress"><strong>GetProcAddress</strong></a> functions to dynamically link to Ntdll.dll.</p>
<p>Performance frequency is the frequency of the performance counter in hertz, specifically in counts per second. This value is implementation dependent. If the implementation does not have hardware to support performance timing, the value returned is 0.</p>
<h2>Requirements</h2>
<table>
<thead>
<tr>
<th>Requirement</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>DLL<!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted -->Ntdll.dll<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<h2>See also</h2>
<!-- raw HTML omitted -->
<p><a href="/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter"><strong>QueryPerformanceCounter</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/win32/api/profileapi/nf-profileapi-queryperformancefrequency"><strong>QueryPerformanceFrequency</strong></a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
