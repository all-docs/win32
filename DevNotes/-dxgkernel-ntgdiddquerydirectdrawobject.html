<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>NtGdiDdQueryDirectDrawObject function</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<p>description: Queries a previously created kernel-mode representation of a Microsoft DirectDraw object for its capabilities.
ms.assetid: ec07c7ef-4c57-4ed9-849b-f30692cc3181
title: NtGdiDdQueryDirectDrawObject function (Ntgdi.h)
ms.topic: reference
ms.date: 05/31/2018
topic_type:</p>
<ul>
<li>APIRef</li>
<li>kbSyntax
api_name:</li>
<li>NtGdiDdQueryDirectDrawObject
api_type:</li>
<li>DllExport
api_location:</li>
<li>Ntgdi.h</li>
<li>Ext-MS-Win-GDI-Internal-Desktop-L1-1-0.dll</li>
<li>GDI32.dll</li>
<li>GDI32Full.dll</li>
</ul>
<hr />
<h1>NtGdiDdQueryDirectDrawObject function</h1>
<p>[This function is subject to change with each operating system revision. Instead, use the DirectDraw and Microsoft Direct3DAPIs; these APIs insulate applications from such operating system changes, and hide many other difficulties involved in interacting directly with display drivers.]</p>
<p>Queries a previously created kernel-mode representation of a Microsoft DirectDraw object for its capabilities.</p>
<h2>Syntax</h2>
<pre lang="C++"><code>BOOL APIENTRY NtGdiDdQueryDirectDrawObject(
  _In_Â Â HANDLE  Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â hDirectDrawLocal,
  _Out_Â DD_HALINFO Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â *pHalInfo,
  Â Â Â Â Â Â DWORD Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â *pCallBackFlags,
  _Out_Â LPD3DNTHAL_CALLBACKS Â Â Â Â Â Â Â puD3dCallbacks,
  _Out_Â LPD3DNTHAL_GLOBALDRIVERDATA puD3dDriverData,
  _Out_Â PDD_D3DBUFCALLBACKS Â Â Â Â Â Â Â Â puD3dBufferCallbacks,
  _Out_Â LPDDSURFACEDESC Â Â Â Â Â Â Â Â Â Â Â Â puD3dTextureFormats,
  _Out_Â DWORD Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â *puNumHeaps,
  _Out_Â VIDEOMEMORY Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â *puvmList,
  _Out_Â DWORD Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â *puNumFourCC,
  _Out_Â DWORD Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â *puFourCC
);
</code></pre>
<h2>Parameters</h2>
<!-- raw HTML omitted -->
<p><em>hDirectDrawLocal</em> [in]</p>
<!-- raw HTML omitted -->
<p>Handle to the previously-created kernel-mode DirectDraw device.</p>
<!-- raw HTML omitted -->
<p><em>pHalInfo</em> [out]</p>
<!-- raw HTML omitted -->
<p>Pointer to a <a href="/windows/win32/api/ddrawint/ns-ddrawint-dd_halinfo"><strong>DD_HALINFO</strong></a> structure that will be filled with the device's capabilities. See DDK documentation for details.</p>
<!-- raw HTML omitted -->
<p><em>pCallBackFlags</em></p>
<!-- raw HTML omitted -->
<p>Pointer to a caller-provided buffer that stores driver-reported callback flags. The buffer should be of size 3*sizeof(DWORD) and stores callback flags in the following order: pCallBackFlags[0] for flags in <a href="/windows/win32/api/ddrawint/ns-ddrawint-dd_callbacks"><strong>DD_CALLBACKS</strong></a>, pCallBackFlags[1] for flags in <a href="/windows/win32/api/ddrawint/ns-ddrawint-dd_surfacecallbacks"><strong>DD_SURFACECALLBACKS</strong></a>, and pCallBackFlags[2] for flags in <a href="/windows/win32/api/ddrawint/ns-ddrawint-dd_palettecallbacks"><strong>DD_PALETTECALLBACKS</strong></a>. See DDK documentation for details.</p>
<!-- raw HTML omitted -->
<p><em>puD3dCallbacks</em> [out]</p>
<!-- raw HTML omitted -->
<p>Pointer to a table of Direct3D callback pointers. The table is filled with pointers to functions within Gdi32.dll that imitate a Direct3D display driver. This callback table is identical to the D3DHAL_D3DCALLBACKS structure discussed in the DDK documentation.</p>
<!-- raw HTML omitted -->
<p><em>puD3dDriverData</em> [out]</p>
<!-- raw HTML omitted -->
<p>Pointer to <a href="/windows-hardware/drivers/ddi/d3dhal/ns-d3dhal-_d3dhal_globaldriverdata"><strong>D3DHAL_GLOBALDRIVERDATA</strong></a> data, as described in the DDK documentation.</p>
<!-- raw HTML omitted -->
<p><em>puD3dBufferCallbacks</em> [out]</p>
<!-- raw HTML omitted -->
<p>Pointer to a table of callback pointers. The table is filled with pointers to functions within Gdi32.dll that imitate a Direct3D display driver. This callback table is identical to the DDHAL_DDEXEBUFCALLBACKS structure, which maps to the <a href="/windows/win32/api/ddrawint/ns-ddrawint-dd_d3dbufcallbacks"><strong>DD_D3DBUFCALLBACKS</strong></a> structure discussed in the DDK documentation, except that members XxxD3DBuffer in <strong>DD_D3DBUFCALLBACKS</strong> are replaced with XxxExecuteBuffer in DDHAL_DDEXEBUFCALLBACKS.</p>
<!-- raw HTML omitted -->
<p><em>puD3dTextureFormats</em> [out]</p>
<!-- raw HTML omitted -->
<p>Pointer to an array of <a href="/windows/win32/api/ddraw/ns-ddraw-ddsurfacedesc"><strong>DDSURFACEDESC</strong></a> structures that define the set of permissible texture formats.</p>
<!-- raw HTML omitted -->
<p><em>puNumHeaps</em> [out]</p>
<!-- raw HTML omitted -->
<p>Pointer to the <strong>dwNumHeaps</strong> member of <a href="/windows/win32/api/ddrawint/ns-ddrawint-dd_halinfo"><strong>DD_HALINFO</strong></a>.<strong>vmiData</strong>. The <strong>dwNumHeaps</strong> member specifies the number of memory heaps in <em>puvmList</em>. See DDK documentation for details.</p>
<!-- raw HTML omitted -->
<p><em>puvmList</em> [out]</p>
<!-- raw HTML omitted -->
<p>Pointer to a list of video memory heap descriptors. Can be <strong>NULL</strong>. This parameter is not used because video memory management is handled entirely within kernel mode.</p>
<!-- raw HTML omitted -->
<p><em>puNumFourCC</em> [out]</p>
<!-- raw HTML omitted -->
<p>Pointer to the <strong>puNumFourCCCodes</strong> member of <a href="/windows/win32/api/ddrawint/ns-ddrawint-dd_halinfo"><strong>DD_HALINFO</strong></a>.<strong>ddCaps</strong>. The <strong>puNumFourCCCodes</strong> member specifies the number of <a href="../directshow/fourcc-codes.html">Four-Character Codes (FOURCC)</a> codes that the driver supports. See DDK documentation for details.</p>
<!-- raw HTML omitted -->
<p><em>puFourCC</em> [out]</p>
<!-- raw HTML omitted -->
<p>Pointer to a list of supported <a href="../directshow/fourcc-codes.html">Four-Character Codes (FOURCC)</a> surface formats. Can be <strong>NULL</strong>.</p>
<!-- raw HTML omitted -->
<h2>Return value</h2>
<p>If successful, this function returns <strong>TRUE</strong>; otherwise it returns <strong>FALSE</strong>.</p>
<h2>Remarks</h2>
<p>A call to this function is designed to be made in a two-step process. In the first step, <em>puFourCC</em>, <em>puvmList</em> and <em>puD3dTextureFormats</em> should be <strong>NULL</strong>, and <a href="/windows/desktop/api/Ddrawgdi/nf-ddrawgdi-ddquerydirectdrawobject"><strong>DdQueryDirectDrawObject</strong></a> will fill in <a href="/windows/win32/api/ddrawint/ns-ddrawint-dd_halinfo"><strong>DD_HALINFO</strong></a>.<strong>ddCaps</strong>.<strong>dwNumFourCCCodes</strong>, <strong>DD_HALINFO</strong>.<strong>vmiData</strong>.<strong>dwNumHeaps</strong>, and <a href="/windows-hardware/drivers/ddi/d3dhal/ns-d3dhal-_d3dhal_globaldriverdata"><strong>D3DHAL_GLOBALDRIVERDATA</strong></a>.<strong>dwNumTextureFormats</strong> with the number of entries that are to be returned. In the second call, the caller should allocate arrays of the indicated size and pass those pointers instead of <strong>NULL</strong> values in the <em>puFourCC</em>, <em>puvmList</em> and <em>puD3dTextureFormats</em> parameters. The arrays will then be populated with appropriate data.</p>
<p>Applications are advised to use the DirectDraw and <a href="../direct3d10/d3d10-graphics-reference.html">Direct3D</a>Â APIs to create and manage graphics device objects. These constructs abstract the device creation process in a simplified and operating-system-independent way.</p>
<h2>Requirements</h2>
<table>
<thead>
<tr>
<th>Requirement</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Minimum supported client<!-- raw HTML omitted --></td>
<td>WindowsÂ 2000 Professional [desktop apps only]<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Minimum supported server<!-- raw HTML omitted --></td>
<td>WindowsÂ 2000 Server [desktop apps only]<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Header<!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted -->Ntgdi.h<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<h2>See also</h2>
<!-- raw HTML omitted -->
<p><a href="-dxgkernel-low-level-client-support.html">Graphics Low Level Client Support</a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/api/Ddrawgdi/nf-ddrawgdi-ddquerydirectdrawobject"><strong>DdQueryDirectDrawObject</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="-dxgkernel-ntgdiddcreatedirectdrawobject.html"><strong>NtGdiDdCreateDirectDrawObject</strong></a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
