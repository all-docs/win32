<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>SESSION structure</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<p>description: The SESSION structure contains information about the current session.
ms.assetid: e04571f9-eeb7-4612-8cb2-05aca7b5df06
title: SESSION structure
ms.topic: reference
ms.date: 05/31/2018
topic_type:</p>
<ul>
<li>APIRef</li>
<li>kbSyntax
api_name:</li>
<li>SESSION
api_type:</li>
<li>NA
api_location:</li>
</ul>
<hr />
<h1>SESSION structure</h1>
<p>[This structure contains information required only when using the <strong>DeleteExtractedFiles</strong> and <strong>Extract</strong> functions, which are not supported. This documentation is provided for informational purposes only.]</p>
<p>The <strong>SESSION</strong> structure contains information about the current session.</p>
<h2>Syntax</h2>
<pre lang="C++"><code>typedef struct {
  ACTION Â Â Â act;
  HFILELIST hflist;
  BOOL Â Â Â Â Â fAllCabinets;
  BOOL Â Â Â Â Â fOverwrite;
  BOOL Â Â Â Â Â fNoLineFeed;
  BOOL Â Â Â Â Â fSelfExtract;
  long Â Â Â Â Â cbSelfExtractSize;
  long Â Â Â Â Â cbSelfExtractSize;
  int Â Â Â Â Â Â ahfSelf[cMAX_CAB_FILE_OPEN];
  int Â Â Â Â Â Â cErrors;
  HFDI Â Â Â Â Â hfdi;
  ERF Â Â Â Â Â Â erf;
  long Â Â Â Â Â cFiles;
  long Â Â Â Â Â cbTotalBytes;
  PERROR Â Â Â perr;
  SPILLERR Â se;
  long Â Â Â Â Â cbSpill;
  char Â Â Â Â Â achSelf[cbFILE_NAME_MAX];
  char Â Â Â Â Â achMsg[cbMAX_LINE*2];
  char Â Â Â Â Â achLine;
  char Â Â Â Â Â achLocation;
  char Â Â Â Â Â achFile;
  char Â Â Â Â Â achDest;
  char Â Â Â Â Â achCabPath;
  BOOL Â Â Â Â Â fContinuationCabinet;
  BOOL Â Â Â Â Â fShowReserveInfo;
  BOOL Â Â Â Â Â fNextCabCalled;
  CABINET Â Â acab[2];
  char Â Â Â Â Â achZap[cbFILE_NAME_MAX];
  char Â Â Â Â Â achCabinetFile[cbFILE_NAME_MAX];
  int Â Â Â Â Â Â cArgv;
  char Â Â Â Â Â **pArgv;
  int Â Â Â Â Â Â fDestructive;
  USHORT Â Â Â iCurrentFolder;
} SESSION, *PSESSION;
</code></pre>
<h2>Members</h2>
<!-- raw HTML omitted -->
<p><strong>act</strong></p>
<!-- raw HTML omitted -->
<p>The action to perform. This member can be one of the values from the following enumerated type.</p>
<pre lang="syntax"><code>typedef enum {
    actBAD,         // Invalid action
    actHELP,        // Show help
    actDEFAULT,     // Perform default action based on command line arguments
    actDIRECTORY,   // Force display of cabinet directory
    actEXTRACT,     // Force file extraction
    actCOPY,        // Do single file-to-file copy
} ACTION;  
</code></pre>
<!-- raw HTML omitted -->
<p><strong>hflist</strong></p>
<!-- raw HTML omitted -->
<p>The handle to a list of files specified on the command line. This datatype is declared as follows:</p>
<p><code>typedef void *HFILELIST;</code></p>
<!-- raw HTML omitted -->
<p><strong>fAllCabinets</strong></p>
<!-- raw HTML omitted -->
<p>A flag that indicates whether more than one cabinet file should be processed. If this value is <strong>TRUE</strong>, continuation cabinets are processed.</p>
<!-- raw HTML omitted -->
<p><strong>fOverwrite</strong></p>
<!-- raw HTML omitted -->
<p>A flag that indicates whether existing files should be overwritten. If this value is <strong>TRUE</strong>, existing files are overwritten.</p>
<!-- raw HTML omitted -->
<p><strong>fNoLineFeed</strong></p>
<!-- raw HTML omitted -->
<p>A flag that indicates whether the last <code>printf</code> call has the newline (<code>\n</code>) characters. If this value is <strong>TRUE</strong>, the last <code>printf</code> call did not include the newline characters.</p>
<!-- raw HTML omitted -->
<p><strong>fSelfExtract</strong></p>
<!-- raw HTML omitted -->
<p>A flag that indicates whether a cabinet is self extracting. If this value is <strong>TRUE</strong>, the cabinet is self extracting.</p>
<!-- raw HTML omitted -->
<p><strong>cbSelfExtractSize</strong></p>
<!-- raw HTML omitted -->
<p>The length of the executable (.exe) portion of a self-extracting cabinet.</p>
<!-- raw HTML omitted -->
<p><strong>cbSelfExtractSize</strong></p>
<!-- raw HTML omitted -->
<p>The length of the CAB portion of a self-extracting cabinet.</p>
<!-- raw HTML omitted -->
<p><strong>ahfSelf</strong></p>
<!-- raw HTML omitted -->
<p>The file handles to the cabinet.</p>
<p><code>#define cMAX_CAB_FILE_OPEN    2 </code></p>
<!-- raw HTML omitted -->
<p><strong>cErrors</strong></p>
<!-- raw HTML omitted -->
<p>The count of errors encountered during the extraction session.</p>
<!-- raw HTML omitted -->
<p><strong>hfdi</strong></p>
<!-- raw HTML omitted -->
<p>A handle to the FDI context. This datatype is declared as follows:</p>
<p><code>typedef void FAR *HFDI; </code></p>
<!-- raw HTML omitted -->
<p><strong>erf</strong></p>
<!-- raw HTML omitted -->
<p>The FDI error structure. See <a href="/windows/win32/api/fdi_fci_types/ns-fdi_fci_types-erf"><strong>ERF</strong></a>.</p>
<!-- raw HTML omitted -->
<p><strong>cFiles</strong></p>
<!-- raw HTML omitted -->
<p>The count of files processed.</p>
<!-- raw HTML omitted -->
<p><strong>cbTotalBytes</strong></p>
<!-- raw HTML omitted -->
<p>The total number of bytes extracted.</p>
<!-- raw HTML omitted -->
<p><strong>perr</strong></p>
<!-- raw HTML omitted -->
<p>The pass through FDI.</p>
<!-- raw HTML omitted -->
<p><strong>se</strong></p>
<!-- raw HTML omitted -->
<p>The spill file error. This member can be one of the values from the following enumerated type.</p>
<pre lang="syntax"><code>typedef enum {
    seNONE,                     // No error
    seNOT_ENOUGH_MEMORY,        // Not enough RAM
    seCANNOT_CREATE,            // Cannot create spill file
    seNOT_ENOUGH_SPACE,         // Not enough space for spill file
} SPILLERR;
</code></pre>
<!-- raw HTML omitted -->
<p><strong>cbSpill</strong></p>
<!-- raw HTML omitted -->
<p>The size of the spill file requested.</p>
<!-- raw HTML omitted -->
<p><strong>achSelf</strong></p>
<!-- raw HTML omitted -->
<p>The name of the executable (.exe) file.</p>
<p><code>#define cbFILE_NAME_MAX     256</code></p>
<!-- raw HTML omitted -->
<p><strong>achMsg</strong></p>
<!-- raw HTML omitted -->
<p>The message formatting buffer.</p>
<p><code>#define cbMAX_LINE          256</code></p>
<!-- raw HTML omitted -->
<p><strong>achLine</strong></p>
<!-- raw HTML omitted -->
<p>The line formatting buffer.</p>
<!-- raw HTML omitted -->
<p><strong>achLocation</strong></p>
<!-- raw HTML omitted -->
<p>The output directory.</p>
<!-- raw HTML omitted -->
<p><strong>achFile</strong></p>
<!-- raw HTML omitted -->
<p>The current file name being extracted.</p>
<!-- raw HTML omitted -->
<p><strong>achDest</strong></p>
<!-- raw HTML omitted -->
<p>The forced destination file name.</p>
<!-- raw HTML omitted -->
<p><strong>achCabPath</strong></p>
<!-- raw HTML omitted -->
<p>The path to look at for a cabinet file.</p>
<!-- raw HTML omitted -->
<p><strong>fContinuationCabinet</strong></p>
<!-- raw HTML omitted -->
<p>A flag that indicates whether the current cabinet is the first one processed. If set to <strong>TRUE</strong>, it is not the first cabinet processed.</p>
<!-- raw HTML omitted -->
<p><strong>fShowReserveInfo</strong></p>
<!-- raw HTML omitted -->
<p>A flag that indicates whether reserve information should be provided. If set to <strong>TRUE</strong>, the information is made available.</p>
<!-- raw HTML omitted -->
<p><strong>fNextCabCalled</strong></p>
<!-- raw HTML omitted -->
<p>This member provides a way to determine which of the <strong>acab</strong> entries to use if we are processing all files in a cabinet set (<strong>fAllCabinet</strong> is set to <strong>TRUE</strong>).</p>
<!-- raw HTML omitted -->
<p><strong>acab</strong></p>
<!-- raw HTML omitted -->
<p>The last two entries in the cabinet set. This structure is defined as follows:</p>
<pre lang="syntax"><code>typedef struct {
    char    achCabPath[cbFILE_NAME_MAX];     // Cabinet file path
    char    achCabFilename[cbFILE_NAME_MAX]; // Cabinet file name.ext
    char    achDiskName[cbFILE_NAME_MAX];    // User readable disk label
    USHORT  setID;
    USHORT  iCabinet;
} CABINET;
typedef CABINET *PCABINET;
</code></pre>
<!-- raw HTML omitted -->
<p><strong>achZap</strong></p>
<!-- raw HTML omitted -->
<p>The prefix to strip from the file name.</p>
<p><code>#define cbFILE_NAME_MAX     256</code></p>
<!-- raw HTML omitted -->
<p><strong>achCabinetFile</strong></p>
<!-- raw HTML omitted -->
<p>The current cabinet file.</p>
<p><code>#define cbFILE_NAME_MAX     256</code></p>
<!-- raw HTML omitted -->
<p><strong>cArgv</strong></p>
<!-- raw HTML omitted -->
<p>The default self-extracting argc.</p>
<!-- raw HTML omitted -->
<p><strong>pArgv</strong></p>
<!-- raw HTML omitted -->
<p>A pointer to a pointer to the default self-extracting argv[].</p>
<!-- raw HTML omitted -->
<p><strong>fDestructive</strong></p>
<!-- raw HTML omitted -->
<p>A flag that minimizes the disk space needed when set to <strong>TRUE</strong>.</p>
<!-- raw HTML omitted -->
<p><strong>iCurrentFolder</strong></p>
<!-- raw HTML omitted -->
<p>If <strong>fDestructive</strong> is set to <strong>TRUE</strong>, extract only the current folder.</p>
<!-- raw HTML omitted -->
<h2>See also</h2>
<!-- raw HTML omitted -->
<p><a href="deleteextractedfiles.html"><strong>DeleteExtractedFiles</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="extract.html"><strong>Extract</strong></a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
