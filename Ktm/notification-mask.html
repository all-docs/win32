<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>NOTIFICATION_MASK</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: Lists the different types of notifications that can be received by an enlistment.
ms.assetid: 65db8ba5-193c-439b-8e8c-6cb4a9bd4efd
title: NOTIFICATION_MASK (KtmTypes.h)
ms.topic: reference
ms.date: 05/31/2018</h2>
<h1>NOTIFICATION_MASK</h1>
<p>Lists the different types of notifications that can be received by an enlistment.</p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><strong>TRANSACTION_NOTIFY_MASK</strong></p>
<!-- raw HTML omitted -->
<p>0x3FFFFFFF</p>
<!-- raw HTML omitted -->
<p>A mask that indicates all valid bits for a transaction notification.</p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><strong>TRANSACTION_NOTIFY_PREPREPARE</strong></p>
<!-- raw HTML omitted -->
<p>0x00000001</p>
<!-- raw HTML omitted -->
<p>This notification is called after a client calls <a href="/windows/desktop/api/Ktmw32/nf-ktmw32-committransaction"><strong>CommitTransaction</strong></a> and either no resource manager (RM) supports single-phase commit or a superior transaction manager (TM) calls <a href="/windows/desktop/api/KtmW32/nf-ktmw32-preprepareenlistment"><strong>PrePrepareEnlistment</strong></a>. This notification is received by the RMs indicating that they should complete any work that could cause other RMs to need to enlist in a transaction, such as flushing its cache. After completing these operations the RM must call <a href="/windows/desktop/api/Ktmw32/nf-ktmw32-prepreparecomplete"><strong>PrePrepareComplete</strong></a>. To receive this notification the RM must also support <strong>TRANSACTION_NOTIFY_PREPARE</strong> and <strong>TRANSACTION_NOTIFY_COMMIT</strong>.</p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><strong>TRANSACTION_NOTIFY_PREPARE</strong></p>
<!-- raw HTML omitted -->
<p>0x00000002</p>
<!-- raw HTML omitted -->
<p>This notification is called after the <strong>TRANSACTION_NOTIFY_PREPREPARE</strong> processing is complete. It signals the RM to complete all the work that is associated with this enlistment so that it can guarantee that a commit operation could succeed and an abort operation could also succeed. Typically, the bulk of the work for a transaction is done during the prepare phase. For durable RMs, they must log their state prior to calling the <a href="/windows/desktop/api/Ktmw32/nf-ktmw32-preparecomplete"><strong>PrepareComplete</strong></a> function. This is the last chance for the RM to request that the transaction be rolled back.</p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><strong>TRANSACTION_NOTIFY_COMMIT</strong></p>
<!-- raw HTML omitted -->
<p>0x00000004</p>
<!-- raw HTML omitted -->
<p>This notification signals the RM to complete all the work that is associated with this enlistment. Typically, the RM releases any locks, releases any information necessary to roll back the transaction. The RM must respond by calling the <a href="/windows/desktop/api/Ktmw32/nf-ktmw32-commitcomplete"><strong>CommitComplete</strong></a> function when it has finished these operations.</p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><strong>TRANSACTION_NOTIFY_ROLLBACK</strong></p>
<!-- raw HTML omitted -->
<p>0x00000008</p>
<!-- raw HTML omitted -->
<p>This notification signals the RM to undo all the work it has done that is associated with the transaction.</p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><strong>TRANSACTION_NOTIFY_PREPREPARE_COMPLETE</strong></p>
<!-- raw HTML omitted -->
<p>0x00000010</p>
<!-- raw HTML omitted -->
<p>This notification signals to the superior TM that a pre-prepare operation was completed successfully.</p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><strong>TRANSACTION_NOTIFY_PREPARE_COMPLETE</strong></p>
<!-- raw HTML omitted -->
<p>0x00000020</p>
<!-- raw HTML omitted -->
<p>This notification signals to the superior TM that a prepare operation was completed successfully.</p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><strong>TRANSACTION_NOTIFY_COMMIT_COMPLETE</strong></p>
<!-- raw HTML omitted -->
<p>0x00000040</p>
<!-- raw HTML omitted -->
<p>This notification signals to the superior TM that a commit operation was completed successfully.</p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><strong>TRANSACTION_NOTIFY_ROLLBACK_COMPLETE</strong></p>
<!-- raw HTML omitted -->
<p>0x00000080</p>
<!-- raw HTML omitted -->
<p>This notification signals to the superior TM that a rollback operation was completed successfully.</p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><strong>TRANSACTION_NOTIFY_RECOVER</strong></p>
<!-- raw HTML omitted -->
<p>0x00000100</p>
<!-- raw HTML omitted -->
<p>This notification signals to RMs that they should recover their state because a transaction outcome must be redelivered. For example, when an RM is recovered, and when there are transactions left in-doubt. This notification is delivered once the in-doubt state is resolved.</p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><strong>TRANSACTION_NOTIFY_SINGLE_PHASE_COMMIT</strong></p>
<!-- raw HTML omitted -->
<p>0x00000200</p>
<!-- raw HTML omitted -->
<p>This notification signals the RM to complete and commit the transaction without using a two-phase commit protocol. If the RM wants to use a two-phase operation, it must respond by calling the <a href="/windows/desktop/api/Ktmw32/nf-ktmw32-singlephasereject"><strong>SinglePhaseReject</strong></a> function.</p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><strong>TRANSACTION_NOTIFY_DELEGATE_COMMIT</strong></p>
<!-- raw HTML omitted -->
<p>0x00000400</p>
<!-- raw HTML omitted -->
<p>KTM is signaling to the superior TM to perform a commit operation.</p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><strong>TRANSACTION_NOTIFY_RECOVER_QUERY</strong></p>
<!-- raw HTML omitted -->
<p>0x00000800</p>
<!-- raw HTML omitted -->
<p>KTM is signaling to the superior TM to query the status of an in-doubt transaction.</p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><strong>TRANSACTION_NOTIFY_ENLIST_PREPREPARE</strong></p>
<!-- raw HTML omitted -->
<p>0x00001000</p>
<!-- raw HTML omitted -->
<p>This notification signals to the superior TM that pre-prepare notifications must be delivered on the specified enlistment.</p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><strong>TRANSACTION_NOTIFY_LAST_RECOVER</strong></p>
<!-- raw HTML omitted -->
<p>0x00002000</p>
<!-- raw HTML omitted -->
<p>This notification indicates that the recovery operation is complete for this RM.</p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><strong>TRANSACTION_NOTIFY_INDOUBT</strong></p>
<!-- raw HTML omitted -->
<p>0x00004000</p>
<!-- raw HTML omitted -->
<p>The specified transaction is in an in-doubt state. The RM receives this notification during recovery operations when a transaction has been prepared, but there is no superior transaction manager (TM) available. For example, when a transaction involves a remote TM and that node is unavailable, its node is unavailable, or the local <a href="/previous-versions/windows/desktop/ms684146(v=vs.85)">Distributed Transaction Coordinator</a> service is unavailable, the transaction state is in-doubt.</p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><strong>TRANSACTION_NOTIFY_TM_ONLINE</strong></p>
<!-- raw HTML omitted -->
<p>0x02000000</p>
<!-- raw HTML omitted -->
<p>The TM is online and accepting requests.</p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><strong>TRANSACTION_NOTIFY_REQUEST_OUTCOME</strong></p>
<!-- raw HTML omitted -->
<p>0x20000000</p>
<!-- raw HTML omitted -->
<p>Signals to RMs that there is outcome information available, and that a request for that information should be made.</p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><strong>TRANSACTION_NOTIFY_COMMIT_FINALIZE</strong></p>
<!-- raw HTML omitted -->
<p>0x40000000</p>
<!-- raw HTML omitted -->
<p>Reserved.</p>
<!-- raw HTML omitted -->
<h2>Requirements</h2>
<table>
<thead>
<tr>
<th>Requirement</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Minimum supported client<!-- raw HTML omitted --></td>
<td>Windows Vista<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Minimum supported server<!-- raw HTML omitted --></td>
<td>Windows Server 2008<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Header<!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted -->KtmTypes.h (include Windows.h)<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<h2>See also</h2>
<!-- raw HTML omitted -->
<p><a href="/previous-versions/windows/desktop/ms684146(v=vs.85)">Distributed Transaction Coordinator</a></p>
<!-- raw HTML omitted -->
<p><a href="kernel-transaction-manager-constants.html">Kernel Transaction Manager Constants</a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/api/KtmW32/nf-ktmw32-createenlistment"><strong>CreateEnlistment</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/api/Ktmw32/nf-ktmw32-commitcomplete"><strong>CommitComplete</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/api/KtmW32/nf-ktmw32-getnotificationresourcemanager"><strong>GetNotificationResourceManager</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/api/KtmW32/nf-ktmw32-getnotificationresourcemanagerasync"><strong>GetNotificationResourceManagerAsync</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/api/Ktmw32/nf-ktmw32-preparecomplete"><strong>PrepareComplete</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/api/Ktmw32/nf-ktmw32-singlephasereject"><strong>SinglePhaseReject</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/api/KtmTypes/ns-ktmtypes-transaction_notification"><strong>TRANSACTION_NOTIFICATION</strong></a></p>
<!-- raw HTML omitted -->
</body>
