<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Enlistments</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: A resource manager enlists in a transaction when it begins participation in that particular transaction.
ms.assetid: 9c201699-c00b-4efe-9f30-8d4e182de785
title: Enlistments
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>Enlistments</h1>
<p>A resource manager enlists in a transaction when it begins participation in that particular transaction. The enlistment defines which notifications the resource manager accepts. A resource manager creates an enlistment object when it enlists in a transaction. This object signals to KTM that the resource manager (RM) is requesting notifications about the specified transaction.</p>
<p>The RM provides a <a href="notification-mask.html"><strong>NOTIFICATION_MASK</strong></a> structure that details which notifications it is requesting.</p>
<h2>Enlistment Functions</h2>
<p>The following functions are used with enlistments.</p>
<table>
<thead>
<tr>
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="/windows/desktop/api/Ktmw32/nf-ktmw32-commitcomplete"><strong>CommitComplete</strong></a></td>
<td>Indicates that a resource manager (RM) has finished committing a transaction that was requested by the transaction manager (TM).</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/KtmW32/nf-ktmw32-createenlistment"><strong>CreateEnlistment</strong></a></td>
<td>Creates an enlistment, sets its initial state, and opens a handle to the enlistment with the specified access.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/Ktmw32/nf-ktmw32-getenlistmentrecoveryinformation"><strong>GetEnlistmentRecoveryInformation</strong></a></td>
<td>Retrieves an opaque structure of recovery data from KTM. Recovery information is stored in a log on behalf of a resource manager (RM) by calling the <a href="/windows/desktop/api/Ktmw32/nf-ktmw32-setenlistmentrecoveryinformation"><strong>SetEnlistmentRecoveryInformation</strong></a> function. After a failure, the RM can use the <a href="/windows/desktop/api/Ktmw32/nf-ktmw32-getenlistmentrecoveryinformation"><strong>GetEnlistmentRecoveryInformation</strong></a> function to retrieve the information.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/Ktmw32/nf-ktmw32-openenlistment"><strong>OpenEnlistment</strong></a></td>
<td>Opens an existing enlistment object, and returns a handle to the enlistment.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/Ktmw32/nf-ktmw32-readonlyenlistment"><strong>ReadOnlyEnlistment</strong></a></td>
<td>Requests that the specified enlistment be converted to a read-only enlistment. A read-only enlistment cannot participate in the outcome of the transaction and is not durably recorded for recovery.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/Ktmw32/nf-ktmw32-rollbackenlistment"><strong>RollbackEnlistment</strong></a></td>
<td>Rolls back the specified transaction that is associated with an enlistment. This function cannot be called for read-only enlistments.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/Ktmw32/nf-ktmw32-setenlistmentrecoveryinformation"><strong>SetEnlistmentRecoveryInformation</strong></a></td>
<td>Sets an opaque, user-defined structure of recovery data from KTM. Recovery information is stored in a log on behalf of a resource manager (RM) by calling <a href="/windows/desktop/api/Ktmw32/nf-ktmw32-setenlistmentrecoveryinformation"><strong>SetEnlistmentRecoveryInformation</strong></a>. After a failure, the RM can use <a href="/windows/desktop/api/Ktmw32/nf-ktmw32-getenlistmentrecoveryinformation"><strong>GetEnlistmentRecoveryInformation</strong></a> to retrieve the information.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/Ktmw32/nf-ktmw32-singlephasereject"><strong>SinglePhaseReject</strong></a></td>
<td>Indicates that the resource manager (RM) is refusing a single-phase request. When a transaction manager (TM) receives this call, it initiates a two-phase commit and sends a prepare request to all enlisted RMs.</td>
</tr>
</tbody>
</table>
<p>Â </p>
<p>Â </p>
<p>Â </p>
</body>
