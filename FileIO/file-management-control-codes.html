<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>File Management Control Codes</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: Control codes used in file management.
ms.assetid: e27ded4b-d104-4244-b38e-5fed10d32e1e
title: File Management Control Codes
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>File Management Control Codes</h1>
<p>The following control codes are used in file management.</p>
<h2>In this section</h2>
<table>
<thead>
<tr>
<th>Control Code</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_allow_extended_dasd_io"><strong>FSCTL_ALLOW_EXTENDED_DASD_IO</strong></a><!-- raw HTML omitted --></td>
<td>Signals the file system driver not to perform any I/O boundary checks on partition read or write calls.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_create_or_get_object_id"><strong>FSCTL_CREATE_OR_GET_OBJECT_ID</strong></a><!-- raw HTML omitted --></td>
<td>Retrieves the object identifier for the specified file or directory. If no object identifier exists, using <strong>FSCTL_CREATE_OR_GET_OBJECT_ID</strong> creates one.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_csv_control"><strong>FSCTL_CSV_CONTROL</strong></a><!-- raw HTML omitted --></td>
<td>Retrieves the results of a CSV control operation.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_delete_object_id"><strong>FSCTL_DELETE_OBJECT_ID</strong></a><!-- raw HTML omitted --></td>
<td>Removes the object identifier from a specified file or directory.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_duplicate_extents_to_file"><strong>FSCTL_DUPLICATE_EXTENTS_TO_FILE</strong></a><!-- raw HTML omitted --></td>
<td>Instructs the file system to copy a range of file bytes on behalf of an application.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_file_level_trim"><strong>FSCTL_FILE_LEVEL_TRIM</strong></a><!-- raw HTML omitted --></td>
<td>Indicates to the storage system which ranges in the file are not needed to be stored.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_filesystem_get_statistics"><strong>FSCTL_FILESYSTEM_GET_STATISTICS</strong></a><!-- raw HTML omitted --></td>
<td>Retrieves the information from various file system performance counters.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_filesystem_get_statistics_ex"><strong>FSCTL_FILESYSTEM_GET_STATISTICS_EX</strong></a><!-- raw HTML omitted --></td>
<td>Retrieves the information from various file system performance counters.<!-- raw HTML omitted --> Support for this control code started with Windows 10.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_find_files_by_sid"><strong>FSCTL_FIND_FILES_BY_SID</strong></a><!-- raw HTML omitted --></td>
<td>Searches a directory for a file whose creator owner matches the specified SID.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_get_compression"><strong>FSCTL_GET_COMPRESSION</strong></a><!-- raw HTML omitted --></td>
<td>Retrieves the current compression state of a file or directory on a volume whose file system supports per-stream compression.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_get_ntfs_file_record"><strong>FSCTL_GET_NTFS_FILE_RECORD</strong></a><!-- raw HTML omitted --></td>
<td>Retrieves the first file record that is in use and is of a lesser than or equal ordinal value to the requested file reference number.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_get_object_id"><strong>FSCTL_GET_OBJECT_ID</strong></a><!-- raw HTML omitted --></td>
<td>Retrieves the object identifier for the specified file or directory.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_get_repair"><strong>FSCTL_GET_REPAIR</strong></a><!-- raw HTML omitted --></td>
<td>Retrieves information about the NTFS file system's self-healing mechanism.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_initiate_repair"><strong>FSCTL_INITIATE_REPAIR</strong></a><!-- raw HTML omitted --></td>
<td>Triggers the NTFS file system to start a self-healing cycle on a single file.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_make_media_compatible"><strong>FSCTL_MAKE_MEDIA_COMPATIBLE</strong></a><!-- raw HTML omitted --></td>
<td>Closes an open UDF session on write-once media to make the media ROM compatible.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_opbatch_ack_close_pending"><strong>FSCTL_OPBATCH_ACK_CLOSE_PENDING</strong></a><!-- raw HTML omitted --></td>
<td>Notifies a server that a client application is ready to close a file.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_oplock_break_ack_no_2"><strong>FSCTL_OPLOCK_BREAK_ACK_NO_2</strong></a><!-- raw HTML omitted --></td>
<td>Responds to notification that an opportunistic lock on a file is about to be broken. Use this operation to unlock all opportunistic locks on the file but keep the file open.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_oplock_break_acknowledge"><strong>FSCTL_OPLOCK_BREAK_ACKNOWLEDGE</strong></a><!-- raw HTML omitted --></td>
<td>Responds to notification that an exclusive opportunistic lock on a file is about to be broken. Use this operation to indicate that the file should receive a level 2 opportunistic lock.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_oplock_break_notify"><strong>FSCTL_OPLOCK_BREAK_NOTIFY</strong></a><!-- raw HTML omitted --></td>
<td>Enables the calling application to wait for completion of an opportunistic lock break.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_query_allocated_ranges"><strong>FSCTL_QUERY_ALLOCATED_RANGES</strong></a><!-- raw HTML omitted --></td>
<td>Scans a file or alternate stream looking for ranges that may contain nonzero data.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_query_on_disk_volume_info"><strong>FSCTL_QUERY_ON_DISK_VOLUME_INFO</strong></a><!-- raw HTML omitted --></td>
<td>Requests UDF-specific volume information.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_query_sparing_info"><strong>FSCTL_QUERY_SPARING_INFO</strong></a><!-- raw HTML omitted --></td>
<td>Retrieves the defect management properties of the volume. Used for UDF file systems.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_recall_file"><strong>FSCTL_RECALL_FILE</strong></a><!-- raw HTML omitted --></td>
<td>Recalls a file from storage media that Remote Storage manages, which is the hierarchical storage management software.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_request_batch_oplock"><strong>FSCTL_REQUEST_BATCH_OPLOCK</strong></a><!-- raw HTML omitted --></td>
<td>Requests a batch opportunistic lock on a file.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_request_filter_oplock"><strong>FSCTL_REQUEST_FILTER_OPLOCK</strong></a><!-- raw HTML omitted --></td>
<td>Requests a filter opportunistic lock on a file.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_request_oplock"><strong>FSCTL_REQUEST_OPLOCK</strong></a><!-- raw HTML omitted --></td>
<td>Requests an opportunistic lock (oplock) on a file and acknowledges that an oplock break has occurred.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_request_oplock_level_1"><strong>FSCTL_REQUEST_OPLOCK_LEVEL_1</strong></a><!-- raw HTML omitted --></td>
<td>Requests a level 1 opportunistic lock on a file.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_request_oplock_level_2"><strong>FSCTL_REQUEST_OPLOCK_LEVEL_2</strong></a><!-- raw HTML omitted --></td>
<td>Requests a level 2 opportunistic lock on a file.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_set_compression"><strong>FSCTL_SET_COMPRESSION</strong></a><!-- raw HTML omitted --></td>
<td>Sets the compression state of a file or directory on a volume whose file system supports per-file and per-directory compression.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_set_defect_management"><strong>FSCTL_SET_DEFECT_MANAGEMENT</strong></a><!-- raw HTML omitted --></td>
<td>Sets the software defect management state for the specified file. Used for UDF file systems.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_set_object_id"><strong>FSCTL_SET_OBJECT_ID</strong></a><!-- raw HTML omitted --></td>
<td>Sets the object identifier for the specified file or directory.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_set_object_id_extended"><strong>FSCTL_SET_OBJECT_ID_EXTENDED</strong></a><!-- raw HTML omitted --></td>
<td>Modifies user data associated with the object identifier for the specified file or directory.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_set_repair"><strong>FSCTL_SET_REPAIR</strong></a><!-- raw HTML omitted --></td>
<td>Sets the mode of an NTFS file system's self-healing capability.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_set_sparse"><strong>FSCTL_SET_SPARSE</strong></a><!-- raw HTML omitted --></td>
<td>Marks the indicated file as sparse or not sparse. In a sparse file, large ranges of zeros may not require disk allocation.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_set_zero_data"><strong>FSCTL_SET_ZERO_DATA</strong></a><!-- raw HTML omitted --></td>
<td>Fills a specified range of a file with zeros (0).<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_set_zero_on_deallocation"><strong>FSCTL_SET_ZERO_ON_DEALLOCATION</strong></a><!-- raw HTML omitted --></td>
<td>Indicates an NTFS file system file handle should have its clusters filled with zeros when it is deallocated.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_wait_for_repair"><strong>FSCTL_WAIT_FOR_REPAIR</strong></a><!-- raw HTML omitted --></td>
<td>Returns when the specified repairs are completed.<!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<p>The following control codes are used with <a href="file-compression-and-decompression.html">file compression and decompression</a>.</p>
<!-- raw HTML omitted -->
<p><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_get_compression"><strong>FSCTL_GET_COMPRESSION</strong></a><br />
<a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_set_compression"><strong>FSCTL_SET_COMPRESSION</strong></a></p>
<!-- raw HTML omitted -->
<p>The following control codes are used with <a href="distributed-link-tracking-and-object-identifiers.html">object identifiers</a>.</p>
<!-- raw HTML omitted -->
<p><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_create_or_get_object_id"><strong>FSCTL_CREATE_OR_GET_OBJECT_ID</strong></a><br />
<a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_delete_object_id"><strong>FSCTL_DELETE_OBJECT_ID</strong></a><br />
<a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_get_object_id"><strong>FSCTL_GET_OBJECT_ID</strong></a><br />
<a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_set_object_id"><strong>FSCTL_SET_OBJECT_ID</strong></a><br />
<a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_set_object_id_extended"><strong>FSCTL_SET_OBJECT_ID_EXTENDED</strong></a></p>
<!-- raw HTML omitted -->
<p>The following control codes are used with <a href="opportunistic-locks.html">opportunistic locks</a>.</p>
<!-- raw HTML omitted -->
<p><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_opbatch_ack_close_pending"><strong>FSCTL_OPBATCH_ACK_CLOSE_PENDING</strong></a><br />
<a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_oplock_break_ack_no_2"><strong>FSCTL_OPLOCK_BREAK_ACK_NO_2</strong></a><br />
<a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_oplock_break_acknowledge"><strong>FSCTL_OPLOCK_BREAK_ACKNOWLEDGE</strong></a><br />
<a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_oplock_break_notify"><strong>FSCTL_OPLOCK_BREAK_NOTIFY</strong></a><br />
<a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_request_batch_oplock"><strong>FSCTL_REQUEST_BATCH_OPLOCK</strong></a><br />
<a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_request_filter_oplock"><strong>FSCTL_REQUEST_FILTER_OPLOCK</strong></a><br />
<a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_request_oplock"><strong>FSCTL_REQUEST_OPLOCK</strong></a><br />
<a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_request_oplock_level_1"><strong>FSCTL_REQUEST_OPLOCK_LEVEL_1</strong></a><br />
<a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_request_oplock_level_2"><strong>FSCTL_REQUEST_OPLOCK_LEVEL_2</strong></a></p>
<!-- raw HTML omitted -->
<p>The following control codes are used with <a href="sparse-files.html">sparse files</a>.</p>
<!-- raw HTML omitted -->
<p><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_query_allocated_ranges"><strong>FSCTL_QUERY_ALLOCATED_RANGES</strong></a><br />
<a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_set_sparse"><strong>FSCTL_SET_SPARSE</strong></a><br />
<a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_set_zero_data"><strong>FSCTL_SET_ZERO_DATA</strong></a></p>
<!-- raw HTML omitted -->
<p>The following control codes are used with the NTFS self-healing mechanism.</p>
<!-- raw HTML omitted -->
<p><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_get_repair"><strong>FSCTL_GET_REPAIR</strong></a><br />
<a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_initiate_repair"><strong>FSCTL_INITIATE_REPAIR</strong></a><br />
<a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_set_repair"><strong>FSCTL_SET_REPAIR</strong></a><br />
<a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_wait_for_repair"><strong>FSCTL_WAIT_FOR_REPAIR</strong></a></p>
<!-- raw HTML omitted -->
<p>The following control codes are used with UDF.</p>
<!-- raw HTML omitted -->
<p><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_make_media_compatible"><strong>FSCTL_MAKE_MEDIA_COMPATIBLE</strong></a><br />
<a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_query_on_disk_volume_info"><strong>FSCTL_QUERY_ON_DISK_VOLUME_INFO</strong></a><br />
<a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_query_sparing_info"><strong>FSCTL_QUERY_SPARING_INFO</strong></a><br />
<a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_set_defect_management"><strong>FSCTL_SET_DEFECT_MANAGEMENT</strong></a></p>
<!-- raw HTML omitted -->
<h2>Related topics</h2>
<!-- raw HTML omitted -->
<p><a href="directory-management-control-codes.html">Directory Management Control Codes</a></p>
<!-- raw HTML omitted -->
<p><a href="volume-management-control-codes.html">Volume Management Control Codes</a></p>
<!-- raw HTML omitted -->
</body>
