<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Volume Management Control Codes</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: Control codes used in volume management.
ms.assetid: 87f39e1c-3ebf-4c6f-a842-699ec3c45e76
title: Volume Management Control Codes
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>Volume Management Control Codes</h1>
<p>Control codes used in volume management.</p>
<h2>In this section</h2>
<table>
<thead>
<tr>
<th>Topic</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_create_usn_journal"><strong>FSCTL_CREATE_USN_JOURNAL</strong></a><!-- raw HTML omitted --></td>
<td>Creates an update sequence number (USN) change journal stream on a target volume, or modifies an existing change journal stream.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_csv_query_down_level_file_system_characteristics"><strong>FSCTL_CSV_QUERY_DOWN_LEVEL_FILE_SYSTEM_CHARACTERISTICS</strong></a><!-- raw HTML omitted --></td>
<td>Retrieves information about a file system for which CSVFS is a proxy.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_delete_usn_journal"><strong>FSCTL_DELETE_USN_JOURNAL</strong></a><!-- raw HTML omitted --></td>
<td>Deletes the update sequence number (USN) change journal on a volume, or waits for notification of change journal deletion.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_dismount_volume"><strong>FSCTL_DISMOUNT_VOLUME</strong></a><!-- raw HTML omitted --></td>
<td>Dismounts a volume regardless of whether or not the volume is currently in use. For more information, see the Remarks section.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_enum_usn_data"><strong>FSCTL_ENUM_USN_DATA</strong></a><!-- raw HTML omitted --></td>
<td>Enumerates the update sequence number (USN) data between two specified boundaries to obtain master file table (MFT) records.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_extend_volume"><strong>FSCTL_EXTEND_VOLUME</strong></a><!-- raw HTML omitted --></td>
<td>Increases the size of a mounted volume.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_get_boot_area_info"><strong>FSCTL_GET_BOOT_AREA_INFO</strong></a><!-- raw HTML omitted --></td>
<td>Retrieves the locations of boot sectors for a volume. <!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_get_integrity_information"><strong>FSCTL_GET_INTEGRITY_INFORMATION</strong></a><!-- raw HTML omitted --></td>
<td>Retrieves the integrity status of a file or directory on a ReFS volume.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_get_ntfs_volume_data"><strong>FSCTL_GET_NTFS_VOLUME_DATA</strong></a><!-- raw HTML omitted --></td>
<td>Retrieves information about the specified NTFS file system volume.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_get_retrieval_pointer_base"><strong>FSCTL_GET_RETRIEVAL_POINTER_BASE</strong></a><!-- raw HTML omitted --></td>
<td>Returns the sector offset to the first logical cluster number (LCN) of the file system relative to the start of the volume.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_get_retrieval_pointers"><strong>FSCTL_GET_RETRIEVAL_POINTERS</strong></a><!-- raw HTML omitted --></td>
<td>Given a file handle, retrieves a data structure that describes the allocation and location on disk of a specific file, or, given a volume handle, the locations of bad clusters on a volume.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_get_volume_bitmap"><strong>FSCTL_GET_VOLUME_BITMAP</strong></a><!-- raw HTML omitted --></td>
<td>Retrieves a bitmap of occupied and available clusters on a volume.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_is_csv_file"><strong>FSCTL_IS_CSV_FILE</strong></a><!-- raw HTML omitted --></td>
<td>Determines whether a file is stored on a CSVFS volume, or retrieves namespace information.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_is_file_on_csv_volume"><strong>FSCTL_IS_FILE_ON_CSV_VOLUME</strong></a><!-- raw HTML omitted --></td>
<td>Determines whether a file is stored on a CSVFS volume, or retrieves namespace information.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_is_volume_mounted"><strong>FSCTL_IS_VOLUME_MOUNTED</strong></a><!-- raw HTML omitted --></td>
<td>Determines whether the specified volume is mounted, or if the specified file or directory is on a mounted volume.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_is_volume_owned_bycsvfs"><strong>FSCTL_IS_VOLUME_OWNED_BYCSVFS</strong></a><!-- raw HTML omitted --></td>
<td>Determines whether a volume is locked by CSVFS.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_lock_volume"><strong>FSCTL_LOCK_VOLUME</strong></a><!-- raw HTML omitted --></td>
<td>Locks a volume if it is not in use.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_lookup_stream_from_cluster"><strong>FSCTL_LOOKUP_STREAM_FROM_CLUSTER</strong></a><!-- raw HTML omitted --></td>
<td>Given a handle to a NTFS volume or a file on a NTFS volume, returns a chain of data structures that describes streams that occupy the specified clusters.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_mark_handle"><strong>FSCTL_MARK_HANDLE</strong></a><!-- raw HTML omitted --></td>
<td>Marks a specified file or directory and its change journal record with information about changes to that file or directory.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_move_file"><strong>FSCTL_MOVE_FILE</strong></a><!-- raw HTML omitted --></td>
<td>Relocates one or more virtual clusters of a file from one logical cluster to another within the same volume. This operation is used during <a href="defragmenting-files.html">defragmentation</a>.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_query_file_system_recognition"><strong>FSCTL_QUERY_FILE_SYSTEM_RECOGNITION</strong></a><!-- raw HTML omitted --></td>
<td>Queries for file system recognition information on a volume.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_query_region_info"><strong>FSCTL_QUERY_REGION_INFO</strong></a><!-- raw HTML omitted --></td>
<td>Retrieves the storage tier regions defined for a volume that supports data tiering.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_query_storage_classes"><strong>FSCTL_QUERY_STORAGE_CLASSES</strong></a><!-- raw HTML omitted --></td>
<td>Retrieves the storage tiers defined for a volume that supports data tiering.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_query_usn_journal"><strong>FSCTL_QUERY_USN_JOURNAL</strong></a><!-- raw HTML omitted --></td>
<td>Queries for information on the current update sequence number (USN) change journal, its records, and its capacity.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_read_file_usn_data"><strong>FSCTL_READ_FILE_USN_DATA</strong></a><!-- raw HTML omitted --></td>
<td>Retrieves the update sequence number (USN) change-journal information for the specified file or directory.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_read_from_plex"><strong>FSCTL_READ_FROM_PLEX</strong></a><!-- raw HTML omitted --></td>
<td>Reads from the specified plex.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_read_usn_journal"><strong>FSCTL_READ_USN_JOURNAL</strong></a><!-- raw HTML omitted --></td>
<td>Retrieves the set of update sequence number (USN) change journal records between two specified USN values.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_repair_copies"><strong>FSCTL_REPAIR_COPIES</strong></a><!-- raw HTML omitted --></td>
<td>Repair data corruption by selecting the proper copy to use.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_set_integrity_information"><strong>FSCTL_SET_INTEGRITY_INFORMATION</strong></a><!-- raw HTML omitted --></td>
<td>Retrieves the integrity status of a file or directory on a ReFS volume.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_shrink_volume"><strong>FSCTL_SHRINK_VOLUME</strong></a><!-- raw HTML omitted --></td>
<td>Signals that the volume is to be prepared to perform the shrink operation, the shrink operation is to be committed, or the shrink operation is to be terminated.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_unlock_volume"><strong>FSCTL_UNLOCK_VOLUME</strong></a><!-- raw HTML omitted --></td>
<td>Unlocks a volume.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_usn_track_modified_ranges"><strong>FSCTL_USN_TRACK_MODIFIED_RANGES</strong></a><!-- raw HTML omitted --></td>
<td>Enables range tracking feature for update sequence number (USN) change journal stream on a target volume, or modifies already enabled range tracking parameters.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_write_usn_close_record"><strong>FSCTL_WRITE_USN_CLOSE_RECORD</strong></a><!-- raw HTML omitted --></td>
<td>Generates a record in the update sequence number (USN) change journal stream for the input file.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/desktop/api/WinIoCtl/ni-winioctl-ioctl_volume_get_gpt_attributes"><strong>IOCTL_VOLUME_GET_GPT_ATTRIBUTES</strong></a><!-- raw HTML omitted --></td>
<td>Retrieves the attributes for a volume.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/desktop/api/WinIoCtl/ni-winioctl-ioctl_volume_get_volume_disk_extents"><strong>IOCTL_VOLUME_GET_VOLUME_DISK_EXTENTS</strong></a><!-- raw HTML omitted --></td>
<td>Retrieves the physical location of a specified volume on one or more disks.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/desktop/api/WinIoCtl/ni-winioctl-ioctl_volume_is_clustered"><strong>IOCTL_VOLUME_IS_CLUSTERED</strong></a><!-- raw HTML omitted --></td>
<td>Determines whether the specified volume is clustered.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="ioctl-volume-is-csv.html"><strong>IOCTL_VOLUME_IS_CSV</strong></a><!-- raw HTML omitted --></td>
<td>Determines whether a volume is a CSV volume.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/desktop/api/WinIoCtl/ni-winioctl-ioctl_volume_offline"><strong>IOCTL_VOLUME_OFFLINE</strong></a><!-- raw HTML omitted --></td>
<td>Takes a volume offline.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/desktop/api/WinIoCtl/ni-winioctl-ioctl_volume_online"><strong>IOCTL_VOLUME_ONLINE</strong></a><!-- raw HTML omitted --></td>
<td>Brings a volume online.<!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<p>The following control codes are used with <a href="change-journals.html">change journals</a>.</p>
<ul>
<li><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_create_usn_journal"><strong>FSCTL_CREATE_USN_JOURNAL</strong></a></li>
<li><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_delete_usn_journal"><strong>FSCTL_DELETE_USN_JOURNAL</strong></a></li>
<li><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_enum_usn_data"><strong>FSCTL_ENUM_USN_DATA</strong></a></li>
<li><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_mark_handle"><strong>FSCTL_MARK_HANDLE</strong></a></li>
<li><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_query_usn_journal"><strong>FSCTL_QUERY_USN_JOURNAL</strong></a></li>
<li><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_read_file_usn_data"><strong>FSCTL_READ_FILE_USN_DATA</strong></a></li>
<li><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_read_usn_journal"><strong>FSCTL_READ_USN_JOURNAL</strong></a></li>
<li><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_write_usn_close_record"><strong>FSCTL_WRITE_USN_CLOSE_RECORD</strong></a></li>
</ul>
<p>The following are <a href="defragmenting-files.html">defragmentation</a> control codes.</p>
<ul>
<li><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_get_retrieval_pointer_base"><strong>FSCTL_GET_RETRIEVAL_POINTER_BASE</strong></a></li>
<li><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_get_retrieval_pointers"><strong>FSCTL_GET_RETRIEVAL_POINTERS</strong></a></li>
<li><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_get_volume_bitmap"><strong>FSCTL_GET_VOLUME_BITMAP</strong></a></li>
<li><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_lookup_stream_from_cluster"><strong>FSCTL_LOOKUP_STREAM_FROM_CLUSTER</strong></a></li>
<li><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_move_file"><strong>FSCTL_MOVE_FILE</strong></a></li>
<li><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_query_region_info"><strong>FSCTL_QUERY_REGION_INFO</strong></a></li>
<li><a href="/windows/win32/api/winioctl/ni-winioctl-fsctl_query_usn_journal"><strong>FSCTL_QUERY_USN_JOURNAL</strong></a></li>
</ul>
<h2>Related topics</h2>
<!-- raw HTML omitted -->
<p><a href="directory-management-control-codes.html">Directory Management Control Codes</a></p>
<!-- raw HTML omitted -->
<p><a href="file-management-control-codes.html">File Management Control Codes</a></p>
<!-- raw HTML omitted -->
</body>
