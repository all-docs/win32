<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Disk Management Control Codes</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: Control codes used in disk management.
ms.assetid: 488a7d32-cbb5-4f32-9655-0aca8ac69640
title: Disk Management Control Codes
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>Disk Management Control Codes</h1>
<p>The following table identifies the control codes that are used in disk management.</p>
<h2>In this section</h2>
<table>
<thead>
<tr>
<th>Control Code</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="ioctl-disk-are-volumes-ready.html"><strong>IOCTL_DISK_ARE_VOLUMES_READY</strong></a><!-- raw HTML omitted --></td>
<td>Waits for all volumes on the specified disk to be ready for use.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/desktop/api/WinIoCtl/ni-winioctl-ioctl_disk_create_disk"><strong>IOCTL_DISK_CREATE_DISK</strong></a><!-- raw HTML omitted --></td>
<td>Initializes the specified disk and disk partition table using the information in the <a href="/windows/desktop/api/WinIoCtl/ns-winioctl-create_disk"><strong>CREATE_DISK</strong></a> structure.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/desktop/api/WinIoCtl/ni-winioctl-ioctl_disk_delete_drive_layout"><strong>IOCTL_DISK_DELETE_DRIVE_LAYOUT</strong></a><!-- raw HTML omitted --></td>
<td>Removes the boot signature from the master boot record, so that the disk will be formatted from sector zero to the end of the disk.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/desktop/api/WinIoCtl/ni-winioctl-ioctl_disk_format_tracks"><strong>IOCTL_DISK_FORMAT_TRACKS</strong></a><!-- raw HTML omitted --></td>
<td>Formats a specified, contiguous set of tracks on a floppy disk. To provide additional parameters, use <a href="/windows/desktop/api/WinIoCtl/ni-winioctl-ioctl_disk_format_tracks_ex"><strong>IOCTL_DISK_FORMAT_TRACKS_EX</strong></a> instead.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/desktop/api/WinIoCtl/ni-winioctl-ioctl_disk_format_tracks_ex"><strong>IOCTL_DISK_FORMAT_TRACKS_EX</strong></a><!-- raw HTML omitted --></td>
<td>Formats a specified, contiguous set of tracks on a floppy disk.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/desktop/api/WinIoCtl/ni-winioctl-ioctl_disk_get_cache_information"><strong>IOCTL_DISK_GET_CACHE_INFORMATION</strong></a><!-- raw HTML omitted --></td>
<td>Retrieves the disk cache configuration data.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="ioctl-disk-get-cluster-info.html"><strong>IOCTL_DISK_GET_CLUSTER_INFO</strong></a><!-- raw HTML omitted --></td>
<td>Retrieves the attributes of the specified disk device.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/desktop/api/WinIoCtl/ni-winioctl-ioctl_disk_get_disk_attributes"><strong>IOCTL_DISK_GET_DISK_ATTRIBUTES</strong></a><!-- raw HTML omitted --></td>
<td>Retrieves the attributes of the specified disk device.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/desktop/api/WinIoCtl/ni-winioctl-ioctl_disk_get_drive_geometry"><strong>IOCTL_DISK_GET_DRIVE_GEOMETRY</strong></a><!-- raw HTML omitted --></td>
<td>Retrieves information about the physical disk's geometry: type, number of cylinders, tracks per cylinder, sectors per track, and bytes per sector.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/desktop/api/WinIoCtl/ni-winioctl-ioctl_disk_get_drive_geometry_ex"><strong>IOCTL_DISK_GET_DRIVE_GEOMETRY_EX</strong></a><!-- raw HTML omitted --></td>
<td>Retrieves extended information about the physical disk's geometry: type, number of cylinders, tracks per cylinder, sectors per track, and bytes per sector.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/desktop/api/WinIoCtl/ni-winioctl-ioctl_disk_get_drive_layout"><strong>IOCTL_DISK_GET_DRIVE_LAYOUT</strong></a><!-- raw HTML omitted --></td>
<td>Retrieves information for each entry in the partition tables for a disk.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/desktop/api/WinIoCtl/ni-winioctl-ioctl_disk_get_drive_layout_ex"><strong>IOCTL_DISK_GET_DRIVE_LAYOUT_EX</strong></a><!-- raw HTML omitted --></td>
<td>Retrieves extended information for each entry in the partition tables for a disk.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/desktop/api/WinIoCtl/ni-winioctl-ioctl_disk_get_length_info"><strong>IOCTL_DISK_GET_LENGTH_INFO</strong></a><!-- raw HTML omitted --></td>
<td>Retrieves the length of the specified disk, volume, or partition.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/desktop/api/WinIoCtl/ni-winioctl-ioctl_disk_get_partition_info"><strong>IOCTL_DISK_GET_PARTITION_INFO</strong></a><!-- raw HTML omitted --></td>
<td>Retrieves information about the type, size, and nature of a disk partition.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/desktop/api/WinIoCtl/ni-winioctl-ioctl_disk_get_partition_info_ex"><strong>IOCTL_DISK_GET_PARTITION_INFO_EX</strong></a><!-- raw HTML omitted --></td>
<td>Retrieves extended information about the type, size, and nature of a disk partition.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/desktop/api/WinIoCtl/ni-winioctl-ioctl_disk_grow_partition"><strong>IOCTL_DISK_GROW_PARTITION</strong></a><!-- raw HTML omitted --></td>
<td>Enlarges the specified partition.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/desktop/api/WinIoCtl/ni-winioctl-ioctl_disk_is_writable"><strong>IOCTL_DISK_IS_WRITABLE</strong></a><!-- raw HTML omitted --></td>
<td>Determines whether the specified disk is writable.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/desktop/api/WinIoCtl/ni-winioctl-ioctl_disk_performance"><strong>IOCTL_DISK_PERFORMANCE</strong></a><!-- raw HTML omitted --></td>
<td>Enables performance counters that provide disk performance information.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/desktop/api/WinIoCtl/ni-winioctl-ioctl_disk_performance_off"><strong>IOCTL_DISK_PERFORMANCE_OFF</strong></a><!-- raw HTML omitted --></td>
<td>Disables the performance counters that provide disk performance information.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/desktop/api/WinIoCtl/ni-winioctl-ioctl_disk_reassign_blocks"><strong>IOCTL_DISK_REASSIGN_BLOCKS</strong></a><!-- raw HTML omitted --></td>
<td>Directs the disk device to map one or more blocks to its spare-block pool.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/desktop/api/WinIoCtl/ni-winioctl-ioctl_disk_reassign_blocks_ex"><strong>IOCTL_DISK_REASSIGN_BLOCKS_EX</strong></a><!-- raw HTML omitted --></td>
<td>Directs the disk device to map one or more blocks to its spare-block pool.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/desktop/api/WinIoCtl/ni-winioctl-ioctl_disk_reset_snapshot_info"><strong>IOCTL_DISK_RESET_SNAPSHOT_INFO</strong></a><!-- raw HTML omitted --></td>
<td>Clears all Volume Shadow Copy Service (VSS) hardware-based shadow copy (also called &quot;snapshot&quot;) information from the disk.<!-- raw HTML omitted --> To perform this operation, call the <a href="/windows/desktop/api/ioapiset/nf-ioapiset-deviceiocontrol"><strong>DeviceIoControl</strong></a> function with the following parameters.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/desktop/api/WinIoCtl/ni-winioctl-ioctl_disk_set_cache_information"><strong>IOCTL_DISK_SET_CACHE_INFORMATION</strong></a><!-- raw HTML omitted --></td>
<td>Sets the disk configuration data.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="ioctl-disk-set-cluster-info.html"><strong>IOCTL_DISK_SET_CLUSTER_INFO</strong></a><!-- raw HTML omitted --></td>
<td>Sets the cluster information on a disk.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/desktop/api/WinIoCtl/ni-winioctl-ioctl_disk_set_disk_attributes"><strong>IOCTL_DISK_SET_DISK_ATTRIBUTES</strong></a><!-- raw HTML omitted --></td>
<td>Sets the attributes of the specified disk device.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/desktop/api/WinIoCtl/ni-winioctl-ioctl_disk_set_drive_layout"><strong>IOCTL_DISK_SET_DRIVE_LAYOUT</strong></a><!-- raw HTML omitted --></td>
<td>Partitions a disk as specified by drive layout and partition information data.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/desktop/api/WinIoCtl/ni-winioctl-ioctl_disk_set_drive_layout_ex"><strong>IOCTL_DISK_SET_DRIVE_LAYOUT_EX</strong></a><!-- raw HTML omitted --></td>
<td>Partitions a disk according to the specified drive layout and partition information data.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/desktop/api/WinIoCtl/ni-winioctl-ioctl_disk_set_partition_info"><strong>IOCTL_DISK_SET_PARTITION_INFO</strong></a><!-- raw HTML omitted --></td>
<td>Sets partition information for the specified disk partition.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/desktop/api/WinIoCtl/ni-winioctl-ioctl_disk_set_partition_info_ex"><strong>IOCTL_DISK_SET_PARTITION_INFO_EX</strong></a><!-- raw HTML omitted --></td>
<td>Sets partition information for the specified disk partition, including layout information for AT and EFI (Extensible Firmware Interface) partitions.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/desktop/api/WinIoCtl/ni-winioctl-ioctl_disk_update_properties"><strong>IOCTL_DISK_UPDATE_PROPERTIES</strong></a><!-- raw HTML omitted --></td>
<td>Invalidates the cached partition table and re-enumerates the device.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/desktop/api/WinIoCtl/ni-winioctl-ioctl_disk_verify"><strong>IOCTL_DISK_VERIFY</strong></a><!-- raw HTML omitted --></td>
<td>Verifies the specified extent on a fixed disk.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/desktop/api/WinIoctl/ni-winioctl-ioctl_storage_device_power_cap"><strong>IOCTL_STORAGE_DEVICE_POWER_CAP</strong></a><!-- raw HTML omitted --></td>
<td>Windows applications can use this control code to specify a maximum operational power consumption level for a storage device. The OS will do it's best to transition the device to a power state that will not exceed the given maximum. However, this depends on what the device supports. The actual maximum may be less than or greater than the desired maximum.<!-- raw HTML omitted --> To perform this operation, call the <a href="/windows/desktop/api/ioapiset/nf-ioapiset-deviceiocontrol"><strong>DeviceIoControl</strong></a> function with the following parameters.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/desktop/api/WinIoctl/ni-winioctl-ioctl_storage_firmware_activate"><strong>IOCTL_STORAGE_FIRMWARE_ACTIVATE</strong></a><!-- raw HTML omitted --></td>
<td>Windows applications can use this control code to activate a firmware image on a specified device.<!-- raw HTML omitted --> To perform this operation, call the <a href="/windows/desktop/api/ioapiset/nf-ioapiset-deviceiocontrol"><strong>DeviceIoControl</strong></a> function with the following parameters.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/desktop/api/WinIoctl/ni-winioctl-ioctl_storage_firmware_download"><strong>IOCTL_STORAGE_FIRMWARE_DOWNLOAD</strong></a><!-- raw HTML omitted --></td>
<td>Windows applications can use this control code to download a firmware image to the target device, but not activate it. If the image to be downloaded is larger than the controller s maximum data transfer size, this IOCTL will have to be called multiple times until the entire image is downloaded.<!-- raw HTML omitted --> To perform this operation, call the <a href="/windows/desktop/api/ioapiset/nf-ioapiset-deviceiocontrol"><strong>DeviceIoControl</strong></a> function with the following parameters.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/desktop/api/WinIoctl/ni-winioctl-ioctl_storage_firmware_get_info"><strong>IOCTL_STORAGE_FIRMWARE_GET_INFO</strong></a><!-- raw HTML omitted --></td>
<td>Windows applications can use this control code to query the storage device for detailed firmware information. A successful call will return information about firmware revisions, activity status, as well as read/write attributes for each slot. The amount of data returned will vary based on storage protocol.<!-- raw HTML omitted --> To perform this operation, call the <a href="/windows/desktop/api/ioapiset/nf-ioapiset-deviceiocontrol"><strong>DeviceIoControl</strong></a> function with the following parameters.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/desktop/api/winioctl/ni-winioctl-ioctl_storage_protocol_command"><strong>IOCTL_STORAGE_PROTOCOL_COMMAND</strong></a><!-- raw HTML omitted --></td>
<td>Windows applications can use this control code to return properties of a storage device or adapter. The request indicates the kind of information to retrieve, such as inquiry data for a device or capabilities and limitations of an adapter. <!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/desktop/api/WinIoCtl/ni-winioctl-ioctl_storage_query_property"><strong>IOCTL_STORAGE_QUERY_PROPERTY</strong></a><!-- raw HTML omitted --></td>
<td>Windows applications can use this control code to return the properties of a storage device or adapter. The request indicates the kind of information to retrieve, such as the inquiry data for a device or the capabilities and limitations of an adapter. <a href="/windows/desktop/api/WinIoCtl/ni-winioctl-ioctl_storage_query_property"><strong>IOCTL_STORAGE_QUERY_PROPERTY</strong></a> can also be used to determine whether the port driver supports a particular property or which fields in the property descriptor can be modified with a subsequent change-property request.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/desktop/api/WinIoctl/ni-winioctl-ioctl_storage_set_temperature_threshold"><strong>IOCTL_STORAGE_SET_TEMPERATURE_THRESHOLD</strong></a><!-- raw HTML omitted --></td>
<td>Windows applications can use this control code to set the temperature threshold of a device (when it's supported by the device). <!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<p>The following control codes are obsolete:</p>
<p><strong>IOCTL_DISK_CONTROLLER_NUMBER</strong><br />
<a href="/windows/desktop/api/WinIoCtl/ni-winioctl-ioctl_disk_get_drive_geometry"><strong>IOCTL_DISK_GET_DRIVE_GEOMETRY</strong></a><br />
<a href="/windows/desktop/api/WinIoCtl/ni-winioctl-ioctl_disk_get_drive_layout"><strong>IOCTL_DISK_GET_DRIVE_LAYOUT</strong></a><br />
<a href="/windows/desktop/api/WinIoCtl/ni-winioctl-ioctl_disk_get_partition_info"><strong>IOCTL_DISK_GET_PARTITION_INFO</strong></a><br />
<strong>IOCTL_DISK_HISTOGRAM_DATA</strong><br />
<strong>IOCTL_DISK_HISTOGRAM_RESET</strong><br />
<strong>IOCTL_DISK_HISTOGRAM_STRUCTURE</strong><br />
<strong>IOCTL_DISK_LOGGING</strong><br />
<strong>IOCTL_DISK_REQUEST_DATA</strong><br />
<strong>IOCTL_DISK_REQUEST_STRUCTURE</strong><br />
<a href="/windows/desktop/api/WinIoCtl/ni-winioctl-ioctl_disk_set_drive_layout"><strong>IOCTL_DISK_SET_DRIVE_LAYOUT</strong></a><br />
<a href="/windows/desktop/api/WinIoCtl/ni-winioctl-ioctl_disk_set_partition_info"><strong>IOCTL_DISK_SET_PARTITION_INFO</strong></a></p>
</body>
