<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>File Compression and Decompression</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: The NTFS file system uses Lempel-Ziv compression, which is a lossless compression algorithm.
ms.assetid: 35a9fb47-5a73-479c-8fe0-5a2b07705536
title: File Compression and Decompression
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>File Compression and Decompression</h1>
<p>The NTFS file system volumes support file compression on an individual file basis. The file compression algorithm used by the NTFS file system is Lempel-Ziv compression. This is a <em>lossless</em> compression algorithm, which means that no data is lost when compressing and decompressing the file, as opposed to <em>lossy</em> compression algorithms such as JPEG, where some data is lost each time data compression and decompression occur.</p>
<p>Data compression reduces the size of a file by minimizing redundant data. In a text file, redundant data can be frequently occurring characters, such as the space character, or common vowels, such as the letters e and a; it can also be frequently occurring character strings. Data compression creates a compressed version of a file by minimizing this redundant data.</p>
<p>Each type of data-compression algorithm minimizes redundant data in a unique manner. For example, the <em>Huffman encoding algorithm</em> assigns a code to characters in a file based on how frequently those characters occur. Another compression algorithm, called <em>run-length encoding</em>, generates a two-part value for repeated characters: the first part specifies the number of times the character is repeated, and the second part identifies the character. Another compression algorithm, known as the <em>Lempel-Ziv algorithm</em>, converts variable-length strings into fixed-length codes that consume less space than the original strings.</p>
<h2>The NTFS File System File Compression</h2>
<p>On the NTFS file system, compression is performed transparently. This means it can be used without requiring changes to existing applications. The compressed bytes of the file are not accessible to applications; they see only the uncompressed data. Therefore, applications that open a compressed file can operate on it as if it were not compressed. However, these files cannot be copied to another file system.</p>
<p>If you compress a file that is larger than 30 gigabytes, the compression may not succeed.</p>
<p>The following topics identify the NTFS file system file compression:</p>
<ul>
<li><a href="compression-attribute.html">Compression Attribute</a></li>
<li><a href="compression-state.html">Compression State</a></li>
<li><a href="obtaining-the-size-of-a-compressed-file.html">Obtaining the Size of a Compressed File</a></li>
</ul>
<h2>File Compression and Decompression Libraries</h2>
<p>The file compression and decompression libraries take an existing file or files and produce a file or files that are compressed versions of the originals. The compression is also lossless, but the compression is not transparent to applications. An application can only operate on such files with the assistance of a file compression library. In addition, the only operations you can perform on such files are creating a compressed file from an original and recovering the original data from the decompressed version. Editing is typically not supported, and seeking is limited if supported at all.</p>
<p>Typically, an application calls functions in Lz32.dll to decompress data that was compressed using Compress.exe. The functions can also process files without attempting to decompress them.</p>
<p>You can use the functions in Lz32.dll to decompress single or multiple files. You can also use them to decompress compressed files a portion at a time.</p>
<p>The following topics identify the file decompression that is provided by the functions in Lz32.dll:</p>
<ul>
<li><a href="decompressing-a-single-file.html">Decompressing a single file</a></li>
<li><a href="decompressing-multiple-files.html">Decompressing multiple files</a></li>
<li><a href="reading-from-compressed-files.html">Reading from compressed files</a></li>
</ul>
<h2>Cabinets</h2>
<p>Cabinets are created by a compression library that supports features such as disk spanning and multi-file compression. For additional information, see the Cabinet Software Development Kit: <a href="/previous-versions/ms974336(v=msdn.10)">https://msdn.microsoft.com/library/dncabsdk/html/cabdl.asp</a>.</p>
<h2>In this section</h2>
<table>
<thead>
<tr>
<th>Topic</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="compression-attribute.html">Compression Attribute</a><!-- raw HTML omitted --></td>
<td>On an NTFS file system volume, each file and directory has a <em>compression attribute</em>.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="compression-state.html">Compression State</a><!-- raw HTML omitted --></td>
<td>Each file and directory on a volume that supports compression for individual files and directories has a <em>compression state</em>.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="obtaining-the-size-of-a-compressed-file.html">Obtaining the Size of a Compressed File</a><!-- raw HTML omitted --></td>
<td>To obtain the compressed size of a file use the GetCompressedFileSize function.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="decompressing-a-single-file.html">Decompressing a Single File</a><!-- raw HTML omitted --></td>
<td>An application can decompress a single compressed file by using the LZOpenFile, LZCopy, and LZClose functions.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="decompressing-multiple-files.html">Decompressing Multiple Files</a><!-- raw HTML omitted --></td>
<td>An application can decompress multiple files by using the LZOpenFile, LZCopy, and LZClose functions.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="reading-from-compressed-files.html">Reading from Compressed Files</a><!-- raw HTML omitted --></td>
<td>An application can decompress a compressed file a portion at a time by using the LZSeek and LZRead functions.<!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
</body>
