<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Moving Directories</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: To move a directory to another location, along with the files and subdirectories contained within it, call the MoveFileEx, MoveFileWithProgress, or MoveFileTransacted function.
ms.assetid: ca56c109-d6a3-456e-956c-126ce4aee8ba
title: Moving Directories
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>Moving Directories</h1>
<p>To move a directory to another location, along with the files and subdirectories contained within it, call the <a href="/windows/desktop/api/WinBase/nf-winbase-movefileexa"><strong>MoveFileEx</strong></a>, <a href="/windows/desktop/api/WinBase/nf-winbase-movefilewithprogressa"><strong>MoveFileWithProgress</strong></a>, or <a href="/windows/desktop/api/WinBase/nf-winbase-movefiletransacteda"><strong>MoveFileTransacted</strong></a> function. The <a href="/windows/desktop/api/WinBase/nf-winbase-movefilewithprogressa"><strong>MoveFileWithProgress</strong></a> function has the same functionality as <a href="/windows/desktop/api/WinBase/nf-winbase-movefileexa"><strong>MoveFileEx</strong></a>, except that <strong>MoveFileWithProgress</strong> enables you to specify a callback routine that receives notifications on the progress of the operation. The <a href="/windows/desktop/api/WinBase/nf-winbase-movefiletransacteda"><strong>MoveFileTransacted</strong></a> function enables you to perform the operation as a transacted operation.</p>
<p>The following example demonstrates the use of the <a href="/windows/desktop/api/WinBase/nf-winbase-movefileexa"><strong>MoveFileEx</strong></a> function with a directory.</p>
<pre lang="C++"><code>#include &lt;windows.h&gt;
#include &lt;tchar.h&gt;
#include &lt;stdio.h&gt;

int __cdecl _tmain(int argc, TCHAR *argv[])
{
    printf(&quot;\n&quot;);
    if( argc != 3 )
    {
        printf(&quot;ERROR:  Incorrect number of arguments\n\n&quot;);
        printf(&quot;Description:\n&quot;);
        printf(&quot;  Moves a directory and its contents\n\n&quot;);
        printf(&quot;Usage:\n&quot;);
        _tprintf(TEXT(&quot;  %s [source_dir] [target_dir]\n\n&quot;), argv[0]);
        printf(&quot;  The target directory cannot exist already.\n\n&quot;);
        return;
    }

    // Move the source directory to the target directory location.
    // The target directory must be on the same drive as the source.
    // The target directory cannot already exist.

    if (!MoveFileEx(argv[1], argv[2], MOVEFILE_WRITE_THROUGH))
    { 
        printf (&quot;MoveFileEx failed with error %d\n&quot;, GetLastError());
        return;
    }
    else _tprintf(TEXT(&quot;%s has been moved to %s\n&quot;), argv[1], argv[2]);
}
</code></pre>
<p>Â </p>
<p>Â </p>
</body>
