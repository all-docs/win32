<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Microsoft MPEG-2 Encoder</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: The Microsoft MPEG-2 Encoder filter encodes MPEG-2 audio and video and multiplexes the streams to generate an MPEG-2 program stream or transport stream.
ms.assetid: 61e8918b-7f5a-4720-bb3b-df9ac7614894
title: Microsoft MPEG-2 Encoder (Wmcodecdsp.h)
ms.topic: reference
ms.date: 4/26/2023
ms.custom: UpdateFrequency5</h2>
<h1>Microsoft MPEG-2 Encoder</h1>
<p>[The feature associated with this page, <a href="/windows/win32/directshow/directshow">DirectShow</a>, is a legacy feature. It has been superseded by <a href="/uwp/api/Windows.Media.Playback.MediaPlayer">MediaPlayer</a>, <a href="/windows/win32/api/mfmediaengine/nn-mfmediaengine-imfmediaengine">IMFMediaEngine</a>, and <a href="/windows/win32/medfound/audio-video-capture-in-media-foundation">Audio/Video Capture in Media Foundation</a>. Those features have been optimized for Windows 10 and Windows 11. Microsoft strongly recommends that new code use <strong>MediaPlayer</strong>, <strong>IMFMediaEngine</strong> and <strong>Audio/Video Capture in Media Foundation</strong> instead of <strong>DirectShow</strong>, when possible. Microsoft suggests that existing code that uses the legacy APIs be rewritten to use the new APIs if possible.]</p>
<p>The Microsoft MPEG-2 Encoder filter encodes MPEG-2 audio and video and multiplexes the streams to generate an MPEG-2 program stream or transport stream.</p>
<blockquote>
<p>[!Note]<br />
This filter is not supported on IA-64-based platforms.</p>
</blockquote>
<p>Â </p>
<p>Filter Information</p>
<p>Filter Interfaces</p>
<p><a href="/windows/desktop/api/Strmif/nn-strmif-ibasefilter"><strong>IBaseFilter</strong></a><!-- raw HTML omitted --> <a href="/windows/desktop/api/Strmif/nn-strmif-icodecapi"><strong>ICodecAPI</strong></a><!-- raw HTML omitted --> <strong>IEncoderAPI</strong><!-- raw HTML omitted --> <a href="/windows/desktop/api/Strmif/nn-strmif-imediaseeking"><strong>IMediaSeeking</strong></a><!-- raw HTML omitted --> <a href="/windows/win32/api/strmif/nn-strmif-ivideoencoder"><strong>IVideoEncoder</strong></a><!-- raw HTML omitted --></p>
<p>Input Pin Media Types</p>
<p>See Remarks</p>
<p>Input Pin Interfaces</p>
<p><a href="/windows/desktop/api/Strmif/nn-strmif-imeminputpin"><strong>IMemInputPin</strong></a><!-- raw HTML omitted --> <a href="/windows/desktop/api/Strmif/nn-strmif-ipin"><strong>IPin</strong></a><!-- raw HTML omitted --> <a href="/windows/desktop/api/Strmif/nn-strmif-iqualitycontrol"><strong>IQualityControl</strong></a><!-- raw HTML omitted --></p>
<p>Output Pin Media Types</p>
<p>See Remarks</p>
<p>Output Pin Interfaces</p>
<p><a href="/windows/desktop/api/Strmif/nn-strmif-imediaseeking"><strong>IMediaSeeking</strong></a><!-- raw HTML omitted --> <a href="/windows/desktop/api/Strmif/nn-strmif-ipin"><strong>IPin</strong></a><!-- raw HTML omitted --> <a href="/windows/desktop/api/Strmif/nn-strmif-iqualitycontrol"><strong>IQualityControl</strong></a><!-- raw HTML omitted --></p>
<p>Filter CLSID</p>
<p><strong>CLSID_CMPEG2EncoderDS</strong> (declared in wmcodecdsp.h)</p>
<p>Executable</p>
<p>msmpeg2enc.dll</p>
<p><a href="merit.html">Merit</a></p>
<p><strong>MERIT_DO_NOT_USE</strong></p>
<p><a href="filter-categories.html">Filter Category</a></p>
<p><strong>CLSID_LegacyAmFilterCategory</strong></p>
<p>Â </p>
<h2>Remarks</h2>
<p>This filter combines the encoding functionality of two other filters:</p>
<ul>
<li><a href="microsoft-mpeg-2-audio-encoder.html"><strong>Microsoft MPEG-2 Audio Encoder</strong></a></li>
<li><a href="microsoft-mpeg-2-video-encoder.html"><strong>Microsoft MPEG-2 Video Encoder</strong></a></li>
</ul>
<p>Except as noted, this filter supports the same encoding features as those two encoders.</p>
<p>Initially the filter has one input pin, which can accept audio or video input. When that pin is connected, the filter creates a second input pin. If the first input pin receives audio, the second input pin accepts only video, and vice versa. Each input pin supports the same media types as the corresponding encoder filter.</p>
<p>If only one input pin is connected, the filter supports the same output types as the corresponding audio or video encoder. If both pins are connected, the filter supports the following kinds of output:</p>
<ul>
<li>Audio-visual in an MPEG-2 program stream</li>
<li>Audio-visual in an MPEG-2 transport stream</li>
</ul>
<p>These correspond to the following output types:</p>
<ul>
<li><strong>MEDIATYPE_Stream</strong>, <strong>MEDIASUBTYPE_MPEG2_PROGRAM</strong></li>
<li><strong>MEDIATYPE_Stream</strong>, <strong>MEDIASUBTYPE_MPEG2_TRANSPORT</strong></li>
</ul>
<p>This filter cannot multiplex streams that were previously encoded. The input streams must be uncompressed audio/video, which the filter encodes before multiplexing. The multiplexed stream is limited to one program, containing up to one audio and one video stream.</p>
<h3>Codec Properties</h3>
<p>The filter supports the combined properties of the <a href="microsoft-mpeg-2-audio-encoder.html"><strong>MPEG-2 Audio Encoder</strong></a> and <a href="microsoft-mpeg-2-video-encoder.html"><strong>MPEG-2 Video Encoder</strong></a> filters, with the following difference:</p>
<ul>
<li>The <a href="avenccommonmeanbitrate-property.html"><strong>AVEncCommonMeanBitRate</strong></a> property sets the average bit rate for the video stream.</li>
<li>The <a href="avencaudiomeanbitrate.html"><strong>AVEncAudioMeanBitRate</strong></a> property sets the average bit rate for the audio stream.</li>
</ul>
<h2>Requirements</h2>
<table>
<thead>
<tr>
<th>Requirement</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Minimum supported client<!-- raw HTML omitted --></td>
<td>WindowsÂ Vista Home Premium, WindowsÂ Vista Ultimate, WindowsÂ 7 Home Premium, WindowsÂ 7 Professional, WindowsÂ 7 Enterprise, WindowsÂ 7 Ultimate [desktop apps only]<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Minimum supported server<!-- raw HTML omitted --></td>
<td>None supported<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Header<!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted -->Wmcodecdsp.h<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<h2>See also</h2>
<!-- raw HTML omitted -->
<p><a href="directshow-filters.html">DirectShow Filters</a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
