<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Microsoft MPEG-1/DD/AAC Audio Decoder</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: 'This filter decodes the following audio formats:'
ms.assetid: 2fd14296-9eed-4e25-b140-6281c707fdb7
title: Microsoft MPEG-1/DD/AAC Audio Decoder (Wmcodecdsp.h)
ms.topic: reference
ms.date: 4/26/2023
ms.custom: UpdateFrequency5</h2>
<h1>Microsoft MPEG-1/DD/AAC Audio Decoder</h1>
<p>[The feature associated with this page, <a href="/windows/win32/directshow/directshow">DirectShow</a>, is a legacy feature. It has been superseded by <a href="/uwp/api/Windows.Media.Playback.MediaPlayer">MediaPlayer</a>, <a href="/windows/win32/api/mfmediaengine/nn-mfmediaengine-imfmediaengine">IMFMediaEngine</a>, and <a href="/windows/win32/medfound/audio-video-capture-in-media-foundation">Audio/Video Capture in Media Foundation</a>. Those features have been optimized for Windows 10 and Windows 11. Microsoft strongly recommends that new code use <strong>MediaPlayer</strong>, <strong>IMFMediaEngine</strong> and <strong>Audio/Video Capture in Media Foundation</strong> instead of <strong>DirectShow</strong>, when possible. Microsoft suggests that existing code that uses the legacy APIs be rewritten to use the new APIs if possible.]</p>
<p>This filter decodes the following audio formats:</p>
<ul>
<li>MPEG-1 audio layers I and II.</li>
<li>Backward-compatible MPEG-2 audio, layers I and II (ISO/IEC 13818-3), mono and stereo only.</li>
<li>Advanced Audio Coding (AAC) Low Complexity (LC) profile.</li>
<li>High-Efficiency AAC (HE-AAC) version 1 and version 2.</li>
<li>Pass-through Digital Theater Systems (DTS) for digital output.</li>
<li>LPCM, mono and stereo only, with or without PES headers.</li>
<li>Dolby Digital.</li>
<li>Dolby Digital Plus, including conversion from Dolby Digital Plus to Dolby Digital for digital output.</li>
</ul>
<blockquote>
<p>[!Note]<br />
The Microsoft implementation of the Dolby Digital technology is restricted under terms of the Dolby Digital licensing program to use by Microsoft applications.</p>
</blockquote>
<p>Â </p>
<blockquote>
<p>[!Note]<br />
This filter is not supported on IA-64-based platforms.</p>
</blockquote>
<p>Â </p>
<p>Decoding of Dolby Digital Plus, AAC, and HE-AAC formats requires WindowsÂ 7. Decoding of Dolby Digital or Dolby Digital Plus is not supported on WindowsÂ 7 Home Basic or WindowsÂ 7 Starter.</p>
<p>In the registry, the friendly name of this filter is &quot;Microsoft DTV-DVD Audio Decoder&quot;.</p>
<p>Filter Information</p>
<p>Filter Interfaces</p>
<p><a href="/windows/desktop/api/Strmif/nn-strmif-ibasefilter"><strong>IBaseFilter</strong></a><!-- raw HTML omitted --> <a href="/windows/desktop/api/Strmif/nn-strmif-icodecapi"><strong>ICodecAPI</strong></a><!-- raw HTML omitted --></p>
<p>Input Pin Media Types</p>
<p>In WindowsÂ Vista and later, the filter supports the following input types:<!-- raw HTML omitted --></p>
<ul>
<li><strong>MEDIATYPE_Audio</strong>, <strong>MEDIASUBTYPE_DOLBY_AC3</strong> (See Note 1.)</li>
<li><strong>MEDIATYPE_Audio</strong>, <strong>MEDIASUBTYPE_MPEG1Audio</strong></li>
<li><strong>MEDIATYPE_Audio</strong>, <strong>MEDIASUBTYPE_MPEG1Payload</strong></li>
<li><strong>MEDIATYPE_Audio</strong>, <strong>MEDIASUBTYPE_MPEG2_AUDIO</strong></li>
<li><strong>MEDIATYPE_DVD_ENCRYPTED_PACK</strong>, <strong>MEDIASUBTYPE_DOLBY_AC3</strong> (See Note 1.)</li>
<li><strong>MEDIATYPE_DVD_ENCRYPTED_PACK</strong>, <strong>MEDIASUBTYPE_DTS</strong> (See Note 2.)</li>
<li><strong>MEDIATYPE_DVD_ENCRYPTED_PACK</strong>, <strong>MEDIASUBTYPE_DVD_LPCM_AUDIO</strong></li>
<li><strong>MEDIATYPE_DVD_ENCRYPTED_PACK</strong>, <strong>MEDIASUBTYPE_MPEG2_AUDIO</strong></li>
<li><strong>MEDIATYPE_MPEG2_PES</strong>, <strong>MEDIASUBTYPE_DOLBY_AC3</strong> (See Note 1.)</li>
<li><strong>MEDIATYPE_MPEG2_PES</strong>, <strong>MEDIASUBTYPE_DTS</strong> (See Note 2.)</li>
<li><strong>MEDIATYPE_MPEG2_PES</strong>, <strong>MEDIASUBTYPE_DVD_LPCM_AUDIO</strong></li>
<li><strong>MEDIATYPE_MPEG2_PES</strong>, <strong>MEDIASUBTYPE_MPEG2_AUDIO</strong></li>
<li><strong>MEDIATYPE_Stream</strong>, <strong>MEDIASUBTYPE_DOLBY_AC3</strong> (See Note 1.)</li>
<li><strong>MEDIATYPE_Stream</strong>, <strong>MEDIASUBTYPE_MPEG1Audio</strong></li>
<li><strong>MEDIATYPE_Stream</strong>, <strong>MEDIASUBTYPE_MPEG2_AUDIO</strong></li>
</ul>
<p>Starting in WindowsÂ 7, the filter also supports the following input types:<!-- raw HTML omitted --></p>
<ul>
<li><strong>MEDIATYPE_Audio</strong>, <strong>MEDIASUBTYPE_DOLBY_DDPLUS</strong> (See Note 1.)</li>
<li><strong>MEDIATYPE_Audio</strong>, <strong>MEDIASUBTYPE_DTS2</strong> (See Note 2.)</li>
<li><strong>MEDIATYPE_Audio</strong>, <strong>MEDIASUBTYPE_DVD_LPCM_AUDIO</strong></li>
<li><strong>MEDIATYPE_Audio</strong>, <strong>MEDIASUBTYPE_DVM</strong> (See Note 1.)</li>
<li><strong>MEDIATYPE_Audio</strong>, <strong>MEDIASUBTYPE_MPEG_ADTS_AAC</strong></li>
<li><strong>MEDIATYPE_Audio</strong>, <strong>MEDIASUBTYPE_MPEG_LOAS</strong></li>
<li><strong>MEDIATYPE_Audio</strong>, <strong>MEDIASUBTYPE_MPEG1AudioPayload</strong></li>
<li><strong>MEDIATYPE_Audio</strong>, <strong>MEDIASUBTYPE_RAW_AAC1</strong></li>
<li><strong>MEDIATYPE_Stream</strong>, <strong>MEDIASUBTYPE_DOLBY_DDPLUS</strong> (See Note 1.)</li>
<li><strong>MEDIATYPE_Stream</strong>, <strong>MEDIASUBTYPE_MPEG_ADTS_AAC</strong></li>
<li><strong>MEDIATYPE_Stream</strong>, <strong>MEDIASUBTYPE_MPEG_LOAS</strong></li>
</ul>
<p>The input type can change dynamically during streaming.<!-- raw HTML omitted --> For more information about these media types, see <a href="audio-subtypes.html"><strong>Audio Subtypes</strong></a>.<!-- raw HTML omitted --></p>
<blockquote>
<p>[!Note]</p>
<ol>
<li>The Microsoft implementation of the Dolby Digital technology is restricted under terms of the Dolby Digital licensing program to use by Microsoft applications.</li>
</ol>
</blockquote>
<!-- raw HTML omitted -->
<blockquote>
<p>[!Note]<br />
2. For Digital Theater Systems (DTS) input, only S/PDIF output is supported (DTS over S/PDIF). Audio decoding is not supported.</p>
</blockquote>
<!-- raw HTML omitted -->
<p>Input Pin Interfaces</p>
<p><a href="/windows/desktop/api/Strmif/nn-strmif-icodecapi"><strong>ICodecAPI</strong></a><!-- raw HTML omitted --> <a href="ikspropertyset.html"><strong>IKsPropertySet</strong></a><!-- raw HTML omitted --> <a href="/windows/desktop/api/Strmif/nn-strmif-imeminputpin"><strong>IMemInputPin</strong></a><!-- raw HTML omitted --> <a href="/windows/desktop/api/Strmif/nn-strmif-ipin"><strong>IPin</strong></a><!-- raw HTML omitted --> <a href="/windows/desktop/api/Strmif/nn-strmif-iqualitycontrol"><strong>IQualityControl</strong></a><!-- raw HTML omitted --></p>
<p>Output Pin Media Types</p>
<p>In WindowsÂ Vista and later, the filter supports the following output types:<!-- raw HTML omitted --></p>
<ul>
<li><strong>MEDIATYPE_Audio</strong>, <strong>MEDIASUBTYPE_DOLBY_AC3_SPDIF</strong> (same as <strong>KSDATAFORMAT_SUBTYPE_IEC61937_DOLBY_DIGITAL</strong>)</li>
<li><strong>MEDIATYPE_Audio</strong>, <strong>MEDIASUBTYPE_PCM</strong></li>
</ul>
<p>Starting in WindowsÂ 7, the filter also supports the following output types:<!-- raw HTML omitted --></p>
<ul>
<li><strong>MEDIATYPE_Audio</strong>, <strong>KSDATAFORMAT_SUBTYPE_IEC61937_DTS</strong></li>
<li><strong>MEDIATYPE_Audio</strong>, <strong>MEDIASUBTYPE_IEEE_FLOAT</strong></li>
</ul>
<p>Output Pin Interfaces</p>
<p><a href="/windows/desktop/api/Strmif/nn-strmif-imediaseeking"><strong>IMediaSeeking</strong></a><!-- raw HTML omitted --> <a href="/windows/desktop/api/Strmif/nn-strmif-ipin"><strong>IPin</strong></a><!-- raw HTML omitted --> <a href="/windows/desktop/api/Strmif/nn-strmif-iqualitycontrol"><strong>IQualityControl</strong></a><!-- raw HTML omitted --></p>
<p>Filter CLSID</p>
<p><strong>CLSID_CMPEG2AudDecoderDS</strong> (declared in wmcodecdsp.h)</p>
<p>Executable</p>
<p>msmpeg2adec.dll</p>
<p><a href="merit.html">Merit</a></p>
<p><strong>MERIT_NORMAL</strong> - 1</p>
<p><a href="filter-categories.html">Filter Category</a></p>
<p><strong>CLSID_LegacyAmFilterCategory</strong></p>
<p>Â </p>
<blockquote>
<p>[!Note]<br />
An earlier version of the documentation stated that this filter can decode &quot;MPEG-2 audio.&quot; The filter decodes only backward-compatible MPEG-2 audio.</p>
</blockquote>
<p>Â </p>
<h2>Remarks</h2>
<p>Mono streams are always decoded to stereo.</p>
<p>For streams with a channel configuration of two or more speakers, the decoder does one of the following:</p>
<ul>
<li>Up-mixes to six channels, using the common 5.1 speaker configuration.</li>
<li>Downmixes to stereo.</li>
</ul>
<p>To select between these two options, use the <a href="/windows/desktop/api/Strmif/nn-strmif-icodecapi"><strong>ICodecAPI</strong></a> interface to set the <a href="avdeccommonoutputformat-property.html"><strong>AVDecCommonOutputFormat</strong></a> property, before connecting the pins. Alternatively, when the application builds the filter graph, it can set the desired media type on the output pin.</p>
<h3>AAC Decoding</h3>
<p>For AAC, the decoder has certain format constraints on the compressed AAC input. These format constraints are the same as the Media Foundation <a href="../medfound/aac-decoder.html"><strong>AAC Decoder</strong></a>, and are documented in the section &quot;<a href="../medfound/aac-decoder.html"><strong>Format Constraints</strong></a>&quot;.</p>
<p>The DirectShow decoder also accepts different input types than the Media Foundation decoder. The DirectShow decoder supports the following AAC input types:</p>
<ul>
<li><strong>MEDIASUBTYPE_RAW_AAC1</strong>: Raw AAC, typically found in AVI or Matroska (.MKV) files.</li>
<li><strong>MEDIASUBTYPE_MPEG_ADTS_AAC</strong>: AAC in an Audio Data Transport Stream (ADTS) for streaming.</li>
<li><strong>MEDIASUBTYPE_MPEG_LOAS</strong>: Transport stream with a synchronization layer (LOAS) and a multiplex layer (LATM).</li>
</ul>
<p>The Media Foundation decoder supports the following AAC input types:</p>
<ul>
<li>MFAudioFormat_AAC (same as <strong>MEDIASUBTYPE_MPEG_HEAAC</strong>) for MP4 file playback.</li>
<li><strong>MEDIASUBTYPE_RAW_AAC1</strong>.</li>
</ul>
<h3>Property Sets</h3>
<p>The decoder's input pin supports the following property sets through <a href="ikspropertyset.html"><strong>IKsPropertySet</strong></a>:</p>
<ul>
<li><a href="dvd-copy-protection-property-set.html"><strong>DVD Copy Protection Property Set</strong></a></li>
<li><a href="rate-change-property-set.html"><strong>Rate-Change Property Set</strong></a>.</li>
</ul>
<blockquote>
<p>[!Note]<br />
Starting in WindowsÂ 7, the decoder supports trick mode through the rate-change property set. It supports playback rates in the range [0.501 â€“ 2.0], where 1.0 is normal playback rate, and 2.0 is twice the normal rate.</p>
</blockquote>
<p>Â </p>
<h3>Codec Properties</h3>
<p>The decoder's input pin supports the following properties through <a href="/windows/desktop/api/Strmif/nn-strmif-icodecapi"><strong>ICodecAPI</strong></a>:</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Requires</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="avaudiochannelconfig-property.html"><strong>AVAudioChannelConfig</strong></a></td>
<td>WindowsÂ Vista</td>
</tr>
<tr>
<td><a href="avaudiochannelcount-property.html"><strong>AVAudioChannelCount</strong></a></td>
<td>WindowsÂ Vista</td>
</tr>
<tr>
<td><a href="avaudiosamplerate-property.html"><strong>AVAudioSampleRate</strong></a></td>
<td>WindowsÂ Vista</td>
</tr>
<tr>
<td><a href="avddsurroundmode-property.html"><strong>AVDDSurroundMode</strong></a></td>
<td>WindowsÂ Vista only; not supported in WindowsÂ 7 or later.</td>
</tr>
<tr>
<td><a href="avdecaudiodualmono-property.html"><strong>AVDecAudioDualMono</strong></a></td>
<td>WindowsÂ Vista</td>
</tr>
<tr>
<td><a href="avdeccommoninputformat-property.html"><strong>AVDecCommonInputFormat</strong></a></td>
<td>WindowsÂ Vista</td>
</tr>
<tr>
<td><a href="avdeccommonmeanbitrate.html"><strong>AVDecCommonMeanBitRate</strong></a></td>
<td>WindowsÂ 7</td>
</tr>
</tbody>
</table>
<p>Â </p>
<p>The filter supports the following properties through <a href="/windows/desktop/api/Strmif/nn-strmif-icodecapi"><strong>ICodecAPI</strong></a>:</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Requires</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="avdecaacdownmixmode-property.html"><strong>AVDecAACDownmixMode</strong></a></td>
<td>WindowsÂ 7</td>
</tr>
<tr>
<td><a href="avdecaudiodualmonorepromode-property.html"><strong>AVDecAudioDualMonoReproMode</strong></a></td>
<td>WindowsÂ Vista</td>
</tr>
<tr>
<td><a href="avdeccommonoutputformat-property.html"><strong>AVDecCommonOutputFormat</strong></a> (See Note 3.)</td>
<td>WindowsÂ Vista</td>
</tr>
<tr>
<td><a href="avdecdddynamicrangescalehigh-property.html"><strong>AVDecDDDynamicRangeScaleHigh</strong></a></td>
<td>WindowsÂ Vista</td>
</tr>
<tr>
<td><a href="avdecdddynamicrangescalelow-property.html"><strong>AVDecDDDynamicRangeScaleLow</strong></a></td>
<td>WindowsÂ Vista</td>
</tr>
<tr>
<td><a href="avdecddoperationalmode-property.html"><strong>AVDecDDOperationalMode</strong></a></td>
<td>WindowsÂ Vista</td>
</tr>
<tr>
<td><a href="avdecmmcss-property.html"><strong>AVDecMmcssClass</strong></a></td>
<td>WindowsÂ Vista</td>
</tr>
<tr>
<td><a href="avdsploudnessequalization-property.html"><strong>AVDSPLoudnessEqualization</strong></a></td>
<td>WindowsÂ 7</td>
</tr>
<tr>
<td><a href="avdspspeakerfill-property.html"><strong>AVDSPSpeakerFill</strong></a></td>
<td>WindowsÂ 7</td>
</tr>
</tbody>
</table>
<p>Â </p>
<blockquote>
<p>[!Note]<br />
3. The <a href="avdeccommonoutputformat-property.html"><strong>AVDecCommonOutputFormat</strong></a> property must be set before the decoder's output pin is connected. Otherwise, the change has no effect.</p>
</blockquote>
<p>Â </p>
<h2>Requirements</h2>
<table>
<thead>
<tr>
<th>Requirement</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Minimum supported client<!-- raw HTML omitted --></td>
<td>WindowsÂ Vista Home Premium, WindowsÂ Vista Ultimate, WindowsÂ 7 [desktop apps only]<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Minimum supported server<!-- raw HTML omitted --></td>
<td>None supported<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Header<!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted -->Wmcodecdsp.h<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<h2>See also</h2>
<!-- raw HTML omitted -->
<p><a href="audio-subtypes.html"><strong>Audio Subtypes</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="directshow-filters.html">DirectShow Filters</a></p>
<!-- raw HTML omitted -->
<p><a href="dvd-media-types.html"><strong>DVD Media Types</strong></a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
