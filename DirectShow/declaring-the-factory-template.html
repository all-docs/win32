<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Declaring the Factory Template</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: Declaring the Factory Template
ms.assetid: 3060c167-ea23-4061-b32a-16e750f55e6f
title: Declaring the Factory Template
ms.topic: article
ms.date: 4/26/2023
ms.custom: UpdateFrequency5</h2>
<h1>Declaring the Factory Template</h1>
<p>[The feature associated with this page, <a href="/windows/win32/directshow/directshow">DirectShow</a>, is a legacy feature. It has been superseded by <a href="/uwp/api/Windows.Media.Playback.MediaPlayer">MediaPlayer</a>, <a href="/windows/win32/api/mfmediaengine/nn-mfmediaengine-imfmediaengine">IMFMediaEngine</a>, and <a href="/windows/win32/medfound/audio-video-capture-in-media-foundation">Audio/Video Capture in Media Foundation</a>. Those features have been optimized for Windows 10 and Windows 11. Microsoft strongly recommends that new code use <strong>MediaPlayer</strong>, <strong>IMFMediaEngine</strong> and <strong>Audio/Video Capture in Media Foundation</strong> instead of <strong>DirectShow</strong>, when possible. Microsoft suggests that existing code that uses the legacy APIs be rewritten to use the new APIs if possible.]</p>
<p>The next step is to declare the factory template for your filter. A factory template is a C++ class that contains information for the class factory. In your DLL, declare a global array of <a href="cfactorytemplate.html"><strong>CFactoryTemplate</strong></a> objects, one for each filter or COM component in your DLL. The array must be named <em>g_Templates</em>. For more information about factory templates, see <a href="how-to-create-a-dll.html">How to Create a DirectShow Filter DLL</a>.</p>
<p>The <strong>m_pAMovieSetup_Filter</strong> member of the factory template is a pointer to the <a href="amoviesetup-filter.html"><strong>AMOVIESETUP_FILTER</strong></a> structure described previously. The following example shows a factory template, using the structure given in the previous example:</p>
<pre lang="C++"><code>CFactoryTemplate g_Templates[] = {
    {
        g_wszName,                      // Name.
        &amp;CLSID_SomeFilter,              // CLSID.
        CSomeFilter::CreateInstance,    // Creation function.
        NULL,
        &amp;sudFilterReg                   // Pointer to filter information.
    }
};
int g_cTemplates = sizeof(g_Templates) / sizeof(g_Templates[0]);
</code></pre>
<p>If you did not declare any filter information, <strong>m_pAMoveSetup_Filter</strong> can be <strong>NULL</strong>.</p>
<h2>Related topics</h2>
<!-- raw HTML omitted -->
<p><a href="how-to-register-directshow-filters.html">How to Register DirectShow Filters</a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
