<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Synchronizing the VMR to the Monitor's Refresh Rate</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: Synchronizing the VMR to the Monitor's Refresh Rate
ms.assetid: 73e73821-fb08-488a-956e-ef33f6651a26
title: Synchronizing the VMR to the Monitor's Refresh Rate
ms.topic: article
ms.date: 4/26/2023
ms.custom: UpdateFrequency5</h2>
<h1>Synchronizing the VMR to the Monitor's Refresh Rate</h1>
<p>[The feature associated with this page, <a href="/windows/win32/directshow/directshow">DirectShow</a>, is a legacy feature. It has been superseded by <a href="/uwp/api/Windows.Media.Playback.MediaPlayer">MediaPlayer</a>, <a href="/windows/win32/api/mfmediaengine/nn-mfmediaengine-imfmediaengine">IMFMediaEngine</a>, and <a href="/windows/win32/medfound/audio-video-capture-in-media-foundation">Audio/Video Capture in Media Foundation</a>. Those features have been optimized for Windows 10 and Windows 11. Microsoft strongly recommends that new code use <strong>MediaPlayer</strong>, <strong>IMFMediaEngine</strong> and <strong>Audio/Video Capture in Media Foundation</strong> instead of <strong>DirectShow</strong>, when possible. Microsoft suggests that existing code that uses the legacy APIs be rewritten to use the new APIs if possible.]</p>
<p>In rare scenarios, you may wish to precisely synchronize video rendering with the monitor's refresh rate, so that exactly one new frame is presented each time the monitor refreshes. The most reliable way to do this is to create a custom allocator-presenter that uses a flip operation instead of a blit operation to write the video bits into the primary surface. &quot;Flip&quot; is called each time the monitor refreshes, so if your video stream contains no time stamps, the VMR will render as fast as possible to the primary surface, but the surface will block the stream until the Flip operation completes. This means that, as long as the CPU is not overburdened, the next frame will always be waiting in the primary surface each time the monitor refreshes. However, if some other CPU-intensive process is running, it could possibly starve your DirectShow streaming thread so that it cannot deliver video frames fast enough to the primary surface.</p>
<h2>Related topics</h2>
<!-- raw HTML omitted -->
<p><a href="vmr-renderless-playback-mode--custom-allocator-presenters.html">VMR Renderless Playback Mode (Custom Allocator-Presenters)</a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
