<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Step 4: Draw the Bitmap on the Client Area</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: 'Step 4: Draw the Bitmap on the Client Area'
ms.assetid: fb22468c-9113-46ff-a576-8dee30c458be
title: 'Step 4: Draw the Bitmap on the Client Area'
ms.topic: article
ms.date: 4/26/2023
ms.custom: UpdateFrequency5</h2>
<h1>Step 4: Draw the Bitmap on the Client Area</h1>
<p>[The feature associated with this page, <a href="/windows/win32/directshow/directshow">DirectShow</a>, is a legacy feature. It has been superseded by <a href="/uwp/api/Windows.Media.Playback.MediaPlayer">MediaPlayer</a>, <a href="/windows/win32/api/mfmediaengine/nn-mfmediaengine-imfmediaengine">IMFMediaEngine</a>, and <a href="/windows/win32/medfound/audio-video-capture-in-media-foundation">Audio/Video Capture in Media Foundation</a>. Those features have been optimized for Windows 10 and Windows 11. Microsoft strongly recommends that new code use <strong>MediaPlayer</strong>, <strong>IMFMediaEngine</strong> and <strong>Audio/Video Capture in Media Foundation</strong> instead of <strong>DirectShow</strong>, when possible. Microsoft suggests that existing code that uses the legacy APIs be rewritten to use the new APIs if possible.]</p>
<p>[This API is not supported and may be altered or unavailable in the future.]</p>
<p>This topic is Step 4 of <a href="grabbing-a-poster-frame.html">Grabbing a Poster Frame</a>.</p>
<p>The final step is to draw the bitmap onto the client area of the application window, using the <a href="/windows/win32/api/wingdi/nf-wingdi-setdibitstodevice"><strong>SetDIBitsToDevice</strong></a> function. This example simply paints the bitmap in the upper-left corner of the client area, without regard to the window size:</p>
<pre lang="C++"><code>case WM_PAINT:
    {
        PAINTSTRUCT ps;
        HDC hdc = BeginPaint(hwnd, &amp;ps);
        if (pbmi)
        {
            int result = SetDIBitsToDevice(hdc, 0, 0, 
                pbmi-&gt;biWidth,
                pbmi-&gt;biHeight,
                0, 0, 0,
                pbmi-&gt;biHeight,
                pBuffer,
                reinterpret_cast&lt;BITMAPINFO*&gt;(pbmi),
                DIB_RGB_COLORS);
        }
        EndPaint(hwnd, &amp;ps);
    }
    break;
</code></pre>
<p>The <em>pBuffer</em> and <em>pbmi</em> variables are declared in <a href="step-1--create-the-windows-framework.html">Step 1: Create the Windows Framework</a>, and their values are obtained in <a href="step-3--implement-the-frame-grabbing-function.html">Step 3: Implement the Frame-Grabbing Function</a>.</p>
<h2>Related topics</h2>
<!-- raw HTML omitted -->
<p><a href="grabbing-a-poster-frame.html">Grabbing a Poster Frame</a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
