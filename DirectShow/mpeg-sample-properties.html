<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>MPEG Sample Properties</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: MPEG Sample Properties
ms.assetid: 339aab84-e5ad-4071-8b67-2b04cb17e450
title: MPEG Sample Properties
ms.topic: article
ms.date: 4/26/2023
ms.custom: UpdateFrequency5</h2>
<h1>MPEG Sample Properties</h1>
<p>[The feature associated with this page, <a href="/windows/win32/directshow/directshow">DirectShow</a>, is a legacy feature. It has been superseded by <a href="/uwp/api/Windows.Media.Playback.MediaPlayer">MediaPlayer</a>, <a href="/windows/win32/api/mfmediaengine/nn-mfmediaengine-imfmediaengine">IMFMediaEngine</a>, and <a href="/windows/win32/medfound/audio-video-capture-in-media-foundation">Audio/Video Capture in Media Foundation</a>. Those features have been optimized for Windows 10 and Windows 11. Microsoft strongly recommends that new code use <strong>MediaPlayer</strong>, <strong>IMFMediaEngine</strong> and <strong>Audio/Video Capture in Media Foundation</strong> instead of <strong>DirectShow</strong>, when possible. Microsoft suggests that existing code that uses the legacy APIs be rewritten to use the new APIs if possible.]</p>
<p>MPEG samples have the following characteristics.</p>
<p><strong>Time Stamps</strong></p>
<p>Not all samples have start and stop times. The sample stop time for packet and payload data is not useful; it is usually set to the start time plus one. MPEG packet or payload data samples will have a start and stop time set if the system layer packet they are generated from had a valid PTS.</p>
<p>For more information about time stamps, see section 2.4.1 of ISO1-11172: &quot;The packet header may contain decoding and/or presentation time stamps (DTS and PTS) that refer to the first access unit in the packet.&quot;</p>
<p>For MPEG_Stream major types, the start time is the byte position of the first byte, rated at 1 byte per second. The stop time is the byte position of the last byte. Thus, consecutive samples should have the stop time of the first packet equal to the start time of the next packet. For Video CD data, the origin of the medium must match the format of a video-CD file exposed by CDFS with the standard RIFF chunk at the start.</p>
<p>For MPEG video packet and payload types, the time stamp is the presentation time for the first video frame whose picture start code begins in the sample.</p>
<p>For MPEG audio packet and payload types, the time stamp is the presentation time for the first audio frame whose sync code starts in the sample.</p>
<p>It is assumed that packet and payload data without time stamps can be successfully prerolled by the handling filters.</p>
<p><strong>Discontinuities</strong></p>
<p>If there is a break in the stream (for example, a gap in the real-time data, or an error in the data or after a seek), the discontinuity property is set on the next media sample. This also allows for a time-stamp discontinuity.</p>
<p><strong>End-of-Stream Notifications</strong></p>
<p>When the decoder receives this notification, it must process any buffered data. Any new data must then start with the discontinuity property.</p>
<h2>Related topics</h2>
<!-- raw HTML omitted -->
<p><a href="mpeg-2-support-in-directshow.html">MPEG-2 Support in DirectShow</a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
