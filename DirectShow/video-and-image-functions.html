<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Video and Image Functions</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: Video and Image Functions
ms.assetid: 02401edc-362b-4f6c-b10b-c46b30b3ebe7
title: Video and Image Functions
ms.topic: article
ms.date: 4/26/2023
ms.custom: UpdateFrequency5</h2>
<h1>Video and Image Functions</h1>
<p>[The feature associated with this page, <a href="/windows/win32/directshow/directshow">DirectShow</a>, is a legacy feature. It has been superseded by <a href="/uwp/api/Windows.Media.Playback.MediaPlayer">MediaPlayer</a>, <a href="/windows/win32/api/mfmediaengine/nn-mfmediaengine-imfmediaengine">IMFMediaEngine</a>, and <a href="/windows/win32/medfound/audio-video-capture-in-media-foundation">Audio/Video Capture in Media Foundation</a>. Those features have been optimized for Windows 10 and Windows 11. Microsoft strongly recommends that new code use <strong>MediaPlayer</strong>, <strong>IMFMediaEngine</strong> and <strong>Audio/Video Capture in Media Foundation</strong> instead of <strong>DirectShow</strong>, when possible. Microsoft suggests that existing code that uses the legacy APIs be rewritten to use the new APIs if possible.]</p>
<p>These functions and macros manipulate the DirectShow video format structures.</p>
<table>
<thead>
<tr>
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="/previous-versions/windows/desktop/api/Amvideo/nf-amvideo-bit_masks_match"><strong>BIT_MASKS_MATCH</strong></a></td>
<td>Compares the color masks for two <a href="/previous-versions/windows/desktop/api/amvideo/ns-amvideo-videoinfo"><strong>VIDEOINFO</strong></a> structures.</td>
</tr>
<tr>
<td><a href="/previous-versions/windows/desktop/api/Amvideo/nf-amvideo-bitmasks"><strong>BITMASKS</strong></a></td>
<td>Retrieves the color masks from a <a href="/previous-versions/windows/desktop/api/amvideo/ns-amvideo-videoinfo"><strong>VIDEOINFO</strong></a> structure</td>
</tr>
<tr>
<td><a href="checkvideoinfotype.html"><strong>CheckVideoInfoType</strong></a></td>
<td>Checks a media type that contains a <a href="/previous-versions/windows/desktop/api/amvideo/ns-amvideo-videoinfoheader"><strong>VIDEOINFOHEADER</strong></a> format structure for errors that can cause buffer overruns or integer overflows.</td>
</tr>
<tr>
<td><a href="checkvideoinfo2type.html"><strong>CheckVideoInfo2Type</strong></a></td>
<td>Checks a media type that contains a <a href="/previous-versions/windows/desktop/api/dvdmedia/ns-dvdmedia-videoinfoheader2"><strong>VIDEOINFOHEADER2</strong></a> format structure for errors that can cause buffer overruns or integer overflows.</td>
</tr>
<tr>
<td><a href="/previous-versions/windows/desktop/api/Amvideo/nf-amvideo-colors"><strong>COLORS</strong></a></td>
<td>Retrieves the palette entries from a <a href="/previous-versions/windows/desktop/api/amvideo/ns-amvideo-videoinfo"><strong>VIDEOINFO</strong></a> structure</td>
</tr>
<tr>
<td><a href="containspalette.html"><strong>ContainsPalette</strong></a></td>
<td>Determines whether a specified <a href="/previous-versions/windows/desktop/api/amvideo/ns-amvideo-videoinfoheader"><strong>VIDEOINFOHEADER</strong></a> structure contains a palette.</td>
</tr>
<tr>
<td><a href="convertvideoinfotovideoinfo2.html"><strong>ConvertVideoInfoToVideoInfo2</strong></a></td>
<td>Converts a media type that uses <a href="/previous-versions/windows/desktop/api/amvideo/ns-amvideo-videoinfoheader"><strong>VIDEOINFOHEADER</strong></a> to one that uses <a href="/previous-versions/windows/desktop/api/dvdmedia/ns-dvdmedia-videoinfoheader2"><strong>VIDEOINFOHEADER2</strong></a></td>
</tr>
<tr>
<td><a href="/previous-versions/windows/desktop/api/Amvideo/nf-amvideo-dibsize"><strong>DIBSIZE</strong></a></td>
<td>Calculates the number of bytes required by a device-independent bitmap (DIB).</td>
</tr>
<tr>
<td><a href="getbitcount.html"><strong>GetBitCount</strong></a></td>
<td>Returns the number of bits per pixel used by a specified video subtype.</td>
</tr>
<tr>
<td><a href="getbitmapformatsize.html"><strong>GetBitmapFormatSize</strong></a></td>
<td>Calculates the size needed for a <a href="/previous-versions/windows/desktop/api/amvideo/ns-amvideo-videoinfo"><strong>VIDEOINFO</strong></a> structure that can hold a specified <a href="/windows/win32/api/wingdi/ns-wingdi-bitmapinfoheader"><strong>BITMAPINFOHEADER</strong></a> structure.</td>
</tr>
<tr>
<td><a href="getbitmappalette.html"><strong>GetBitmapPalette</strong></a></td>
<td>Returns the first palette entry in a <a href="/previous-versions/windows/desktop/api/amvideo/ns-amvideo-videoinfoheader"><strong>VIDEOINFOHEADER</strong></a> structure.</td>
</tr>
<tr>
<td><a href="getbitmapsize.html"><strong>GetBitmapSize</strong></a></td>
<td>Calculates the number of bytes required by a device-independent bitmap (DIB).</td>
</tr>
<tr>
<td><a href="getbitmapsubtype.html"><strong>GetBitmapSubtype</strong></a></td>
<td>Returns the media subtype <strong>GUID</strong> for the specified bitmap.</td>
</tr>
<tr>
<td><a href="getsubtypename.html"><strong>GetSubtypeName</strong></a></td>
<td>Retrieves the human-readable name of a video subtype.</td>
</tr>
<tr>
<td><a href="gettruecolortype.html"><strong>GetTrueColorType</strong></a></td>
<td>Returns the media subtype <strong>GUID</strong> for a 16-bit uncompressed RGB bitmap.</td>
</tr>
<tr>
<td><a href="/previous-versions/windows/desktop/api/Amvideo/nf-amvideo-header"><strong>HEADER</strong></a></td>
<td>Returns the address of the <a href="/windows/win32/api/wingdi/ns-wingdi-bitmapinfoheader"><strong>BITMAPINFOHEADER</strong></a> within a <a href="/previous-versions/windows/desktop/api/amvideo/ns-amvideo-videoinfoheader"><strong>VIDEOINFOHEADER</strong></a>.</td>
</tr>
<tr>
<td><a href="/previous-versions/windows/desktop/api/amvideo/nf-amvideo-mpeg1_sequence_info"><strong>MPEG1_SEQUENCE_INFO</strong></a></td>
<td>Returns the address of the sequence header inside an <a href="/previous-versions/windows/desktop/api/amvideo/ns-amvideo-mpeg1videoinfo"><strong>MPEG1VIDEOINFO</strong></a> structure.</td>
</tr>
<tr>
<td><a href="/previous-versions/windows/desktop/api/Amvideo/nf-amvideo-palettised"><strong>PALETTISED</strong></a></td>
<td>Checks whether a bitmap has a color depth of 8 bits or less.</td>
</tr>
<tr>
<td><a href="/previous-versions/windows/desktop/api/Amvideo/nf-amvideo-palette_entries"><strong>PALETTE_ENTRIES</strong></a></td>
<td>Retrieves the maximum number of colors in the palette of a specified bitmap.</td>
</tr>
<tr>
<td><a href="/previous-versions/windows/desktop/api/Amvideo/nf-amvideo-reset_masks"><strong>RESET_MASKS</strong></a></td>
<td>Fills the color mask fields in a <a href="/previous-versions/windows/desktop/api/amvideo/ns-amvideo-videoinfo"><strong>VIDEOINFO</strong></a> structure with zeroes.</td>
</tr>
<tr>
<td><a href="/previous-versions/windows/desktop/api/Amvideo/nf-amvideo-reset_header"><strong>RESET_HEADER</strong></a></td>
<td>Fills a <a href="/previous-versions/windows/desktop/api/amvideo/ns-amvideo-videoinfoheader"><strong>VIDEOINFOHEADER</strong></a> with zeroes.</td>
</tr>
<tr>
<td><a href="/previous-versions/windows/desktop/api/Amvideo/nf-amvideo-reset_palette"><strong>RESET_PALETTE</strong></a></td>
<td>Fills the palette entries in a <a href="/previous-versions/windows/desktop/api/amvideo/ns-amvideo-videoinfo"><strong>VIDEOINFO</strong></a> structure with zeroes.</td>
</tr>
<tr>
<td><a href="/previous-versions/windows/desktop/legacy/dd377602(v=vs.85)"><strong>SIZE_EGA_PALETTE</strong></a></td>
<td>Calculates the size needed for the palette entries in a 4-bit RGB bitmap.</td>
</tr>
<tr>
<td><a href="/previous-versions/windows/desktop/legacy/dd377603(v=vs.85)"><strong>SIZE_MASKS</strong></a></td>
<td>Calculates the size of the color masks in a <a href="/previous-versions/windows/desktop/api/amvideo/ns-amvideo-videoinfo"><strong>VIDEOINFO</strong></a> structure.</td>
</tr>
<tr>
<td><a href="/previous-versions/windows/desktop/api/Amvideo/nf-amvideo-size_mpeg1videoinfo"><strong>SIZE_MPEG1VIDEOINFO</strong></a></td>
<td>Calculates the size of an <a href="/previous-versions/windows/desktop/api/amvideo/ns-amvideo-mpeg1videoinfo"><strong>MPEG1VIDEOINFO</strong></a> structure, including the sequence header.</td>
</tr>
<tr>
<td><a href="/previous-versions/windows/desktop/legacy/dd377605(v=vs.85)"><strong>SIZE_PALETTE</strong></a></td>
<td>calculates the size of the palette entries in a <a href="/previous-versions/windows/desktop/api/amvideo/ns-amvideo-videoinfo"><strong>VIDEOINFO</strong></a> structure.</td>
</tr>
<tr>
<td><a href="/previous-versions/windows/desktop/legacy/dd377606(v=vs.85)"><strong>SIZE_PREHEADER</strong></a></td>
<td>Calculates the byte offset of the <strong>bmiHeader</strong> field within a <a href="/previous-versions/windows/desktop/api/amvideo/ns-amvideo-videoinfoheader"><strong>VIDEOINFOHEADER</strong></a> structure.</td>
</tr>
<tr>
<td><a href="/previous-versions/windows/desktop/legacy/dd377607(v=vs.85)"><strong>SIZE_VIDEOHEADER</strong></a></td>
<td>Calculates the size of the <a href="/previous-versions/windows/desktop/api/amvideo/ns-amvideo-videoinfoheader"><strong>VIDEOINFOHEADER</strong></a> structure.</td>
</tr>
<tr>
<td><a href="/previous-versions/windows/desktop/legacy/dd407230(v=vs.85)"><strong>TRUECOLOR</strong></a></td>
<td>Returns the <a href="/previous-versions/windows/desktop/api/amvideo/ns-amvideo-truecolorinfo"><strong>TRUECOLORINFO</strong></a> structure from a <a href="/previous-versions/windows/desktop/api/amvideo/ns-amvideo-videoinfo"><strong>VIDEOINFO</strong></a> structure.</td>
</tr>
<tr>
<td><a href="validatebitmapinfoheader.html"><strong>ValidateBitmapInfoHeader</strong></a></td>
<td>Checks a <a href="/windows/win32/api/wingdi/ns-wingdi-bitmapinfoheader"><strong>BITMAPINFOHEADER</strong></a> structure for errors that can cause buffer overruns or integer overflows.</td>
</tr>
</tbody>
</table>
<p>Â </p>
<h2>Remarks</h2>
<p>Most of the macros and functions described in the section are designed for manipulating <strong>VIDEOINFOHEADER</strong> and <strong>VIDEOINFO</strong> structures for RGB bitmaps. Use these macros with care: Most of them assume that the specified structure has been initialized properly. Many of them also assume that the <strong>BITMAPINFOHEADER</strong> structure is the standard size; that is, <code>biSize == sizeof(BITMAPINFOHEADER)</code>.</p>
<p>The DirectShow base class library also provide the following global constants, which define the standard color masks for true-color bitmaps.</p>
<table>
<thead>
<tr>
<th>Global Data</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>bits555</strong></td>
<td>Array of color masks for a 16-bit RGB bitmap in 5-5-5 format.</td>
</tr>
<tr>
<td><strong>bits565</strong></td>
<td>Array of color masks for a 16-bit RGB bitmap in 5-6-5 format.</td>
</tr>
<tr>
<td><strong>bits888</strong></td>
<td>Array of color masks for a 24-bit RGB bitmap.</td>
</tr>
</tbody>
</table>
<p>Â </p>
<p>Each of these constants in an array of three <strong>DWORD</strong>s, containing the red, green, and blue masks, in that order.</p>
<p>Â </p>
<p>Â </p>
</body>
