<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>About the Filter Graph Manager</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: About the Filter Graph Manager
ms.assetid: a227539a-7f9a-4f8d-99fe-f9ab67df9ef4
title: About the Filter Graph Manager
ms.topic: article
ms.date: 4/26/2023
ms.custom: UpdateFrequency5</h2>
<h1>About the Filter Graph Manager</h1>
<p>[The feature associated with this page, <a href="/windows/win32/directshow/directshow">DirectShow</a>, is a legacy feature. It has been superseded by <a href="/uwp/api/Windows.Media.Playback.MediaPlayer">MediaPlayer</a>, <a href="/windows/win32/api/mfmediaengine/nn-mfmediaengine-imfmediaengine">IMFMediaEngine</a>, and <a href="/windows/win32/medfound/audio-video-capture-in-media-foundation">Audio/Video Capture in Media Foundation</a>. Those features have been optimized for Windows 10 and Windows 11. Microsoft strongly recommends that new code use <strong>MediaPlayer</strong>, <strong>IMFMediaEngine</strong> and <strong>Audio/Video Capture in Media Foundation</strong> instead of <strong>DirectShow</strong>, when possible. Microsoft suggests that existing code that uses the legacy APIs be rewritten to use the new APIs if possible.]</p>
<p>The <a href="filter-graph-manager.html">Filter Graph Manager</a> is a COM object that controls the filters in a filter graph. It performs many functions, including the following:</p>
<ul>
<li>Coordinating state changes among the filters.</li>
<li>Establishing a reference clock.</li>
<li>Communicating events back to the application.</li>
<li>Providing methods for applications to build the filter graph.</li>
</ul>
<p>Each of these functions is described briefly here. Details can be found elsewhere in the documentation.</p>
<p><strong>State changes</strong>. State changes within filters must occur in a particular order. Therefore, the application does not issue state-change commands directly to the filters. Instead, it gives a single command to the Filter Graph Manager, which distributes the command to each of the filters. Seeking works in a similar fashion: The application gives a seek command to the Filter Graph Manager, which distributes it to the filters.</p>
<p><strong>Reference clock</strong>. All of the filters in the graph use the same clock, called a <em>reference clock</em>. The reference clock ensures that all the streams are synchronized. The time at which a video frame or audio sample should be rendered is called the <em>presentation time</em>. The presentation time is measured relative to the reference clock. The Filter Graph Manager chooses a reference clock, usually either the clock on the sound card, or the system clock.</p>
<p><strong>Graph events</strong>. The Filter Graph Manager uses an event queue to inform the application of events that occur in the filter graph. This mechanism is similar to a Windows message loop.</p>
<p><strong>Graph-building methods</strong>. The Filter Graph Manager provides methods for the application to add filters to the graph, connect filters to other filters, and disconnect filters.</p>
<p>One function the Filter Graph Manager does not handle is moving data from one filter to the next. This is done by the filters themselves, through their pin connections. Processing always happens on a separate thread.</p>
<blockquote>
<p>[!Note]<br />
Filters are always free-threaded, reside in the same process as the Filter Graph Manager, and are loaded from in-process servers. Therefore, method calls are not marshaled between filters, or between filters and the Filter Graph Manager.</p>
</blockquote>
<p>Â </p>
<h2>Related topics</h2>
<!-- raw HTML omitted -->
<p><a href="data-flow-in-the-filter-graph.html">Data Flow in the Filter Graph</a></p>
<!-- raw HTML omitted -->
<p><a href="event-notification-in-directshow.html">Event Notification in DirectShow</a></p>
<!-- raw HTML omitted -->
<p><a href="setting-the-graph-clock.html">Setting the Graph Clock</a></p>
<!-- raw HTML omitted -->
<p><a href="time-and-clocks-in-directshow.html">Time and Clocks in DirectShow</a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
