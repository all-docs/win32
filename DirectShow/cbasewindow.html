<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>CBaseWindow class</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<p>description: The CBaseWindow class is a base class for managing windows.
ms.assetid: 212d179e-5b5e-49fb-bf0a-a12e0317c96a
title: CBaseWindow class (Winutil.h)
ms.topic: reference
ms.date: 4/26/2023
topic_type:</p>
<ul>
<li>APIRef</li>
<li>kbSyntax
api_name:</li>
<li>CBaseWindow
api_type:</li>
<li>COM
api_location:</li>
<li>Strmbase.lib</li>
<li>Strmbase.dll</li>
<li>Strmbasd.lib</li>
<li>Strmbasd.dll
ms.custom: UpdateFrequency5</li>
</ul>
<hr />
<h1>CBaseWindow class</h1>
<p>[The feature associated with this page, <a href="/windows/win32/directshow/directshow">DirectShow</a>, is a legacy feature. It has been superseded by <a href="/uwp/api/Windows.Media.Playback.MediaPlayer">MediaPlayer</a>, <a href="/windows/win32/api/mfmediaengine/nn-mfmediaengine-imfmediaengine">IMFMediaEngine</a>, and <a href="/windows/win32/medfound/audio-video-capture-in-media-foundation">Audio/Video Capture in Media Foundation</a>. Those features have been optimized for Windows 10 and Windows 11. Microsoft strongly recommends that new code use <strong>MediaPlayer</strong>, <strong>IMFMediaEngine</strong> and <strong>Audio/Video Capture in Media Foundation</strong> instead of <strong>DirectShow</strong>, when possible. Microsoft suggests that existing code that uses the legacy APIs be rewritten to use the new APIs if possible.]</p>
<p>The <code>CBaseWindow</code> class is a base class for managing windows. Video renderers can use this class to create video windows. To use this class, create a derived class that inherits from <code>CBaseWindow</code>. In the derived class:</p>
<ul>
<li>Implement the pure virtual method <a href="cbasewindow-getclasswindowstyles.html"><strong>CBaseWindow::GetClassWindowStyles</strong></a>, which defines the window styles.</li>
<li>Override the <a href="cbasewindow-onreceivemessage.html"><strong>CBaseWindow::OnReceiveMessage</strong></a> method, which handles window messages.</li>
<li>Implement a destructor that calls the <a href="cbasewindow-donewithwindow.html"><strong>CBaseWindow::DoneWithWindow</strong></a> method.</li>
</ul>
<p>Before using an instance of the derived class, call the <a href="cbasewindow-preparewindow.html"><strong>CBaseWindow::PrepareWindow</strong></a> method.</p>
<table>
<thead>
<tr>
<th>Protected Member Variables</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="cbasewindow-m-hinstance.html"><strong>m_hInstance</strong></a></td>
<td>Handle to the module instance.</td>
</tr>
<tr>
<td><a href="cbasewindow-m-hwnd.html"><strong>m_hwnd</strong></a></td>
<td>Handle to the object's window.</td>
</tr>
<tr>
<td><a href="cbasewindow-m-hdc.html"><strong>m_hdc</strong></a></td>
<td>Handle to the window's device context.</td>
</tr>
<tr>
<td><a href="cbasewindow-m-width.html"><strong>m_Width</strong></a></td>
<td>Width of the client area, in pixels.</td>
</tr>
<tr>
<td><a href="cbasewindow-m-height.html"><strong>m_Height</strong></a></td>
<td>Height of the client area, in pixels.</td>
</tr>
<tr>
<td><a href="cbasewindow-m-bactivated.html"><strong>m_bActivated</strong></a></td>
<td>Flag that specifies whether the window has been activated.</td>
</tr>
<tr>
<td><a href="cbasewindow-m-pclassname.html"><strong>m_pClassName</strong></a></td>
<td>Static string that contains the name of the window class.</td>
</tr>
<tr>
<td><a href="cbasewindow-m-classstyles.html"><strong>m_ClassStyles</strong></a></td>
<td>Class styles for the window.</td>
</tr>
<tr>
<td><a href="cbasewindow-m-windowstyles.html"><strong>m_WindowStyles</strong></a></td>
<td>Window styles for the window.</td>
</tr>
<tr>
<td><a href="cbasewindow-m-windowstylesex.html"><strong>m_WindowStylesEx</strong></a></td>
<td>Extended window styles for the window.</td>
</tr>
<tr>
<td><a href="cbasewindow-m-showstagemessage.html"><strong>m_ShowStageMessage</strong></a></td>
<td>Private message that brings the window to the foreground.</td>
</tr>
<tr>
<td><a href="cbasewindow-m-showstagetop.html"><strong>m_ShowStageTop</strong></a></td>
<td>Private message that sets the window style to WS_EX_TOPMOST.</td>
</tr>
<tr>
<td><a href="cbasewindow-m-realizepalette.html"><strong>m_RealizePalette</strong></a></td>
<td>Private message that realizes the palette.</td>
</tr>
<tr>
<td><a href="cbasewindow-m-memorydc.html"><strong>m_MemoryDC</strong></a></td>
<td>Handle to the memory device context.</td>
</tr>
<tr>
<td><a href="cbasewindow-m-hpalette.html"><strong>m_hPalette</strong></a></td>
<td>Handle to the window's palette.</td>
</tr>
<tr>
<td><a href="cbasewindow-m-bnorealize.html"><strong>m_bNoRealize</strong></a></td>
<td>Flag that specifies whether the window should realize its palette.</td>
</tr>
<tr>
<td><a href="cbasewindow-m-bbackground.html"><strong>m_bBackground</strong></a></td>
<td>Flag that specifies whether the palette should be a background palette.</td>
</tr>
<tr>
<td><a href="cbasewindow-m-brealizing.html"><strong>m_bRealizing</strong></a></td>
<td>Flag that specifies whether a new palette is being realized.</td>
</tr>
<tr>
<td><a href="cbasewindow-m-windowlock.html"><strong>m_WindowLock</strong></a></td>
<td>Critical section, to serialize access to the object.</td>
</tr>
<tr>
<td><a href="cbasewindow-m-bdogetdc.html"><strong>m_bDoGetDC</strong></a></td>
<td>Flag that specifies whether to retrieve the device context.</td>
</tr>
<tr>
<td><a href="cbasewindow-m-bdoposttodestroy.html"><strong>m_bDoPostToDestroy</strong></a></td>
<td>Flag that specifies whether the window posts or sends its destruction message.</td>
</tr>
<tr>
<td>Protected Methods</td>
<td>Description</td>
</tr>
<tr>
<td><a href="cbasewindow-onpalettechange.html"><strong>OnPaletteChange</strong></a></td>
<td>Handles palette-change messages. Virtual.</td>
</tr>
<tr>
<td>Public Methods</td>
<td>Description</td>
</tr>
<tr>
<td><a href="cbasewindow-cbasewindow.html"><strong>CBaseWindow</strong></a></td>
<td>Constructor method.</td>
</tr>
<tr>
<td><a href="cbasewindow-donewithwindow.html"><strong>DoneWithWindow</strong></a></td>
<td>Destroys the window. Virtual.</td>
</tr>
<tr>
<td><a href="cbasewindow-preparewindow.html"><strong>PrepareWindow</strong></a></td>
<td>Creates the window. Virtual.</td>
</tr>
<tr>
<td><a href="cbasewindow-inactivatewindow.html"><strong>InactivateWindow</strong></a></td>
<td>Inactivates the window. Virtual.</td>
</tr>
<tr>
<td><a href="cbasewindow-activatewindow.html"><strong>ActivateWindow</strong></a></td>
<td>Sizes the window according to the requirements of the derived class. Virtual.</td>
</tr>
<tr>
<td><a href="cbasewindow-onsize.html"><strong>OnSize</strong></a></td>
<td>Handles WM_SIZE messages. Virtual.</td>
</tr>
<tr>
<td><a href="cbasewindow-onclose.html"><strong>OnClose</strong></a></td>
<td>Handles WM_CLOSE messages. Virtual.</td>
</tr>
<tr>
<td><a href="cbasewindow-getdefaultrect.html"><strong>GetDefaultRect</strong></a></td>
<td>Retrieves the default size of the client area. Virtual.</td>
</tr>
<tr>
<td><a href="cbasewindow-uninitialisewindow.html"><strong>UninitialiseWindow</strong></a></td>
<td>Releases the window's resources. Virtual.</td>
</tr>
<tr>
<td><a href="cbasewindow-initialisewindow.html"><strong>InitialiseWindow</strong></a></td>
<td>Initializes the window. Virtual.</td>
</tr>
<tr>
<td><a href="cbasewindow-completeconnect.html"><strong>CompleteConnect</strong></a></td>
<td>Notifies the window that the renderer's input pin has been connected.</td>
</tr>
<tr>
<td><a href="cbasewindow-docreatewindow.html"><strong>DoCreateWindow</strong></a></td>
<td>Creates the window.</td>
</tr>
<tr>
<td><a href="cbasewindow-performancealignwindow.html"><strong>PerformanceAlignWindow</strong></a></td>
<td>Aligns the window to a <strong>DWORD</strong> boundary, for maximum performance.</td>
</tr>
<tr>
<td><a href="cbasewindow-doshowwindow.html"><strong>DoShowWindow</strong></a></td>
<td>Sets the window's show state.</td>
</tr>
<tr>
<td><a href="cbasewindow-paintwindow.html"><strong>PaintWindow</strong></a></td>
<td>Causes the window to be repainted.</td>
</tr>
<tr>
<td><a href="cbasewindow-dosetwindowforeground.html"><strong>DoSetWindowForeground</strong></a></td>
<td>Brings the window to the foreground.</td>
</tr>
<tr>
<td><a href="cbasewindow-setpalette.html"><strong>SetPalette</strong></a></td>
<td>Installs a palette for the window. Virtual.</td>
</tr>
<tr>
<td><a href="cbasewindow-setrealize.html"><strong>SetRealize</strong></a></td>
<td>Specifies whether the window realizes palettes.</td>
</tr>
<tr>
<td><a href="cbasewindow-dorealisepalette.html"><strong>DoRealisePalette</strong></a></td>
<td>Realizes the window's current palette. Virtual.</td>
</tr>
<tr>
<td><a href="cbasewindow-possiblyeatmessage.html"><strong>PossiblyEatMessage</strong></a></td>
<td>Enables a derived class to forward messages to another window. Virtual.</td>
</tr>
<tr>
<td><a href="cbasewindow-getwindowwidth.html"><strong>GetWindowWidth</strong></a></td>
<td>Retrieves the current width of the window.</td>
</tr>
<tr>
<td><a href="cbasewindow-getwindowheight.html"><strong>GetWindowHeight</strong></a></td>
<td>Retrieves the current height of the window.</td>
</tr>
<tr>
<td><a href="cbasewindow-getwindowhwnd.html"><strong>GetWindowHWND</strong></a></td>
<td>Retrieves a handle to the window.</td>
</tr>
<tr>
<td><a href="cbasewindow-getmemoryhdc.html"><strong>GetMemoryHDC</strong></a></td>
<td>Retrieves a handle to the memory device context.</td>
</tr>
<tr>
<td><a href="cbasewindow-getwindowhdc.html"><strong>GetWindowHDC</strong></a></td>
<td>Retrieves a handle to the window's device context.</td>
</tr>
<tr>
<td><a href="cbasewindow-onreceivemessage.html"><strong>OnReceiveMessage</strong></a></td>
<td>Handles window messages. Virtual.</td>
</tr>
<tr>
<td><a href="cbasewindow-unsetpalette.html"><strong>UnsetPalette</strong></a></td>
<td>Deletes the window's current palette and restores the default system palette.</td>
</tr>
<tr>
<td>Pure Virtual Methods</td>
<td>Description</td>
</tr>
<tr>
<td><a href="cbasewindow-getclasswindowstyles.html"><strong>GetClassWindowStyles</strong></a></td>
<td>Retrieves the window's class styles and window styles.</td>
</tr>
</tbody>
</table>
<h2>Requirements</h2>
<table>
<thead>
<tr>
<th>Requirement</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header<!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted -->Winutil.h (include Streams.h)<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Library<!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted -->Strmbase.lib (retail builds); <!-- raw HTML omitted --> <!-- raw HTML omitted -->Strmbasd.lib (debug builds)<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<h2>See also</h2>
<!-- raw HTML omitted -->
<p><a href="cdrawimage.html"><strong>CDrawImage Class</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="cbasecontrolwindow.html"><strong>CBaseControlWindow Class</strong></a></p>
<!-- raw HTML omitted -->
</body>
