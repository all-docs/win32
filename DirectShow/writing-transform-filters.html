<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Writing Transform Filters</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: Writing Transform Filters
ms.assetid: ce84756b-34ee-4710-8f0f-7553733ca10a
title: Writing Transform Filters
ms.topic: article
ms.date: 4/26/2023
ms.custom: UpdateFrequency5</h2>
<h1>Writing Transform Filters</h1>
<p>[The feature associated with this page, <a href="/windows/win32/directshow/directshow">DirectShow</a>, is a legacy feature. It has been superseded by <a href="/uwp/api/Windows.Media.Playback.MediaPlayer">MediaPlayer</a>, <a href="/windows/win32/api/mfmediaengine/nn-mfmediaengine-imfmediaengine">IMFMediaEngine</a>, and <a href="/windows/win32/medfound/audio-video-capture-in-media-foundation">Audio/Video Capture in Media Foundation</a>. Those features have been optimized for Windows 10 and Windows 11. Microsoft strongly recommends that new code use <strong>MediaPlayer</strong>, <strong>IMFMediaEngine</strong> and <strong>Audio/Video Capture in Media Foundation</strong> instead of <strong>DirectShow</strong>, when possible. Microsoft suggests that existing code that uses the legacy APIs be rewritten to use the new APIs if possible.]</p>
<p>This section describes how to write a transform filter, defined as a filter that has exactly one input pin and one output pin. To illustrate the steps, this section describes a hypothetical transform filter that outputs run-length encoded (RLE) video. It does not describe the RLE-encoding algorithm itself, only the tasks that are specific to DirectShow. (DirectShow already provides an RLE codec through the <a href="avi-compressor-filter.html">AVI Compressor</a> filter.)</p>
<p>This section assumes that you will use the DirectShow base class library to create filters. Although you can write a filter without it, the base class library is strongly recommended.</p>
<blockquote>
<p>[!Note]<br />
Before writing a transform filter, consider whether a DirectX Media Object (DMO) would fulfill your requirements. DMOs can do many of the same things as filters, and the programming model for DMOs is simpler. DMOs are hosted in DirectShow through the <a href="dmo-wrapper-filter.html">DMO Wrapper</a> filter, but can also be used outside of DirectShow. DMOs are now the recommended solution for encoders and decoders.</p>
</blockquote>
<p>Â </p>
<p>This section includes the following topics:</p>
<ul>
<li><a href="step-1--choose-a-base-class.html">Step 1. Choose a Base Class</a></li>
<li><a href="step-2--declare-the-filter-class.html">Step 2. Declare the Filter Class</a></li>
<li><a href="step-3--support-media-type-negotiation.html">Step 3. Support Media Type Negotiation</a></li>
<li><a href="step-4--set-allocator-properties.html">Step 4. Set Allocator Properties</a></li>
<li><a href="step-5--transform-the-image.html">Step 5. Transform the Image</a></li>
<li><a href="step-6--add-support-for-com.html">Step 6. Add Support for COM</a></li>
</ul>
<h2>Related topics</h2>
<!-- raw HTML omitted -->
<p><a href="building-directshow-filters.html">Building DirectShow Filters</a></p>
<!-- raw HTML omitted -->
<p><a href="directshow-base-classes.html">DirectShow Base Classes</a></p>
<!-- raw HTML omitted -->
<p><a href="writing-directshow-filters.html">Writing DirectShow Filters</a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
