<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>What's New in Event Tracing</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: This section describes the new features that were added to Event Tracing for Windows in each release.
ms.assetid: 5d94a6d2-2280-4a97-aa5a-c9ca2c016c84
title: What's New in Event Tracing
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>What's New in Event Tracing</h1>
<p>This section describes the new features that were added to Event Tracing for Windows in each release.</p>
<h2>Windows 10, version 1709</h2>
<p>ETW can now optionally track binaries for all providers that are enabled to the session. The tracking applies retroactively for providers that were enabled to the session prior to the call, as well as for all future providers that are enabled to the session. You can also now query for the currently-configured maximum number of system loggers allowed by the operating system. For more information, see the <strong>TraceProviderBinaryTracking</strong> and <strong>TraceMaxLoggersQuery</strong> values of the <a href="/windows/win32/api/evntrace/ne-evntrace-trace_query_info_class"><strong>TRACE_INFO_CLASS</strong></a> enumeration, as well as <a href="retrieving-additional-event-tracing-data.html">Retrieving Additional Event Tracing Data</a>.</p>
<p>ETW can now filter events based on event name. You can also determine which events get their stacks captured. For more information, see the <strong>EVENT_FILTER_TYPE_EVENT_NAME</strong>, <strong>EVENT_FILTER_TYPE_STACKWALK_NAME</strong> , and <strong>EVENT_FILTER_TYPE_STACKWALK_LEVEL_KW</strong> values of the <a href="/windows/desktop/api/Evntprov/ns-evntprov-event_filter_descriptor"><strong>EVENT_FILTER_DESCRIPTOR</strong></a> structure, as well as the associated <a href="/windows/desktop/api/Evntprov/ns-evntprov-event_filter_event_name"><strong>EVENT_FILTER_EVENT_NAME</strong></a> and <a href="/windows/desktop/api/Evntprov/ns-evntprov-event_filter_level_kw"><strong>EVENT_FILTER_LEVEL_KW</strong></a> structures.</p>
<h2>Windows 10</h2>
<p><a href="../tracelogging/trace-logging-portal.html">TraceLogging</a> builds on ETW and provides a simplified way to instrument code for native, .NET and WinRT developers. TraceLogging allows you to include structured data with events, correlate events, and does not require a separate instrumentation manifest XML file.</p>
<p><a href="provider-traits.html">Provider Traits</a> were added as a method of attaching more data to an individual provider registration. They can be used for manifest-based or TraceLogging providers. This currently includes support for adding a Provider Name and/or a Provider Group to an individual provider registration. Provider Groups are a new feature to allow multiple ETW providers to be controlled in aggregate by the group they belong to.</p>
<p>Periodic capture state is a way to allow capture state notifications to be routinely sent to providers. When this is enabled, notifications will only be sent to provider registrations that have been previously enabled to the current session. Each provider can define its own response (if any) to a notification. For implementation details, see <a href="/windows/win32/api/evntrace/ns-evntrace-trace_periodic_capture_state_info"><strong>TRACE_PERIODIC_CAPTURE_STATE_INFO</strong></a>.</p>
<h2>Windows 8.1 and Windows Server 2012 R2</h2>
<p>The following features have been added to Event Tracing on WindowsÂ 8.1 and Windows ServerÂ 2012Â R2.</p>
<p>Functions that support using event payload, scope, and stack walk filters used by the <a href="/windows/win32/api/evntrace/nf-evntrace-enabletraceex2"><strong>EnableTraceEx2</strong></a> function and the <a href="/windows/win32/api/evntrace/ns-evntrace-enable_trace_parameters"><strong>ENABLE_TRACE_PARAMETERS</strong></a> and <a href="/windows/desktop/api/Evntprov/ns-evntprov-event_filter_descriptor"><strong>EVENT_FILTER_DESCRIPTOR</strong></a> structures to filter on specific conditions in a logger session. For more information, see:</p>
<ul>
<li><a href="/windows/desktop/api/Tdh/nf-tdh-tdhaggregatepayloadfilters"><strong>TdhAggregatePayloadFilters</strong></a></li>
<li><a href="/windows/desktop/api/Tdh/nf-tdh-tdhcleanuppayloadeventfilterdescriptor"><strong>TdhCleanupPayloadEventFilterDescriptor</strong></a></li>
<li><a href="/windows/desktop/api/Tdh/nf-tdh-tdhcreatepayloadfilter"><strong>TdhCreatePayloadFilter</strong></a></li>
<li><a href="/windows/desktop/api/Tdh/nf-tdh-tdhdeletepayloadfilter"><strong>TdhDeletePayloadFilter</strong></a></li>
</ul>
<p>In addition, see the extensively revised documentation for the <a href="/windows/win32/api/evntrace/nf-evntrace-enabletraceex2"><strong>EnableTraceEx2</strong></a> function and the <a href="/windows/win32/api/evntrace/ns-evntrace-enable_trace_parameters"><strong>ENABLE_TRACE_PARAMETERS</strong></a> and <a href="/windows/desktop/api/Evntprov/ns-evntprov-event_filter_descriptor"><strong>EVENT_FILTER_DESCRIPTOR</strong></a> structures that are used by these features.</p>
<p>A structure that defines an event payload filter predicate that describes how to filter on a single field in a trace session used by the new <a href="/windows/desktop/api/Tdh/nf-tdh-tdhcreatepayloadfilter"><strong>TdhCreatePayloadFilter</strong></a> function and a new structure used by event ID and stack walk filters. For more information, see:</p>
<ul>
<li><a href="/windows/desktop/api/Evntprov/ns-evntprov-event_filter_event_id"><strong>EVENT_FILTER_EVENT_ID</strong></a></li>
<li><a href="/windows/desktop/api/Tdh/ns-tdh-payload_filter_predicate"><strong>PAYLOAD_FILTER_PREDICATE</strong></a></li>
</ul>
<p>Functions that retrieve information on events present in the provider manifest. For more information, see:</p>
<ul>
<li><a href="/windows/desktop/api/Tdh/nf-tdh-tdhenumeratemanifestproviderevents"><strong>TdhEnumerateManifestProviderEvents</strong></a></li>
<li><a href="/windows/desktop/api/Tdh/nf-tdh-tdhgetmanifesteventinformation"><strong>TdhGetManifestEventInformation</strong></a></li>
</ul>
<p>A structure that defines an array of events in a provider manifest used by the new <a href="/windows/desktop/api/Tdh/nf-tdh-tdhenumeratemanifestproviderevents"><strong>TdhEnumerateManifestProviderEvents</strong></a> function. For more information, see:</p>
<ul>
<li><a href="/windows/desktop/api/Tdh/ns-tdh-provider_event_info"><strong>PROVIDER_EVENT_INFO</strong></a></li>
</ul>
<h2>Windows 8 and Windows Server 2012</h2>
<p>The following features have been added to the Event Tracing on WindowsÂ 8 and Windows ServerÂ 2012.</p>
<p>Functions that performs operations on a registration object, provide event payload parsing, provide trace provider browsing, query event tracing session settings, and process a relogged trace file. For more information, see:</p>
<ul>
<li><a href="/windows/desktop/api/Evntprov/nf-evntprov-eventsetinformation"><strong>EventSetInformation</strong></a></li>
<li><a href="/windows/desktop/api/Tdh/nf-tdh-tdhclosedecodinghandle"><strong>TdhCloseDecodingHandle</strong></a></li>
<li><a href="/windows/desktop/api/Tdh/nf-tdh-tdhgetdecodingparameter"><strong>TdhGetDecodingParameter</strong></a></li>
<li><a href="/windows/desktop/api/Tdh/nf-tdh-tdhgetwppproperty"><strong>TdhGetWppProperty</strong></a></li>
<li><a href="/windows/desktop/api/Tdh/nf-tdh-tdhgetwppmessage"><strong>TdhGetWppMessage</strong></a></li>
<li><a href="/windows/desktop/api/Tdh/nf-tdh-tdhloadmanifestfrombinary"><strong>TdhLoadManifestFromBinary</strong></a></li>
<li><a href="/windows/desktop/api/Tdh/nf-tdh-tdhopendecodinghandle"><strong>TdhOpenDecodingHandle</strong></a></li>
<li><a href="/windows/desktop/api/Tdh/nf-tdh-tdhsetdecodingparameter"><strong>TdhSetDecodingParameter</strong></a></li>
<li><a href="/windows/win32/api/evntrace/nf-evntrace-tracequeryinformation"><strong>TraceQueryInformation</strong></a></li>
</ul>
<p>Interfaces that provide information to the relogger on the tracing process and when events are logged, access to data for a specific event, and access to relogger features that allow the manipulation of Event Trace Log (ETL) files. For more information, see:</p>
<ul>
<li><a href="/windows/desktop/api/Relogger/nn-relogger-itraceevent"><strong>ITraceEvent</strong></a></li>
<li><a href="/windows/desktop/api/Relogger/nn-relogger-itraceeventcallback"><strong>ITraceEventCallback</strong></a></li>
<li><a href="/windows/desktop/api/Relogger/nn-relogger-itracerelogger"><strong>ITraceRelogger</strong></a></li>
</ul>
<p>Additional enumerations used by the new functions and interfaces. For more information, see:</p>
<ul>
<li><a href="/windows/desktop/api/Evntprov/ne-evntprov-event_info_class"><strong>EVENT_INFO_CLASS</strong></a></li>
<li><a href="/windows/win32/api/evntrace/ne-evntrace-trace_query_info_class"><strong>TRACE_QUERY_INFO_CLASS</strong></a></li>
</ul>
<h2>Windows 7 and Windows Server 2008 R2</h2>
<p>The following features were added in this release:</p>
<ul>
<li>The ability for providers to define filters in the manifest. In WindowsÂ Vista, controllers could pass filter data to the provider. However, the layout of the filter data was not defined in the manifest, so the provider would have to use other means to provide the filter definition to controllers. With this release, providers can define the filter definition in the manifest (see the <strong>filters</strong> attribute of the <a href="../wes/eventmanifestschema-providertype-complextype.html"><strong>ProviderType</strong></a> complex type). Controllers can then use the <a href="/windows/desktop/api/Tdh/nf-tdh-tdhenumerateproviderfilters"><strong>TdhEnumerateProviderFilters</strong></a> function to determine the filter definition. Providers that use filters should use the <a href="/windows/desktop/api/Evntprov/nf-evntprov-eventwriteex"><strong>EventWriteEx</strong></a> function to write the event.</li>
<li>The ability to use a single buffer to gather events generated on multiple processors. Using a single buffer eliminates events from appearing out of order on multi-processors computers. For details, see the <a href="logging-mode-constants.html"><strong>EVENT_TRACE_NO_PER_PROCESSOR_BUFFERING</strong></a> logging mode. By default, ETW uses per-processor buffers.</li>
<li>The ability to capture a stack trace for events. To enable stack tracing for kernel events, see the <a href="/windows/win32/api/evntrace/nf-evntrace-tracesetinformation"><strong>TraceSetInformation</strong></a> function. To enable stack tracing for user events, see the <strong>EVENT_ENABLE_PROPERTY_STACK_TRACE</strong> flag for the <strong>EnableProperty</strong> member of <a href="/windows/win32/api/evntrace/ns-evntrace-enable_trace_parameters"><strong>ENABLE_TRACE_PARAMETERS</strong></a>.</li>
<li>The ability to specify the <strong>EVENT_TRACE_BUFFERING_MODE</strong> or <strong>EVENT_TRACE_FILE_MODE_NEWFILE</strong> logging mode with the <strong>EVENT_TRACE_PRIVATE_LOGGER_MODE</strong> logging mode (see <a href="logging-mode-constants.html">Logging Mode Constants</a>).</li>
<li>The ability to enable a provider synchronously. By default, providers are enabled asynchronously. To enable a provider synchronously, set the <em>Timeout</em> parameter of <a href="/windows/win32/api/evntrace/nf-evntrace-enabletraceex2"><strong>EnableTraceEx2</strong></a>.</li>
<li>The ability for the controller to request that the provider log its state. For details, see the <strong>EVENT_CONTROL_CODE_CAPTURE_STATE</strong> flag for the <em>ControlCode</em> parameter of <a href="/windows/win32/api/evntrace/nf-evntrace-enabletraceex2"><strong>EnableTraceEx2</strong></a>.</li>
<li>The ability for consumers to format event data using the <a href="/windows/desktop/api/Tdh/nf-tdh-tdhformatproperty"><strong>TdhFormatProperty</strong></a> function.</li>
<li>The ability to decode manifested events on computers that do not contain the provider. For details, see the <a href="/windows/desktop/api/Tdh/nf-tdh-tdhloadmanifest"><strong>TdhLoadManifest</strong></a> function.</li>
</ul>
<p>The following functions were added in this release:</p>
<ul>
<li><a href="/windows/win32/api/evntrace/nf-evntrace-enabletraceex2"><strong>EnableTraceEx2</strong></a></li>
<li><a href="/windows/desktop/api/Evntprov/nf-evntprov-eventwriteex"><strong>EventWriteEx</strong></a></li>
<li><a href="/windows/desktop/api/Tdh/nf-tdh-tdhenumerateproviderfilters"><strong>TdhEnumerateProviderFilters</strong></a></li>
<li><a href="/windows/desktop/api/Tdh/nf-tdh-tdhformatproperty"><strong>TdhFormatProperty</strong></a></li>
<li><a href="/windows/desktop/api/Tdh/nf-tdh-tdhloadmanifest"><strong>TdhLoadManifest</strong></a></li>
<li><a href="/windows/desktop/api/Tdh/nf-tdh-tdhunloadmanifest"><strong>TdhUnloadManifest</strong></a></li>
<li><a href="/windows/win32/api/evntrace/nf-evntrace-tracesetinformation"><strong>TraceSetInformation</strong></a></li>
</ul>
<p>The following structures were added in this release:</p>
<ul>
<li><a href="/windows/win32/api/evntrace/ns-evntrace-classic_event_id"><strong>CLASSIC_EVENT_ID</strong></a></li>
<li><a href="/windows/win32/api/evntrace/ns-evntrace-enable_trace_parameters"><strong>ENABLE_TRACE_PARAMETERS</strong></a></li>
<li><a href="/windows/desktop/api/Evntcons/ns-evntcons-event_extended_item_stack_trace32"><strong>EVENT_EXTENDED_ITEM_STACK_TRACE32</strong></a></li>
<li><a href="/windows/desktop/api/Evntcons/ns-evntcons-event_extended_item_stack_trace64"><strong>EVENT_EXTENDED_ITEM_STACK_TRACE64</strong></a></li>
<li><a href="/windows/desktop/api/Evntprov/ns-evntprov-event_filter_header"><strong>EVENT_FILTER_HEADER</strong></a></li>
<li><a href="/windows/desktop/api/Tdh/ns-tdh-provider_filter_info"><strong>PROVIDER_FILTER_INFO</strong></a></li>
</ul>
<p>The following enumerations were added in this release:</p>
<ul>
<li><a href="/windows/win32/api/evntrace/ne-evntrace-trace_query_info_class"><strong>TRACE_INFO_CLASS</strong></a></li>
</ul>
<p>The following MOF classes were added in this release:</p>
<ul>
<li><a href="stackwalk.html"><strong>StackWalk</strong></a></li>
<li><a href="stackwalk-event.html"><strong>StackWalk_Event</strong></a></li>
</ul>
<p>Â </p>
<p>Â </p>
</body>
