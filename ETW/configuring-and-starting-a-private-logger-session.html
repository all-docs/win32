<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Configuring and Starting a Private Logger Session</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: A private event tracing session is a user-mode event tracing session that runs in the same process as its event trace providers&amp;#8212;the private session and the providers that it enables must all be in the same process.
ms.assetid: fb6a3899-194e-4cb7-b9e5-a7ff85fb7891
title: Configuring and Starting a Private Logger Session
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>Configuring and Starting a Private Logger Session</h1>
<p>A private event tracing session is a user-mode event tracing session that runs in the same process as its event trace providersâ€”the private session and the providers that it enables must all be in the same process. The benefit of using a private session is that the private session does not count against the maximum of 64 event tracing sessions executing simultaneously.</p>
<p>Configuring and starting a private session is similar to starting a normal event trace session. The difference is that <strong>Wnode.Guid</strong> member of the <a href="/windows/win32/api/evntrace/ns-evntrace-event_trace_properties"><strong>EVENT_TRACE_PROPERTIES</strong></a> structure must contain the <strong>GUID</strong> of the provider, not the session, and the provider must have already registered the GUID. Note that if you also set the EVENT_TRACE_PRIVATE_IN_PROC logging mode, you can use a different <strong>GUID</strong> for the session and provider. For details on starting a normal event trace session, see <a href="configuring-and-starting-an-event-tracing-session.html">Configuring and Starting an Event Tracing Session</a>.</p>
<p>Note that you cannot start, stop, or flush a private trace session from DllMain; you should do so in the initialization and finalization routines of the DLL.</p>
<p>From WindowsÂ 8.1 to WindowsÂ 10, version 1607, event payload, scope, and stack walk filters can be used by the <a href="/windows/win32/api/evntrace/nf-evntrace-enabletraceex2"><strong>EnableTraceEx2</strong></a> function and the <a href="/windows/win32/api/evntrace/ns-evntrace-enable_trace_parameters"><strong>ENABLE_TRACE_PARAMETERS</strong></a> and <a href="/windows/desktop/api/Evntprov/ns-evntprov-event_filter_descriptor"><strong>EVENT_FILTER_DESCRIPTOR</strong></a> structures to filter on specific conditions in a logger session. For more information on event payload filters, see the <a href="/windows/desktop/api/Tdh/nf-tdh-tdhcreatepayloadfilter"><strong>TdhCreatePayloadFilter</strong></a>, and <a href="/windows/desktop/api/Tdh/nf-tdh-tdhaggregatepayloadfilters"><strong>TdhAggregatePayloadFilters</strong></a> functions and the <strong>ENABLE_TRACE_PARAMETERS</strong>, <strong>EVENT_FILTER_DESCRIPTOR</strong>, and <a href="/windows/desktop/api/Tdh/ns-tdh-payload_filter_predicate"><strong>PAYLOAD_FILTER_PREDICATE</strong></a> structures.</p>
<p>Starting with WindowsÂ 10, version 1703, low privilege users can now start a private logger session in processes they started. The provider no longer needs to be registered prior to enabling or starting the private session, meaning the provider is &quot;pre-enabled&quot; similar to how non-private session providers are. There is a limit of 8 system wide private loggers to an individual process. For increased performance in cross process scenarios, it's recommended to use filtering for session APIs (including <a href="/windows/win32/api/evntrace/nf-evntrace-controltracea"><strong>ControlTrace</strong></a>, <a href="/windows/win32/api/evntrace/nf-evntrace-querytracea"><strong>QueryTrace</strong></a>, <a href="/windows/win32/api/evntrace/nf-evntrace-starttracea"><strong>StartTrace</strong></a>, and <a href="/windows/win32/api/evntrace/nf-evntrace-stoptracea"><strong>StopTrace</strong></a>) when starting a system wide private logger. Note that the same filters should be passed to all session APIs. For more information about filters, see <a href="/windows/win32/api/evntrace/ns-evntrace-event_trace_properties_v2"><strong>EVENT_TRACE_PROPERTIES_V2</strong></a>.</p>
<p>For details on starting an event tracing session, see <a href="configuring-and-starting-an-event-tracing-session.html">Configuring and Starting an Event Tracing Session</a>.</p>
<p>For details on starting an NT Kernel Logger session, see <a href="configuring-and-starting-the-nt-kernel-logger-session.html">Configuring and Starting the NT Kernel Logger Session</a>.</p>
<p>For details on starting a Global Logger session, see <a href="configuring-and-starting-the-global-logger-session.html">Configuring and Starting a Global Logger Session</a>.</p>
<p>For details on starting an AutoLogger session, see <a href="configuring-and-starting-an-autologger-session.html">Configuring and Starting an AutoLogger Session</a>.</p>
<h2>Related topics</h2>
<!-- raw HTML omitted -->
<p><a href="configuring-and-starting-a-systemtraceprovider-session.html">Configuring and Starting a SystemTraceProvider Session</a></p>
<!-- raw HTML omitted -->
<p><a href="configuring-and-starting-an-autologger-session.html">Configuring and Starting an AutoLogger Session</a></p>
<!-- raw HTML omitted -->
<p><a href="configuring-and-starting-an-event-tracing-session.html">Configuring and Starting an Event Tracing Session</a></p>
<!-- raw HTML omitted -->
<p><a href="configuring-and-starting-the-nt-kernel-logger-session.html">Configuring and Starting the NT Kernel Logger Session</a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/win32/api/evntrace/nf-evntrace-enabletraceex2"><strong>EnableTraceEx2</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/win32/api/evntrace/ns-evntrace-enable_trace_parameters"><strong>ENABLE_TRACE_PARAMETERS</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/win32/api/evntrace/ns-evntrace-event_trace_properties"><strong>EVENT_TRACE_PROPERTIES</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/win32/api/evntrace/ns-evntrace-event_trace_properties_v2"><strong>EVENT_TRACE_PROPERTIES_V2</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/api/Evntprov/ns-evntprov-event_filter_descriptor"><strong>EVENT_FILTER_DESCRIPTOR</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/api/Tdh/ns-tdh-payload_filter_predicate"><strong>PAYLOAD_FILTER_PREDICATE</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/api/Tdh/nf-tdh-tdhaggregatepayloadfilters"><strong>TdhAggregatePayloadFilters</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/api/Tdh/nf-tdh-tdhcreatepayloadfilter"><strong>TdhCreatePayloadFilter</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="updating-an-event-tracing-session.html">Updating an Event Tracing Session</a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
