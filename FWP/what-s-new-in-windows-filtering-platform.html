<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>What's New in Windows Filtering Platform</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>title: What's New in Windows Filtering Platform
description: WindowsÂ 8 and Windows ServerÂ 2012 introduce new Windows Filtering Platform programming elements.
ms.assetid: 7529F155-3DBC-4C22-A780-B6311C455E85
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>What's New in Windows Filtering Platform</h1>
<p>WindowsÂ 8 and Windows ServerÂ 2012 introduce new Windows Filtering Platform programming elements. New functionality includes the following:</p>
<ul>
<li><em>Layer 2 filtering</em>: Provides access to the L2 (MAC) layer, allowing filtering of traffic at that layer.</li>
<li><em>vSwitch filtering</em>: Allows packets traversing a vSwitch to be inspected and/or modified. WFP filters or callouts can be used at the vSwitch ingress and egress.</li>
<li><em>App container management</em>: Allows access to information about app containers and network isolation connectivity issues.</li>
<li><em>IPsec updates</em>: Extended IPsec functionality including connection state monitoring, certificate selection, and key management.</li>
</ul>
<p>The Windows Driver Kit also includes information on <a href="/windows-hardware/drivers/network/wfp-changes-for-windows-8">WFP Changes for WindowsÂ 8</a>.</p>
<h2>Windows 8 API updates</h2>
<p>Many new APIs have been added for WindowsÂ 8 and Windows ServerÂ 2012.</p>
<h2>New functions</h2>
<ul>
<li><a href="/windows/desktop/api/fwpmu/nc-fwpmu-fwpm_net_event_callback1"><strong>FWPM_NET_EVENT_CALLBACK1</strong></a></li>
<li><a href="/windows/desktop/api/Fwpmu/nf-fwpmu-fwpmconnectioncreateenumhandle0"><strong>FwpmConnectionCreateEnumHandle0</strong></a></li>
<li><a href="/windows/desktop/api/Fwpmu/nf-fwpmu-fwpmconnectiondestroyenumhandle0"><strong>FwpmConnectionDestroyEnumHandle0</strong></a></li>
<li><a href="/windows/desktop/api/Fwpmu/nf-fwpmu-fwpmconnectionenum0"><strong>FwpmConnectionEnum0</strong></a></li>
<li><a href="/windows/desktop/api/Fwpmu/nf-fwpmu-fwpmconnectiongetbyid0"><strong>FwpmConnectionGetById0</strong></a></li>
<li><a href="/windows/desktop/api/Fwpmu/nf-fwpmu-fwpmconnectiongetsecurityinfo0"><strong>FwpmConnectionGetSecurityInfo0</strong></a></li>
<li><a href="/windows/desktop/api/fwpmu/nf-fwpmu-fwpmconnectionsetsecurityinfo0"><strong>FwpmConnectionSetSecurityInfo0</strong></a></li>
<li><a href="/windows/desktop/api/Fwpmu/nf-fwpmu-fwpmconnectionsubscribe0"><strong>FwpmConnectionSubscribe0</strong></a></li>
<li><a href="/windows/desktop/api/Fwpmu/nf-fwpmu-fwpmconnectionsubscriptionsget0"><strong>FwpmConnectionSubscriptionsGet0</strong></a></li>
<li><a href="/windows/desktop/api/Fwpmu/nf-fwpmu-fwpmconnectionunsubscribe0"><strong>FwpmConnectionUnsubscribe0</strong></a></li>
<li><a href="/windows/desktop/api/fwpmu/nf-fwpmu-fwpmipsectunneladd2"><strong>FwpmIPsecTunnelAdd2</strong></a></li>
<li><a href="/windows/desktop/api/Fwpmu/nf-fwpmu-fwpmneteventenum2"><strong>FwpmNetEventEnum2</strong></a></li>
<li><a href="/windows/desktop/api/fwpmu/nf-fwpmu-fwpmneteventsubscribe1"><strong>FwpmNetEventSubscribe1</strong></a></li>
<li><a href="/windows/desktop/api/fwpmu/nf-fwpmu-fwpmprovidercontextadd2"><strong>FwpmProviderContextAdd2</strong></a></li>
<li><a href="/windows/desktop/api/fwpmu/nf-fwpmu-fwpmprovidercontextenum2"><strong>FwpmProviderContextEnum2</strong></a></li>
<li><a href="/windows/desktop/api/fwpmu/nf-fwpmu-fwpmprovidercontextgetbyid2"><strong>FwpmProviderContextGetById2</strong></a></li>
<li><a href="/windows/desktop/api/Fwpmu/nf-fwpmu-fwpmprovidercontextgetbykey2"><strong>FwpmProviderContextGetByKey2</strong></a></li>
<li><a href="/windows/desktop/api/Fwpmu/nf-fwpmu-fwpmvswitcheventsgetsecurityinfo0"><strong>FwpmvSwitchEventsGetSecurityInfo0</strong></a></li>
<li><a href="/windows/desktop/api/Fwpmu/nf-fwpmu-fwpmvswitcheventssetsecurityinfo0"><strong>FwpmvSwitchEventsSetSecurityInfo0</strong></a></li>
<li><a href="/windows/desktop/api/Fwpmu/nf-fwpmu-fwpmvswitcheventsubscribe0"><strong>FwpmvSwitchEventSubscribe0</strong></a></li>
<li><a href="/windows/desktop/api/Fwpmu/nf-fwpmu-fwpmvswitcheventunsubscribe0"><strong>FwpmvSwitchEventUnsubscribe0</strong></a></li>
<li><a href="/windows/desktop/api/Fwpmu/nf-fwpmu-ikeextsaenum2"><strong>IkeextSaEnum2</strong></a></li>
<li><a href="/windows/desktop/api/Fwpmu/nf-fwpmu-ikeextsagetbyid2"><strong>IkeextSaGetById2</strong></a></li>
<li><a href="/windows/desktop/api/Fwpmu/nc-fwpmu-ipsec_key_manager_key_dictation_check0"><strong>IPSEC_KEY_MANAGER_KEY_DICTATION_CHECK0</strong></a></li>
<li><a href="/windows/desktop/api/Fwpmu/nc-fwpmu-ipsec_key_manager_dictate_key0"><strong>IPSEC_KEY_MANAGER_DICTATE_KEY0</strong></a></li>
<li><a href="/windows/desktop/api/fwpmu/nc-fwpmu-ipsec_key_manager_notify_key0"><strong>IPSEC_KEY_MANAGER_NOTIFY_KEY0</strong></a></li>
<li><a href="/windows/win32/api/fwpmu/nc-fwpmu-ipsec_sa_context_callback0"><strong>IPSEC_SA_CONTEXT_CALLBACK0</strong></a></li>
<li><a href="/windows/desktop/api/Fwpmu/nf-fwpmu-ipseckeymanageraddandregister0"><strong>IPsecKeyManagerAddAndRegister0</strong></a></li>
<li><a href="/windows/desktop/api/Fwpmu/nf-fwpmu-ipseckeymanagergetsecurityinfobykey0"><strong>IPsecKeyManagerGetSecurityInfoByKey0</strong></a></li>
<li><a href="/windows/desktop/api/Fwpmu/nf-fwpmu-ipseckeymanagersetsecurityinfobykey0"><strong>IPsecKeyManagerSetSecurityInfoByKey0</strong></a></li>
<li><a href="/windows/desktop/api/Fwpmu/nf-fwpmu-ipseckeymanagersget0"><strong>IPsecKeyManagersGet0</strong></a></li>
<li><a href="/windows/desktop/api/Fwpmu/nf-fwpmu-ipseckeymanagerunregisteranddelete0"><strong>IPsecKeyManagerUnregisterAndDelete0</strong></a></li>
<li><a href="/windows/desktop/api/Fwpmu/nf-fwpmu-ipsecsacontextsubscribe0"><strong>IPsecSaContextSubscribe0</strong></a></li>
<li><a href="/windows/desktop/api/Fwpmu/nf-fwpmu-ipsecsacontextsubscriptionsget0"><strong>IPsecSaContextSubscriptionsGet0</strong></a></li>
<li><a href="/windows/desktop/api/Fwpmu/nf-fwpmu-ipsecsacontextunsubscribe0"><strong>IPsecSaContextUnsubscribe0</strong></a></li>
<li><a href="/previous-versions/windows/desktop/api/netfw/nf-netfw-networkisolationdiagnoseconnectfailureandgetinfo"><strong>NetworkIsolationDiagnoseConnectFailureAndGetInfo</strong></a></li>
<li><a href="/previous-versions/windows/desktop/api/netfw/nf-netfw-networkisolationenumappcontainers"><strong>NetworkIsolationEnumAppContainers</strong></a></li>
<li><a href="/previous-versions/windows/desktop/api/netfw/nf-netfw-networkisolationenumerateappcontainerrules"><strong>NetworkIsolationEnumerateAppContainerRules</strong></a></li>
<li><a href="/previous-versions/windows/desktop/api/netfw/nf-netfw-networkisolationfreeappcontainers"><strong>NetworkIsolationFreeAppContainers</strong></a></li>
<li><a href="/windows/desktop/api/networkisolation/nf-networkisolation-networkisolationgetappcontainerconfig"><strong>NetworkIsolationGetAppContainerConfig</strong></a></li>
<li><a href="/previous-versions/windows/desktop/api/netfw/nf-netfw-networkisolationregisterforappcontainerchanges"><strong>NetworkIsolationRegisterForAppContainerChanges</strong></a></li>
<li><a href="/previous-versions/windows/desktop/api/netfw/nf-netfw-networkisolationsetappcontainerconfig"><strong>NetworkIsolationSetAppContainerConfig</strong></a></li>
<li><a href="/windows/desktop/api/networkisolation/nf-networkisolation-networkisolationsetupappcontainerbinaries"><strong>NetworkIsolationSetupAppContainerBinaries</strong></a></li>
<li><a href="/windows/desktop/api/networkisolation/nc-networkisolation-pac_changes_callback_fn"><strong>PAC_CHANGES_CALLBACK_FN</strong></a></li>
</ul>
<h2>New structures</h2>
<ul>
<li><a href="/windows/win32/api/iketypes/ns-iketypes-ikeext_authentication_method2"><strong>IKEEXT_AUTHENTICATION_METHOD2</strong></a></li>
<li><a href="/windows/win32/api/iketypes/ns-iketypes-ikeext_cert_ekus0"><strong>IKEEXT_CERT_EKUS0</strong></a></li>
<li><a href="/windows/win32/api/iketypes/ns-iketypes-ikeext_cert_name0"><strong>IKEEXT_CERT_NAME0</strong></a></li>
<li><a href="/windows/win32/api/iketypes/ns-iketypes-ikeext_certificate_authentication2"><strong>IKEEXT_CERTIFICATE_AUTHENTICATION2</strong></a></li>
<li><a href="/windows/win32/api/iketypes/ns-iketypes-ikeext_certificate_criteria0"><strong>IKEEXT_CERTIFICATE_CRITERIA0</strong></a></li>
<li><a href="/windows/win32/api/iketypes/ns-iketypes-ikeext_em_policy2"><strong>IKEEXT_EM_POLICY2</strong></a></li>
<li><a href="/windows/win32/api/iketypes/ns-iketypes-ikeext_kerberos_authentication1"><strong>IKEEXT_KERBEROS_AUTHENTICATION1</strong></a></li>
<li><a href="/windows/win32/api/iketypes/ns-iketypes-ikeext_policy2"><strong>IKEEXT_POLICY2</strong></a></li>
<li><a href="/windows/desktop/api/ipsectypes/ns-ipsectypes-ipsec_key_manager0"><strong>IPSEC_KEY_MANAGER0</strong></a></li>
<li><a href="/windows/desktop/api/fwpmu/ns-fwpmu-ipsec_key_manager_callbacks0"><strong>IPSEC_KEY_MANAGER_CALLBACKS0</strong></a></li>
<li><a href="/windows/win32/api/ipsectypes/ns-ipsectypes-ipsec_keying_policy1"><strong>IPSEC_KEYING_POLICY1</strong></a></li>
<li><a href="/windows/desktop/api/Ipsectypes/ns-ipsectypes-ipsec_sa_context_change0"><strong>IPSEC_SA_CONTEXT_CHANGE0</strong></a></li>
<li><a href="/windows/desktop/api/Ipsectypes/ns-ipsectypes-ipsec_sa_context_subscription0"><strong>IPSEC_SA_CONTEXT_SUBSCRIPTION0</strong></a></li>
<li><a href="/windows/win32/api/ipsectypes/ns-ipsectypes-ipsec_transport_policy2"><strong>IPSEC_TRANSPORT_POLICY2</strong></a></li>
<li><a href="/windows/win32/api/ipsectypes/ns-ipsectypes-ipsec_tunnel_endpoint0"><strong>IPSEC_TUNNEL_ENDPOINT0</strong></a></li>
<li><a href="/windows/win32/api/ipsectypes/ns-ipsectypes-ipsec_tunnel_endpoints2"><strong>IPSEC_TUNNEL_ENDPOINTS2</strong></a></li>
<li><a href="/windows/win32/api/ipsectypes/ns-ipsectypes-ipsec_tunnel_policy2"><strong>IPSEC_TUNNEL_POLICY2</strong></a></li>
<li><a href="/windows/desktop/api/Fwpmtypes/ns-fwpmtypes-fwpm_connection0"><strong>FWPM_CONNECTION0</strong></a></li>
<li><a href="/windows/desktop/api/Fwpmtypes/ns-fwpmtypes-fwpm_connection_enum_template0"><strong>FWPM_CONNECTION_ENUM_TEMPLATE0</strong></a></li>
<li><a href="/windows/desktop/api/Fwpmtypes/ns-fwpmtypes-fwpm_connection_subscription0"><strong>FWPM_CONNECTION_SUBSCRIPTION0</strong></a></li>
<li><a href="/windows/desktop/api/Fwpmtypes/ns-fwpmtypes-fwpm_net_event2"><strong>FWPM_NET_EVENT2</strong></a></li>
<li><a href="/windows/desktop/api/Fwpmtypes/ns-fwpmtypes-fwpm_net_event_capability_allow0"><strong>FWPM_NET_EVENT_CAPABILITY_ALLOW0</strong></a></li>
<li><a href="/windows/desktop/api/Fwpmtypes/ns-fwpmtypes-fwpm_net_event_capability_drop0"><strong>FWPM_NET_EVENT_CAPABILITY_DROP0</strong></a></li>
<li><a href="/windows/desktop/api/Fwpmtypes/ns-fwpmtypes-fwpm_net_event_classify_allow0"><strong>FWPM_NET_EVENT_CLASSIFY_ALLOW0</strong></a></li>
<li><a href="/windows/win32/api/fwpmtypes/ns-fwpmtypes-fwpm_net_event_classify_drop2"><strong>FWPM_NET_EVENT_CLASSIFY_DROP2</strong></a></li>
<li><a href="/windows/win32/api/fwpmtypes/ns-fwpmtypes-fwpm_net_event_classify_drop_mac0"><strong>FWPM_NET_EVENT_CLASSIFY_DROP_MAC0</strong></a></li>
<li><a href="/windows/win32/api/fwpmtypes/ns-fwpmtypes-fwpm_net_event_header2"><strong>FWPM_NET_EVENT_HEADER2</strong></a></li>
<li><a href="/windows/win32/api/fwpmtypes/ns-fwpmtypes-fwpm_provider_context2"><strong>FWPM_PROVIDER_CONTEXT2</strong></a></li>
<li><a href="/windows/desktop/api/Fwpmtypes/ns-fwpmtypes-fwpm_vswitch_event0"><strong>FWPM_VSWITCH_EVENT0</strong></a></li>
<li><a href="/windows/desktop/api/Fwpmtypes/ns-fwpmtypes-fwpm_vswitch_event_subscription0"><strong>FWPM_VSWITCH_EVENT_SUBSCRIPTION0</strong></a></li>
</ul>
<h2>New enumerated types</h2>
<ul>
<li><a href="/windows/win32/api/fwptypes/ne-fwptypes-fwp_vswitch_network_type"><strong>FWP_VSWITCH_NETWORK_TYPE</strong></a></li>
<li><a href="/windows/desktop/api/Fwpmtypes/ne-fwpmtypes-fwpm_appc_network_capability_type"><strong>FWPM_APPC_NETWORK_CAPABILITY_TYPE</strong></a></li>
<li><a href="/windows/desktop/api/Fwpmtypes/ne-fwpmtypes-fwpm_connection_event_type"><strong>FWPM_CONNECTION_EVENT_TYPE</strong></a></li>
<li><a href="/windows/desktop/api/Fwpmtypes/ne-fwpmtypes-fwpm_vswitch_event_type"><strong>FWPM_VSWITCH_EVENT_TYPE</strong></a></li>
<li><a href="/windows/win32/api/iketypes/ne-iketypes-ikeext_cert_criteria_name_type"><strong>IKEEXT_CERT_CRITERIA_NAME_TYPE</strong></a></li>
<li><a href="/windows/desktop/api/Ipsectypes/ne-ipsectypes-ipsec_sa_context_event_type0"><strong>IPSEC_SA_CONTEXT_EVENT_TYPE0</strong></a></li>
</ul>
<h2>New filtering layer identifiers</h2>
<p><a href="management-filtering-layer-identifiers-.html"><strong>Filtering Layer Identifiers:</strong></a></p>
<ul>
<li>FWPM_LAYER_INBOUND_MAC_FRAME_ETHERNET</li>
<li>FWPM_LAYER_OUTBOUND_MAC_FRAME_ETHERNET</li>
<li>FWPM_LAYER_INBOUND_MAC_FRAME_NATIVE</li>
<li>FWPM_LAYER_OUTBOUND_MAC_FRAME_NATIVE</li>
<li>FWPM_LAYER_INGRESS_VSWITCH_ETHERNET</li>
<li>FWPM_LAYER_EGRESS_VSWITCH_ETHERNET</li>
<li>FWPM_LAYER_INGRESS_VSWITCH_TRANSPORT_V4 / FWPM_LAYER_INGRESS_VSWITCH_TRANSPORT_V6</li>
<li>FWPM_LAYER_EGRESS_VSWITCH_TRANSPORT_V4 / FWPM_LAYER_EGRESS_VSWITCH_TRANSPORT_V6</li>
</ul>
<h2>New filtering condition identifiers</h2>
<p><a href="filtering-condition-identifiers-.html"><strong>Filtering Condition Identifiers:</strong></a></p>
<ul>
<li>FWPM_CONDITION_INTERFACE_MAC_ADDRESS</li>
<li>FWPM_CONDITION_MAC_LOCAL_ADDRESS</li>
<li>FWPM_CONDITION_MAC_REMOTE_ADDRESS</li>
<li>FWPM_CONDITION_ETHER_TYPE</li>
<li>FWPM_CONDITION_VLAN_ID</li>
<li>FWPM_CONDITION_NDIS_PORT</li>
<li>FWPM_CONDITION_NDIS_MEDIA_TYPE</li>
<li>FWPM_CONDITION_NDIS_PHYSICAL_MEDIA_TYPE</li>
<li>FWPM_CONDITION_L2_FLAGS</li>
<li>FWPM_CONDITION_MAC_LOCAL_ADDRESS_TYPE</li>
<li>FWPM_CONDITION_MAC_REMOTE_ADDRESS_TYPE</li>
<li>FWPM_CONDITION_ALE_PACKAGE_ID</li>
<li>FWPM_CONDITION_MAC_SOURCE_ADDRESS</li>
<li>FWPM_CONDITION_MAC_DESTINATION_ADDRESS</li>
<li>FWPM_CONDITION_MAC_SOURCE_ADDRESS_TYPE</li>
<li>FWPM_CONDITION_MAC_DESTINATION_ADDRESS_TYPE</li>
<li>FWPM_CONDITION_IP_SOURCE_PORT</li>
<li>FWPM_CONDITION_IP_DESTINATION_PORT</li>
<li>FWPM_CONDITION_VSWITCH_ID</li>
<li>FWPM_CONDITION_VSWITCH_NETWORK_TYPE</li>
<li>FWPM_CONDITION_VSWITCH_SOURCE_INTERFACE_ID</li>
<li>FWPM_CONDITION_VSWITCH_DESTINATION_INTERFACE_ID</li>
<li>FWPM_CONDITION_VSWITCH_SOURCE_VM_ID</li>
<li>FWPM_CONDITION_VSWITCH_DESTINATION_VM_ID</li>
<li>FWPM_CONDITION_VSWITCH_SOURCE_INTERFACE_TYPE</li>
<li>FWPM_CONDITION_VSWITCH_TENANT_NETWORK_ID</li>
</ul>
<h2>New filtering condition flags</h2>
<p><a href="filtering-condition-flags-.html"><strong>Filtering Condition Flags:</strong></a></p>
<ul>
<li>FWP_CONDITION_FLAG_IS_PROXY_CONNECTION</li>
<li>FWP_CONDITION_FLAG_IS_APPCONTAINER_LOOPBACK</li>
<li>FWP_CONDITION_FLAG_IS_NON_APPCONTAINER_LOOPBACK</li>
<li>FWP_CONDITION_FLAG_IS_HONORING_POLICY_AUTHORIZE</li>
<li>FWP_CONDITION_L2_IS_NATIVE_ETHERNET</li>
<li>FWP_CONDITION_L2_IS_WIFI</li>
<li>FWP_CONDITION_L2_IS_MOBILE_BROADBAND</li>
<li>FWP_CONDITION_L2_IS_WIFI_DIRECT_DATA</li>
<li>FWP_CONDITION_L2_IS_VM2VM</li>
<li>FWP_CONDITION_L2_IS_MALFORMED_PACKET</li>
<li>FWP_CONDITION_L2_IS_IP_FRAGMENT_GROUP</li>
<li>FWP_CONDITION_L2_IF_CONNECTOR_PRESENT</li>
</ul>
<h2>Windows 7 updates to the Windows Filtering Platform</h2>
<p>The document <a href="">What's New in Windows Filtering Platform</a> details many of the updates made for WindowsÂ 7. Information is also available in the Windows Driver Kit on <a href="/windows-hardware/drivers/network/wfp-changes-for-windows-7">WFP Changes for WindowsÂ 7</a>.</p>
<p>Â </p>
<p>Â </p>
</body>
