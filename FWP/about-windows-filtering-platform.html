<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>About Windows Filtering Platform</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>title: About Windows Filtering Platform
description: Windows Filtering Platform (WFP) is a network traffic processing platform designed to replace the Windows XP and Windows Server 2003 network traffic filtering interfaces.
ms.assetid: 6faad008-b2f6-4f45-89c7-ae98c2f58ce1
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>About Windows Filtering Platform</h1>
<p>Windows Filtering Platform (WFP) is a network traffic processing platform designed to replace the Windows XP and Windows Server 2003 network traffic filtering interfaces. WFP consists of a set of hooks into the network stack and a filtering engine that coordinates network stack interactions.</p>
<h2>The WFP components</h2>
<h3>Filter Engine</h3>
<p>The core multi-layer filtering infrastructure, hosted in both kernel-mode and user-mode, that replaces the multiple filtering modules in the Windows XP and Windows Server 2003 networking subsystem.</p>
<ul>
<li>Filters network traffic at any layer in the system over any data fields that a shim can provide.</li>
<li>Implements the &quot;Callout&quot; filters by invoking callouts during classification.</li>
<li>Returns &quot;Permit&quot; or &quot;Block&quot; actions to the shim that invoked it for enforcement.</li>
<li>Provides arbitration between different policy sources. For example, determines priority when an application is configured to secure any network traffic related to it, but the local firewall is configured to prevent application secured traffic.<!-- raw HTML omitted --></li>
</ul>
<h3>Base Filtering Engine (BFE)</h3>
<p>A service that controls the operation of the Windows Filtering Platform. It performs the following tasks.</p>
<ul>
<li>Accepts filters and other configuration settings for the platform.</li>
<li>Reports the current state of the system, including statistics.</li>
<li>Enforces the security model for accepting configuration in the platform. For example, a local administrator can add filters but other users can only view them.<!-- raw HTML omitted --></li>
<li>Plumbs configuration settings to other modules in the system. For example, IPsec negotiation polices go to IKE/AuthIP keying modules, filters go to the filter engine.<!-- raw HTML omitted --></li>
</ul>
<h3>Shims</h3>
<p>Kernel-mode components that reside between the Network Stack and the filter engine. Shims make the filtering decision by classifying against the filter engine. Following is a list of available shims.</p>
<ul>
<li>Application Layer Enforcement (ALE) shim.</li>
<li>Transport Layer Module shim.</li>
<li>Network Layer Module shim.</li>
<li>Internet Control Message Protocol (ICMP) Error shim.</li>
<li>Discard shim.</li>
<li>Stream shim.</li>
</ul>
<h3>Callouts</h3>
<p>Set of functions exposed by a driver and used for specialized filtering. Besides the basic actions of &quot;Permit&quot; and &quot;Block&quot;, callouts can modify and secure inbound and outbound network traffic. See the <a href="/windows-hardware/drivers/network/windows-filtering-platform-callout-drivers2">Windows Filtering Platform Callout Drivers</a> topic in the Windows Driver Kit (WDK) documentation for more information on callouts. WFP provides built-in callouts that accomplish the following tasks.<!-- raw HTML omitted --></p>
<ul>
<li>Perform IPsec processing.</li>
<li>Adjust stateful filtering behavior.</li>
<li>Perform stealth mode filtering (silent drop of packets that were not requested).</li>
<li>Control TCP chimney offload.</li>
<li>Interact with the Teredo service.</li>
</ul>
<p><!-- raw HTML omitted --> The filter engine allows third-party callouts to register at each of its kernel-mode layers.<!-- raw HTML omitted --></p>
<h3>Application Programming Interface</h3>
<p>A set of data types and functions available to the developers to build and manage network filtering applications. These data types and functions are grouped into multiple <a href="api-sets.html">API sets</a>.</p>
<h2>WFP Features</h2>
<ul>
<li>Provides a packet filtering infrastructure where independent software vendors (ISVs) can plug-in specialized filtering modules.</li>
<li>Works with both IPv4 and IPv6.</li>
<li>Allows for data filtering, modification, and re-injection.</li>
<li>Performs both packet and stream processing.</li>
<li>Allows packet filtering to be enabled per application, per user, and per connection in addition to per network interface or per port.</li>
<li>Provides boot-time security until Base Filtering Engine (BFE) can start.</li>
<li>Enables stateful connection filtering.</li>
<li>Handles both pre and post IPsec-encrypted data.</li>
<li>Allows integration of IPsec and firewall filtering policies.</li>
<li>Provides a policy management infrastructure to determine when specific filters should be activated. This includes mediating conflicting requirements from multiple filters provided by different vendors.</li>
<li>Handles most packet reassembly and state tracking.</li>
<li>Includes a generic user notification system that informs subscribers of changes to the filtering system.</li>
<li>Implements enumeration functions that report on the state of the system.</li>
<li>Uses net events to record IPsec errors and packet drops.</li>
<li>Supports a Network Diagnostics Framework <a href="/windows/desktop/NDF/extensible-helper-classes">(NDF) helper class</a>.</li>
<li>Supports the <a href="/windows/desktop/WinSock/winsock-secure-socket-extensions">Secure Socket extensions</a> to the Winsock API, which allow network applications to secure their traffic by configuring WFP.</li>
<li>At Application Layer Enforcement (ALE) layers, minimally impacts network performance by processing only the first packet in a connection.</li>
<li>Integrates hardware offload where kernel-mode callout modules can use hardware to perform specific packet inspection.</li>
</ul>
<h2>Related topics</h2>
<!-- raw HTML omitted -->
<p><a href="windows-filtering-platform-architecture-overview.html">WFP Architecture</a></p>
<!-- raw HTML omitted -->
<p><a href="basic-operation.html">WFP Operation</a></p>
<!-- raw HTML omitted -->
<p><a href="application-layer-enforcement--ale-.html">Application Layer Enforcement (ALE)</a></p>
<!-- raw HTML omitted -->
<p><a href="ipsec-configuration.html">IPsec Configuration</a></p>
<!-- raw HTML omitted -->
<p><a href="wfp-configuration.html">WFP Configuration</a></p>
<!-- raw HTML omitted -->
<p><a href="wfp-monitoring.html">WFP Monitoring</a></p>
<!-- raw HTML omitted -->
<p><a href="api-sets.html">WFP API</a></p>
<!-- raw HTML omitted -->
</body>
