<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Logging (Windows Filtering Platform)</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>title: Logging (Windows Filtering Platform)
description: Windows Filtering Platform (WFP) provides logging of packet drops and IKE/AuthIP failures.
ms.assetid: '607b7664-6be4-4ae6-991b-58ac9175405a'
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>Logging (Windows Filtering Platform)</h1>
<p>The Windows Filtering Platform (WFP) provides logging of packet drops and IKE/AuthIP failures.</p>
<p>The logged events are defined in the <a href="/windows/desktop/api/Fwpmtypes/ne-fwpmtypes-fwpm_net_event_type"><strong>FWPM_NET_EVENT_TYPE</strong></a> enumerated type and are as follows.</p>
<ul>
<li>IKE/AuthIP main mode failures.</li>
<li>IKE/AuthIP quick mode failures.</li>
<li>AuthIP extended mode failures.</li>
<li>Packets dropped during classification.</li>
<li>Packets dropped by IPsec.</li>
</ul>
<p>By default, logging for WFP is enabled for unicast inbound packets and for all outbound packets (unicast, multicast, and broadcast). Logging can be enabled for the rest of the packets, or disabled for all packets, through the <a href="/windows/desktop/api/Fwpmu/nf-fwpmu-fwpmenginesetoption0"><strong>FwpmEngineSetOptions0</strong></a> management function. Event settings persist across reboots.</p>
<p>Logged events are stored in a circular log, that is new events override old ones when the log reaches its maximum size, and can be analyzed using the <a href="fwp-mgmt-functions.html">event management</a> functions provided by WFP. The event log has a maximum size of 128 KB and it can hold about 100 to 150 events.</p>
<p>Enumeration functions in general, and <a href="/windows/desktop/api/Fwpmu/nf-fwpmu-fwpmneteventenum0"><strong>FwpmNetEventEnum0</strong></a>/<a href="/windows/desktop/api/Fwpmu/nf-fwpmu-fwpmneteventenum1"><strong>FwpmNetEventEnum1</strong></a> in particular, take a snapshot of the log at the time the enumeration handle is created. Subsequent calls using the same enumeration handle return the next set of items following those in the last output buffer.</p>
<p>When an application disables WFP logging (by calling <a href="/windows/desktop/api/Fwpmu/nf-fwpmu-fwpmenginesetoption0"><strong>FwpmEngineSetOptions0</strong></a>) all applications are affected. The event log is not cleaned up until an application re-enables WFP logging, but the event log cannot be queried before then.</p>
<p>The WFP event log is emptied after a reboot.</p>
<p>Â </p>
<p>Â </p>
</body>
