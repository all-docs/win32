<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>What's New in Windows Server 2008 and Windows Vista</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: Starting in Windows ServerÂ 2008 and WindowsÂ Vista, the WinHTTP API has been enhanced to include the following features.
ms.assetid: b47a2e38-67bd-4d43-936c-8781641cb7f6
title: Whats New in Windows Server 2008 and Windows Vista
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>What's New in Windows Server 2008 and Windows Vista</h1>
<p>Starting in Windows ServerÂ 2008 and WindowsÂ Vista, the WinHTTP API has been enhanced to include the following features.</p>
<h2>Greater Than 4-GB Upload.</h2>
<p><a href="/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest"><strong>WinHttpSendRequest</strong></a> can send only 4 GB of data because of limitations in the size of the DWORD total length parameter. To enable applications to send more than 4 GB of data, the Content-Length header is added to the request specifying data as large as a LARGE_INTEGER (2^64 bytes). For more information, see <strong>WinHttpSendRequest</strong>. This feature is not supported on the <a href="iwinhttprequest-interface.html"><strong>IWinHttpRequest</strong></a> COM object.</p>
<h2>Transfer-Encoding Header</h2>
<p>The Transfer-Encoding header enables applications to send chunked data to the server. When the Transfer-Encoding header is present on the request, the application sends the request with a zero length entity body in the call to <a href="/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest"><strong>WinHttpSendRequest</strong></a>. The entity body is sent in subsequent calls to <a href="/windows/desktop/api/Winhttp/nf-winhttp-winhttpwritedata"><strong>WinHttpWriteData</strong></a>. This feature is not supported on the <a href="iwinhttprequest-interface.html"><strong>IWinHttpRequest</strong></a> COM object.</p>
<h2>SSL Client Certificate Issuer List Retrieval</h2>
<p>The application can retrieve the SSL client certificate Issuer List when <a href="/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest"><strong>WinHttpSendRequest</strong></a> fails with an <strong>ERROR_WINHTTP_CLIENT_AUTH_CERT_NEEDED</strong>. A new option, <strong>WINHTTP_OPTION_CLIENT_CERT_ISSUER_LIST</strong>, allows applications to retrieve the certificate Issuer List and filter the list for the optimal certificate. For more information, see the <a href="option-flags.html"><strong>Option flags</strong></a> and <a href="ssl-in-winhttp.html">Issuer List Retrieval for SSL Client Authentication</a> topics. This feature is not supported on the <a href="iwinhttprequest-interface.html"><strong>IWinHttpRequest</strong></a> COM object.</p>
<h2>Optional Client Certificates</h2>
<p>When <a href="/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest"><strong>WinHttpSendRequest</strong></a> fails with an <strong>ERROR_WINHTTP_CLIENT_AUTH_CERT_NEEDED</strong>, the server may not require the SSL client certificate. The server may be able to revert to another form of authentication, or allow the client to proceed with anonymous access. The application sets the <strong>WINHTTP_OPTION_CLIENT_CERT_CONTEXT</strong> option and specifies a macro that WinHttp uses to determine if the client certificate is required. For more information, see <a href="option-flags.html"><strong>Option flags</strong></a>. This feature is not supported on the <a href="iwinhttprequest-interface.html"><strong>IWinHttpRequest</strong></a> COM object.</p>
<h2>Source and Destination IP Addresses</h2>
<p>When <a href="/windows/desktop/api/Winhttp/nf-winhttp-winhttpreceiveresponse"><strong>WinHttpReceiveResponse</strong></a> completes, the application can retrieve the source and destination IP address and port of the request that generated the response. A new structure is provided to receive the source and destination addresses when the <strong>WINHTTP_OPTION_CONNECTION_INFO</strong> option is set. For more information, see <a href="option-flags.html"><strong>Option flags</strong></a>. This feature is not supported on the <a href="iwinhttprequest-interface.html"><strong>IWinHttpRequest</strong></a> COM object.</p>
<h2>Additional SSL Client Authentication Errors</h2>
<p>Additional SSL client authentication errors provide more information about the SSL Client certificate. <strong>ERROR_WINHTTP_CLIENT_CERT_NO_PRIVATE_KEY</strong> and <strong>ERROR_WINHTTP_CERT_NO_ACCESS_PRIVATE_KEY</strong> client certificate errors are new for Windows ServerÂ 2008 and WindowsÂ Vista. The <a href="iwinhttprequest-interface.html"><strong>IWinHttpRequest</strong></a> COM object returns these errors in an HRESULT.</p>
<p>Â </p>
<p>Â </p>
</body>
