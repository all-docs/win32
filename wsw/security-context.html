<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Security Context</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<p>title: Security Context
description: Security contexts enable the establishment of a message security context according to WS-SecureConversation.
ms.assetid: bea92650-21bd-41d4-9dba-043d6779d85f
keywords:</p>
<ul>
<li>Security Context Native-Web-Services</li>
<li>WWSAPI</li>
<li>WWS
ms.topic: article
ms.date: 05/31/2018</li>
</ul>
<hr />
<h1>Security Context</h1>
<p>Security contexts enable the establishment of a message security context according to WS-SecureConversation. That context can then be used to secure messages as an alternative to one-shot security where the credentials are transmitted for every request. The established security context is a more efficient method of securing messages when multiple messages are exchanged.</p>
<p>Security contexts require the presence of bootstrap security credentials that are used to secure the messages sent in the context. The <a href="/windows/desktop/api/WebServices/ns-webservices-ws_kerberos_apreq_message_security_binding"><strong>WS_KERBEROS_APREQ_MESSAGE_SECURITY_BINDING</strong></a>, <a href="/windows/desktop/api/WebServices/ns-webservices-ws_xml_token_message_security_binding"><strong>WS_XML_TOKEN_MESSAGE_SECURITY_BINDING</strong></a>, and <a href="/windows/desktop/api/WebServices/ns-webservices-ws_username_message_security_binding"><strong>WS_USERNAME_MESSAGE_SECURITY_BINDING</strong></a> structures may be used for this purpose.</p>
<p>Security contexts are a message security feature and are configured by way of message security bindings.</p>
<h2>Client</h2>
<p>On the client side, the security context is tied to a particular channel. It is configured using the <a href="/windows/desktop/api/WebServices/ns-webservices-ws_security_context_message_security_binding"><strong>WS_SECURITY_CONTEXT_MESSAGE_SECURITY_BINDING</strong></a>. Behavior and lifetime of the context are determined by the channel. When the first message is sent on the channel, the security context is established. After that, the context is proactively renewed at a configurable interval. If the server returns a fault indicating that the context requires renewal, the context is renewed when the next message is sent. If the channel is in the open state, the context is canceled by a cancel message when the channel is closed.</p>
<h2>Server</h2>
<p>On the server, a security context is configured the same way as on the client. However, it is not tied to any particular channel. Instead, all channels created for the listener that has the <a href="/windows/desktop/api/WebServices/ns-webservices-ws_security_context_message_security_binding"><strong>WS_SECURITY_CONTEXT_MESSAGE_SECURITY_BINDING</strong></a> set are capable of receiving messages with any of the security contexts that were established on channels of that listener.</p>
<p>When a message arrives on a channel that supports security contexts, the context used by that message can by obtained by calling the <a href="/windows/desktop/api/WebServices/nf-webservices-wsgetmessageproperty"><strong>WsGetMessageProperty</strong></a> function with the <a href="/windows/desktop/api/WebServices/ne-webservices-ws_message_property_id"><strong>WS_MESSAGE_PROPERTY_SECURITY_CONTEXT</strong></a>. The retrieved value can be used with <a href="/windows/desktop/api/WebServices/nf-webservices-wsrevokesecuritycontext"><strong>WsRevokeSecurityContext</strong></a> and <a href="/windows/desktop/api/WebServices/nf-webservices-wsgetsecuritycontextproperty"><strong>WsGetSecurityContextProperty</strong></a>.</p>
<h2>Metadata</h2>
<p>The <a href="/windows/desktop/api/WebServices/ns-webservices-ws_security_context_message_security_binding_constraint"><strong>WS_SECURITY_CONTEXT_MESSAGE_SECURITY_BINDING_CONSTRAINT</strong></a> structure is used to extract the security context policy from metadata. For more information, see <a href="metadata-import.html">Metadata Import</a>.</p>
<p>The following API elements are used with security contexts.</p>
<table>
<thead>
<tr>
<th>Enumeration</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="/windows/desktop/api/WebServices/ne-webservices-ws_security_context_property_id"><strong>WS_SECURITY_CONTEXT_PROPERTY_ID</strong></a></td>
<td>Identifies a property of a security context object.</td>
</tr>
</tbody>
</table>
<p>Â </p>
<table>
<thead>
<tr>
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="/windows/desktop/api/WebServices/nf-webservices-wsgetsecuritycontextproperty"><strong>WsGetSecurityContextProperty</strong></a></td>
<td>Gets a property of the specified security context.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/WebServices/nf-webservices-wsrevokesecuritycontext"><strong>WsRevokeSecurityContext</strong></a></td>
<td>Revokes a security context.</td>
</tr>
</tbody>
</table>
<p>Â </p>
<table>
<thead>
<tr>
<th>Handle</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="ws-security-context.html">WS_SECURITY_CONTEXT</a></td>
<td>An opaque type used to reference a security context object.</td>
</tr>
</tbody>
</table>
<p>Â </p>
<table>
<thead>
<tr>
<th>Structure</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="/windows/desktop/api/WebServices/ns-webservices-ws_security_context_property"><strong>WS_SECURITY_CONTEXT_PROPERTY</strong></a></td>
<td>Defines a property of a <a href="ws-security-context.html">WS_SECURITY_CONTEXT</a>.</td>
</tr>
</tbody>
</table>
<p>Â </p>
<p>Â </p>
<p>Â </p>
</body>
