<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Heap</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<p>title: Heap
description: A heap tracks a group of allocations that are freed as a unit.
ms.assetid: 3a25284a-8f15-42d4-a292-ece28a08fb69
keywords:</p>
<ul>
<li>Heap Web Services for Windows</li>
<li>WWSAPI</li>
<li>WWS
ms.topic: article
ms.date: 05/31/2018</li>
</ul>
<hr />
<h1>Heap</h1>
<p>A heap tracks a group of allocations that are freed as a unit.</p>
<p>This allows you to avoid complex patterns of allocating and deallocating memory when you use the WWSAPI.</p>
<p>There is a heap associated with every message. As a message is being sent, or as a message is being received, the heap of the message is used for any allocations relating to that particular message. After a message is sent or received, the heap is reset (which cleans up any allocations related to the particular message).</p>
<p>Heaps can also be used to store message data separately from the lifetime of a message. Many of the API's allow specification of the heap to use when reading data give explicit control over the lifetime of any data read.</p>
<p>Allocations from a heap are guaranteed to be aligned on at least an 8 byte boundary.</p>
<p>Zero byte allocations will return a non-NULL pointer.</p>
<p>In WindowsÂ 7, if PageHeap is enabled, a heap returned from HeapCreate is used to manage the memory. In this case, <a href="/windows/desktop/api/WebServices/nf-webservices-wsalloc"><strong>WsAlloc</strong></a> maps directly to HeapAlloc and <a href="/windows/desktop/api/WebServices/nf-webservices-wsresetheap"><strong>WsResetHeap</strong></a> maps to HeapDestroy.</p>
<p>The following enumeration is used with the heap:</p>
<ul>
<li><a href="/windows/desktop/api/WebServices/ne-webservices-ws_heap_property_id"><strong>WS_HEAP_PROPERTY_ID</strong></a></li>
</ul>
<p>The following functions are used with the heap:</p>
<ul>
<li><a href="/windows/desktop/api/WebServices/nf-webservices-wsalloc"><strong>WsAlloc</strong></a></li>
<li><a href="/windows/desktop/api/WebServices/nf-webservices-wscreateheap"><strong>WsCreateHeap</strong></a></li>
<li><a href="/windows/desktop/api/WebServices/nf-webservices-wsfreeheap"><strong>WsFreeHeap</strong></a></li>
<li><a href="/windows/desktop/api/WebServices/nf-webservices-wsgetheapproperty"><strong>WsGetHeapProperty</strong></a></li>
<li><a href="/windows/desktop/api/WebServices/nf-webservices-wsresetheap"><strong>WsResetHeap</strong></a></li>
</ul>
<p>The following handle is used with the heap:</p>
<ul>
<li><a href="ws-heap.html">WS_HEAP</a></li>
</ul>
<p>The following structures are used with the heap:</p>
<ul>
<li><a href="/windows/desktop/api/WebServices/ns-webservices-ws_heap_properties"><strong>WS_HEAP_PROPERTIES</strong></a></li>
<li><a href="/windows/desktop/api/WebServices/ns-webservices-ws_heap_property"><strong>WS_HEAP_PROPERTY</strong></a></li>
</ul>
<p>Â </p>
<p>Â </p>
</body>
