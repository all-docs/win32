<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Policy Support</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<p>title: Policy Support
description: Wsutil processes policy specified in input metadata, and generates helper routines for service model support.
ms.assetid: 9c4fb485-2392-4117-b4a7-7a51786d60b9
keywords:</p>
<ul>
<li>Policy Support Web Services for Windows</li>
<li>WWSAPI</li>
<li>WWS
ms.topic: article
ms.date: 05/31/2018</li>
</ul>
<hr />
<h1>Policy Support</h1>
<p>Wsutil processes policy specified in input metadata, and generates helper routines for service model support.</p>
<h2>How to use policy support in wsutil</h2>
<p>Developers should follow the following steps to use the policy support in wsutil compiler:</p>
<ul>
<li>Collect all the input metadata files necessary for the targeted web service.</li>
<li>Compile all the collected WSDL/XSD/policy files using wsutil.exe. Wsutil generates one set of stub file and header file for each input WSDL and XSD files.</li>
<li>Inspect generated header file, all the policy helper routine names are listed in the comment section at the beginning of the header file.</li>
<li>Use bindingName_CreateServiceProxy helper routine to create service proxy.</li>
<li>Use bindingName_CreateServiceEndpoint helper routine to create service endpoint.</li>
<li>Fill in WS_bindingTemplateType_BINDING_TEMPLATE structure specified in the method signature. Developers can provide additional channel properties and/or security properties as needed.</li>
<li>Call the helper routines, on successful return service proxy or service endpoint is created.</li>
</ul>
<p>Following sections describes related topics in detail.</p>
<h2>Handle policy input</h2>
<p>The following are <a href="web-service-compiler-tool.html">compiler options</a> related to policy processing.</p>
<p>By default, wsutil will always generate policy templates unless called with the &quot;/nopolicy&quot; option. Policy can be embedded as part of a WSDL file or can be created separately as a policy metadata file which wsutil takes as input. The compiler option &quot;/wsp:&quot; is used to indicate that specified input metadata is a policy file. Wsutil generates potential policy related helpers with the following compilation:</p>
<p><strong>wsutil /wsdl:trusted.wsdl /wsdl:trusted1.wsdl</strong></p>
<p><strong>wstuil /wsdl:input.wsdl /wsp:policy.wsp</strong></p>
<p>No policy helpers are generated when the &quot;/nopolicy&quot; option is used as in the following example.</p>
<p><strong>wsutil /nopolicy /wsdl:trusted.wsdl /wsdl:trusted1.wsdl</strong></p>
<h2>Policy related code generated by the wsutil compiler</h2>
<p><a href="metadata-mapping.html">Metadata Mapping</a> page details the mapping between metadata constructs with different binding types.</p>
<p>Three categories of policy settings can be specified in policy settings:</p>
<ul>
<li>Channel Properties. Currently only the following channel properties are supported: <a href="/windows/desktop/api/WebServices/ne-webservices-ws_channel_property_id"><strong>WS_CHANNEL_PROPERTY_ENCODING</strong></a>, <strong>WS_CHANNEL_PROPERTY_ADDRESSING_VERSION</strong> and <strong>WS_CHANNEL_PROPERTY_ENVELOPE_VERSION</strong>.</li>
<li>Security properties. Currently only the following security properties are supported: <a href="/windows/desktop/api/WebServices/ne-webservices-ws_security_property_id"><strong>WS_SECURITY_PROPERTY_TIMESTAMP_USAGE</strong></a>, <strong>WS_SECURITY_PROPERTY_SECURITY_HEADER_LAYOUT</strong>, <strong>WS_SECURITY_PROPERTY_TRANSPORT_PROTECTION_LEVEL</strong> and <strong>WS_SECURITY_PROPERTY_SECURITY_HEADER_VERSION</strong>.</li>
<li>Security binding. Currently only the following security bindings are supported: <a href="/windows/desktop/api/WebServices/ns-webservices-ws_http_header_auth_security_binding"><strong>WS_HTTP_HEADER_AUTH_SECURITY_BINDING</strong></a>, <a href="/windows/desktop/api/WebServices/ns-webservices-ws_ssl_transport_security_binding"><strong>WS_SSL_TRANSPORT_SECURITY_BINDING</strong></a>, <a href="/windows/desktop/api/WebServices/ns-webservices-ws_tcp_sspi_transport_security_binding"><strong>WS_TCP_SSPI_TRANSPORT_SECURITY_BINDING</strong></a>, <a href="/windows/desktop/api/WebServices/ns-webservices-ws_username_message_security_binding"><strong>WS_USERNAME_MESSAGE_SECURITY_BINDING</strong></a>, <a href="/windows/desktop/api/WebServices/ns-webservices-ws_kerberos_apreq_message_security_binding"><strong>WS_KERBEROS_APREQ_MESSAGE_SECURITY_BINDING</strong></a>, and <a href="/windows/desktop/api/WebServices/ns-webservices-ws_security_context_message_security_binding"><strong>WS_SECURITY_CONTEXT_MESSAGE_SECURITY_BINDING</strong></a>.</li>
</ul>
<p>Binding template type</p>
<p>There are limited numbers of bindings that are supported in wsutil. All those supported combinations of these bindings are listed in <a href="/windows/desktop/api/WebServices/ne-webservices-ws_binding_template_type"><strong>WS_BINDING_TEMPLATE_TYPE</strong></a> definition. For example, for the following binding in wsdl</p>
<pre lang="syntax"><code>&lt;soap:binding style=&quot;document&quot; transport=&quot;http://schemas.xmlsoap.org/soap/http&quot; /&gt;
</code></pre>
<p>Wsutil generates <a href="/windows/desktop/api/WebServices/ne-webservices-ws_binding_template_type"><strong>WS_HTTP_BINDING_TEMPLATE_TYPE</strong></a> binding template type for this binding.</p>
<p>Policy descriptions</p>
<p>With the input policy setting, wsutil generates a set of policy descriptions describing the input policy, including the template type, as well as the values specified in the policy. For example, for input</p>
<pre lang="syntax"><code>&lt;wsdl:binding...&gt;
  &lt;soap11:binding.../&gt; =&lt; WS_ENVELOPE_VERSION_SOAP_1_1
&lt;/wsdl:binding&gt;
</code></pre>
<p>wsutil generates channel property description like:</p>
<pre lang="syntax"><code>WS_ENVELOPE_VERSION_SOAP_1_1,
{
  WS_CHANNEL_PROPERTY_ENVELOPE_VERSION,
  (void*)&amp;locaDefinitions.policies.bindHostedClientSoap.envelopeVersion, //points to the WS_ENVELOPE_VERSION_SOAP_1_1 value above
  sizeof(&amp;localDefinitions.policies.bindHostedClientSoap.envelopeVersion),
},
</code></pre>
<p>All the policy settings (channel properties, security properties and security binding properties) in one binding is aggregated into one WS_bindingTemplateType_POLICY_DESCRIPTION structure. <a href="/windows/desktop/api/WebServices/ne-webservices-ws_binding_template_type"><strong>WS_BINDING_TEMPLATE_TYPE</strong></a> specifies the different binding policy combinations wsutil supports.</p>
<p>Template structure to be filled in by application</p>
<p>Policy description contains all the policy information specified in input metadata for a given binding, but there are information that cannot be represented in the policy yet requires user input when using those policies setting to create service proxy and/or service endpoint. For example, application must provide credentials for HTTP header authentication.</p>
<p>Application needs to fill in template structure, named WS_bindingTemplateType_BINDING_TEMPLATE for each different binding template type, defined in webservices.h:</p>
<pre lang="syntax"><code>struct WS_bindingTemplateType_BINDING_TEMPLATE
{
  WS_CHANNEL_PROPERTIES channelProperties;
  WS_SECURITY_PROPERTIES securityProperties;
  possible_list_of_SECURITY_BINDING_TEMPLATEs;
  ...
};
</code></pre>
<p>The list of security binding templates is optional depends on the matched security binding. For example, <a href="/windows/desktop/api/WebServices/ns-webservices-ws_ssl_transport_security_binding_template"><strong>WS_SSL_TRANSPORT_SECURITY_BINDING_TEMPLATE</strong></a> field is presented in <a href="/windows/desktop/api/WebServices/ns-webservices-ws_http_ssl_binding_template"><strong>WS_HTTP_SSL_BINDING_TEMPLATE</strong></a> for application to provide SSL related security binding information, including the credential information.</p>
<p>Application needs to fill in all the fields in this structure before calling into webservices template APIs. Additional security properties, as well as security binding properties that are not representable in policy needs to be filled in, and webservices APIs merges the two set of properties in runtime. Fields can be zeroed out if not applicable. For example, securityProperties can be zeroed out if no additional security properties are needed.</p>
<p>Helper routines and policy description declaration in header files</p>
<p>wsutil creates helper routine to facilitate better support in service model layer, such that application can create service proxy and service endpoint easier. The policy description is also exposed such that application can use them directly. A CreateSerivceProxy help routine looks like:</p>
<pre lang="syntax"><code>HRESULT bindingName_CreateServiceProxy(
  __in_ecount_opt(propertyCount) const WS_PROXY_PROPERTY* properties,
  __in const ULONG propertyCount,
  __in WS_constraintName_BINDING_TEMPLATE* templateValue,
  __deref_out WS_SERVICE_PROXY** serviceProxy,
  __in_opt WS_ERROR* error);
</code></pre>
<p>Developers are encouraged to use those helper routines, though they can also directly use the underneath runtime routine provided by webservices.dll. Developers are not encouraged to use the policy descriptions directly when programming using <a href="service-model-layer-overview.html">service model</a> layer.</p>
<p>Policy description references are also generated in the header for advanced user. If developers do not use service model functionalities, they can use the policy descriptions directly.</p>
<pre lang="syntax"><code>struct {
  ...
  struct {
    ...
    } contracts;
  struct {
    WS_bindingTemplateType_POLICY_DESCRIPTION bindingName;
    ...
    } policies;
  }
</code></pre>
<p>Definition prototypes in stub files</p>
<p>A single policy description structure field per binding and its internally referenced helper descriptions are created in the local prototype structure. The policy descriptions are generated in the file where the <a href="/windows/desktop/api/WebServices/ns-webservices-ws_contract_description"><strong>WS_CONTRACT_DESCRIPTION</strong></a> is generated. Generally developers do not need to inspect the stub file during development, though stub file contains all the details about the policy specifications.</p>
<pre lang="syntax"><code>struct {
  ...
  struct {
  ... } contracts;
  ...
 struct {
      struct {
        hierarchy of policy template descriptions;
        } bindingName;
      ...
      list of bindings in the input wsdl file.
  } policies;
} fileNameLocalDefinitions;
</code></pre>
<p>Helper routines implementation in the stub files</p>
<p>Wsutil generates helper routines to simplify application calls to <a href="/windows/desktop/api/WebServices/nf-webservices-wscreateserviceproxy"><strong>WsCreateServiceProxy</strong></a> and creating <a href="/windows/desktop/api/WebServices/ns-webservices-ws_service_endpoint"><strong>WS_SERVICE_ENDPOINT</strong></a> base on information provided in policy settings.</p>
<p>Depends on the binding constraints specified for the given port, the first argument is different according to the template structure. Following example assumes HTTP transport, signature for service proxy creation is similar with one additional channel type parameter.</p>
<pre lang="syntax"><code>HRESULT bindingName_CreateServiceProxy(
    __in WS_bindingTemplateType_BINDING_TEMPLATE* templateValue,
    __in_ecount_opt(propertyCount) const WS_PROXY_PROPERTY* properties,
    __in const ULONG propertyCount,
    __deref_out WS_SERVICE_PROXY** serviceProxy,
    __in_opt WS_ERROR* error)
{
    return WsCreateServiceProxyFromTemplate(
      WS_CHANNEL_TYPE_REQUEST,    // this is fixed for http, requires input for TCP
      properties,     
      propertyCount, 
      WS_bindingTemplateType_BINDING_TEMPLATE_TYPE,
      templateValue,
      sizeof(WS_bindingTemplateType_BINDING_TEMPLATE),  
      &amp;fileName.policies.bindingName,   // template description as generated in the stub file
      sizeof(WS_constraintName_POLICY_DESCRIPTION),
      serviceProxy,     
      error);     
}
</code></pre>
<pre lang="syntax"><code>HRESULT bindingName_CreateServiceEndpoint(
__in WS_bindingTemplateType_BINDING_TEMPLATE* templateValue,
__in_opt const WS_STRING* addressUrl,
__in bindingNameFunctionTable* functionTable,
__in WS_SERVICE_SECURITY_CALLBACK authorizationCallback,
__in const WS_SERVICE_ENDPOINT_PROPERTY* properties,
__in ULONG propertyCount,
__in WS_HEAP* heap,
  __deref_out WS_SERVICE_ENDPOINT** serviceEndpoint,
  __in_opt WS_ERROR* error)
{
  WS_SERVICE_CONTRACT serviceContract;
  serviceContract.contractDescription = &amp;fileName.contracts.bindingName;
  serviceContract.defaultMessageHandlerCallback = NULL;
  serviceContract.methodTable = (const void *)functionTable;

  return WsCreateServiceEndpointFromTemplate(
      properties,
      propertyCount,
      addressUrl,    // service endpoint address
      WS_CHANNEL_TYPE_RESPONSE,    // this is fixed for http, requires input for TCP
      &amp;serviceContract,
      authorizationCallback,
      heap,
      WS_bindingTemplateType_BINDING_TEMPLATE_TYPE,
      templateValue,
      sizeof(WS_bindingTemplateType_BINDING_TEMPLATE),
      &amp;fileName.policies.bindingName,   // template description as generated in the stub file
      sizeof(WS_bindingTemplateType_POLICY_DESCRIPTION),
      serviceEndpoint,
      error);
}
</code></pre>
<h2>Supported policy settings</h2>
<p>Following table list all the supported binding template types, the matching security bindings required in the type, the template structure to be filled in by application for the type, and the matching description type. Application needs to fill in the template structure, while application developer should understand what are the security bindings required in the given policy.</p>
<table>
<thead>
<tr>
<th><a href="/windows/desktop/api/WebServices/ne-webservices-ws_binding_template_type"><strong>WS_BINDING_TEMPLATE_TYPE</strong></a></th>
<th>Security binding combinations</th>
<th>template structure to be filled in by application</th>
<th>policy description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="/windows/desktop/api/WebServices/ne-webservices-ws_binding_template_type"><strong>WS_HTTP_BINDING_TEMPLATE_TYPE</strong></a></td>
<td></td>
<td><a href="/windows/desktop/api/WebServices/ns-webservices-ws_http_binding_template"><strong>WS_HTTP_BINDING_TEMPLATE</strong></a></td>
<td><a href="/windows/desktop/api/WebServices/ns-webservices-ws_http_policy_description"><strong>WS_HTTP_POLICY_DESCRIPTION</strong></a></td>
</tr>
<tr>
<td><a href="/windows/desktop/api/WebServices/ne-webservices-ws_binding_template_type"><strong>WS_HTTP_SSL_BINDING_TEMPLATE_TYPE</strong></a></td>
<td><a href="/windows/desktop/api/WebServices/ns-webservices-ws_ssl_transport_security_binding"><strong>WS_SSL_TRANSPORT_SECURITY_BINDING</strong></a></td>
<td><a href="/windows/desktop/api/WebServices/ns-webservices-ws_http_ssl_binding_template"><strong>WS_HTTP_SSL_BINDING_TEMPLATE</strong></a></td>
<td><a href="/windows/desktop/api/WebServices/ns-webservices-ws_http_ssl_policy_description"><strong>WS_HTTP_SSL_POLICY_DESCRIPTION</strong></a></td>
</tr>
<tr>
<td><a href="/windows/desktop/api/WebServices/ne-webservices-ws_binding_template_type"><strong>WS_HTTP_HEADER_AUTH_BINDING_TEMPLATE_TYPE</strong></a></td>
<td><a href="/windows/desktop/api/WebServices/ns-webservices-ws_http_header_auth_security_binding"><strong>WS_HTTP_HEADER_AUTH_SECURITY_BINDING</strong></a></td>
<td><a href="/windows/desktop/api/WebServices/ns-webservices-ws_http_header_auth_binding_template"><strong>WS_HTTP_HEADER_AUTH_BINDING_TEMPLATE</strong></a></td>
<td><a href="/windows/desktop/api/WebServices/ns-webservices-ws_http_header_auth_policy_description"><strong>WS_HTTP_HEADER_AUTH_POLICY_DESCRIPTION</strong></a></td>
</tr>
<tr>
<td><a href="/windows/desktop/api/WebServices/ne-webservices-ws_binding_template_type"><strong>WS_HTTP_SSL_HEADER_AUTH_BINDING_TEMPLATE_TYPE</strong></a></td>
<td><a href="/windows/desktop/api/WebServices/ns-webservices-ws_ssl_transport_security_binding"><strong>WS_SSL_TRANSPORT_SECURITY_BINDING</strong></a> and <a href="/windows/desktop/api/WebServices/ns-webservices-ws_http_header_auth_security_binding"><strong>WS_HTTP_HEADER_AUTH_SECURITY_BINDING</strong></a></td>
<td><a href="/windows/desktop/api/WebServices/ns-webservices-ws_http_ssl_header_auth_binding_template"><strong>WS_HTTP_SSL_HEADER_AUTH_BINDING_TEMPLATE</strong></a></td>
<td><a href="/windows/desktop/api/WebServices/ns-webservices-ws_http_ssl_header_auth_policy_description"><strong>WS_HTTP_SSL_HEADER_AUTH_POLICY_DESCRIPTION</strong></a></td>
</tr>
<tr>
<td><a href="/windows/desktop/api/WebServices/ne-webservices-ws_binding_template_type"><strong>WS_HTTP_SSL_USERNAME_BINDING_TEMPLATE_TYPE</strong></a></td>
<td><a href="/windows/desktop/api/WebServices/ns-webservices-ws_ssl_transport_security_binding"><strong>WS_SSL_TRANSPORT_SECURITY_BINDING</strong></a> and <a href="/windows/desktop/api/WebServices/ns-webservices-ws_username_message_security_binding"><strong>WS_USERNAME_MESSAGE_SECURITY_BINDING</strong></a></td>
<td><a href="/windows/desktop/api/WebServices/ns-webservices-ws_http_ssl_username_binding_template"><strong>WS_HTTP_SSL_USERNAME_BINDING_TEMPLATE</strong></a></td>
<td><a href="/windows/desktop/api/WebServices/ns-webservices-ws_http_ssl_username_policy_description"><strong>WS_HTTP_SSL_USERNAME_POLICY_DESCRIPTION</strong></a></td>
</tr>
<tr>
<td><a href="/windows/desktop/api/WebServices/ne-webservices-ws_binding_template_type"><strong>WS_HTTP_SSL_KERBEROS_APREQ_BINDING_TEMPLATE_TYPE</strong></a></td>
<td><a href="/windows/desktop/api/WebServices/ns-webservices-ws_ssl_transport_security_binding"><strong>WS_SSL_TRANSPORT_SECURITY_BINDING</strong></a> and <a href="/windows/desktop/api/WebServices/ns-webservices-ws_kerberos_apreq_message_security_binding"><strong>WS_KERBEROS_APREQ_MESSAGE_SECURITY_BINDING</strong></a></td>
<td><a href="/windows/desktop/api/WebServices/ns-webservices-ws_http_ssl_kerberos_apreq_binding_template"><strong>WS_HTTP_SSL_KERBEROS_APREQ_BINDING_TEMPLATE</strong></a></td>
<td><a href="/windows/desktop/api/WebServices/ns-webservices-ws_http_ssl_kerberos_apreq_policy_description"><strong>WS_HTTP_SSL_KERBEROS_APREQ_POLICY_DESCRIPTION</strong></a></td>
</tr>
<tr>
<td><a href="/windows/desktop/api/WebServices/ne-webservices-ws_binding_template_type"><strong>WS_TCP_BINDING_TEMPLATE_TYPE</strong></a></td>
<td></td>
<td><a href="/windows/desktop/api/WebServices/ns-webservices-ws_tcp_binding_template"><strong>WS_TCP_BINDING_TEMPLATE</strong></a></td>
<td><a href="/windows/desktop/api/WebServices/ns-webservices-ws_tcp_policy_description"><strong>WS_TCP_POLICY_DESCRIPTION</strong></a></td>
</tr>
<tr>
<td><a href="/windows/desktop/api/WebServices/ne-webservices-ws_binding_template_type"><strong>WS_TCP_SSPI_BINDING_TEMPLATE_TYPE</strong></a></td>
<td><a href="/windows/desktop/api/WebServices/ns-webservices-ws_tcp_sspi_transport_security_binding"><strong>WS_TCP_SSPI_TRANSPORT_SECURITY_BINDING</strong></a></td>
<td><a href="/windows/desktop/api/WebServices/ns-webservices-ws_tcp_sspi_binding_template"><strong>WS_TCP_SSPI_BINDING_TEMPLATE</strong></a></td>
<td><a href="/windows/desktop/api/WebServices/ns-webservices-ws_tcp_sspi_policy_description"><strong>WS_TCP_SSPI_POLICY_DESCRIPTION</strong></a></td>
</tr>
<tr>
<td><a href="/windows/desktop/api/WebServices/ne-webservices-ws_binding_template_type"><strong>WS_TCP_SSPI_USERNAME_BINDING_TEMPLATE_TYPE</strong></a></td>
<td><a href="/windows/desktop/api/WebServices/ns-webservices-ws_tcp_sspi_transport_security_binding"><strong>WS_TCP_SSPI_TRANSPORT_SECURITY_BINDING</strong></a> and <a href="/windows/desktop/api/WebServices/ns-webservices-ws_username_message_security_binding"><strong>WS_USERNAME_MESSAGE_SECURITY_BINDING</strong></a></td>
<td><a href="/windows/desktop/api/WebServices/ns-webservices-ws_tcp_sspi_username_binding_template"><strong>WS_TCP_SSPI_USERNAME_BINDING_TEMPLATE</strong></a></td>
<td><a href="/windows/desktop/api/WebServices/ns-webservices-ws_tcp_sspi_username_policy_description"><strong>WS_TCP_SSPI_USERNAME_POLICY_DESCRIPTION</strong></a></td>
</tr>
<tr>
<td><a href="/windows/desktop/api/WebServices/ne-webservices-ws_binding_template_type"><strong>WS_TCP_SSPI_KERBEROS_APREQ_BINDING_TEMPLATE_TYPE</strong></a></td>
<td><a href="/windows/desktop/api/WebServices/ns-webservices-ws_tcp_sspi_transport_security_binding"><strong>WS_TCP_SSPI_TRANSPORT_SECURITY_BINDING</strong></a> and <a href="/windows/desktop/api/WebServices/ns-webservices-ws_kerberos_apreq_message_security_binding"><strong>WS_KERBEROS_APREQ_MESSAGE_SECURITY_BINDING</strong></a></td>
<td><a href="/windows/desktop/api/WebServices/ns-webservices-ws_tcp_sspi_kerberos_apreq_binding_template"><strong>WS_TCP_SSPI_KERBEROS_APREQ_BINDING_TEMPLATE</strong></a></td>
<td><a href="/windows/desktop/api/WebServices/ns-webservices-ws_tcp_sspi_kerberos_apreq_policy_description"><strong>WS_TCP_SSPI_KERBEROS_APREQ_POLICY_DESCRIPTION</strong></a></td>
</tr>
<tr>
<td><a href="/windows/desktop/api/WebServices/ne-webservices-ws_binding_template_type"><strong>WS_HTTP_SSL_USERNAME_SECURITY_CONTEXT_BINDING_TEMPLATE_TYPE</strong></a></td>
<td><a href="/windows/desktop/api/WebServices/ns-webservices-ws_ssl_transport_security_binding"><strong>WS_SSL_TRANSPORT_SECURITY_BINDING</strong></a> and <a href="/windows/desktop/api/WebServices/ns-webservices-ws_security_context_message_security_binding"><strong>WS_SECURITY_CONTEXT_MESSAGE_SECURITY_BINDING</strong></a> with <a href="/windows/desktop/api/WebServices/ns-webservices-ws_username_message_security_binding"><strong>WS_USERNAME_MESSAGE_SECURITY_BINDING</strong></a> in bootstrap channel</td>
<td><a href="/windows/desktop/api/WebServices/ns-webservices-ws_http_ssl_username_security_context_binding_template"><strong>WS_HTTP_SSL_USERNAME_SECURITY_CONTEXT_BINDING_TEMPLATE</strong></a></td>
<td><a href="/windows/desktop/api/WebServices/ns-webservices-ws_http_ssl_username_security_context_policy_description"><strong>WS_HTTP_SSL_USERNAME_SECURITY_CONTEXT_POLICY_DESCRIPTION</strong></a></td>
</tr>
<tr>
<td><a href="/windows/desktop/api/WebServices/ne-webservices-ws_binding_template_type"><strong>WS_HTTP_SSL_KERBEROS_APREQ_SECURITY_CONTEXT_BINDING_TEMPLATE_TYPE</strong></a></td>
<td><a href="/windows/desktop/api/WebServices/ns-webservices-ws_ssl_transport_security_binding"><strong>WS_SSL_TRANSPORT_SECURITY_BINDING</strong></a> and <a href="/windows/desktop/api/WebServices/ns-webservices-ws_security_context_message_security_binding"><strong>WS_SECURITY_CONTEXT_MESSAGE_SECURITY_BINDING</strong></a> with <a href="/windows/desktop/api/WebServices/ns-webservices-ws_kerberos_apreq_message_security_binding"><strong>WS_KERBEROS_APREQ_MESSAGE_SECURITY_BINDING</strong></a> in bootstrap channel</td>
<td><a href="/windows/desktop/api/WebServices/ns-webservices-ws_http_ssl_kerberos_apreq_security_context_binding_template"><strong>WS_HTTP_SSL_KERBEROS_APREQ_SECURITY_CONTEXT_BINDING_TEMPLATE</strong></a></td>
<td><a href="/windows/desktop/api/WebServices/ns-webservices-ws_http_ssl_kerberos_apreq_security_context_policy_description"><strong>WS_HTTP_SSL_KERBEROS_APREQ_SECURITY_CONTEXT_POLICY_DESCRIPTION</strong></a></td>
</tr>
<tr>
<td><a href="/windows/desktop/api/WebServices/ne-webservices-ws_binding_template_type"><strong>WS_TCP_SSPI_USERNAME_SECURITY_CONTEXT_BINDING_TEMPLATE_TYPE</strong></a></td>
<td><a href="/windows/desktop/api/WebServices/ns-webservices-ws_tcp_sspi_transport_security_binding"><strong>WS_TCP_SSPI_TRANSPORT_SECURITY_BINDING</strong></a> and <a href="/windows/desktop/api/WebServices/ns-webservices-ws_security_context_message_security_binding"><strong>WS_SECURITY_CONTEXT_MESSAGE_SECURITY_BINDING</strong></a> with <a href="/windows/desktop/api/WebServices/ns-webservices-ws_username_message_security_binding"><strong>WS_USERNAME_MESSAGE_SECURITY_BINDING</strong></a> in bootstrap channel</td>
<td><a href="/windows/desktop/api/WebServices/ns-webservices-ws_tcp_sspi_username_security_context_binding_template"><strong>WS_TCP_SSPI_USERNAME_SECURITY_CONTEXT_BINDING_TEMPLATE</strong></a></td>
<td><a href="/windows/desktop/api/WebServices/ns-webservices-ws_tcp_sspi_username_security_context_policy_description"><strong>WS_TCP_SSPI_USERNAME_SECURITY_CONTEXT_POLICY_DESCRIPTION</strong></a></td>
</tr>
<tr>
<td><a href="/windows/desktop/api/WebServices/ne-webservices-ws_binding_template_type"><strong>WS_TCP_SSPI_KERBEROS_APREQ_SECURITY_CONTEXT_BINDING_TEMPLATE_TYPE</strong></a></td>
<td><a href="/windows/desktop/api/WebServices/ns-webservices-ws_tcp_sspi_transport_security_binding"><strong>WS_TCP_SSPI_TRANSPORT_SECURITY_BINDING</strong></a> and <a href="/windows/desktop/api/WebServices/ns-webservices-ws_security_context_message_security_binding"><strong>WS_SECURITY_CONTEXT_MESSAGE_SECURITY_BINDING</strong></a> with <a href="/windows/desktop/api/WebServices/ns-webservices-ws_kerberos_apreq_message_security_binding"><strong>WS_KERBEROS_APREQ_MESSAGE_SECURITY_BINDING</strong></a> in bootstrap channel</td>
<td><a href="/windows/desktop/api/WebServices/ns-webservices-ws_tcp_sspi_kerberos_apreq_security_context_binding_template"><strong>WS_TCP_SSPI_KERBEROS_APREQ_SECURITY_CONTEXT_BINDING_TEMPLATE</strong></a></td>
<td><a href="/windows/desktop/api/WebServices/ns-webservices-ws_tcp_sspi_kerberos_apreq_security_context_policy_description"><strong>WS_TCP_SSPI_KERBEROS_APREQ_SECURITY_CONTEXT_POLICY_DESCRIPTION</strong></a></td>
</tr>
</tbody>
</table>
<p>Â </p>
<p>For example, <a href="/windows/desktop/api/WebServices/ne-webservices-ws_binding_template_type"><strong>WS_HTTP_SSL_BINDING_TEMPLATE_TYPE</strong></a> indicates the input policy for the binding specifies HTTP transport, and <a href="/windows/desktop/api/WebServices/ns-webservices-ws_ssl_transport_security_binding"><strong>WS_SSL_TRANSPORT_SECURITY_BINDING</strong></a>. Application needs to fill in <a href="/windows/desktop/api/WebServices/ns-webservices-ws_http_ssl_binding_template"><strong>WS_HTTP_SSL_BINDING_TEMPLATE</strong></a> structure before calling the helper routines, and the matching policy description is <a href="/windows/desktop/api/WebServices/ns-webservices-ws_http_ssl_policy_description"><strong>WS_HTTP_SSL_POLICY_DESCRIPTION</strong></a>. More specifically, the binding section in WSDL contains following segments:</p>
<pre lang="syntax"><code>&lt;wsp:Policy...&gt;
  &lt;sp:TransportBinding...&gt;
    &lt;wsp:Policy...&gt;
      &lt;sp:TransportToken...&gt;
        &lt;wsp:Policy...&gt;
          &lt;sp:HttpsToken.../&gt;
        &lt;/wsp:Policy...&gt;
      &lt;/sp:TransportToken...&gt;
    &lt;/wsp:Policy&gt;
  &lt;/sp:TransportBinding...&gt;
&lt;/wsp:Policy&gt;
</code></pre>
<pre lang="syntax"><code>&lt;wsdl:binding...&gt;
&lt;soap11:binding.../&gt; =&gt; WS_ENVELOPE_VERSION_SOAP_1_1
&lt;/wsdl:binding&gt;
</code></pre>
<h2>Security Context support</h2>
<p>In <a href="security-context.html">Security Context</a>, the bootstrap channel is created to establish the secure conversation in service channel. Wsutil only supports the scenario where bootstrap channel is the same as service channel, with the same channel properties and security properties. Transport security is required for security context message binding; wsutil supports bootstrap channels with other message security bindings, but only support security context as the only message security binding in the service channel, without combination with other message security bindings. Developers can support those combinations outside of the policy template support.</p>
<p>The following enumeration is part of policy support:</p>
<ul>
<li><a href="/windows/desktop/api/WebServices/ne-webservices-ws_binding_template_type"><strong>WS_BINDING_TEMPLATE_TYPE</strong></a></li>
</ul>
<p>The following functions are part of policy support:</p>
<ul>
<li><a href="/windows/desktop/api/WebServices/nf-webservices-wscreateserviceendpointfromtemplate"><strong>WsCreateServiceEndpointFromTemplate</strong></a></li>
<li><a href="/windows/desktop/api/WebServices/nf-webservices-wscreateserviceproxyfromtemplate"><strong>WsCreateServiceProxyFromTemplate</strong></a></li>
</ul>
<p>The following structures are part of policy support:</p>
<ul>
<li><a href="/windows/desktop/api/WebServices/ns-webservices-ws_http_binding_template"><strong>WS_HTTP_BINDING_TEMPLATE</strong></a></li>
<li><a href="/windows/desktop/api/WebServices/ns-webservices-ws_http_header_auth_binding_template"><strong>WS_HTTP_HEADER_AUTH_BINDING_TEMPLATE</strong></a></li>
<li><a href="/windows/desktop/api/WebServices/ns-webservices-ws_http_header_auth_policy_description"><strong>WS_HTTP_HEADER_AUTH_POLICY_DESCRIPTION</strong></a></li>
<li><a href="/windows/desktop/api/WebServices/ns-webservices-ws_http_header_auth_security_binding_policy_description"><strong>WS_HTTP_HEADER_AUTH_SECURITY_BINDING_POLICY_DESCRIPTION</strong></a></li>
<li><a href="/windows/desktop/api/WebServices/ns-webservices-ws_http_header_auth_security_binding_template"><strong>WS_HTTP_HEADER_AUTH_SECURITY_BINDING_TEMPLATE</strong></a></li>
<li><a href="/windows/desktop/api/WebServices/ns-webservices-ws_http_policy_description"><strong>WS_HTTP_POLICY_DESCRIPTION</strong></a></li>
<li><a href="/windows/desktop/api/WebServices/ns-webservices-ws_http_ssl_binding_template"><strong>WS_HTTP_SSL_BINDING_TEMPLATE</strong></a></li>
<li><a href="/windows/desktop/api/WebServices/ns-webservices-ws_http_ssl_header_auth_binding_template"><strong>WS_HTTP_SSL_HEADER_AUTH_BINDING_TEMPLATE</strong></a></li>
<li><a href="/windows/desktop/api/WebServices/ns-webservices-ws_http_ssl_header_auth_policy_description"><strong>WS_HTTP_SSL_HEADER_AUTH_POLICY_DESCRIPTION</strong></a></li>
<li><a href="/windows/desktop/api/WebServices/ns-webservices-ws_http_ssl_kerberos_apreq_binding_template"><strong>WS_HTTP_SSL_KERBEROS_APREQ_BINDING_TEMPLATE</strong></a></li>
<li><a href="/windows/desktop/api/WebServices/ns-webservices-ws_http_ssl_kerberos_apreq_policy_description"><strong>WS_HTTP_SSL_KERBEROS_APREQ_POLICY_DESCRIPTION</strong></a></li>
<li><a href="/windows/desktop/api/WebServices/ns-webservices-ws_http_ssl_kerberos_apreq_security_context_binding_template"><strong>WS_HTTP_SSL_KERBEROS_APREQ_SECURITY_CONTEXT_BINDING_TEMPLATE</strong></a></li>
<li><a href="/windows/desktop/api/WebServices/ns-webservices-ws_http_ssl_kerberos_apreq_security_context_policy_description"><strong>WS_HTTP_SSL_KERBEROS_APREQ_SECURITY_CONTEXT_POLICY_DESCRIPTION</strong></a></li>
<li><a href="/windows/desktop/api/WebServices/ns-webservices-ws_http_ssl_policy_description"><strong>WS_HTTP_SSL_POLICY_DESCRIPTION</strong></a></li>
<li><a href="/windows/desktop/api/WebServices/ns-webservices-ws_http_ssl_username_binding_template"><strong>WS_HTTP_SSL_USERNAME_BINDING_TEMPLATE</strong></a></li>
<li><a href="/windows/desktop/api/WebServices/ns-webservices-ws_http_ssl_username_policy_description"><strong>WS_HTTP_SSL_USERNAME_POLICY_DESCRIPTION</strong></a></li>
<li><a href="/windows/desktop/api/WebServices/ns-webservices-ws_http_ssl_username_security_context_binding_template"><strong>WS_HTTP_SSL_USERNAME_SECURITY_CONTEXT_BINDING_TEMPLATE</strong></a></li>
<li><a href="/windows/desktop/api/WebServices/ns-webservices-ws_http_ssl_username_security_context_policy_description"><strong>WS_HTTP_SSL_USERNAME_SECURITY_CONTEXT_POLICY_DESCRIPTION</strong></a></li>
<li><a href="/windows/desktop/api/WebServices/ns-webservices-ws_kerberos_apreq_message_security_binding_policy_description"><strong>WS_KERBEROS_APREQ_MESSAGE_SECURITY_BINDING_POLICY_DESCRIPTION</strong></a></li>
<li><a href="/windows/desktop/api/WebServices/ns-webservices-ws_kerberos_apreq_message_security_binding_template"><strong>WS_KERBEROS_APREQ_MESSAGE_SECURITY_BINDING_TEMPLATE</strong></a></li>
<li><a href="/windows/desktop/api/WebServices/ns-webservices-ws_security_context_message_security_binding_policy_description"><strong>WS_SECURITY_CONTEXT_MESSAGE_SECURITY_BINDING_POLICY_DESCRIPTION</strong></a></li>
<li><a href="/windows/desktop/api/WebServices/ns-webservices-ws_security_context_message_security_binding_template"><strong>WS_SECURITY_CONTEXT_MESSAGE_SECURITY_BINDING_TEMPLATE</strong></a></li>
<li><a href="/windows/desktop/api/WebServices/ns-webservices-ws_security_context_security_binding_policy_description"><strong>WS_SECURITY_CONTEXT_SECURITY_BINDING_POLICY_DESCRIPTION</strong></a></li>
<li><a href="/windows/desktop/api/WebServices/ns-webservices-ws_security_context_security_binding_template"><strong>WS_SECURITY_CONTEXT_SECURITY_BINDING_TEMPLATE</strong></a></li>
<li><a href="/windows/desktop/api/WebServices/ns-webservices-ws_ssl_transport_security_binding_policy_description"><strong>WS_SSL_TRANSPORT_SECURITY_BINDING_POLICY_DESCRIPTION</strong></a></li>
<li><a href="/windows/desktop/api/WebServices/ns-webservices-ws_ssl_transport_security_binding_template"><strong>WS_SSL_TRANSPORT_SECURITY_BINDING_TEMPLATE</strong></a></li>
<li><a href="/windows/desktop/api/WebServices/ns-webservices-ws_sspi_transport_security_binding_policy_description"><strong>WS_SSPI_TRANSPORT_SECURITY_BINDING_POLICY_DESCRIPTION</strong></a></li>
<li><a href="/windows/desktop/api/WebServices/ns-webservices-ws_tcp_binding_template"><strong>WS_TCP_BINDING_TEMPLATE</strong></a></li>
<li><a href="/windows/desktop/api/WebServices/ns-webservices-ws_tcp_policy_description"><strong>WS_TCP_POLICY_DESCRIPTION</strong></a></li>
<li><a href="/windows/desktop/api/WebServices/ns-webservices-ws_tcp_sspi_binding_template"><strong>WS_TCP_SSPI_BINDING_TEMPLATE</strong></a></li>
<li><a href="/windows/desktop/api/WebServices/ns-webservices-ws_tcp_sspi_kerberos_apreq_binding_template"><strong>WS_TCP_SSPI_KERBEROS_APREQ_BINDING_TEMPLATE</strong></a></li>
<li><a href="/windows/desktop/api/WebServices/ns-webservices-ws_tcp_sspi_kerberos_apreq_policy_description"><strong>WS_TCP_SSPI_KERBEROS_APREQ_POLICY_DESCRIPTION</strong></a></li>
<li><a href="/windows/desktop/api/WebServices/ns-webservices-ws_tcp_sspi_kerberos_apreq_security_context_binding_template"><strong>WS_TCP_SSPI_KERBEROS_APREQ_SECURITY_CONTEXT_BINDING_TEMPLATE</strong></a></li>
<li><a href="/windows/desktop/api/WebServices/ns-webservices-ws_tcp_sspi_kerberos_apreq_security_context_policy_description"><strong>WS_TCP_SSPI_KERBEROS_APREQ_SECURITY_CONTEXT_POLICY_DESCRIPTION</strong></a></li>
<li><a href="/windows/desktop/api/WebServices/ns-webservices-ws_tcp_sspi_policy_description"><strong>WS_TCP_SSPI_POLICY_DESCRIPTION</strong></a></li>
<li><a href="/windows/desktop/api/WebServices/ns-webservices-ws_tcp_sspi_transport_security_binding_template"><strong>WS_TCP_SSPI_TRANSPORT_SECURITY_BINDING_TEMPLATE</strong></a></li>
<li><a href="/windows/desktop/api/WebServices/ns-webservices-ws_tcp_sspi_username_binding_template"><strong>WS_TCP_SSPI_USERNAME_BINDING_TEMPLATE</strong></a></li>
<li><a href="/windows/desktop/api/WebServices/ns-webservices-ws_tcp_sspi_username_policy_description"><strong>WS_TCP_SSPI_USERNAME_POLICY_DESCRIPTION</strong></a></li>
<li><a href="/windows/desktop/api/WebServices/ns-webservices-ws_tcp_sspi_username_security_context_binding_template"><strong>WS_TCP_SSPI_USERNAME_SECURITY_CONTEXT_BINDING_TEMPLATE</strong></a></li>
<li><a href="/windows/desktop/api/WebServices/ns-webservices-ws_tcp_sspi_username_security_context_policy_description"><strong>WS_TCP_SSPI_USERNAME_SECURITY_CONTEXT_POLICY_DESCRIPTION</strong></a></li>
<li><a href="/windows/desktop/api/WebServices/ns-webservices-ws_username_message_security_binding_policy_description"><strong>WS_USERNAME_MESSAGE_SECURITY_BINDING_POLICY_DESCRIPTION</strong></a></li>
<li><a href="/windows/desktop/api/WebServices/ns-webservices-ws_username_message_security_binding_template"><strong>WS_USERNAME_MESSAGE_SECURITY_BINDING_TEMPLATE</strong></a></li>
</ul>
<p>Â </p>
<p>Â </p>
</body>
