<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Contract</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<p>title: Contract
description: A service contract carries metadata that defines how a service to handles channel messages.
ms.assetid: 670530bf-344b-4480-8357-8984d80c0c68
keywords:</p>
<ul>
<li>Contract Web Services for Windows</li>
<li>WWSAPI</li>
<li>WWS
ms.topic: article
ms.date: 05/31/2018</li>
</ul>
<hr />
<h1>Contract</h1>
<p>A service contract carries metadata that defines how a service to handles channel messages.</p>
<p>A <a href="/windows/desktop/api/WebServices/ns-webservices-ws_service_contract"><strong>WS_SERVICE_CONTRACT</strong></a> carries metadata for a service to handle a <a href="ws-message.html">WS_MESSAGE</a>.</p>
<p><img src="images/servicecontractintro.png" alt="Diagram showing WS_SERVICE_CONTRACT metadata in a message to a service endpoint." /></p>
<p>It has a <a href="/windows/desktop/api/WebServices/ns-webservices-ws_contract_description"><strong>WS_CONTRACT_DESCRIPTION</strong></a> and a function table. An application can optionally specify <a href="/windows/desktop/api/WebServices/nc-webservices-ws_service_message_receive_callback"><strong>WS_SERVICE_MESSAGE_RECEIVE_CALLBACK</strong></a>.</p>
<p>If a <a href="/windows/desktop/api/WebServices/ns-webservices-ws_contract_description"><strong>WS_CONTRACT_DESCRIPTION</strong></a> and a function table are not given, the application is required to specify <a href="/windows/desktop/api/WebServices/nc-webservices-ws_service_message_receive_callback"><strong>WS_SERVICE_MESSAGE_RECEIVE_CALLBACK</strong></a>.</p>
<p><img src="images/servicecontract.png" alt="Diagram showing the Add and Subtract service operations in the ICalculator service contract." /></p>
<pre lang="syntax"><code>static WS_SERVICE_CONTRACT calculatorContract = 
{
    &amp;calculatorContractDescription, 
    NULL, 
    &amp;calculatorFunctions, 
};
</code></pre>
<p>See the <a href="httpcalculatorserviceexample.html">calculator</a> example for details.</p>
<p>Contract Description</p>
<p><a href="/windows/desktop/api/WebServices/ns-webservices-ws_contract_description"><strong>WS_CONTRACT_DESCRIPTION</strong></a> is metadata defining the type-contract of the service. Generated by <a href="web-service-compiler-tool.html">wsutil.exe</a>.</p>
<p>In terms of WSDL, a <a href="/windows/desktop/api/WebServices/ns-webservices-ws_contract_description"><strong>WS_CONTRACT_DESCRIPTION</strong></a> maps to a wsdl:portType. For each wsdl:portType in the WSDL document a separate <strong>WS_CONTRACT_DESCRIPTION</strong> will be generated.</p>
<p>A contract description is made up of one or more <a href="service-operation.html">service operations</a>. These operations are given as an array of <a href="/windows/desktop/api/WebServices/ns-webservices-ws_operation_description"><strong>WS_OPERATION_DESCRIPTION</strong></a>.</p>
<p><img src="images/porttypetocontract.png" alt="Diagram showing a WS_CONTRACT_DESCRIPTION as an array of WS_OPERATION_DESCRIPTIONs." /></p>
<pre lang="syntax"><code>&lt;wsdl:definitions xmlns:soap=&quot;https://schemas.xmlsoap.org/wsdl/soap/&quot; 
xmlns:wsu=&quot;https://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot; 
xmlns:soapenc=&quot;https://schemas.xmlsoap.org/soap/encoding/&quot; xmlns:tns=&quot;https://Example.org&quot; 
xmlns:wsa=&quot;https://schemas.xmlsoap.org/ws/2004/08/addressing&quot; xmlns:wsp=&quot;https://schemas.xmlsoap.org/ws/2004/09/policy&quot; 
xmlns:wsap=&quot;https://schemas.xmlsoap.org/ws/2004/08/addressing/policy&quot; xmlns:xsd=&quot;https://www.w3.org/2001/XMLSchema&quot; 
xmlns:msc=&quot;http://schemas.microsoft.com/ws/2005/12/wsdl/contract&quot; xmlns:wsaw=&quot;https://www.w3.org/2006/05/addressing/wsdl&quot; 
xmlns:soap12=&quot;https://schemas.xmlsoap.org/wsdl/soap12/&quot; xmlns:wsa10=&quot;https://www.w3.org/2005/08/addressing&quot; 
xmlns:wsx=&quot;https://schemas.xmlsoap.org/ws/2004/09/mex&quot; targetNamespace=&quot;https://Example.org&quot; 
xmlns:wsdl=&quot;https://schemas.xmlsoap.org/wsdl/&quot;&gt;
 &lt;wsdl:portType name=&quot;ICalculator&quot;&gt;
  &lt;wsdl:operation name=&quot;Add&quot;&gt;
   &lt;wsdl:input wsaw:Action=&quot;https://Example.org/ICalculator/Add&quot; 
   message=&quot;tns:ICalculator_Add_InputMessage&quot; /&gt;
   &lt;wsdl:output wsaw:Action=&quot;https://Example.org/ICalculator/AddResponse&quot; 
   message=&quot;tns:ICalculator_Add_OutputMessage&quot; /&gt;
  &lt;/wsdl:operation&gt;
 &lt;/wsdl:portType&gt;
&lt;/wsdl:definitions&gt;
</code></pre>
<p>For details of wsdl:portType to <a href="/windows/desktop/api/WebServices/ns-webservices-ws_contract_description"><strong>WS_CONTRACT_DESCRIPTION</strong></a> conversion, see the <a href="wsdl-support.html">WSDL output section</a>.</p>
<p>Example: <a href="/windows/desktop/api/WebServices/ns-webservices-ws_contract_description"><strong>WS_CONTRACT_DESCRIPTION</strong></a></p>
<pre lang="syntax"><code>static WS_CONTRACT_DESCRIPTION contractDescriptionICalculator =
{
    WsCountOf(serviceOperationsICalculator),
    serviceOperationsICalculator
};
</code></pre>
<p>Function Table</p>
<p>Function Table is a struct of function pointers representing each of the <a href="service-operation.html">service operations</a> in the service contract. The function table definition is also generated by <a href="web-service-compiler-tool.html">wsutil.exe</a>.</p>
<p>Example: Function Table</p>
<pre lang="syntax"><code> // Function Table
struct CalculatorServiceFunctionTable
{
      AddOperation Add;
      SubtractOperation Subtract;
};

// Populate the Function Table
static const CalculatorServiceFunctionTable calculatorFunctions = {Add, Subtract};
</code></pre>
<p>Using the <a href="/windows/desktop/api/WebServices/nc-webservices-ws_service_message_receive_callback"><strong>WS_SERVICE_MESSAGE_RECEIVE_CALLBACK</strong></a></p>
<p><a href="/windows/desktop/api/WebServices/nc-webservices-ws_service_message_receive_callback"><strong>WS_SERVICE_MESSAGE_RECEIVE_CALLBACK</strong></a> has a dual mutually exclusive role.</p>
<p>If a <a href="/windows/desktop/api/WebServices/ns-webservices-ws_contract_description"><strong>WS_CONTRACT_DESCRIPTION</strong></a> is specified on the <a href="/windows/desktop/api/WebServices/ns-webservices-ws_service_contract"><strong>WS_SERVICE_CONTRACT</strong></a>, this becomes the default message handler for all the actions which are not supported by the specified <strong>WS_CONTRACT_DESCRIPTION</strong>. Otherwise, if <strong>WS_CONTRACT_DESCRIPTION</strong> is not specified on the <strong>WS_SERVICE_CONTRACT</strong>, and the <a href="/windows/desktop/api/WebServices/nc-webservices-ws_service_message_receive_callback"><strong>WS_SERVICE_MESSAGE_RECEIVE_CALLBACK</strong></a> is specified on the <strong>WS_SERVICE_CONTRACT</strong> all in coming <a href="ws-message.html">messages</a> are passed to this callback.</p>
<p>For more examples, please see</p>
<ul>
<li><a href="untypedserviceexample.html">Untyped service example</a></li>
<li><a href="httpcalculatorserviceexample.html">Calculator service example</a></li>
<li><a href="service-operation.html">Service operations</a></li>
</ul>
<p>The following callbacks are part of the contract:</p>
<ul>
<li><a href="/windows/desktop/api/WebServices/nc-webservices-ws_service_message_receive_callback"><strong>WS_SERVICE_MESSAGE_RECEIVE_CALLBACK</strong></a></li>
<li><a href="/windows/desktop/api/WebServices/nc-webservices-ws_service_stub_callback"><strong>WS_SERVICE_STUB_CALLBACK</strong></a></li>
</ul>
<p>The following structures are part of the contract:</p>
<ul>
<li><a href="/windows/desktop/api/WebServices/ns-webservices-ws_contract_description"><strong>WS_CONTRACT_DESCRIPTION</strong></a></li>
<li><a href="/windows/desktop/api/WebServices/ns-webservices-ws_service_contract"><strong>WS_SERVICE_CONTRACT</strong></a></li>
</ul>
<p>Â </p>
<p>Â </p>
</body>
