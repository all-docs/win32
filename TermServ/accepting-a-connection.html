<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Accepting a Connection (Remote Desktop Services)</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>title: Accepting a Connection (Remote Desktop Services)
description: At some point in time, the dynamic virtual channel (DVC) client will request a connection to the DVC listener.
ms.assetid: eab17aa9-590c-4da2-a1a9-6e50a11d1de7
ms.tgt_platform: multiple
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>Accepting a Connection (Remote Desktop Services)</h1>
<p>At some point in time, the dynamic virtual channel (DVC) client will request a connection to the DVC listener. When this occurs, the listener can spawn a unique communication channel to the client, which is handled by the <a href="/windows/desktop/api/TsVirtualChannels/nf-tsvirtualchannels-iwtslistenercallback-onnewchannelconnection"><strong>OnNewChannelConnection</strong></a> method of <a href="/windows/desktop/api/TsVirtualChannels/nn-tsvirtualchannels-iwtsvirtualchannelcallback"><strong>IWTSListenerCallback</strong></a>. For an example, see the implementation of <strong>CDVCSamplePlugin::OnNewChannelConnection</strong> in the <a href="dvc-client-plug-in-example.html">DVC Client Plug-in Example</a> sample code.</p>
<p>The following figure shows the sequence of events for establishing a DVC connection. The shaded objects are user-supplied (DVC application/service and <a href="/windows/desktop/api/TsVirtualChannels/nn-tsvirtualchannels-iwtslistenercallback"><strong>IWTSListenerCallback</strong></a>), while the un-shaded objects are part of the framework (Remote Desktop Session Host (RDÂ Session Host) service, listener, and <a href="/windows/desktop/api/TsVirtualChannels/nn-tsvirtualchannels-iwtsvirtualchannel"><strong>IWTSVirtualChannel</strong></a>).</p>
<p><img src="images/acceptingconnection.png" alt="sequence of events for establishing a dvc connection" /></p>
<blockquote>
<p>[!Note]<br />
This figure assumes that a listener object has been created through a <a href="/windows/desktop/api/TsVirtualChannels/nf-tsvirtualchannels-iwtsvirtualchannelmanager-createlistener"><strong>CreateListener</strong></a> call to <a href="/windows/desktop/api/TsVirtualChannels/nn-tsvirtualchannels-iwtsvirtualchannelmanager"><strong>IWTSVirtualChannelManager</strong></a>, and that the plug-in has specified <a href="/windows/desktop/api/TsVirtualChannels/nn-tsvirtualchannels-iwtslistenercallback"><strong>IWTSListenerCallback</strong></a> as a parameter.</p>
</blockquote>
<p>Â </p>
<p>Â </p>
<p>Â </p>
</body>
