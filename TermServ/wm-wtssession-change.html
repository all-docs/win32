<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>WM_WTSSESSION_CHANGE message</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<p>title: WM_WTSSESSION_CHANGE message (Winuser.h)
description: Notifies applications of changes in session state.
ms.assetid: 758a130c-b75a-40fd-8530-3766aa86c5ba
ms.tgt_platform: multiple
keywords:</p>
<ul>
<li>WM_WTSSESSION_CHANGE message Remote Desktop Services
topic_type:</li>
<li>apiref
api_name:</li>
<li>WM_WTSSESSION_CHANGE
api_location:</li>
<li>Winuser.h
api_type:</li>
<li>HeaderDef
ms.topic: reference
ms.date: 05/31/2018</li>
</ul>
<hr />
<h1>WM_WTSSESSION_CHANGE message</h1>
<p>Notifies applications of changes in session state.</p>
<p>The window receives this message through its <a href="/windows/win32/api/winuser/nc-winuser-wndproc"><strong>WindowProc</strong></a> function.</p>
<pre lang="C++"><code>LRESULT CALLBACK WindowProc(
  HWND hWnd,       // handle to window
  UINT Msg,        // WM_WTSSESSION_CHANGE
  WPARAM wParam,   // session state change event
  LPARAM lParam    // session ID
);
</code></pre>
<h2>Parameters</h2>
<!-- raw HTML omitted -->
<p><em>hWnd</em> [in]</p>
<!-- raw HTML omitted -->
<p>Handle to the window.</p>
<!-- raw HTML omitted -->
<p><em>Msg</em> [in]</p>
<!-- raw HTML omitted -->
<p>Specifies the message (<strong>WM_WTSSESSION_CHANGE</strong>).</p>
<!-- raw HTML omitted -->
<p><em>wParam</em> [in]</p>
<!-- raw HTML omitted -->
<p>Status code describing the reason the session state change notification was sent. This parameter can be one of the following values.</p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><strong>WTS_CONSOLE_CONNECT</strong> (0x1)</p>
<!-- raw HTML omitted -->
<p>The session identified by <em>lParam</em> was connected to the console terminal or RemoteFX session.</p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><strong>WTS_CONSOLE_DISCONNECT</strong> (0x2)</p>
<!-- raw HTML omitted -->
<p>The session identified by <em>lParam</em> was disconnected from the console terminal or RemoteFX session.</p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><strong>WTS_REMOTE_CONNECT</strong> (0x3)</p>
<!-- raw HTML omitted -->
<p>The session identified by <em>lParam</em> was connected to the remote terminal.</p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><strong>WTS_REMOTE_DISCONNECT</strong> (0x4)</p>
<!-- raw HTML omitted -->
<p>The session identified by <em>lParam</em> was disconnected from the remote terminal.</p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><strong>WTS_SESSION_LOGON</strong> (0x5)</p>
<!-- raw HTML omitted -->
<p>A user has logged on to the session identified by <em>lParam</em>.</p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><strong>WTS_SESSION_LOGOFF</strong> (0x6)</p>
<!-- raw HTML omitted -->
<p>A user has logged off the session identified by <em>lParam</em>.</p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><strong>WTS_SESSION_LOCK</strong> (0x7)</p>
<!-- raw HTML omitted -->
<p>The session identified by <em>lParam</em> has been locked.</p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><strong>WTS_SESSION_UNLOCK</strong> (0x8)</p>
<!-- raw HTML omitted -->
<p>The session identified by <em>lParam</em> has been unlocked.</p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><strong>WTS_SESSION_REMOTE_CONTROL</strong> (0x9)</p>
<!-- raw HTML omitted -->
<p>The session identified by <em>lParam</em> has changed its remote controlled status. To determine the status, call <a href="/windows/desktop/api/winuser/nf-winuser-getsystemmetrics"><strong>GetSystemMetrics</strong></a> and check the <strong>SM_REMOTECONTROL</strong> metric.</p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><strong>WTS_SESSION_CREATE</strong> (0xA)</p>
<!-- raw HTML omitted -->
<p>Reserved for future use.</p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><strong>WTS_SESSION_TERMINATE</strong> (0xB)</p>
<!-- raw HTML omitted -->
<p>Reserved for future use.</p>
<!-- raw HTML omitted -->
<p><em>lParam</em> [in]</p>
<!-- raw HTML omitted -->
<p>The identifier of the session.</p>
<!-- raw HTML omitted -->
<h2>Return value</h2>
<p>The return value is ignored.</p>
<h2>Remarks</h2>
<p>This message is sent only to applications that have registered to receive this message by calling <a href="/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtsregistersessionnotification"><strong>WTSRegisterSessionNotification</strong></a>.</p>
<p>Examples of how applications can respond to this message include releasing or acquiring console-specific resources, determining how a screen is to be painted, or triggering console animation effects.</p>
<h2>Requirements</h2>
<table>
<thead>
<tr>
<th>Requirement</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Minimum supported client<!-- raw HTML omitted --></td>
<td>Windows Vista<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Minimum supported server<!-- raw HTML omitted --></td>
<td>Windows Server 2008<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Header<!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted -->Winuser.h (include Windows.h)<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<h2>See also</h2>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtsregistersessionnotification"><strong>WTSRegisterSessionNotification</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtsunregistersessionnotification"><strong>WTSUnRegisterSessionNotification</strong></a></p>
<!-- raw HTML omitted -->
</body>
