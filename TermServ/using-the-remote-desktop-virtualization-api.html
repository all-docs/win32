<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Using the Remote Desktop Virtualization API</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<p>title: Using the Remote Desktop Virtualization API
description: Developers can use this API to customize the logic that RDÂ Connection Broker uses to determine the best destination for an incoming client connection.
ms.assetid: b25eb87e-dac4-49ce-890e-b39c7e9e3408
ms.tgt_platform: multiple
keywords:</p>
<ul>
<li>Remote Desktop Services Remote Desktop Services , using the virtualization API
ms.topic: article
ms.date: 05/31/2018</li>
</ul>
<hr />
<h1>Using the Remote Desktop Virtualization API</h1>
<p>The Terminal Services Session Directory (TSÂ  Session Directory) role service allows terminal servers to store user and session information in a database called a session directory. When a user connects to a terminal server in a farm, TSÂ Session Directory determines whether the user already has a session running on a terminal server and if so, it redirects the user to that terminal server.</p>
<p>In Windows ServerÂ 2008, the TSÂ Session Directory role service was expanded and renamed Terminal Services Session Broker (TSÂ Session Broker). In addition to maintaining a directory of existing sessions, TSÂ Session Broker can also broker incoming connections. When TSÂ Session Broker receives an incoming connection from a user, it checks its database to determine whether the user has an existing session on a terminal server. If so, TSÂ Session Broker redirects the connection to that same terminal server. If not, TSÂ Session Broker determines which terminal server has the fewest connections and redirects the connection to that server.</p>
<p>Beginning with Windows ServerÂ 2008, Microsoft also released a public application programming interface (API) for monitoring and interacting with sessions on terminal servers. This API is described in <a href="/windows/desktop/TermServ/terminal-services-virtualization-api-reference">Remote Desktop Connection Broker Plug-in Reference</a>. Using this API, developers can create custom policy plug-ins that override the standard redirection logic of TSÂ Session Broker. The custom plug-ins can redirect sessions to terminal servers, as well as virtual machines, virtual desktops, blade servers, and physical desktops.</p>
<p>In Windows ServerÂ 2008Â R2, the architecture of Remote Desktop Connection Broker (RDÂ Connection Broker) (formerly known as TSÂ Session Broker) was expanded to support connections to virtual machines. The new architecture supports session management for virtual machines through the Remote Desktop Virtualization API. Developers can use this API to customize the logic that RDÂ Connection Broker uses to determine the best destination for an incoming client connection.</p>
<p>Remote Desktop Virtualization API offers several benefits to developers:</p>
<ul>
<li>The interfaces for working with physical terminal servers are similar to those for working with virtual machines.</li>
<li>Developers can replace all or part of the standard redirection logic. Developers can build on the code that ships with the product and do not have to write everything from scratch.</li>
<li>No additional management agent is required on the managing server or within the session.</li>
<li>TSÂ Session Broker plug-ins developed for use with Windows ServerÂ 2008 are still supported.</li>
<li>The API also allows developers to create user interfaces for administration of both Remote Desktop Session Host (RDÂ Session Host) servers (formerly known as &quot;terminal servers&quot;) and virtual machines.</li>
</ul>
<h2>Related topics</h2>
<!-- raw HTML omitted -->
<p><a href="terminal-services-virtualization-api-reference.html">Remote Desktop Virtualization API Reference</a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/TermServ/terminal-services-virtualization-api-reference">Remote Desktop Connection Broker Plug-in Reference</a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
