<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>CaptureStackBackTrace function</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<p>UID:
title: CaptureStackBackTrace function
description: Captures a stack back trace by walking up the stack.
old-location:
ms.assetid: na
ms.date: 04/10/2019
ms.keywords: RtlCaptureStackBackTrace
ms.topic: reference
req.header: WinBase.h
req.include-header: Windows.h
req.target-type: Windows
req.target-min-winverclnt: Windows XP [desktop apps | UWP apps]
req.target-min-winversvr: Windows Server 2003 [desktop apps | UWP apps]
req.kmdf-ver:
req.umdf-ver:
req.ddi-compliance:
req.unicode-ansi:
req.idl:
req.max-support:
req.namespace:
req.assembly:
req.type-library:
req.lib: Kernel32.lib
req.dll: API-MS-Win-Core-rtlsupport-l1-1-0.dll
req.irql:
topic_type:</p>
<ul>
<li>APIRef
api_type:
api_location:</li>
<li>API-MS-Win-Core-rtlsupport-l1-1-0.dll
api_name:</li>
<li>CaptureStackBackTrace
targetos: Windows
req.typenames:
req.redist:</li>
</ul>
<hr />
<h1>CaptureStackBackTrace function</h1>
<h2>Description</h2>
<p>Captures a stack back trace by walking up the stack and recording the information for each frame.</p>
<pre lang="cpp"><code>USHORT WINAPI CaptureStackBackTrace(
  _In_      ULONG  FramesToSkip,
  _In_      ULONG  FramesToCapture,
  _Out_     PVOID  *BackTrace,
  _Out_opt_ PULONG BackTraceHash
);
</code></pre>
<h2>Parameters</h2>
<h3>FramesToSkip [in]</h3>
<p>The number of frames to skip from the start of the back trace.</p>
<h3>FramesToCapture [in]</h3>
<p>The number of frames to be captured.
You can capture up to <strong>MAXUSHORT</strong> frames.</p>
<p><strong>Windows Server 2003 and Windows XP:</strong>  The sum of the <em>FramesToSkip</em> and <em>FramesToCapture</em> parameters must be less than 63.</p>
<h3>BackTrace [out]</h3>
<p>An array of pointers captured from the current stack trace.</p>
<h3>BackTraceHash [out, optional]</h3>
<p>A value that can be used to organize hash tables.
If this parameter is <strong>NULL</strong>, then no hash value is computed.</p>
<p>This value is calculated based on the values of the pointers returned in the BackTrace array.
Two identical stack traces will generate identical hash values.</p>
<h2>Returns</h2>
<p>The number of captured frames.</p>
<h2>Remarks</h2>
<p>The <strong>CaptureStackBackTrace</strong> function is defined as the <strong>RtlCaptureStackBackTrace</strong> function (the definition is included in the Windows SDK beginning with Windows Vista).
For more information, see WinBase.h and WinNT.h.</p>
<h2>See also</h2>
</body>
