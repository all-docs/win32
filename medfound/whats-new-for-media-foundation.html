<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>What's New for Media Foundation</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: Microsoft Media Foundation was introduced in WindowsÂ Vista as the replacement for DirectShow. Of course, DirectShow is still supported in WindowsÂ 7, but developers are encouraged to use Media Foundation in their new digital media applications.
ms.assetid: c345c0d9-5325-4f73-b9ec-1673ad10e3e4
title: Whats New for Media Foundation
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>What's New for Media Foundation</h1>
<p>Microsoft Media Foundation was introduced in WindowsÂ Vista as the replacement for DirectShow. Of course, DirectShow is still supported in WindowsÂ 7, but developers are encouraged to use Media Foundation in their new digital media applications.</p>
<p>The improvements to Media Foundation can be summarized as follows:</p>
<ul>
<li>Better format support, including MPEG-4</li>
<li>Support for capture devices and hardware codecs</li>
<li>A simplified programming model</li>
<li>Improvements to the platform</li>
</ul>
<h2>Better Format Support</h2>
<p>The Media Foundation audio/video pipeline was implemented in WindowsÂ Vista, but it supported a limited set of formats and file containers, which meant that some applications needed to fall back on older technologies such as DirectShow. In WindowsÂ 7, Media Foundation includes the following new codecs, media sources, and media sinks:</p>
<ul>
<li>AAC decoder</li>
<li>AAC encoder</li>
<li>AVI/WAVE file source</li>
<li>DV video decoder</li>
<li>H.264 video decoder</li>
<li>H.264 video encoder</li>
<li>MJPEG decoder</li>
<li>MP3 file sink*</li>
<li>MP4/3GP file source</li>
<li>MP4/3GP file sink</li>
</ul>
<blockquote>
<p>[!Note]<br />
The MP3 file sink does not include an MP3 audio encoder.</p>
</blockquote>
<p>Â </p>
<p>For more information, see <a href="supported-media-formats-in-media-foundation.html">Supported Media Formats in Media Foundation</a>.</p>
<h2>Hardware Device Support</h2>
<p>Media Foundation now supports the following types of hardware devices in the audio/video pipeline:</p>
<ul>
<li>UVC 1.1 video capture devices, such as webcams</li>
<li>Audio capture devices</li>
<li>Hardware encoders and decoders</li>
<li>Hardware video processors, such as color-space converters</li>
</ul>
<p>Hardware codecs can perform very fast video transcoding. For example, an application might transfer Windows Media Video (WMV) files to a cell phone that supports only 3GP files. Using a hardware encoder, the application can transcode the file in the background, just before transferring it to the device.</p>
<p>Hardware devices are represented in Media Foundation by a proxy object, and are used in the pipeline just like software-based components.</p>
<h2>Simplified Programming Model</h2>
<p>In WindowsÂ Vista, Media Foundation exposed a relatively low-level set of APIs. These APIs are flexible, but too complex for simple tasks. WindowsÂ 7 adds new high-level APIs that make it simpler to write media applications in C++. These new high-level APIs include the following.</p>
<table>
<thead>
<tr>
<th>API</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="source-reader.html">Source Reader</a></td>
<td>The source reader pulls raw or decoded data from a media file. For example, you can use the source reader to get thumbnail bitmaps from a video file, or to analyze the waveform data in an audio file. You can also use the source reader to get live data from an audio or video capture device. <!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="sink-writer.html">Sink Writer</a></td>
<td>The sink writer enables you to author media files by passing in uncompressed or encoded data. For example, you can use it to re-encode a video file, or to capture live video from a webcam to a file.</td>
</tr>
<tr>
<td><a href="transcode-api.html">Transcode API</a></td>
<td>This feature supports the most common audio/video encoding scenarios.<!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<p>Â </p>
<p>You can still use the low-level APIs in Media Foundation. You might do so if you need more control over the audio/video pipeline.</p>
<h2>Platform Improvements</h2>
<p>WindowsÂ 7 includes numerous enhancements to the underlying Media Foundation platform APIs. Advanced applications can use these APIs directly; other applications will get the benefits indirectly. The improvements include:</p>
<ul>
<li>Changes in the video pipeline to reduce power consumption and video memory usage.</li>
<li><a href="dxva-hd.html">DXVA-HD</a>: Microsoft DirectX Video Acceleration High Definition (DXVA-HD) is a new API for hardware-accelerated video processing. DXVA-HD offers a more flexible compositing model than the previous DXVA video processing API, and is better suited for high-definition video formats..</li>
<li>A new mechanism for enumerating sources and decoders, which includes merit values and a preferred/blocked list. This feature improves the overall reliability of the system. For more information, see the following topics:
<ul>
<li><a href="/windows/desktop/api/mfapi/nf-mfapi-mftenumex"><strong>MFTEnumEx</strong></a></li>
<li><a href="/windows/desktop/api/mfobjects/nn-mfobjects-imfplugincontrol"><strong>IMFPluginControl</strong></a></li>
<li><a href="codec-merit.html">Codec Merit</a></li>
</ul>
</li>
</ul>
<h2>SDK Changes</h2>
<ul>
<li>New headers and library files: <a href="media-foundation-headers-and-libraries.html">Media Foundation Headers and Libraries</a></li>
<li>DLL and .lib changes: <a href="media-foundation-headers-and-libraries.html">Library Changes in WindowsÂ 7</a></li>
<li>New SDK Samples:
<ul>
<li><a href="audio-clip-sample.html">Audio Clip Sample</a></li>
<li><a href="dxva-hd-sample.html">DXVA-HD Sample</a></li>
<li><a href="mfcaptured3d-sample.html">MFCaptureD3D Sample</a></li>
<li><a href="mfcapturetofile-sample.html">MFCaptureToFile Sample</a></li>
<li><a href="transcode-sample.html">Transcode Sample</a></li>
<li><a href="videothumbnail-sample.html">VideoThumbnail Sample</a></li>
</ul>
</li>
<li>Improvements to <a href="topoedit.html">TopoEdit</a>:
<ul>
<li>Support for transcoding. See Building a <a href="building-a-transcode-topology-with-topoedit.html">Transcode Topology with TopoEdit</a>.</li>
<li>Support for audio and video capture. See <a href="topology-menu.html">Topology Menu</a>.</li>
</ul>
</li>
</ul>
<h2>New in Windows 8</h2>
<p>Some of the new updates to Media Foundation with WindowsÂ 8 are:</p>
<ul>
<li>The <a href="/windows/desktop/api/mfcaptureengine/nn-mfcaptureengine-imfcaptureengine"><strong>IMFCaptureEngine</strong></a> controls one or more capture devices. See the <a href="capture-engine-attributes.html">Capture Engine Attributes</a> for a list of attributes. Other new media capture related interfaces are <a href="/windows/desktop/api/mfcaptureengine/nn-mfcaptureengine-imfcapturephotosink"><strong>IMFCapturePhotoSink</strong></a>, <a href="/windows/desktop/api/mfcaptureengine/nn-mfcaptureengine-imfcapturepreviewsink"><strong>IMFCapturePreviewSink</strong></a>, <a href="/windows/desktop/api/mfcaptureengine/nn-mfcaptureengine-imfcapturerecordsink"><strong>IMFCaptureRecordSink</strong></a>, <a href="/windows/desktop/api/mfcaptureengine/nn-mfcaptureengine-imfcapturesink"><strong>IMFCaptureSink</strong></a>, and <a href="/windows/desktop/api/mfcaptureengine/nn-mfcaptureengine-imfcapturesource"><strong>IMFCaptureSource</strong></a>.</li>
<li>The following Media Foundation class extensions are new for Windows 8:
<ul>
<li><a href="/windows/desktop/api/mfmediaengine/nn-mfmediaengine-imfmediaengineex"><strong>IMFMediaEngineEx</strong></a></li>
<li><a href="/windows/desktop/api/mfidl/nn-mfidl-imfmediasourceex"><strong>IMFMediaSourceEx</strong></a></li>
<li><a href="/windows/desktop/api/mfidl/nn-mfidl-imfrealtimeclientex"><strong>IMFRealTimeClientEx</strong></a></li>
<li><a href="/windows/desktop/api/mfreadwrite/nn-mfreadwrite-imfsinkwriterex"><strong>IMFSinkWriterEx</strong></a></li>
<li><a href="/windows/desktop/api/mfreadwrite/nn-mfreadwrite-imfsourcereaderex"><strong>IMFSourceReaderEx</strong></a></li>
<li><a href="/windows/desktop/api/mfidl/nn-mfidl-imfvideosampleallocatorex"><strong>IMFVideoSampleAllocatorEx</strong></a></li>
<li><a href="/windows/desktop/api/mfidl/nn-mfidl-imfworkqueueservicesex"><strong>IMFWorkQueueServicesEx</strong></a></li>
</ul>
</li>
<li><a href="direct3d-11-video-apis.html">Direct3D 11 Video API</a> are new for WindowsÂ 8. WindowsÂ 8 Desktop apps can still use <a href="direct3d-video-apis.html">Direct3D 9 Video API</a>, but Windows Store apps must use the new Direct3D 11 Video API. For info more info on Microsoft Direct3DÂ 11 Video see <a href="supporting-direct3d-11-video-decoding-in-media-foundation.html">Supporting Direct3D 11 Video Decoding in Media Foundation</a>.</li>
<li>There have been updates and improvements to Media Foundation work queues. See <a href="media-foundation-work-queue-and-threading-improvements.html">Work Queue and Threading Improvements</a> for more info.</li>
<li><a href="camera-encoder-h264-uvc-1-5.html">H.264 UVC 1.5 camera encoders</a>.</li>
<li>For a list of the Media Foundation API which can be used with Windows Store apps see <a href="media-foundation-headers-and-libraries.html">Win32 and COM for Windows Store apps (multimedia)</a>.</li>
<li>Media Foundation is not included with the N and KN editions of WindowsÂ 8. For more information, see <a href="https://support.microsoft.com/kb/2703761">Microsoft Windows Media Feature Pack for N and KN Versions of all Windows 8 Editions</a>.</li>
</ul>
<h2>Related topics</h2>
<!-- raw HTML omitted -->
<p><a href="about-the-media-foundation-sdk.html">About Media Foundation</a></p>
<!-- raw HTML omitted -->
<p><a href="microsoft-media-foundation-sdk.html">Microsoft Media Foundation</a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
