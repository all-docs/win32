<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>MFT_AudioDelay Sample</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: MFT_AudioDelay Sample
ms.assetid: 08f119f9-cacd-4000-96b6-60c8c0055e9c
title: MFT_AudioDelay Sample
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>MFT_AudioDelay Sample</h1>
<p>Shows how to implement an audio effect as a Media Foundation Transform (MFT). The audio delay MFT accepts PCM audio as input, applies a delay (echo) effect, and outputs the modified audio data.</p>
<h2>APIs Demonstrated</h2>
<p>This sample demonstrates the following Microsoft Media Foundation interfaces:</p>
<ul>
<li><a href="/windows/desktop/api/mftransform/nn-mftransform-imftransform"><strong>IMFTransform</strong></a></li>
</ul>
<h2>Usage</h2>
<p>The MFT_AudioDelay sample builds a DLL that is a COM server for the MFT. Before using the MFT, you must register the DLL. You can use the TopoEdit tool to build a topology that includes the audio delay MFT. For more information about TopoEdit, see <a href="topoedit.html">TopoEdit</a>. You can also modify the <a href="/previous-versions//bb970336(v=vs.85)">PlaybackFX Sample</a> to use the MFT. You will need to modify the AddBranchToPartialTopology function in Player.cpp. Change the following line from:</p>
<pre lang="syntax"><code>else if (majorType == MFMediaType_Audio)
{
    hr = CreateAudioBranch(pTopology, pSourceNode, GUID_NULL);
}
</code></pre>
<p>To:</p>
<pre lang="syntax"><code>else if (majorType == MFMediaType_Audio)
{
    hr = CreateAudioBranch(pTopology, pSourceNode, CLSID_DelayMFT);
}
</code></pre>
<p>The value CLSID_DelayMFT is declared in the header file AudioDelayUuids.h in the MFT_AudioDelay sample folder.</p>
<h2>Requirements</h2>
<table>
<thead>
<tr>
<th>Product</th>
<th>Version</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://msdn.microsoft.com/windowsvista/bb980924.aspx">Windows SDK</a></td>
<td>WindowsÂ 7</td>
</tr>
</tbody>
</table>
<p>Â </p>
<h2>Downloading the Sample</h2>
<p>This sample is available in the <a href="https://github.com/Microsoft/Windows-classic-samples/tree/master/Samples/Win7Samples/multimedia/mediafoundation/mft_audiodelay">Windows classic samples github repository</a>.</p>
<h2>Related topics</h2>
<!-- raw HTML omitted -->
<p><a href="media-foundation-sdk-samples.html">Media Foundation SDK Samples</a></p>
<!-- raw HTML omitted -->
<p><a href="media-foundation-transforms.html">Media Foundation Transforms</a></p>
<!-- raw HTML omitted -->
<p><a href="mft-grayscale-sample.html">MFT_Grayscale Sample</a></p>
<!-- raw HTML omitted -->
<p><a href="writing-a-custom-mft.html">Writing a Custom MFT</a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
