<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Instantiating an Encoder MFT</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: Instantiating an Encoder MFT
ms.assetid: 50b71c00-b7cf-4c38-8114-bb36b358fda5
title: Instantiating an Encoder MFT
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>Instantiating an Encoder MFT</h1>
<p>In Microsoft Media Foundation, encoders are implemented as <a href="media-foundation-transforms.html">Media Foundation transforms</a> (MFTs). Before creating an encoder, you must first find the encoder that is most suited to your needs.</p>
<ul>
<li>
<p>Windows Media audio codecs</p>
<p>Category: <strong>MFT_CATEGORY_AUDIO_ENCODER</strong></p>
<p>Major type: MFMediaType_Audio</p>
<p>SubType: MFAudioFormat_WMAudioV9, MFAudioFormat_WMAudioV8, MFAudioFormat_WMAudio_Lossless, MFAudioFormat_WMASPDIF</p>
</li>
<li>
<p>Windows Media video codecs</p>
<p>Category: <strong>MFT_CATEGORY_VIDEO_ENCODER</strong></p>
<p>Major type: MFMediaType_Video</p>
<p>SubType: MFVideoFormat_WVC1, MFVideoFormat_WMV3, MFVideoFormat_WMV2, MFVideoFormat_WMV1</p>
</li>
</ul>
<p>Media Foundation provides several functions that your application can call to enumerate the various encoders available in your system. Encoders are registered as COM objects and the registry entry follows the standard format for COM class factories. The registry maintains the CLSIDs for the encoders, which are categorized by the media format (audio or video). The class identifiers of the Windows Media encoders are defined as constants in the wmcodecdsp.h header file. In Media Foundation, the encoders can be registered through calls to <a href="/windows/desktop/api/mfapi/nf-mfapi-mftregisterlocal"><strong>MFTRegisterLocal</strong></a> or <a href="/windows/desktop/api/mfapi/nf-mfapi-mftregisterlocalbyclsid"><strong>MFTRegisterLocalByCLSID</strong></a> by specifying the category, the supported input types, and the supported output types. Upon successful registration through these functions, the MFTs are considered by the Media Foundation enumeration functions.</p>
<p>For creating an instance of an encoder MFT, an application has the following choices.</p>
<ul>
<li>Create the encoder MFT directly and receive a pointer to the <a href="/windows/desktop/api/mftransform/nn-mftransform-imftransform"><strong>IMFTransform</strong></a> interface. For more information, see <a href="using-an-encoder-s-imftransform--interface.html">Creating an Encoder by Using CoCreateInstance</a>.</li>
<li>Create an instance of the activation object for the encoder MFT and receive a pointer to the <a href="/windows/desktop/api/mfobjects/nn-mfobjects-imfactivate"><strong>IMFActivate</strong></a> interface. For more information, see <a href="using-an-encoder-s-activation-objects.html">Using an Encoder's Activation Objects</a>.</li>
</ul>
<p>If your application is using <a href="pipeline-layer-asf-components.html">Pipeline Layer ASF Components</a> to encode a file to ASF format, you must insert the encoder MFT into the pipeline as a transform node. While creating the transform node in the encoding topology, you can either set the object type as a pointer to the <a href="/windows/desktop/api/mftransform/nn-mftransform-imftransform"><strong>IMFTransform</strong></a> interface or the <a href="/windows/desktop/api/mfobjects/nn-mfobjects-imfactivate"><strong>IMFActivate</strong></a> object. Media Foundation provides activation objects for Windows Media encoders so that they can be conveniently set as the transform node in the encoding topology. When the topology is resolved, the Media Session uses the activation object to create an instance of the encoder MFT.</p>
<h2>Related topics</h2>
<!-- raw HTML omitted -->
<p><a href="windows-media-encoders.html">Windows Media Encoders</a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
