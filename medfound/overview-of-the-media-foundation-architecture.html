<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Overview of the Media Foundation Architecture</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: This topic describes the general design of Microsoft Media Foundation. For information about using Media Foundation for specific programming tasks, see Media Foundation Programming Guide.
ms.assetid: DEA2B19A-CF15-4BF4-84C3-9A6417C942E2
title: Overview of the Media Foundation Architecture
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>Overview of the Media Foundation Architecture</h1>
<p>This topic describes the general design of Microsoft Media Foundation. For information about using Media Foundation for specific programming tasks, see <a href="media-foundation-programming-guide.html">Media Foundation Programming Guide</a>.</p>
<p>The following diagram shows a high-level view of the Media Foundation architecture.</p>
<p><img src="images/mfarch01.png" alt="diagram showing a high-level view of the media foundation architecture." /></p>
<p>Media Foundation provides two distinct programming models. The first model, shown on the left side of the diagram, uses an end-to-end pipeline for media data. The application initializes the pipelineâ€”for example, by providing the URL of a file to playâ€”and then calls methods to control streaming. In the second model, shown on the right side of the diagram, the application either pulls data from a source, or pushes it to a destination (or both). This model is particularly useful if you need to process the data, because the application has direct access to the data stream.</p>
<h3>Primitives and Platform</h3>
<p>Starting from the bottom of the diagram, the <em>primitives</em> are helper objects used throughout the Media Foundation API:</p>
<ul>
<li><a href="attributes-and-properties.html">Attributes</a> are a generic way to store information inside an object, as a list of key/value pairs.</li>
<li><a href="media-types.html">Media Types</a> describe the format of a media data stream.</li>
<li><a href="media-buffers.html">Media Buffers</a> hold chunks of media data, such as video frames and audio samples, and are used to transport data between objects.</li>
<li><a href="media-samples.html">Media Samples</a> are containers for media buffers. They also contain metadata about the buffers, such as time stamps.</li>
</ul>
<p>The <a href="media-foundation-platform-apis.html">Media Foundation Platform APIs</a> provide some core functionality that is used by the Media Foundation pipeline, such as asynchronous callbacks and work queues. Certain applications might need to call these APIs directly; also, you will need them if you implement a custom source, transform, or sink for Media Foundation.</p>
<h3>Media Pipeline</h3>
<p>The media pipeline contains three types of object that generate or process media data:</p>
<ul>
<li><a href="media-sources.html">Media Sources</a> introduce data into the pipeline. A media source might get data from a local file, such as a video file; from a network stream; or from a hardware capture device.</li>
<li><a href="media-foundation-transforms.html">Media Foundation Transforms</a> (MFTs) process data from a stream. Encoders and decoders are implemented as MFTs.</li>
<li><a href="media-sinks.html">Media Sinks</a> consume the data; for example, by showing video on the display, playing audio, or writing the data to a media file.</li>
</ul>
<p>Third parties can implement their own custom sources, sinks, and MFTs; for example, to support new media file formats.</p>
<p>The <a href="media-session.html">Media Session</a> controls the flow of data through the pipeline, and handles tasks such as quality control, audio/video synchronization, and responding to format changes.</p>
<h3>Source Reader and Sink Writer</h3>
<p>The <a href="source-reader.html">Source Reader</a> and <a href="sink-writer.html">Sink Writer</a> provide an alternative way to use the basic Media Foundation components (media sources, transforms, and media sinks). The source reader hosts a media source and zero or more decoders, while the sink writer hosts a media sink and zero or more encoders. You can use the source reader to get compressed or uncompressed data from a media source, and use the sink writer to encode data and send the data to a media sink.</p>
<blockquote>
<p>[!Note]<br />
The source reader and sink writer are available in WindowsÂ 7.</p>
</blockquote>
<p>Â </p>
<p>This programming model gives the application more control over the flow of data, and also gives the application direct access to the data from the source.</p>
<h2>Related topics</h2>
<!-- raw HTML omitted -->
<p><a href="media-foundation-programming--essential-concepts.html">Media Foundation: Essential Concepts</a></p>
<!-- raw HTML omitted -->
<p><a href="media-foundation-architecture.html">Media Foundation Architecture</a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
