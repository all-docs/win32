<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>DXVA2_VideoProc Sample</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: Shows how to use DXVA Video Processing.
ms.assetid: 1465bd41-94f9-4e19-8236-00e7a2d6f54a
title: DXVA2_VideoProc Sample
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>DXVA2_VideoProc Sample</h1>
<p>Shows how to use <a href="dxva-video-processing.html">DXVA Video Processing</a>.</p>
<p>This sample programmatically generates video with a primary stream and a substream. The primary stream displays SMPTE color bars, and the substream is a semi-transparent rectangle. The video is then processed and displayed using a DXVA video processor. The user can change the planar alpha values, source and destination rectangles, color adjustments, and color space.</p>
<p><img src="images/dxva2-videoproc.png" alt="screenshot of the dxva2-videoproc sample" /></p>
<h2>APIs Demonstrated</h2>
<p>This sample demonstrates the following DXVA interfaces:</p>
<ul>
<li><a href="/windows/desktop/api/dxva2api/nn-dxva2api-idirectxvideoprocessorservice"><strong>IDirectXVideoProcessorService</strong></a></li>
<li><a href="/windows/desktop/api/dxva2api/nn-dxva2api-idirectxvideoprocessor"><strong>IDirectXVideoProcessor</strong></a></li>
</ul>
<h2>Usage</h2>
<p>The DXVA2_VideoProc sample builds a Windows application.</p>
<p>Command line options:</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>-hh</td>
<td>Forces the application to use a hardware Direct3D device and a hardware DXVA device.</td>
</tr>
<tr>
<td>-hs</td>
<td>Forces the application to use a hardware Direct3D device and a software DXVA device.</td>
</tr>
<tr>
<td>-ss</td>
<td>Forces the application to use a software Direct3D device and a software DXVA device.</td>
</tr>
</tbody>
</table>
<p>Â </p>
<p>Keyboard commands:</p>
<table>
<thead>
<tr>
<th>Key</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ALT+ENTER</td>
<td>Switch between windowed mode and full-screen mode.</td>
</tr>
<tr>
<td>F1â€“F8</td>
<td>Enter one of the modes shown in the following table.</td>
</tr>
<tr>
<td>END</td>
<td>Enable or disable debugging logging for dropped frames.</td>
</tr>
<tr>
<td>HOME</td>
<td>Reset a parameter to its initial value.</td>
</tr>
</tbody>
</table>
<p>Â </p>
<p>Each of the function keys F1 through F8 switches to a mode in which the arrow keys can be used to adjust a particular rendering parameter. In addition, the color of the substream changes.</p>
<table>
<thead>
<tr>
<th>Key</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>F1</td>
<td>Adjust the alpha values.<!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted -->UP: Increase the planar alpha of both streams.<!-- raw HTML omitted --><!-- raw HTML omitted -->DOWN: Decrease the planar alpha of both streams.<!-- raw HTML omitted --><!-- raw HTML omitted -->RIGHT: Increase the pixel alpha of the substream.<!-- raw HTML omitted --><!-- raw HTML omitted -->LEFT: Decrease the pixel alpha of the substream.<!-- raw HTML omitted --><!-- raw HTML omitted -->Substream color: White<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>F2</td>
<td>Adjust the primary stream's source area (zoom).<!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted -->UP: Increase vertically (zoom in).<!-- raw HTML omitted --><!-- raw HTML omitted -->DOWN: Decrease vertically (zoom out).<!-- raw HTML omitted --><!-- raw HTML omitted -->RIGHT: Increase horizontally (zoom in).<!-- raw HTML omitted --><!-- raw HTML omitted -->LEFT: Decrease horizontally (zoom out).<!-- raw HTML omitted --><!-- raw HTML omitted -->Substream color: Red<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>F3</td>
<td>Move the primary stream's source area.<!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted -->UP: Move up.<!-- raw HTML omitted --><!-- raw HTML omitted -->DOWN: Move down.<!-- raw HTML omitted --><!-- raw HTML omitted -->RIGHT: Move right.<!-- raw HTML omitted --><!-- raw HTML omitted -->LEFT: Move left.<!-- raw HTML omitted --><!-- raw HTML omitted -->Substream color: Yellow<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>F4</td>
<td>Adjust the primary stream's destination area.<!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted -->UP: Increase vertically.<!-- raw HTML omitted --><!-- raw HTML omitted -->DOWN: Decrease vertically.<!-- raw HTML omitted --><!-- raw HTML omitted -->RIGHT: Increase horizontally.<!-- raw HTML omitted --><!-- raw HTML omitted -->LEFT: Decrease horizontally.<!-- raw HTML omitted --><!-- raw HTML omitted -->Substream color: Green<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>F5</td>
<td>Move the primary stream's destination area.<!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted -->UP: Move up.<!-- raw HTML omitted --><!-- raw HTML omitted -->DOWN: Move down.<!-- raw HTML omitted --><!-- raw HTML omitted -->RIGHT: Move right.<!-- raw HTML omitted --><!-- raw HTML omitted -->LEFT: Move left.<!-- raw HTML omitted --><!-- raw HTML omitted -->Substream color: Cyan<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>F6</td>
<td>Change background color or color space.<!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted -->UP, DOWN: Cycle through color spaces.<!-- raw HTML omitted --><!-- raw HTML omitted -->RIGHT, LEFT: Cycle through background colors.<!-- raw HTML omitted --><!-- raw HTML omitted -->Substream color: Blue<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>F7</td>
<td>Adjust brightness and contrast.<!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted -->UP: Increase brightness.<!-- raw HTML omitted --><!-- raw HTML omitted -->DOWN: Decrease brightness.<!-- raw HTML omitted --><!-- raw HTML omitted -->RIGHT: Increase contrast.<!-- raw HTML omitted --><!-- raw HTML omitted -->LEFT: Decrease contrast.<!-- raw HTML omitted --><!-- raw HTML omitted -->Substream color: Magenta<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>F8</td>
<td>Adjust hue and saturation.<!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted -->UP: Increase hue.<!-- raw HTML omitted --><!-- raw HTML omitted -->DOWN: Decrease hue.<!-- raw HTML omitted --><!-- raw HTML omitted -->RIGHT: Increase saturation.<!-- raw HTML omitted --><!-- raw HTML omitted -->LEFT: Decrease saturation.<!-- raw HTML omitted --><!-- raw HTML omitted -->Substream color: Black<!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<p>Â </p>
<p>In each mode, pressing the HOME key resets the parameters for that mode to their initial values.</p>
<h2>Requirements</h2>
<table>
<thead>
<tr>
<th>Product</th>
<th>Version</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://msdn.microsoft.com/windowsvista/bb980924.aspx">Windows SDK</a></td>
<td>WindowsÂ 7</td>
</tr>
</tbody>
</table>
<p>Â </p>
<h2>Downloading the Sample</h2>
<p>This sample is available in the <a href="https://github.com/Microsoft/Windows-classic-samples/tree/master/Samples/Win7Samples/multimedia/mediafoundation/evrpresenter">Windows classic samples github repository</a>.</p>
<h2>Related topics</h2>
<!-- raw HTML omitted -->
<p><a href="directx-video-acceleration-2-0.html">DirectX Video Acceleration 2.0</a></p>
<!-- raw HTML omitted -->
<p><a href="dxva-video-processing.html">DXVA Video Processing</a></p>
<!-- raw HTML omitted -->
<p><a href="media-foundation-sdk-samples.html">Media Foundation SDK Samples</a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
