<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Configuring Audio Encoding (Microsoft Media Foundation)</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: Configuring Audio Encoding
ms.assetid: 40004f07-0b8c-49cd-9e17-1f6ad7604fbb
title: Configuring Audio Encoding (Microsoft Media Foundation)
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>Configuring Audio Encoding (Microsoft Media Foundation)</h1>
<p>The Windows Media Audio encoder enumerates all of its supported output types in their complete form. Retrieve the type that you want by calling <strong>IMediaObject::GetOutputType</strong> or <strong>IMFTransform::GetAvailableOutputType</strong>, and then set the retrieved type, unaltered, as the output type by calling <strong>IMediaObject::SetOutputType</strong> or <strong>IMFTransform::SetOutputType</strong>.</p>
<p>The output media types supported by the audio encoder change as encoder properties are configured. You must configure all of the encoder properties you want to use before you enumerate the output type.</p>
<p>Two-pass and VBR modes are supported by the audio encoders, but are configured differently than for video. For more information, see <a href="enumeratingaudiotypesforspecificencodingmodes.html">Enumerating Audio Types for Specific Encoding Modes</a>.</p>
<p>The input types supported by the audio encoder are not available until you set the output type. If you call <strong>IMediaObject::GetInputType</strong> or <strong>IMFTransform::GetInputType</strong> before setting an output type, the method returns DMO_E_NO_MORE_ITEMS or MFT_E_NO_MORE_TYPES respectively. After the output type is set, the encoder enumerates the input types that it supports for the selected output type.</p>
<p>No audio resampling is performed by the Windows Media Audio encoder. This means that the encoder output type and the encoder input type must have the same number of channels, bits per sample, and sample rate. For more information, see <a href="findingaudioencoderoutputtypes.html">Finding Audio Encoder Output Types</a>.</p>
<blockquote>
<p>[!Note]<br />
Â Â Â Each output type enumerated by the audio encoder contains a <strong>WAVEFORMATEX</strong> structure (pointed to by <strong>AM_MEDIA_TYPE.pbFormat</strong>) with extended data appended to it. The size of the extended data is specified by <strong>WAVEFORMATEX.cbSize</strong>. This data must be kept with the encoded content so that it can be delivered to the decoder. The content cannot be decompressed without the extended format data.</p>
</blockquote>
<p>Â </p>
<h2>Related topics</h2>
<!-- raw HTML omitted -->
<p><a href="workingwithaudio.html">Working with Audio</a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
