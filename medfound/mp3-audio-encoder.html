<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>MP3 Audio Encoder</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: The Microsoft Media Foundation.
ms.assetid: 4C397139-6553-4707-B737-7C31C5D423BA
title: MP3 Audio Encoder
ms.topic: reference
ms.date: 05/31/2018</h2>
<h1>MP3 Audio Encoder</h1>
<p>The Microsoft Media Foundation MP3 audio encoder is a <a href="media-foundation-transforms.html">Media Foundation Transform</a> (MFT) that encodes MPEG-1 layer 3 (MP3) audio.</p>
<h2>Class Identifier</h2>
<p>The class identifier (CLSID) of the MP3 encoder is <strong>CLSID_MP3ACMCodecWrapper</strong>, defined in the header file wmcodecdsp.h.</p>
<h2>Media Types</h2>
<p>The MP3 encoder supports the following media types. The output type must be set before the input type.</p>
<h3>Output Types</h3>
<p>Set the following attributes on the output media type.</p>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Description</th>
<th>Remarks</th>
</tr>
</thead>
<tbody>
<tr>
<td><!-- raw HTML omitted --><!-- raw HTML omitted -->MF_MT_MAJOR_TYPE<!-- raw HTML omitted --><!-- raw HTML omitted --></td>
<td>Major type.</td>
<td>Must be <!-- raw HTML omitted -->MFMediaType_Audio<!-- raw HTML omitted -->.</td>
</tr>
<tr>
<td><!-- raw HTML omitted --><!-- raw HTML omitted -->MF_MT_SUBTYPE<!-- raw HTML omitted --><!-- raw HTML omitted --></td>
<td>Audio subtype.</td>
<td>Must be <!-- raw HTML omitted -->MFAudioFormat_MP3<!-- raw HTML omitted -->.</td>
</tr>
<tr>
<td><!-- raw HTML omitted --><!-- raw HTML omitted -->MF_MT_AUDIO_AVG_BYTES_PER_SECOND<!-- raw HTML omitted --><!-- raw HTML omitted --></td>
<td>Bit rate of the encoded MP3 stream, in bytes per second.</td>
<td>The encoder supports all bit rates defined by the standard (32, 40, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, or 320 Kbps).<!-- raw HTML omitted --> The default bit rates are 128 Kbps for mono and 320 Kbps for stereo.<!-- raw HTML omitted --> Use this attribute to specify the encoded bit rate.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><!-- raw HTML omitted --><!-- raw HTML omitted -->MF_MT_AUDIO_NUM_CHANNELS<!-- raw HTML omitted --><!-- raw HTML omitted --></td>
<td>Number of channels.</td>
<td>The following values are supported:<!-- raw HTML omitted --><!-- raw HTML omitted -->1 (mono)<!-- raw HTML omitted --><!-- raw HTML omitted -->2 (stereo)<!-- raw HTML omitted --><!-- raw HTML omitted --></td>
</tr>
<tr>
<td><!-- raw HTML omitted --><!-- raw HTML omitted -->MF_MT_AUDIO_SAMPLES_PER_SECOND<!-- raw HTML omitted --><!-- raw HTML omitted --></td>
<td>Samples per second.</td>
<td>The following values are supported:<!-- raw HTML omitted --><!-- raw HTML omitted -->48000 (48 KHz)<!-- raw HTML omitted --><!-- raw HTML omitted -->44100 (44.1 KHz)<!-- raw HTML omitted --><!-- raw HTML omitted -->32000 (32 KHz)<!-- raw HTML omitted --><!-- raw HTML omitted --></td>
</tr>
<tr>
<td><!-- raw HTML omitted -->MF_MT_USER_DATA<!-- raw HTML omitted --></td>
<td>Additional codec data.</td>
<td>This attribute contains the 12 bytes of the <!-- raw HTML omitted --><!-- raw HTML omitted -->MPEGLAYER3WAVEFORMAT<!-- raw HTML omitted --><!-- raw HTML omitted --> structure that follow the <!-- raw HTML omitted -->wfx<!-- raw HTML omitted --> member of that structure.</td>
</tr>
</tbody>
</table>
<p>Â </p>
<p>Alternatively, you can fill in an <a href="/windows/win32/api/mmreg/ns-mmreg-mpeglayer3waveformat"><strong>MPEGLAYER3WAVEFORMAT</strong></a> structure and call <a href="/windows/desktop/api/mfapi/nf-mfapi-mfinitmediatypefromwaveformatex"><strong>MFInitMediaTypeFromWaveFormatEx</strong></a> to convert the structure to a Media Foundation media type.</p>
<h3>Input Types</h3>
<p>Set the following attributes on the input media type.</p>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Description</th>
<th>Remarks</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="mf-mt-major-type-attribute.html"><strong>MF_MT_MAJOR_TYPE</strong></a></td>
<td>Major type.</td>
<td>Must be <strong>MFMediaType_Audio</strong>.</td>
</tr>
<tr>
<td><a href="mf-mt-subtype-attribute.html"><strong>MF_MT_SUBTYPE</strong></a></td>
<td>Subtype.</td>
<td>Must be <strong>MFAudioFormat_PCM</strong>.</td>
</tr>
<tr>
<td><a href="mf-mt-audio-bits-per-sample-attribute.html"><strong>MF_MT_AUDIO_BITS_PER_SAMPLE</strong></a></td>
<td>Bits per sample.</td>
<td>Must be 16.</td>
</tr>
<tr>
<td><a href="mf-mt-audio-samples-per-second-attribute.html"><strong>MF_MT_AUDIO_SAMPLES_PER_SECOND</strong></a></td>
<td>Samples per second.</td>
<td>Must match the output type.</td>
</tr>
<tr>
<td><a href="mf-mt-audio-num-channels-attribute.html"><strong>MF_MT_AUDIO_NUM_CHANNELS</strong></a></td>
<td>Number of channels.</td>
<td>Must match the output type.</td>
</tr>
</tbody>
</table>
<p>Â </p>
<p>The encoder supports only 16-bit integer PCM input. It does not support 32-bit floating point input.</p>
<h3>Media Formats</h3>
<p>The MPEG-1 and MPEG-2 standard defines 252 layer 3 audio formats. The MP3 encoder supports the standard with some exceptions, as well as some additional formats, as described below. Layer 3 is defined as:</p>
<table>
<thead>
<tr>
<th>Requirement</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Channels</td>
<td>mono or stereo</td>
</tr>
<tr>
<td>MPEG-1 sample rates in kHz</td>
<td>44.1, 48, 32</td>
</tr>
<tr>
<td>MPEG-1 encoded bit rates in kbps</td>
<td>32, 40, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, 320</td>
</tr>
<tr>
<td>MPEG-2 sample rates in kHz</td>
<td>8, 11.025, 12, 16, 22.05, 24</td>
</tr>
<tr>
<td>MPEG-2 encoded bit rates in kbps</td>
<td>8, 16, 24, 32, 40, 48, 56, 64, 80, 96, 112, 144, 160</td>
</tr>
</tbody>
</table>
<p>Â </p>
<p>The MP3 encoder also supports the following formats.</p>
<table>
<thead>
<tr>
<th>Sample Rate</th>
<th>Bit Rate</th>
<th>Channel Number</th>
</tr>
</thead>
<tbody>
<tr>
<td>8000</td>
<td>18000, 20000</td>
<td>2</td>
</tr>
<tr>
<td>11025</td>
<td>18000, 20000</td>
<td>1 or 2</td>
</tr>
<tr>
<td>12000</td>
<td>18000, 20000</td>
<td>1 or 2</td>
</tr>
<tr>
<td>16000</td>
<td>18000, 20000</td>
<td>1</td>
</tr>
<tr>
<td>32000</td>
<td>144000</td>
<td>1 or 2</td>
</tr>
<tr>
<td>44100</td>
<td>144000</td>
<td>1 or 2</td>
</tr>
<tr>
<td>48000</td>
<td>144000</td>
<td>1 or 2</td>
</tr>
</tbody>
</table>
<p>Â </p>
<p>The MP3 encoder does not support the following formats defined by the standard.</p>
<table>
<thead>
<tr>
<th>Sample Rate</th>
<th>Bit Rates</th>
<th>Channel Number</th>
</tr>
</thead>
<tbody>
<tr>
<td>12000</td>
<td>80000, 96000, 112000, 128000, 144000, 160000</td>
<td>1 or 2</td>
</tr>
<tr>
<td>11025</td>
<td>80000, 96000, 112000, 128000, 144000, 160000</td>
<td>1 or 2</td>
</tr>
<tr>
<td>8000</td>
<td>80000, 96000, 112000, 128000, 144000, 160000</td>
<td>1 or 2</td>
</tr>
<tr>
<td>8000</td>
<td>8000, 11025, 12000, 16000, 22050, 24000</td>
<td>2</td>
</tr>
</tbody>
</table>
<p>Â </p>
<h2>Requirements</h2>
<table>
<thead>
<tr>
<th>Requirement</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Minimum supported client<!-- raw HTML omitted --></td>
<td>WindowsÂ 8 [desktop apps only]<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Minimum supported server<!-- raw HTML omitted --></td>
<td>Windows ServerÂ 2012 [desktop apps only]<!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<h2>See also</h2>
<!-- raw HTML omitted -->
<p><a href="codecobjects.html">Codec Objects</a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
