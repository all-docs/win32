<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Advanced Topology Building</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: Advanced Topology Building
ms.assetid: 66aa07d8-6756-4d5b-9f0a-24b902da6fa2
title: Advanced Topology Building
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>Advanced Topology Building</h1>
<p>This section describes some advanced techniques for building topologies. You can use these techniques if you want more control over the topologies that you send to the Media Session.</p>
<p>Because these techniques are intended for scenarios that go beyond the functionality provided by the standard topology loader, many of the details will depend on the particular requirements of your application. Therefore, this section is organized loosely around smaller subtasks, rather than complete, end-to-end scenarios.</p>
<p>The typical playback application follows these steps:</p>
<ol>
<li>The application builds a partial topology and queues it on the Media Session.</li>
<li>The Media Session invokes the topology loader to resolve the topology.</li>
</ol>
<p>If you want to go beyond the capabilities of the topology loader, there are three general approaches:</p>
<ul>
<li>
<p>Build a complete topology. When you queue the topology on the Media Session, call <a href="/windows/desktop/api/mfidl/nf-mfidl-imfmediasession-settopology"><strong>IMFMediaSession::SetTopology</strong></a> with the MFSESSION_SETTOPOLOGY_NORESOLUTION flag. This flag prevents the Media Session from attempting to resolve the topology.</p>
</li>
<li>
<p>Directly invoke the topology loader to resolve the topology. You can then modify the full topology before queuing it on the Media Session.</p>
</li>
<li>
<p>Implement a custom topology loader. With this approach, you queue a partial topology, but the Media Session invokes your custom loader instead of the standard Media Foundation implementation. One advantage of this approach is that you can perform custom topology building inside the protected environment. (In that case, however, the topology loader must be a trusted component. For more information, see <a href="protected-media-path.html">Protected Media Path</a>.)</p>
</li>
</ul>
<p>This section contains the following topics.</p>
<table>
<thead>
<tr>
<th>Topic</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="custom-topology-loaders.html">Custom Topology Loaders</a></td>
<td>How to provide a custom implementation of <a href="/windows/desktop/api/mfidl/nn-mfidl-imftopoloader"><strong>IMFTopoLoader</strong></a> for the Media Session.</td>
</tr>
<tr>
<td><a href="binding-output-nodes-to-media-sinks.html">Binding Output Nodes to Media Sinks</a></td>
<td>How to prepare the output nodes in a topology if you are using the topology loader outside of the Media Session.</td>
</tr>
<tr>
<td><a href="adding-a-decoder-to-a-topology.html">Adding a Decoder to a Topology</a></td>
<td>How to select a decoder manually and add it to a topology.</td>
</tr>
</tbody>
</table>
<p>Â </p>
<h2>Related topics</h2>
<!-- raw HTML omitted -->
<p><a href="topologies.html">Topologies</a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
