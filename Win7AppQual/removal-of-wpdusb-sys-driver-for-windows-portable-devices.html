<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Removal of WPDUSB.SYS Driver for Windows Portable Devices</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: Removal of WPDUSB.SYS Driver for Windows Portable Devices
ms.assetid: 3ad0c892-8b19-465d-af2f-9207f98e27b7
title: Removal of WPDUSB.SYS Driver for Windows Portable Devices
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>Removal of WPDUSB.SYS Driver for Windows Portable Devices</h1>
<h2>Affected Platforms</h2>
<p><strong>Clients</strong> - Windows 7<br />
<strong>Servers</strong> - Windows Server 2008 R2</p>
<h2>Feature Impact</h2>
<p><strong>Severity</strong> - Low<br />
<strong>Frequency</strong> - Low</p>
<h2>Description</h2>
<p>Microsoft has replaced the kernel mode component of the Windows Vista USB driver stack (WPDUSB.SYS) for Windows Portable Devices (WPD) with the generic WINUSB.SYS driver. Communication with the original WPDUSB.SYS driver was via private I/O Control (IOCTL) codes; support of these has also been removed.</p>
<p>Any consumer of these IOCTL codes would have been responsible for proper interpretation and implementation of the Media Transfer Protocol (MTP). Windows Vista did not support use of these IOCTL codes by third-party applications.</p>
<h2>Manifestation of Impact</h2>
<p>Any application that depended on the availability of these private IOCTL codes would no longer have access to USB-connected MTP devices.</p>
<h2>Mitigation</h2>
<p>Users of an application that depends on the private IOCTL codes must use a different application (or an updated version of the application) to access the USB-connected MTP device.</p>
<h2>Solution</h2>
<p>Applications should use the Windows Portable Devices (WPD) API to find and interact with any WPD Device. Although a significant percentage of WPD devices implement MTP for communication with the PC, WPD is not limited to just MTP devices. In addition, where direct access to the device via the private IOCTLs would have limited the application to communication with only USB-connected devices, use of the WPD API expands the list of connectivity options to other communication protocols (for example, Wi-Fi). In the rare cases when the application must be MTP-aware, the WPD API provides a pass-through mechanism for raw MTP commands.</p>
<h2>Leveraging Feature Capabilities</h2>
<p>The WPD API is supported in Windows XP (via the Windows Format SDK), Windows Vista and Windows 7. The Windows 7 implementation of WPD adds support for MTP over Bluetooth.</p>
<h2>Links to Other Resources</h2>
<p><a href="../windows-portable-devices.html">Windows Portable Devices</a></p>
<p>Â </p>
<p>Â </p>
</body>
