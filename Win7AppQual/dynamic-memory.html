<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Dynamic Memory</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: Dynamic Memory
ms.assetid: 0ea1de35-34ea-4e94-b90d-0f89503cb3fb
title: Dynamic Memory
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>Dynamic Memory</h1>
<h2>Affected Platforms</h2>
<p><strong>Clients (running as virtual machines)</strong> - Windows Vista | Windows 7<br />
<strong>Servers</strong> - Windows Server 2008 R2 Hyper-V SP1</p>
<h2>Feature Impact</h2>
<p><strong>Severity</strong> - Low<br />
<strong>Frequency</strong> - High</p>
<h2>Description</h2>
<p>At a high level, Hyper-V Dynamic Memory is a memory management enhancement for the Hyper-V role included in Windows Server 2008 R2 SP1. It is designed for production use and enables customers to achieve higher consolidation/virtual machine (VM) density ratios while optimizing the memory utilization in the physical machine. The static memory allocation is reduced and additional memory is allocated on an as needed basis. Dynamic Memory impacts software developers who want to ensure that their software works correctly in a virtual machine environment.</p>
<h2>Usage Scenario</h2>
<p>There are two key usage scenarios where Dynamic Memory comes into play, host-side applications and guest-side applications.</p>
<p><strong>Host-side applications (management tools)</strong></p>
<p>Old tools managing a new Windows Server 2008 R2 SP1 server will not be able to access the new Dynamic Memory settings. New WMI APIs and performance counters have been developed to manage the new Dynamic Memory settings for Hyper-V virtual machines. Software developers working on management tools should take advantage of these APIs and counters for use with Windows Server 2008 R2 SP1 with the Hyper-V role installed. Details about these new APIs will be available via <a href="/previous-versions/windows/desktop/virtual/using-the-virtualization-wmi-provider">Hyper-V WMI Provider documentation on MSDN</a>.</p>
<p><strong>Guest-side applications</strong></p>
<p>Developers writing software for use inside a virtual machine configured to use Dynamic Memory need to keep in mind that VM system memory is no longer constant. Consequently, their application should free memory when it is no longer needed to allow other applications to take advantage of the resource.</p>
<p>Memory allocations and de-allocations continue to work as normal for user applications. Dynamic Memory is completely transparent to most end user applications. However if the software being developed makes use of memory performance counters in the virtual machine then careful testing should be performed in a Dynamic Memory enabled environment to ensure that the software takes the changes that are made to the Guest operating system memory allocation into account. Available memory is no longer &quot;static&quot; from the virtual machine?s perspective.</p>
<h2>Solutions</h2>
<p>Virtual machines must have updated integration services (SP1) installed in order to take advantage of Dynamic Memory. Ensure that all machines used in the management of Hyper-V virtual machines are using the latest Windows Server 2008 R2 SP1 bits.</p>
<h2>Links to Other Resources</h2>
<ul>
<li><a href="https://blogs.technet.com/b/virtualization/archive/2010/03/18/dynamic-memory-coming-to-hyper-v.aspx">Dynamic Memory Coming To Hyper-V blog</a></li>
<li><a href="/previous-versions/windows/desktop/virtual/using-the-virtualization-wmi-provider">Using the Hyper-V WMI Provider</a></li>
</ul>
<h2>Disclaimer</h2>
<p>The information contained in this document relates to prerelease software product that may be substantially modified before its first commercial release. Accordingly, the information may not accurately describe or reflect the software product when first commercially released. This document is for informational purposes only. MICROSOFT MAKES NO WARRANTIES, EXPRESS OR IMPLIED, IN THIS DOCUMENT.</p>
<p>Â </p>
<p>Â </p>
</body>
