<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Registering and Deregistering Keys</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: Registering and Deregistering Keys
ms.assetid: 90fd8df0-e2a8-4183-a50c-e6f8ea5041cc
title: Registering and Deregistering Keys
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>Registering and Deregistering Keys</h1>
<h2>Registering Keys</h2>
<p>A node can register keys with <a href="/windows/desktop/api/drt/nf-drt-drtregisterkey"><strong>DrtRegisterKey</strong></a> at anytime while in the <strong>DRT_ACTIVE</strong>, <strong>DRT_ALONE</strong>, and <strong>DRT_NO_NETWORK</strong> states. Keys registered in <strong>DRT_ALONE</strong> and <strong>DRT_NO_NETWORK</strong> states can only be recognized by other DRTs after the local node has transitioned to <strong>DRT_ACTIVE</strong>.</p>
<p>Identical keys cannot be registered within the same DRT instance when using <a href="/windows/desktop/api/drt/nf-drt-drtcreatederivedkeysecurityprovider"><strong>DrtCreateDerivedKeySecurityProvider</strong></a>. If the registration of identical keys is attempted, the registration of the second key will fail. The use of identical keys should also be avoided between different DRT instances. Searches against the unique key designation these identical keys share could return any one of the keys, regardless of what data is associated to the key.</p>
<blockquote>
<p>[!Note]<br />
If different behavior is required for implementation, a security provider can be created in place of <a href="/windows/desktop/api/drt/nf-drt-drtcreatederivedkeysecurityprovider"><strong>DrtCreateDerivedKeySecurityProvider</strong></a> to accommodate.</p>
</blockquote>
<p>Â </p>
<h2>Deregistering Keys</h2>
<p>A node can deregister a key anytime after it has been registered. However, only the application that registered the key can deregister it. An application can deregister a key from the local node using the <a href="/windows/desktop/api/drt/nf-drt-drtunregisterkey"><strong>DrtUnregisterKey</strong></a> function. Upon completion the function triggers a <strong>DRT_EVENT_LEAFSET_KEY_CHANGE</strong> event; informing the application as well as other nodes participating in the DRT mesh.</p>
<p>While in the <strong>DRT_FAULTED</strong> state, the required call of <a href="/windows/desktop/api/drt/nf-drt-drtclose"><strong>DrtClose</strong></a> will result in the DRT infrastructure deregistering all keys.</p>
<h2>Related topics</h2>
<!-- raw HTML omitted -->
<p><a href="searching-a-distributed-routing-table.html">Searching a Distributed Routing Table</a></p>
<!-- raw HTML omitted -->
<p><a href="about-distributed-routing-tables.html">About Distributed Routing Tables</a></p>
<!-- raw HTML omitted -->
<p><a href="distributed-routing-table-api-reference.html">Distributed Routing Table API Reference</a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
