<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Peer Distribution API Functions</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: The Microsoft Peer Distribution service supports functions for both consumer role and publisher role scenarios.
ms.assetid: 3f5af891-4f5d-4523-8fe6-47fc6ff13b35
title: Peer Distribution API Functions
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>Peer Distribution API Functions</h1>
<p>The Microsoft Peer Distribution service supports functions for both consumer role and publisher role scenarios.</p>
<h2>The following functions are common in both &quot;client&quot; and &quot;server&quot; scenarios.</h2>
<table>
<thead>
<tr>
<th>Common Functions</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="/windows/desktop/api/PeerDist/nf-peerdist-peerdiststartup"><strong>PeerDistStartup</strong></a></td>
<td>Creates a new <strong>PEERDIST_INSTANCE_HANDLE</strong> instance which must be passed to all other Peer Distribution APIs.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/PeerDist/nf-peerdist-peerdistshutdown"><strong>PeerDistShutdown</strong></a></td>
<td>Releases resources allocated by the call to <a href="/windows/desktop/api/PeerDist/nf-peerdist-peerdiststartup"><strong>PeerDistStartup</strong></a>.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/PeerDist/nf-peerdist-peerdistgetstatus"><strong>PeerDistGetStatus</strong></a></td>
<td>Returns the current status of Peer Distribution service.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/PeerDist/nf-peerdist-peerdistgetstatusex"><strong>PeerDistGetStatusEx</strong></a></td>
<td>Returns the current status and capabilities of the Peer Distribution service.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/peerdist/nf-peerdist-peerdistgetoverlappedresult"><strong>PeerDistGetOverlappedResult</strong></a></td>
<td>Retrieves the results of asynchronous operations.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/PeerDist/nf-peerdist-peerdistregisterforstatuschangenotification"><strong>PeerDistRegisterForStatusChangeNotification</strong></a></td>
<td>Requests that the Peer Distribution service notify the caller when a status change occurs.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/peerdist/nf-peerdist-peerdistregisterforstatuschangenotificationex"><strong>PeerDistRegisterForStatusChangeNotificationEx</strong></a></td>
<td>Requests that the Peer Distribution service notify the caller when a status change occurs.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/PeerDist/nf-peerdist-peerdistunregisterforstatuschangenotification"><strong>PeerDistUnregisterForStatusChangeNotification</strong></a></td>
<td>Deregisters the status change notification for the session associated with the supplied handle.</td>
</tr>
</tbody>
</table>
<p>Â </p>
<h2>The following functions are only supported in &quot;client&quot; scenarios.</h2>
<table>
<thead>
<tr>
<th>Client Functions</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientopencontent"><strong>PeerDistClientOpenContent</strong></a></td>
<td>Opens and returns a <strong>PEERDIST_CONTENT_HANDLE</strong> to reference that content.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientclosecontent"><strong>PeerDistClientCloseContent</strong></a></td>
<td>Closes the <strong>PEERDIST_CONTENT_HANDLE</strong>.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/peerdist/nf-peerdist-peerdistclientgetinformationbyhandle"><strong>PeerDistClientGetInformationByHandle</strong></a></td>
<td>Retrieves additional information from the Peer Distribution service for a specific content handle.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientaddcontentinformation"><strong>PeerDistClientAddContentInformation</strong></a></td>
<td>Adds content information which is then associated with the <strong>PEERDIST_CONTENT_HANDLE</strong>. A <strong>PEERDIST_CONTENT_HANDLE</strong> can be associated with any content information.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientcompletecontentinformation"><strong>PeerDistClientCompleteContentInformation</strong></a></td>
<td>Indicates the end of the content information.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientadddata"><strong>PeerDistClientAddData</strong></a></td>
<td>Used to supply content to the local cache. Typically this is done when data could not be found on the local network as indicated when either <a href="/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientblockread"><strong>PeerDistClientBlockRead</strong></a> or <a href="/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientstreamread"><strong>PeerDistClientStreamRead</strong></a> complete with <strong>ERROR_TIMEOUT</strong> or <strong>PEERDIST_ERROR_MISSING_DATA</strong>..</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientblockread"><strong>PeerDistClientBlockRead</strong></a></td>
<td>Provides random access to the content stream.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientstreamread"><strong>PeerDistClientStreamRead</strong></a></td>
<td>Provides sequential access to the content stream.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientflushcontent"><strong>PeerDistClientFlushContent</strong></a></td>
<td>Removes content that has been previously added to the local Peer Distribution system.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientcancelasyncoperation"><strong>PeerDistClientCancelAsyncOperation</strong></a></td>
<td>Cancels asynchronous operation associated with an <a href="/windows/win32/api/minwinbase/ns-minwinbase-overlapped">OVERLAPPED</a> structure and the content handle returned by <a href="/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientopencontent"><strong>PeerDistClientOpenContent</strong></a>.</td>
</tr>
</tbody>
</table>
<p>Â </p>
<h2>The following functions are only supported in &quot;server&quot; scenarios.</h2>
<table>
<thead>
<tr>
<th>Server Functions</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="/windows/desktop/api/PeerDist/nf-peerdist-peerdistserverpublishstream"><strong>PeerDistServerPublishStream</strong></a></td>
<td>Creates the <strong>PEERDIST_STREAM_HANDLE</strong> which can be used with <a href="/windows/desktop/api/PeerDist/nf-peerdist-peerdistserverpublishaddtostream"><strong>PeerDistServerPublishAddToStream</strong></a> to create content information for the content stream.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/PeerDist/nf-peerdist-peerdistserverpublishaddtostream"><strong>PeerDistServerPublishAddToStream</strong></a></td>
<td>Adds data to the stream referenced by the PeerDist stream handle.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/PeerDist/nf-peerdist-peerdistserverpublishcompletestream"><strong>PeerDistServerPublishCompleteStream</strong></a></td>
<td>Called to indicate that all data has been added to the stream.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/PeerDist/nf-peerdist-peerdistserverclosestreamhandle"><strong>PeerDistServerCloseStreamHandle</strong></a></td>
<td>Closes the stream handle.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/PeerDist/nf-peerdist-peerdistserverunpublish"><strong>PeerDistServerUnpublish</strong></a></td>
<td>Unpublishes previously published content in the Peer Distribution service.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/PeerDist/nf-peerdist-peerdistserveropencontentinformation"><strong>PeerDistServerOpenContentInformation</strong></a></td>
<td>Opens a <strong>PEERDIST_CONTENTINFO_HANDLE</strong> for published content.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/peerdist/nf-peerdist-peerdistserveropencontentinformationex"><strong>PeerDistServerOpenContentInformationEx</strong></a></td>
<td>Opens a <strong>PEERDIST_CONTENTINFO_HANDLE</strong> for published content.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/PeerDist/nf-peerdist-peerdistserverretrievecontentinformation"><strong>PeerDistServerRetrieveContentInformation</strong></a></td>
<td>Retrieves the content information associated with published content.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/PeerDist/nf-peerdist-peerdistserverclosecontentinformation"><strong>PeerDistServerCloseContentInformation</strong></a></td>
<td><strong>PEERDIST_CONTENTINFO_HANDLE</strong> opened by <a href="/windows/desktop/api/PeerDist/nf-peerdist-peerdistserveropencontentinformation"><strong>PeerDistServerOpenContentInformation</strong></a>.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/PeerDist/nf-peerdist-peerdistservercancelasyncoperation"><strong>PeerDistServerCancelAsyncOperation</strong></a></td>
<td>Cancels the asynchronous operation associated with the content identifier and <a href="/windows/win32/api/minwinbase/ns-minwinbase-overlapped">OVERLAPPED</a> structure.</td>
</tr>
</tbody>
</table>
<p>Â </p>
<p>Â </p>
<p>Â </p>
</body>
