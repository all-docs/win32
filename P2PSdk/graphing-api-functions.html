<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Graphing API Functions</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: 'The Peer Graphing API uses the following functions:'
ms.assetid: cd05d4da-ca65-471b-bb97-82885f22e6f9
title: Graphing API Functions
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>Graphing API Functions</h1>
<p>The Peer Graphing API uses the following functions:</p>
<h2>Initialization and Cleanup Functions</h2>
<table>
<thead>
<tr>
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="/windows/desktop/api/P2P/nf-p2p-peergraphshutdown"><strong>PeerGraphShutdown</strong></a></td>
<td>Cleans up any resources allocated by the call to <a href="/windows/desktop/api/P2P/nf-p2p-peergraphstartup"><strong>PeerGraphStartup</strong></a>.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/P2P/nf-p2p-peergraphstartup"><strong>PeerGraphStartup</strong></a></td>
<td>Indicates to the Peer Graphing Infrastructure what version of the Peer protocols the calling application requires.</td>
</tr>
</tbody>
</table>
<p>Â </p>
<h2>Graph Creation and Access Functions</h2>
<table>
<thead>
<tr>
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="/windows/desktop/api/P2P/nf-p2p-peergraphclose"><strong>PeerGraphClose</strong></a></td>
<td>Invalidates the peer graph handle returned by a call to either <a href="/windows/desktop/api/P2P/nf-p2p-peergraphcreate"><strong>PeerGraphCreate</strong></a> or <a href="/windows/desktop/api/P2P/nf-p2p-peergraphopen"><strong>PeerGraphOpen</strong></a>, and closes all network connections for the specified peer graph.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/P2P/nf-p2p-peergraphcreate"><strong>PeerGraphCreate</strong></a></td>
<td>Creates a new peer graph.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/P2P/nf-p2p-peergraphdelete"><strong>PeerGraphDelete</strong></a></td>
<td>Deletes the data associated with a specified peer graph.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/P2P/nf-p2p-peergraphlisten"><strong>PeerGraphListen</strong></a></td>
<td>Indicates that a peer graph should start listening for incoming connections.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/P2P/nf-p2p-peergraphopen"><strong>PeerGraphOpen</strong></a></td>
<td>Opens a peer graph that is created previously by either the local node or a remote node.</td>
</tr>
</tbody>
</table>
<p>Â </p>
<h2>Graph and Node Information Functions</h2>
<table>
<thead>
<tr>
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="/windows/desktop/api/P2P/nf-p2p-peergraphenumnodes"><strong>PeerGraphEnumNodes</strong></a></td>
<td>Creates and returns an enumeration handle used to enumerate the nodes in a peer graph.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/P2P/nf-p2p-peergraphgetnodeinfo"><strong>PeerGraphGetNodeInfo</strong></a></td>
<td>Retrieves information about a specific node.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/P2P/nf-p2p-peergraphgetproperties"><strong>PeerGraphGetProperties</strong></a></td>
<td>Retrieves the current peer graph properties.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/P2P/nf-p2p-peergraphgetstatus"><strong>PeerGraphGetStatus</strong></a></td>
<td>Returns the current status of the peer graph.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/P2P/nf-p2p-peergraphsetnodeattributes"><strong>PeerGraphSetNodeAttributes</strong></a></td>
<td>Sets the attributes of the <a href="/windows/desktop/api/P2P/ns-p2p-peer_node_info"><strong>PEER_NODE_INFO</strong></a> structure for the local node.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/P2P/nf-p2p-peergraphsetpresence"><strong>PeerGraphSetPresence</strong></a></td>
<td>Explicitly turns on or off the publication of presence records for a specific node. This function can override the presence settings in the peer graph properties.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/P2P/nf-p2p-peergraphsetproperties"><strong>PeerGraphSetProperties</strong></a></td>
<td>Sets the peer graph properties.</td>
</tr>
</tbody>
</table>
<p>Â </p>
<h2>Record Management Functions</h2>
<table>
<thead>
<tr>
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="/windows/desktop/api/P2P/nf-p2p-peergraphaddrecord"><strong>PeerGraphAddRecord</strong></a></td>
<td>Adds a new record to a peer graph. A record added with this function is sent to each node in a peer graph.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/P2P/nf-p2p-peergraphdeleterecord"><strong>PeerGraphDeleteRecord</strong></a></td>
<td>Marks a record as deleted within a peer graph.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/P2P/nf-p2p-peergraphenumrecords"><strong>PeerGraphEnumRecords</strong></a></td>
<td>Creates and returns an enumeration handle used to enumerate records of a specific type of record, user, or both.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/P2P/nf-p2p-peergraphgetrecord"><strong>PeerGraphGetRecord</strong></a></td>
<td>Retrieves a specific record based on the specified record ID.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/P2P/nf-p2p-peergraphsearchrecords"><strong>PeerGraphSearchRecords</strong></a></td>
<td>Searches the peer graph for specific records.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/P2P/nf-p2p-peergraphupdaterecord"><strong>PeerGraphUpdateRecord</strong></a></td>
<td>Updates a record in the peer graph and then floods the record to each node in the peer graph.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/P2P/nf-p2p-peergraphvalidatedeferredrecords"><strong>PeerGraphValidateDeferredRecords</strong></a></td>
<td>Indicates to the Peer Graphing Infrastructure that it is time to resubmit any deferred records for the security module to validate.</td>
</tr>
</tbody>
</table>
<p>Â </p>
<h2>Export and Import Functions</h2>
<table>
<thead>
<tr>
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="/windows/desktop/api/P2P/nf-p2p-peergraphexportdatabase"><strong>PeerGraphExportDatabase</strong></a></td>
<td>Exports a peer graph database into a file that you can move to a different computer.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/P2P/nf-p2p-peergraphimportdatabase"><strong>PeerGraphImportDatabase</strong></a></td>
<td>Imports a file that contains the information from a peer graph database.</td>
</tr>
</tbody>
</table>
<p>Â </p>
<h2>Utility and Support Functions</h2>
<table>
<thead>
<tr>
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="/windows/desktop/api/P2P/nf-p2p-peergraphendenumeration"><strong>PeerGraphEndEnumeration</strong></a></td>
<td>Releases an enumeration handle, and frees the resources associated with an enumeration.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/P2P/nf-p2p-peergraphfreedata"><strong>PeerGraphFreeData</strong></a></td>
<td>Frees resources that several of the Peer Graphing API functions return.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/P2P/nf-p2p-peergraphgetitemcount"><strong>PeerGraphGetItemCount</strong></a></td>
<td>Retrieves the number of items in an enumeration.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/P2P/nf-p2p-peergraphgetnextitem"><strong>PeerGraphGetNextItem</strong></a></td>
<td>Obtains the next item or items in an enumeration created by a call to specific functions, which return a peer enumeration.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/P2P/nf-p2p-peergraphpeertimetouniversaltime"><strong>PeerGraphPeerTimeToUniversalTime</strong></a></td>
<td>Converts the peer graph-maintained reference time value to a localized time value appropriate for display on the peer's computer.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/P2P/nf-p2p-peergraphuniversaltimetopeertime"><strong>PeerGraphUniversalTimeToPeerTime</strong></a></td>
<td>Converts a universal time value from the peer's computer to a common peer graph time value.</td>
</tr>
</tbody>
</table>
<p>Â </p>
<h2>Connection Functions</h2>
<table>
<thead>
<tr>
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="/windows/desktop/api/P2P/nf-p2p-peergraphclosedirectconnection"><strong>PeerGraphCloseDirectConnection</strong></a></td>
<td>Closes a specified direct connection.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/P2P/nf-p2p-peergraphconnect"><strong>PeerGraphConnect</strong></a></td>
<td>Attempts to make a connection to a specified node in a peer graph. This function starts an asynchronous operation.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/P2P/nf-p2p-peergraphenumconnections"><strong>PeerGraphEnumConnections</strong></a></td>
<td>Creates and returns an enumeration handle used to enumerate the connections of a local node.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/P2P/nf-p2p-peergraphopendirectconnection"><strong>PeerGraphOpenDirectConnection</strong></a></td>
<td>Allows an application to establish a direct connection with a node in a peer graph. The connection can only be made if the node to which the application is connecting has subscribed to the <strong>PEER_GRAPH_EVENT_DIRECT_CONNECTION</strong> event.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/P2P/nf-p2p-peergraphsenddata"><strong>PeerGraphSendData</strong></a></td>
<td>Sends data to a neighbor node or a directly connected node.</td>
</tr>
</tbody>
</table>
<p>Â </p>
<h2>Events Infrastructure Functions</h2>
<table>
<thead>
<tr>
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="/windows/desktop/api/P2P/nf-p2p-peergraphgeteventdata"><strong>PeerGraphGetEventData</strong></a></td>
<td>Retrieves peer events.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/P2P/nf-p2p-peergraphregisterevent"><strong>PeerGraphRegisterEvent</strong></a></td>
<td>Registers a peer's request to be notified of changes associated with a peer graph and event type.</td>
</tr>
<tr>
<td><a href="/windows/desktop/api/P2P/nf-p2p-peergraphunregisterevent"><strong>PeerGraphUnregisterEvent</strong></a></td>
<td>Requests that the application no longer be notified of changes associated with a peer graph and record type.</td>
</tr>
</tbody>
</table>
<p>Â </p>
<p>Â </p>
<p>Â </p>
</body>
