<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Configuring the Partition Cache</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: The COM+ partitions feature includes a partition cache. This cache stores user-to-partition mappings and is designed to avoid repetitive Active Directory access.
ms.assetid: 8c3a269d-1933-4df6-aefb-f1f5587f1f42
title: Configuring the Partition Cache
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>Configuring the Partition Cache</h1>
<p>The COM+ partitions feature includes a partition cache. This cache stores user-to-partition mappings and is designed to avoid repetitive Active Directory access.</p>
<h2>Changing Cache Size</h2>
<p>The partition cache consists of three tables, whose size can be modified to enhance performance. These tables consist of the number of SID entries in the cache, the number of OU entries in the cache, and the number of partition entries in the cache.</p>
<p>To change these table sizes, administrators can modify the values of a registry key. The registry key and its values are as follows:</p>
<p><strong>HKLM\SOFTWARE\Microsoft\COM3\PartitionCache</strong></p>
<table>
<thead>
<tr>
<th>Key values</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>NumSidEntries</strong><!-- raw HTML omitted --></td>
<td>Contains the REG_DWORD value for the number of SID entries in the cache (default=512). This value should be set to a value greater than the number of unique identities that a machine will be servicing in the cache invalidation time window.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><strong>NumNameEntries</strong><!-- raw HTML omitted --></td>
<td>Contains the REG_DWORD value for the number of OU name entries in the cache (default=64). This value should be set to a value greater than the number of unique OU names that a machine will be servicing in the cache invalidation time window.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><strong>NumPartitionEntries</strong><!-- raw HTML omitted --></td>
<td>Contains the REG_DWORD value for the number of partition entries in the cache (default=1024).<!-- raw HTML omitted --> In the cache invalidation time window, the DWORD value should be set to a number greater than the number of unique partitions that a machine will be servicing. This is because a component's context can include a partition ID for a partition that does not reside on that machine. <!-- raw HTML omitted --></td>
</tr>
<tr>
<td><strong>EntryExpiration</strong><!-- raw HTML omitted --></td>
<td>Contains the REG_DWORD value for the tick count (each tick = ~7 minutes) until a cache entry becomes invalid (default=4 (~28 minutes)).<!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<h2>Flushing the Cache</h2>
<p>Because COM+ caches the default partition for users, you might want to call this method after changing the default partition for a user in the Active Directory. Administrators can do this programmatically by calling the <a href="/windows/desktop/api/ComAdmin/nf-comadmin-icomadmincatalog2-flushpartitioncache"><strong>FlushPartitionCache</strong></a> method.</p>
<h2>Related topics</h2>
<!-- raw HTML omitted -->
<p><a href="collecting-partition-metrics.html">Collecting Partition Metrics</a></p>
<!-- raw HTML omitted -->
<p><a href="grouping-applications-into-partitions.html">Grouping Applications into Partitions</a></p>
<!-- raw HTML omitted -->
<p><a href="managing-local-partitions.html">Managing Local Partitions</a></p>
<!-- raw HTML omitted -->
<p><a href="managing-partitions-within-active-directory.html">Managing Partitions Within Active Directory</a></p>
<!-- raw HTML omitted -->
<p><a href="setting-administrative-rights-for-a-partition.html">Setting Administrative Rights for a Partition</a></p>
<!-- raw HTML omitted -->
</body>
