<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Indexed Vertex Blending (Direct3D 9)</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: Indexed vertex blending extends the vertex blending support in Direct3D to allow matrices to be used for blending.
ms.assetid: d320cb8a-48b6-4a53-a051-d50f239c1aa3
title: Indexed Vertex Blending (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>Indexed Vertex Blending (Direct3D 9)</h1>
<p>Indexed vertex blending extends the vertex blending support in Direct3D to allow matrices to be used for blending. These matrices are referred to by using a matrix index. These indices are supplied on a per-vertex basis and refer to a palette of up to 256 matrices. Each index is 8 bits and each vertex can have up to four indices, which allows four matrices to be blended per vertex. The indices are packed into a DWORD. Because indices are specified on a per-vertex basis, up to 12 matrices can affect a single triangle, and any matrix in the palette can affect the vertices of one draw call. This approach has the following advantages.</p>
<ul>
<li>It enables more matrices to affect a single triangle.</li>
<li>It enables more blended triangles to be passed in the same draw call.</li>
<li>It makes vertex blending independent of triangle indices. This enables progressive meshes to work in conjunction with vertex blending.</li>
</ul>
<p>One disadvantage of this approach is that it does not work with curved-surface primitives when tessellation occurs before vertex processing.</p>
<p>The following diagram demonstrates how four matrices can affect a vertex. Each vertex has up to four indices, so four matrices can be blended per vertex. The diagram uses the matrices indexed at 0, 2, 5, and 6.</p>
<p><img src="images/dword1.png" alt="diagram of indexed vertex blending by using 4 of 256 available matrices" /></p>
<p>The following diagram demonstrates how up to 12 matrices can affect a triangle. Using indices specified on a per-vertex basis, up to 12 matrices can affect the triangle.</p>
<p><img src="images/dword2.png" alt="diagram of indexed vertex blending for a triangle by using 12 of 256 available matrices" /></p>
<p>The following equation determines the general case for how matrices effect a vertex.</p>
<p><img src="images/indexedvblend.png" alt="equation of indexed vertex blending" /></p>
<p>V <!-- raw HTML omitted -->model<!-- raw HTML omitted --> is the input model space vertex position. Index0..Index3 are the per-vertex matrix indices packed into a DWORD. M[] is the array of world matrices that get indexed into. bâ‚€..bâ‚‚ are the blend weights. V<!-- raw HTML omitted -->world<!-- raw HTML omitted --> is the output world space vertex position.</p>
<p>For more information about indexed vertex blending, see <a href="using-indexed-vertex-blending.html">Using Indexed Vertex Blending (Direct3D 9)</a>.</p>
<h2>Related topics</h2>
<!-- raw HTML omitted -->
<p><a href="geometry-blending.html">Geometry Blending</a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
