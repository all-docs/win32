<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Texture Coordinate Transformations (Direct3D 9)</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: Direct3D devices can transform the texture coordinates for vertices by applying a 4x4 matrix.
ms.assetid: f36439de-e37a-457c-9485-a435847eb01e
title: Texture Coordinate Transformations (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>Texture Coordinate Transformations (Direct3D 9)</h1>
<p>Direct3D devices can transform the texture coordinates for vertices by applying a 4x4 matrix. The system applies transformations to texture coordinates in the same manner as geometry. Any transformation (scale, rotation, translation, projection, shear, or any combination of these) can be done with a 4x4 matrix.</p>
<blockquote>
<p>[!Note]<br />
Direct3D does not modify transformed and lit vertices. As a result, an application using transformed and lit vertices cannot use Direct3D to transform the texture coordinates of the vertices.</p>
</blockquote>
<p>Â </p>
<p>Devices that support hardware-accelerated transformation and lighting operations (T&amp;L HAL Device) also accelerate the transformation of texture coordinates. When hardware acceleration of transformations isn't available, platform-specific optimizations in the Direct3D geometry pipeline apply to texture coordinate transformations.</p>
<p>Texture coordinate transformations are useful for producing special effects while avoiding the need to directly modify the texture coordinates of your geometry. You could use simple translation or rotation matrices to animate textures on an object, or you can transform texture coordinates that are automatically generated by Direct3D to simplify and perhaps accelerate advanced effects such as projected textures and dynamic light-mapping. Additionally, you might use texture coordinate transforms to reuse a single set of texture coordinates for multiple purposes, in multiple texture stages.</p>
<h2>Setting and Retrieving Texture Coordinate Transformations</h2>
<p>Like the matrices that your application uses for geometry, you set and retrieve texture coordinate transformations by calling the <a href="/windows/desktop/api"><strong>IDirect3DDevice9::SetTransform</strong></a> and <a href="/windows/desktop/api"><strong>IDirect3DDevice9::GetTransform</strong></a> methods. These methods accept the D3DTS_TEXTURE0 through D3DTS_TEXTURE7 members of the <a href="./d3dtransformstatetype.html"><strong>D3DTRANSFORMSTATETYPE</strong></a> enumerated type to identify the transformation matrices for texture stages 0 through 7, respectively.</p>
<p>The following code sets a matrix to apply to the texture coordinates for texture stage 0.</p>
<pre><code>// For this example, assume the d3dDevice variable contains a 
//   valid pointer to an IDirect3DDevice9 interface.

D3DMATRIX matTrans = D3DXMatrixIdentity( NULL );

// Set up the matrix for the desired transformation.
d3dDevice-&gt;SetTransform( D3DTS_TEXTURE0, &amp;matTrans );
</code></pre>
<h2>Enabling Texture Coordinate Transformations</h2>
<p>The D3DTSS_TEXTURETRANSFORMFLAGS texture stage state controls the application of texture coordinate transformations. Values for this texture stage state are defined by the <a href="./d3dtexturetransformflags.html"><strong>D3DTEXTURETRANSFORMFLAGS</strong></a> enumerated type.</p>
<p>Texture coordinate transformations are disabled when D3DTSS_TEXTURETRANSFORMFLAGS is set to D3DTTFF_DISABLE (the default value). Assuming that texture coordinate transformations were enabled for stage 0, the following code disables them.</p>
<pre><code>// For this example, assume the d3dDevice variable contains a 
// valid pointer to an IDirect3DDevice9 interface.

d3dDevice-&gt;SetTextureStageState( 0, D3DTSS_TEXTURETRANSFORMFLAGS, 
                                 D3DTTFF_DISABLE );
</code></pre>
<p>The other values defined in <a href="./d3dtexturetransformflags.html"><strong>D3DTEXTURETRANSFORMFLAGS</strong></a> are used to enable texture coordinate transformations, and to control how many resulting texture coordinate elements are passed to the rasterizer. For example, take the following code.</p>
<pre><code>// For this example, assume the d3dDevice variable contains a 
//   valid pointer to an IDirect3DDevice9 interface.

d3dDevice-&gt;SetTextureStageState( 0, D3DTSS_TEXTURETRANSFORMFLAGS, 
                                 D3DTTFF_COUNT2 );
</code></pre>
<p>The D3DTTFF_COUNT2 value instructs the system to apply the transformation matrix set for texture stage 0, and then pass the first two elements of the modified texture coordinates to the rasterizer.</p>
<p>The D3DTTFF_PROJECTED texture transformation flag indicates coordinates for a projected texture. When this flag is specified, the rasterizer divides the elements passed-in by the last element. Take the following code, for example.</p>
<pre><code>// For this example, assume the d3dDevice variable contains a 
//   valid pointer to an IDirect3DDevice9 interface.

d3dDevice-&gt;SetTextureStageState( 0, D3DTSS_TEXTURETRANSFORMFLAGS, 
                                 D3DTTFF_COUNT3 | D3DTTFF_PROJECTED );
</code></pre>
<p>This example informs the system to pass three texture coordinate elements to the rasterizer. The rasterizer divides the first two elements by the third, producing the 2D texture coordinates needed to address the texture.</p>
<h2>Related topics</h2>
<!-- raw HTML omitted -->
<p><a href="texture-coordinate-processing.html">Texture Coordinate Processing</a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
