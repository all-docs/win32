<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>ID3DXPRTEngine::ComputeVolumeSamples method</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<p>description: Computes a projection of the direct lighting from the previous light bounce into spherical harmonic (SH) basis vectors that represent incident radiance at specified locations.
ms.assetid: ccde7c59-cb82-4d61-822a-e1e9ecea0a28
title: ID3DXPRTEngine::ComputeVolumeSamples method (D3DX9Mesh.h)
ms.topic: reference
ms.date: 05/31/2018
topic_type:</p>
<ul>
<li>APIRef</li>
<li>kbSyntax
api_name:</li>
<li>ID3DXPRTEngine.ComputeVolumeSamples
api_type:</li>
<li>COM
api_location:</li>
<li>d3dx9.lib</li>
<li>d3dx9.dll</li>
</ul>
<hr />
<h1>ID3DXPRTEngine::ComputeVolumeSamples method</h1>
<p>Computes a projection of the direct lighting from the previous light bounce into spherical harmonic (SH) basis vectors that represent incident radiance at specified locations.</p>
<h2>Syntax</h2>
<pre lang="C++"><code>HRESULT ComputeVolumeSamples(
  [in]Â Â Â Â Â Â Â Â Â Â Â Â LPD3DXPRTBUFFER pSurfDataIn,
  [in]Â Â Â Â Â Â Â Â Â Â Â Â UINT Â Â Â Â Â Â Â Â Â Â Â Order,
  [in]Â Â Â Â Â Â Â Â Â Â Â Â UINT Â Â Â Â Â Â Â Â Â Â Â NumVolSamples.xml,
  [in]Â Â Â Â Â Â const D3DXVECTOR3 Â Â Â Â *pSampleLocs,
  [in, out]Â Â Â Â Â Â Â LPD3DXPRTBUFFER pDataOut
);
</code></pre>
<h2>Parameters</h2>
<!-- raw HTML omitted -->
<p><em>pSurfDataIn</em> [in]</p>
<!-- raw HTML omitted -->
<p>Type: <strong><a href="id3dxprtbuffer.html"><strong>LPD3DXPRTBUFFER</strong></a></strong></p>
<p>Pointer to an input <a href="id3dxprtbuffer.html"><strong>ID3DXPRTBuffer</strong></a> object that represents the 3D object from the previous light bounce.</p>
<!-- raw HTML omitted -->
<p><em>Order</em> [in]</p>
<!-- raw HTML omitted -->
<p>Type: <strong><a href="../winprog/windows-data-types.html"><strong>UINT</strong></a></strong></p>
<p>Order of the SH evaluation. Must be in the range of <a href="other-d3dx-constants.html">D3DXSH_MINORDER</a> to D3DXSH_MAXORDER, inclusive. The evaluation generates OrderÂ² coefficients. The degree of the evaluation is Order - 1.</p>
<!-- raw HTML omitted -->
<p><em>NumVolSamples.xml</em> [in]</p>
<!-- raw HTML omitted -->
<p>Type: <strong><a href="../winprog/windows-data-types.html"><strong>UINT</strong></a></strong></p>
<p>Number of sample locations.</p>
<!-- raw HTML omitted -->
<p><em>pSampleLocs</em> [in]</p>
<!-- raw HTML omitted -->
<p>Type: <strong>const <a href="d3dxvector3.html"><strong>D3DXVECTOR3</strong></a>*</strong></p>
<p>Position for each sample. If pSampleLocs is <strong>NULL</strong>, ComputeVolumeSamples will compute transfer matrices at every mesh vertex. However, if pSampleLocs is not <strong>NULL</strong>, you must sample over a sphere (set UseSphere = <strong>TRUE</strong> and UseCosine = <strong>FALSE</strong> in <a href="id3dxprtengine--setsamplinginfo.html"><strong>ID3DXPRTEngine::SetSamplingInfo</strong></a>); otherwise, ComputeVolumeSamples will return D3DERR_INVALIDCALL.</p>
<!-- raw HTML omitted -->
<p><em>pDataOut</em> [in, out]</p>
<!-- raw HTML omitted -->
<p>Type: <strong><a href="id3dxprtbuffer.html"><strong>LPD3DXPRTBUFFER</strong></a></strong></p>
<p>Pointer to an output <a href="id3dxprtbuffer.html"><strong>ID3DXPRTBuffer</strong></a> object that projects the direct lighting from the previous light bounce into SH basis vectors. This buffer must have the proper number of color channels allocated for the simulation.</p>
<!-- raw HTML omitted -->
<h2>Return value</h2>
<p>Type: <strong><a href="https://msdn.microsoft.com/library/Bb401631(v=MSDN.10).aspx"><strong>HRESULT</strong></a></strong></p>
<p>If the method succeeds, the return value is D3D_OK. If the method fails, the return value can be one of the following: D3DERR_INVALIDCALL, E_OUTOFMEMORY.</p>
<h2>Remarks</h2>
<p>This method computes how the light from the source radiance function is reflected off the surface that represents the scene (pSurfDataIn) and arrives at each point in space specified by pSampleLocs. The SH coefficients represent the mapping, at each pSampleLocs point, of source radiance to transferred incident radiance.</p>
<h2>Requirements</h2>
<table>
<thead>
<tr>
<th>Requirement</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header<!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted -->D3DX9Mesh.h<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Library<!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted -->D3dx9.lib<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<h2>See also</h2>
<!-- raw HTML omitted -->
<p><a href="id3dxprtengine.html">ID3DXPRTEngine</a></p>
<!-- raw HTML omitted -->
<p><a href="id3dxprtengine--computevolumesamplesdirectsh.html"><strong>ID3DXPRTEngine::ComputeVolumeSamplesDirectSH</strong></a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
