<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>ID3DXMesh::OptimizeInplace method</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<p>description: Generates a mesh with reordered faces and vertices to optimize drawing performance. This method reorders the existing mesh.
ms.assetid: 2cdaf627-d1d3-44f0-a5ae-9023d4b0de45
title: ID3DXMesh::OptimizeInplace method (D3DX9Mesh.h)
ms.topic: reference
ms.date: 05/31/2018
topic_type:</p>
<ul>
<li>APIRef</li>
<li>kbSyntax
api_name:</li>
<li>ID3DXMesh.OptimizeInplace
api_type:</li>
<li>COM
api_location:</li>
<li>d3dx9.lib</li>
<li>d3dx9.dll</li>
</ul>
<hr />
<h1>ID3DXMesh::OptimizeInplace method</h1>
<p>Generates a mesh with reordered faces and vertices to optimize drawing performance. This method reorders the existing mesh.</p>
<h2>Syntax</h2>
<pre lang="C++"><code>HRESULT OptimizeInplace(
  [in]Â Â Â Â Â Â Â Â DWORD Â Â Â Â Â Â Â Flags,
  [in]Â Â const DWORD Â Â Â Â Â Â Â *pAdjacencyIn,
  [out]Â Â Â Â Â Â Â DWORD Â Â Â Â Â Â Â *pAdjacencyOut,
  [out]Â Â Â Â Â Â Â DWORD Â Â Â Â Â Â Â *pFaceRemap,
  [out]Â Â Â Â Â Â Â LPD3DXBUFFER *ppVertexRemap
);
</code></pre>
<h2>Parameters</h2>
<!-- raw HTML omitted -->
<p><em>Flags</em> [in]</p>
<!-- raw HTML omitted -->
<p>Type: <strong><a href="../winprog/windows-data-types.html"><strong>DWORD</strong></a></strong></p>
<p>Combination of one or more <a href="./d3dxmeshopt.html"><strong>D3DXMESHOPT</strong></a> flags, specifying the type of optimization to perform.</p>
<!-- raw HTML omitted -->
<p><em>pAdjacencyIn</em> [in]</p>
<!-- raw HTML omitted -->
<p>Type: <strong>const <a href="../winprog/windows-data-types.html"><strong>DWORD</strong></a>*</strong></p>
<p>Pointer to an array of three DWORDs per face that specifies the three neighbors for each face in the source mesh. If the edge has no adjacent faces, the value is 0xffffffff.</p>
<!-- raw HTML omitted -->
<p><em>pAdjacencyOut</em> [out]</p>
<!-- raw HTML omitted -->
<p>Type: <strong><a href="../winprog/windows-data-types.html"><strong>DWORD</strong></a>*</strong></p>
<p>Pointer to an array of three DWORDs per face that specifies the three neighbors for each face in the optimized mesh. If the edge has no adjacent faces, the value is 0xffffffff. If the value supplied for this argument is <strong>NULL</strong>, adjacency data is not returned.</p>
<!-- raw HTML omitted -->
<p><em>pFaceRemap</em> [out]</p>
<!-- raw HTML omitted -->
<p>Type: <strong><a href="../winprog/windows-data-types.html"><strong>DWORD</strong></a>*</strong></p>
<p>An array of DWORDs, one per face, that identifies the original mesh face that corresponds to each face in the optimized mesh. If the value supplied for this argument is <strong>NULL</strong>, face remap data is not returned.</p>
<!-- raw HTML omitted -->
<p><em>ppVertexRemap</em> [out]</p>
<!-- raw HTML omitted -->
<p>Type: <strong><a href="id3dxbuffer.html"><strong>LPD3DXBUFFER</strong></a>*</strong></p>
<p>Address of a pointer to an <a href="id3dxbuffer.html"><strong>ID3DXBuffer</strong></a> interface, which contains a DWORD for each vertex that specifies how the new vertices map to the old vertices. This remap is useful if you need to alter external data based on the new vertex mapping. If the value supplied for this argument is <strong>NULL</strong>, vertex remap data is not returned.</p>
<!-- raw HTML omitted -->
<h2>Return value</h2>
<p>Type: <strong><a href="https://msdn.microsoft.com/library/Bb401631(v=MSDN.10).aspx"><strong>HRESULT</strong></a></strong></p>
<p>If the method succeeds, the return value is D3D_OK. If the method fails, the return value can be one of the following: D3DERR_INVALIDCALL, D3DXERR_CANNOTATTRSORT, E_OUTOFMEMORY.</p>
<h2>Remarks</h2>
<p>Before running <strong>ID3DXMesh::OptimizeInplace</strong>, an application must generate an adjacency buffer by calling <a href="id3dxbasemesh--generateadjacency.html"><strong>ID3DXBaseMesh::GenerateAdjacency</strong></a>. The adjacency buffer contains adjacency data, such as a list of edges and the faces that are adjacent to each other.</p>
<blockquote>
<p>[!Note]<br />
This method will fail if the mesh is sharing its vertex buffer with another mesh, unless the D3DXMESHOPT_IGNOREVERTS is set in Flags.</p>
</blockquote>
<p>Â </p>
<h2>Requirements</h2>
<table>
<thead>
<tr>
<th>Requirement</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header<!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted -->D3DX9Mesh.h<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Library<!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted -->D3dx9.lib<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<h2>See also</h2>
<!-- raw HTML omitted -->
<p><a href="id3dxmesh.html">ID3DXMesh</a></p>
<!-- raw HTML omitted -->
<p><a href="id3dxmesh--optimize.html"><strong>ID3DXMesh::Optimize</strong></a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
