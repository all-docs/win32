<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Locking Resources (Direct3D 9)</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: Locking a resource means granting CPU access to its storage.
ms.assetid: b17d8262-e514-4b9c-9237-653a4258a14e
title: Locking Resources (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>Locking Resources (Direct3D 9)</h1>
<p>Locking a resource means granting CPU access to its storage. The following locking options are defined for resources:</p>
<ul>
<li>D3DLOCK_DISCARD</li>
<li>D3DLOCK_READONLY</li>
<li>D3DLOCK_NOOVERWRITE</li>
<li>D3DLOCK_NOSYSLOCK</li>
<li>D3DLOCK_NO_DIRTY_UPDATE</li>
</ul>
<p>For details on locking flags and how they relate to specific resources, see the reference pages on the individual resource locking methods. Application developers should note that the D3DLOCK_DISCARD, D3DLOCK_READONLY, and D3DLOCK_NOOVERWRITE flags are only hints. The run time does not check that applications are following the functionality specified by these flags. An application that specifies D3DLOCK_READONLY but then writes to the resource should expect undefined results. In general, working against locking flags, including the locking usage flags, is not guaranteed to work in later releases and may incur a significant performance penalty.</p>
<p>A lock operation is followed by an unlock operation. For example, after locking a texture, the application subsequently relinquishes direct access to locked textures by unlocking them. In addition to granting processor access, any other operations involving that resource are serialized for the duration of a lock. Only a single lock for a resource is allowed, even for non-overlapping regions, and no accelerator operations on a surface can be ongoing while a lock operation is outstanding on that surface.</p>
<p>Each resource interface has methods for locking the contained buffers. Each texture resource can also lock a sub-portion of that resource. 2D resources (surfaces) allow the locking of sub-rectangles, and volume resources allow the locking of sub-volumes or boxes. Each lock method returns a structure that contains a pointer to the storage backing the resource and values representing the distances between rows or planes of data, depending on the resource type. For details, see the method lists for the resource interfaces. The returned pointer always points to the top-left byte in the locked sub-regions.</p>
<p>When working with index and vertex buffers, you can make multiple lock calls; however, you must ensure that the number of lock calls matches the number of unlock calls.</p>
<p>The DXTn store pixels in encoded 4x4 blocks, and can only be locked on 4x4 boundaries.</p>
<h2>Related topics</h2>
<!-- raw HTML omitted -->
<p><a href="direct3d-resources.html">Direct3D Resources</a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
