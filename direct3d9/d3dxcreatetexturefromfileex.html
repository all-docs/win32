<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>D3DXCreateTextureFromFileEx function</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<p>description: Creates a texture from a file. This is a more advanced function than D3DXCreateTextureFromFile.
ms.assetid: 820bbd77-98af-4051-a22e-825fa4dd87d8
title: D3DXCreateTextureFromFileEx function (D3dx9tex.h)
ms.topic: reference
ms.date: 05/31/2018
topic_type:</p>
<ul>
<li>APIRef</li>
<li>kbSyntax
api_name:</li>
<li>D3DXCreateTextureFromFileEx
api_type:</li>
<li>LibDef
api_location:</li>
<li>d3dx9.lib</li>
<li>d3dx9.dll</li>
</ul>
<hr />
<h1>D3DXCreateTextureFromFileEx function</h1>
<p>Creates a texture from a file. This is a more advanced function than <a href="d3dxcreatetexturefromfile.html"><strong>D3DXCreateTextureFromFile</strong></a>.</p>
<h2>Syntax</h2>
<pre lang="C++"><code>HRESULT D3DXCreateTextureFromFileEx(
  _In_Â Â Â Â LPDIRECT3DDEVICE9 Â pDevice,
  _In_Â Â Â Â LPCTSTR Â Â Â Â Â Â Â Â Â Â Â pSrcFile,
  _In_Â Â Â Â UINT Â Â Â Â Â Â Â Â Â Â Â Â Â Â Width,
  _In_Â Â Â Â UINT Â Â Â Â Â Â Â Â Â Â Â Â Â Â Height,
  _In_Â Â Â Â UINT Â Â Â Â Â Â Â Â Â Â Â Â Â Â MipLevels,
  _In_Â Â Â Â DWORD Â Â Â Â Â Â Â Â Â Â Â Â Â Usage,
  _In_Â Â Â Â D3DFORMAT Â Â Â Â Â Â Â Â Â Format,
  _In_Â Â Â Â D3DPOOL Â Â Â Â Â Â Â Â Â Â Â Pool,
  _In_Â Â Â Â DWORD Â Â Â Â Â Â Â Â Â Â Â Â Â Filter,
  _In_Â Â Â Â DWORD Â Â Â Â Â Â Â Â Â Â Â Â Â MipFilter,
  _In_Â Â Â Â D3DCOLOR Â Â Â Â Â Â Â Â Â Â ColorKey,
  _Inout_Â D3DXIMAGE_INFO Â Â Â Â *pSrcInfo,
  _Out_Â Â Â PALETTEENTRY Â Â Â Â Â Â *pPalette,
  _Out_Â Â Â LPDIRECT3DTEXTURE9 *ppTexture
);
</code></pre>
<h2>Parameters</h2>
<!-- raw HTML omitted -->
<p><em>pDevice</em> [in]</p>
<!-- raw HTML omitted -->
<p>Type: <strong><a href="/windows/win32/api/d3d9helper/nn-d3d9helper-idirect3ddevice9"><strong>LPDIRECT3DDEVICE9</strong></a></strong></p>
<p>Pointer to an <a href="/windows/win32/api/d3d9helper/nn-d3d9helper-idirect3ddevice9"><strong>IDirect3DDevice9</strong></a> interface, representing the device to be associated with the texture.</p>
<!-- raw HTML omitted -->
<p><em>pSrcFile</em> [in]</p>
<!-- raw HTML omitted -->
<p>Type: <strong><a href="../winprog/windows-data-types.html"><strong>LPCTSTR</strong></a></strong></p>
<p>Pointer to a string that specifies the filename. If the compiler settings require Unicode, the data type LPCTSTR resolves to LPCWSTR. Otherwise, the string data type resolves to LPCSTR. See Remarks.</p>
<!-- raw HTML omitted -->
<p><em>Width</em> [in]</p>
<!-- raw HTML omitted -->
<p>Type: <strong><a href="../winprog/windows-data-types.html"><strong>UINT</strong></a></strong></p>
<p>Width in pixels. If this value is zero or D3DX_DEFAULT, the dimensions are taken from the file and rounded up to a power of two. If the device supports non-power of 2 textures and <a href="other-d3dx-constants.html">D3DX_DEFAULT_NONPOW2</a> is specified, the size will not be rounded.</p>
<!-- raw HTML omitted -->
<p><em>Height</em> [in]</p>
<!-- raw HTML omitted -->
<p>Type: <strong><a href="../winprog/windows-data-types.html"><strong>UINT</strong></a></strong></p>
<p>Height, in pixels. If this value is zero or D3DX_DEFAULT, the dimensions are taken from the file and rounded up to a power of two. If the device supports non-power of 2 textures and <a href="other-d3dx-constants.html">D3DX_DEFAULT_NONPOW2</a> is sepcified, the size will not be rounded.</p>
<!-- raw HTML omitted -->
<p><em>MipLevels</em> [in]</p>
<!-- raw HTML omitted -->
<p>Type: <strong><a href="../winprog/windows-data-types.html"><strong>UINT</strong></a></strong></p>
<p>Number of mip levels requested. If this value is zero or D3DX_DEFAULT, a complete mipmap chain is created. If D3DX_FROM_FILE, the size will be taken exactly as it is in the file, and the call will fail if this violates device capabilities.</p>
<!-- raw HTML omitted -->
<p><em>Usage</em> [in]</p>
<!-- raw HTML omitted -->
<p>Type: <strong><a href="../winprog/windows-data-types.html"><strong>DWORD</strong></a></strong></p>
<p>0, <a href="d3dusage.html"><strong>D3DUSAGE_RENDERTARGET</strong></a>, or <strong>D3DUSAGE_DYNAMIC</strong>. Setting this flag to <strong>D3DUSAGE_RENDERTARGET</strong> indicates that the surface is to be used as a render target. The resource can then be passed to the <em>pNewRenderTarget</em> parameter of the <a href="/windows/desktop/api"><strong>SetRenderTarget</strong></a> method. If either <strong>D3DUSAGE_RENDERTARGET</strong> or <strong>D3DUSAGE_DYNAMIC</strong> is specified, <em>Pool</em> must be set to D3DPOOL_DEFAULT, and the application should check that the device supports this operation by calling <a href="/windows/desktop/api"><strong>CheckDeviceFormat</strong></a>. <strong>D3DUSAGE_DYNAMIC</strong> indicates that the surface should be handled dynamically. See <a href="performance-optimizations.html">Using Dynamic Textures</a>.</p>
<!-- raw HTML omitted -->
<p><em>Format</em> [in]</p>
<!-- raw HTML omitted -->
<p>Type: <strong><a href="d3dformat.html">D3DFORMAT</a></strong></p>
<p>Member of the <a href="d3dformat.html">D3DFORMAT</a> enumerated type, describing the requested pixel format for the texture. The returned texture might have a different format from that specified by <em>Format</em>. Applications should check the format of the returned texture. If D3DFMT_UNKNOWN, the format is taken from the file. If D3DFMT_FROM_FILE, the format is taken exactly as it is in the file, and the call will fail if this violates device capabilities.</p>
<!-- raw HTML omitted -->
<p><em>Pool</em> [in]</p>
<!-- raw HTML omitted -->
<p>Type: <strong><a href="./d3dpool.html"><strong>D3DPOOL</strong></a></strong></p>
<p>Member of the <a href="./d3dpool.html"><strong>D3DPOOL</strong></a> enumerated type, describing the memory class into which the texture should be placed.</p>
<!-- raw HTML omitted -->
<p><em>Filter</em> [in]</p>
<!-- raw HTML omitted -->
<p>Type: <strong><a href="../winprog/windows-data-types.html"><strong>DWORD</strong></a></strong></p>
<p>A combination of one or more <a href="d3dx-filter.html">D3DX_FILTER</a> constants controlling how the image is filtered. Specifying <a href="other-d3dx-constants.html">D3DX_DEFAULT</a> for this parameter is the equivalent of specifying D3DX_FILTER_TRIANGLE | D3DX_FILTER_DITHER.</p>
<!-- raw HTML omitted -->
<p><em>MipFilter</em> [in]</p>
<!-- raw HTML omitted -->
<p>Type: <strong><a href="../winprog/windows-data-types.html"><strong>DWORD</strong></a></strong></p>
<p>A combination of one or more <a href="d3dx-filter.html">D3DX_FILTER</a> constants controlling how the image is filtered. Specifying D3DX_DEFAULT for this parameter is the equivalent of specifying D3DX_FILTER_BOX. In addition, use bits 27-31 to specify the number of mip levels to be skipped (from the top of the mipmap chain) when a .dds texture is loaded into memory; this allows you to skip up to 32 levels.</p>
<!-- raw HTML omitted -->
<p><em>ColorKey</em> [in]</p>
<!-- raw HTML omitted -->
<p>Type: <strong><a href="d3dcolor.html"><strong>D3DCOLOR</strong></a></strong></p>
<p><a href="d3dcolor.html"><strong>D3DCOLOR</strong></a> value to replace with transparent black, or 0 to disable the color key. This is always a 32-bit ARGB color, independent of the source image format. Alpha is significant and should usually be set to FF for opaque color keys. Thus, for opaque black, the value would be equal to 0xFF000000.</p>
<!-- raw HTML omitted -->
<p><em>pSrcInfo</em> [in, out]</p>
<!-- raw HTML omitted -->
<p>Type: <strong><a href="d3dximage-info.html"><strong>D3DXIMAGE_INFO</strong></a>*</strong></p>
<p>Pointer to a <a href="d3dximage-info.html"><strong>D3DXIMAGE_INFO</strong></a> structure to be filled in with a description of the data in the source image file, or <strong>NULL</strong>.</p>
<!-- raw HTML omitted -->
<p><em>pPalette</em> [out]</p>
<!-- raw HTML omitted -->
<p>Type: <strong><a href="/windows/win32/api/wingdi/ns-wingdi-paletteentry"><strong>PALETTEENTRY</strong></a>*</strong></p>
<p>Pointer to a <a href="/windows/win32/api/wingdi/ns-wingdi-paletteentry"><strong>PALETTEENTRY</strong></a> structure, representing a 256-color palette to fill in, or <strong>NULL</strong>.</p>
<!-- raw HTML omitted -->
<p><em>ppTexture</em> [out]</p>
<!-- raw HTML omitted -->
<p>Type: <strong><a href="/windows/win32/api/d3d9helper/nn-d3d9helper-idirect3dtexture9"><strong>LPDIRECT3DTEXTURE9</strong></a>*</strong></p>
<p>Address of a pointer to an <a href="/windows/win32/api/d3d9helper/nn-d3d9helper-idirect3dtexture9"><strong>IDirect3DTexture9</strong></a> interface, representing the created texture object.</p>
<!-- raw HTML omitted -->
<h2>Return value</h2>
<p>Type: <strong><a href="https://msdn.microsoft.com/library/Bb401631(v=MSDN.10).aspx"><strong>HRESULT</strong></a></strong></p>
<p>If the function succeeds, the return value is D3D_OK. If the function fails, the return value can be one of the following: D3DERR_INVALIDCALL, D3DERR_NOTAVAILABLE, D3DERR_OUTOFVIDEOMEMORY, D3DXERR_INVALIDDATA, E_OUTOFMEMORY.</p>
<h2>Remarks</h2>
<p>The compiler setting also determines the function version. If Unicode is defined, the function call resolves to D3DXCreateTextureFromFileExW. Otherwise, the function call resolves to D3DXCreateTextureFromFileExA because ANSI strings are being used.</p>
<p>Use <a href="d3dxchecktexturerequirements.html"><strong>D3DXCheckTextureRequirements</strong></a> to determine if your device can support the texture given the current state.</p>
<p>This function supports the following file formats: .bmp, .dds, .dib, .hdr, .jpg, .pfm, .png, .ppm, and .tga. See <a href="./d3dximage-fileformat.html"><strong>D3DXIMAGE_FILEFORMAT</strong></a>.</p>
<p>Mipmapped textures automatically have each level filled with the loaded texture. When loading images into mipmapped textures, some devices are unable to go to a 1x1 image and this function will fail. If this happens, then the images need to be loaded manually.</p>
<p>For the best performance when using <strong>D3DXCreateTextureFromFileEx</strong>:</p>
<ol>
<li>Doing image scaling and format conversion at load time can be slow. Store images in the format and resolution they will be used. If the target hardware requires power of 2 dimensions, then create and store images using power of 2 dimensions.</li>
<li>For mipmap image creation at load time, filter using <a href="d3dx-filter.html">D3DX_FILTER_BOX</a>. A box filter is much faster than other filter types such as D3DX_FILTER_TRIANGLE.</li>
<li>Consider using DDS files. Since DDS files can be used to represent any Direct3D 9 texture format, they are very easy for D3DX to read. Also, they can store mipmaps, so any mipmap-generation algorithms can be used to author the images.</li>
</ol>
<p>When skipping mipmap levels while loading a .dds file, use the D3DX_SKIP_DDS_MIP_LEVELS macro to generate the MipFilter value. This macro takes the number of levels to skip and the filter type and returns the filter value, which would then be passed into the MipFilter parameter.</p>
<h2>Requirements</h2>
<table>
<thead>
<tr>
<th>Requirement</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header<!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted -->D3dx9tex.h<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Library<!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted -->D3dx9.lib<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<h2>See also</h2>
<!-- raw HTML omitted -->
<p><a href="d3dxcreatetexturefromfile.html"><strong>D3DXCreateTextureFromFile</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="dx9-graphics-reference-d3dx-functions-texture.html">Texture Functions in D3DX 9</a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
