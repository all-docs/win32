<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Saving Pixel State With a StateBlock (Direct3D 9)</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: A state block can be used to capture only pixel state (see State Blocks Save and Restore State (Direct3D 9)).
ms.assetid: 30624c0a-e30f-4383-bc0c-b43f42403e72
title: Saving Pixel State With a StateBlock (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>Saving Pixel State With a StateBlock (Direct3D 9)</h1>
<p>A state block can be used to capture only pixel state (see <a href="state-blocks-save-and-restore-state.html">State Blocks Save and Restore State (Direct3D 9)</a>). The following state is pixel state:</p>
<ul>
<li>Pixel render state (see <a href="#pixel-pipeline-render-state">Pixel Pipeline: Render State</a>).</li>
<li>Pixel texture state (see <a href="#pixel-pipeline-texture-state">Pixel Pipeline: Texture State</a>).</li>
<li>Pixel sampler state (see <a href="#pixel-pipeline-sampler-state">Pixel Pipeline: Sampler State</a>).</li>
<li>The current pixel shader and each of the pixel shader constants.</li>
</ul>
<p>To capture pixel state with a state block, specify D3DSBT_PIXELSTATE when calling <a href="/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createstateblock"><strong>IDirect3DDevice9::CreateStateBlock</strong></a>.</p>
<h2>Pixel Pipeline: Render State</h2>
<p>Device render states affect the behavior of almost every part of the pipeline. Render states are set by calling <a href="/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setrenderstate"><strong>IDirect3DDevice9::SetRenderState</strong></a>.</p>
<p>The following table includes all render states that set-up pixel state:</p>
<table>
<thead>
<tr>
<th>Render States</th>
<th>Default Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>D3DRS_ZENABLE</td>
<td>D3DZB_FALSE</td>
</tr>
<tr>
<td>D3DRS_SPECULARENABLE</td>
<td><strong>FALSE</strong></td>
</tr>
<tr>
<td><a href="./d3dfillmode.html"><strong>D3DFILLMODE</strong></a></td>
<td>D3DFILL_SOLID</td>
</tr>
<tr>
<td><a href="./d3dshademode.html"><strong>D3DSHADEMODE</strong></a></td>
<td>D3DSHADE_GOURAUD</td>
</tr>
<tr>
<td>D3DRS_ZWRITEENABLE</td>
<td><strong>TRUE</strong></td>
</tr>
<tr>
<td>D3DRS_ALPHATESTENABLE</td>
<td><strong>FALSE</strong></td>
</tr>
<tr>
<td>D3DRS_LASTPIXEL</td>
<td><strong>TRUE</strong></td>
</tr>
<tr>
<td>D3DRS_SRCBLEND</td>
<td>D3DBLEND_ONE</td>
</tr>
<tr>
<td>D3DRS_DESTBLEND</td>
<td>D3DBLEND_ZERO</td>
</tr>
<tr>
<td>D3DRS_ZFUNC</td>
<td>D3DCMP_LESSEQUAL</td>
</tr>
<tr>
<td>D3DRS_ALPHAREF</td>
<td>0</td>
</tr>
<tr>
<td>D3DRS_ALPHAFUNC</td>
<td>D3DCMP_ALWAYS</td>
</tr>
<tr>
<td>D3DRS_DITHERENABLE</td>
<td><strong>FALSE</strong></td>
</tr>
<tr>
<td>D3DRS_FOGSTART</td>
<td>0</td>
</tr>
<tr>
<td>D3DRS_FOGEND</td>
<td>1</td>
</tr>
<tr>
<td>D3DRS_FOGDENSITY</td>
<td>1</td>
</tr>
<tr>
<td>D3DRS_ALPHABLENDENABLE</td>
<td><strong>FALSE</strong></td>
</tr>
<tr>
<td>D3DRS_DEPTHBIAS</td>
<td>0</td>
</tr>
<tr>
<td>D3DRS_STENCILENABLE</td>
<td><strong>FALSE</strong></td>
</tr>
<tr>
<td>D3DRS_STENCILFAIL</td>
<td>D3DSTENCILOP_KEEP</td>
</tr>
<tr>
<td>D3DRS_STENCILZFAIL</td>
<td>D3DSTENCILOP_KEEP</td>
</tr>
<tr>
<td>D3DRS_STENCILPASS</td>
<td>D3DSTENCILOP_KEEP</td>
</tr>
<tr>
<td>D3DRS_STENCILFUNC</td>
<td>D3DCMP_ALWAYS</td>
</tr>
<tr>
<td>D3DRS_STENCILREF</td>
<td>0</td>
</tr>
<tr>
<td>D3DRS_STENCILMASK</td>
<td>0xffffffff</td>
</tr>
<tr>
<td>D3DRS_STENCILWRITEMASK</td>
<td>0xffffffff</td>
</tr>
<tr>
<td>D3DRS_TEXTUREFACTOR</td>
<td>0xffffffff</td>
</tr>
<tr>
<td>D3DRS_WRAP0</td>
<td>0</td>
</tr>
<tr>
<td>D3DRS_WRAP1</td>
<td>0</td>
</tr>
<tr>
<td>D3DRS_WRAP2</td>
<td>0</td>
</tr>
<tr>
<td>D3DRS_WRAP3</td>
<td>0</td>
</tr>
<tr>
<td>D3DRS_WRAP4</td>
<td>0</td>
</tr>
<tr>
<td>D3DRS_WRAP5</td>
<td>0</td>
</tr>
<tr>
<td>D3DRS_WRAP6</td>
<td>0</td>
</tr>
<tr>
<td>D3DRS_WRAP7</td>
<td>0</td>
</tr>
<tr>
<td>D3DRS_WRAP8</td>
<td>0</td>
</tr>
<tr>
<td>D3DRS_WRAP9</td>
<td>0</td>
</tr>
<tr>
<td>D3DRS_WRAP10</td>
<td>0</td>
</tr>
<tr>
<td>D3DRS_WRAP11</td>
<td>0</td>
</tr>
<tr>
<td>D3DRS_WRAP12</td>
<td>0</td>
</tr>
<tr>
<td>D3DRS_WRAP13</td>
<td>0</td>
</tr>
<tr>
<td>D3DRS_WRAP14</td>
<td>0</td>
</tr>
<tr>
<td>D3DRS_WRAP15</td>
<td>0</td>
</tr>
<tr>
<td>D3DRS_LOCALVIEWER</td>
<td><strong>TRUE</strong></td>
</tr>
<tr>
<td>D3DRS_EMISSIVEMATERIALSOURCE</td>
<td>D3DMCS_MATERIAL</td>
</tr>
<tr>
<td>D3DRS_AMBIENTMATERIALSOURCE</td>
<td>D3DMCS_MATERIAL</td>
</tr>
<tr>
<td>D3DRS_DIFFUSEMATERIALSOURCE</td>
<td>D3DMCS_COLOR1</td>
</tr>
<tr>
<td>D3DRS_SPECULARMATERIALSOURCE</td>
<td>D3DMCS_COLOR2</td>
</tr>
<tr>
<td>D3DRS_COLORWRITEENABLE</td>
<td>0x0000000f</td>
</tr>
<tr>
<td><a href="./d3dblendop.html"><strong>D3DBLENDOP</strong></a></td>
<td>D3DBLENDOP_ADD</td>
</tr>
<tr>
<td>D3DRS_SCISSORTESTENABLE</td>
<td><strong>FALSE</strong></td>
</tr>
<tr>
<td>D3DRS_SLOPESCALEDEPTHBIAS</td>
<td>0</td>
</tr>
<tr>
<td>D3DRS_ANTIALIASEDLINEENABLE</td>
<td><strong>FALSE</strong></td>
</tr>
<tr>
<td>D3DRS_TWOSIDEDSTENCILMODE</td>
<td><strong>FALSE</strong></td>
</tr>
<tr>
<td>D3DRS_CCW_STENCILFAIL</td>
<td>D3DSTENCILOP_KEEP</td>
</tr>
<tr>
<td>D3DRS_CCW_STENCILZFAIL</td>
<td>D3DSTENCILOP_KEEP</td>
</tr>
<tr>
<td>D3DRS_CCW_STENCILPASS</td>
<td>D3DSTENCILOP_KEEP</td>
</tr>
<tr>
<td>D3DRS_CCW_STENCILFUNC</td>
<td>D3DCMP_ALWAYS</td>
</tr>
<tr>
<td>D3DRS_COLORWRITEENABLE1</td>
<td>0x0000000f</td>
</tr>
<tr>
<td>D3DRS_COLORWRITEENABLE2</td>
<td>0x0000000f</td>
</tr>
<tr>
<td>D3DRS_COLORWRITEENABLE3</td>
<td>0x0000000f</td>
</tr>
<tr>
<td>D3DRS_BLENDFACTOR</td>
<td>0xffffffff</td>
</tr>
<tr>
<td>D3DRS_SRGBWRITEENABLE</td>
<td>0</td>
</tr>
<tr>
<td>D3DRS_SEPARATEALPHABLENDENABLE</td>
<td><strong>FALSE</strong></td>
</tr>
<tr>
<td>D3DRS_SRCBLENDALPHA</td>
<td>D3DBLEND_ONE</td>
</tr>
<tr>
<td>D3DRS_DESTBLENDALPHA</td>
<td>D3DBLEND_ZERO</td>
</tr>
<tr>
<td>D3DRS_BLENDOPALPHA</td>
<td>D3DBLENDOP_ADD</td>
</tr>
</tbody>
</table>
<p>Â </p>
<h2>Pixel Pipeline: Sampler State</h2>
<p>Sampler states control sampling related topics such as filtering, tiling, and texture coordinate address modes. Use <a href="/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setsamplerstate"><strong>IDirect3DDevice9::SetSamplerState</strong></a> to set up the sampler state (including the one used in the tessellator unit to sample displacement maps). The sampler states have been renamed with a &quot;D3DSAMP_&quot; prefix to enable compile time error detection when porting from DirectX 8.</p>
<p>The following table includes all sampler states that set-up pixel state:</p>
<table>
<thead>
<tr>
<th>Sampler States</th>
<th>Default Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>D3DSAMP_ADDRESSU</td>
<td>D3DTADDRESS_WRAP</td>
</tr>
<tr>
<td>D3DSAMP_ADDRESSV</td>
<td>D3DTADDRESS_WRAP</td>
</tr>
<tr>
<td>D3DSAMP_ADDRESSW</td>
<td>D3DTADDRESS_WRAP</td>
</tr>
<tr>
<td>D3DSAMP_BORDERCOLOR</td>
<td>0x00000000</td>
</tr>
<tr>
<td>D3DSAMP_MAGFILTER</td>
<td>D3DTEXF_POINT</td>
</tr>
<tr>
<td>D3DSAMP_MINFILTER</td>
<td>D3DTEXF_POINT</td>
</tr>
<tr>
<td>D3DSAMP_MIPFILTER</td>
<td>D3DTEXF_NONE</td>
</tr>
<tr>
<td>D3DSAMP_MIPMAPLODBIAS</td>
<td>0</td>
</tr>
<tr>
<td>D3DSAMP_MAXMIPLEVEL</td>
<td>0</td>
</tr>
<tr>
<td>D3DSAMP_MAXANISOTROPY</td>
<td>1</td>
</tr>
<tr>
<td>D3DSAMP_SRGBTEXTURE</td>
<td>0</td>
</tr>
<tr>
<td>D3DSAMP_ELEMENTINDEX</td>
<td>0</td>
</tr>
</tbody>
</table>
<p>Â </p>
<h2>Pixel Pipeline: Texture State</h2>
<p>Texture states control texture blending operations of the multi-texture blender. Use <a href="/windows/desktop/api"><strong>IDirect3DDevice9::SetTextureStageState</strong></a> to set-up texture stage states. Use <a href="/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-settexture"><strong>IDirect3DDevice9::SetTexture</strong></a> to associate a texture with a sampler stage.</p>
<p>The following table includes all the texture states that set-up pixel state:</p>
<table>
<thead>
<tr>
<th>Texture States</th>
<th>Default Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>D3DTSS_COLOROP</td>
<td>D3DTOP_DISABLE</td>
</tr>
<tr>
<td>D3DTSS_COLORARG1</td>
<td>D3DTA_TEXTURE</td>
</tr>
<tr>
<td>D3DTSS_COLORARG2</td>
<td>D3DTA_CURRENT</td>
</tr>
<tr>
<td>D3DTSS_ALPHAOP</td>
<td>D3DTOP_DISABLE</td>
</tr>
<tr>
<td>D3DTSS_ALPHAARG1</td>
<td>D3DTA_TEXTURE</td>
</tr>
<tr>
<td>D3DTSS_ALPHAARG2</td>
<td>D3DTA_CURRENT</td>
</tr>
<tr>
<td>D3DTSS_BUMPENVMAT00</td>
<td>0</td>
</tr>
<tr>
<td>D3DTSS_BUMPENVMAT01</td>
<td>0</td>
</tr>
<tr>
<td>D3DTSS_BUMPENVMAT10</td>
<td>0</td>
</tr>
<tr>
<td>D3DTSS_BUMPENVMAT11</td>
<td>0</td>
</tr>
<tr>
<td>D3DTSS_TEXCOORDINDEX</td>
<td>0</td>
</tr>
<tr>
<td>D3DTSS_BUMPENVLSCALE</td>
<td>0</td>
</tr>
<tr>
<td>D3DTSS_BUMPENVLOFFSET</td>
<td>0</td>
</tr>
<tr>
<td>D3DTSS_TEXTURETRANSFORMFLAGS</td>
<td>D3DTTFF_DISABLE</td>
</tr>
<tr>
<td>D3DTSS_COLORARG0</td>
<td>D3DTA_CURRENT</td>
</tr>
<tr>
<td>D3DTSS_ALPHAARG0</td>
<td>D3DTA_CURRENT</td>
</tr>
<tr>
<td>D3DTSS_RESULTARG</td>
<td>D3DTA_CURRENT</td>
</tr>
</tbody>
</table>
<p>Â </p>
<h2>Related topics</h2>
<!-- raw HTML omitted -->
<p><a href="state-blocks-save-and-restore-state.html">State Blocks Save and Restore State</a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
