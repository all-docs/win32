<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Avoiding Buffer Overruns</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: Provides a brief introduction to a few types of buffer overrun situations and offers some ideas and resources to help you avoid creating new risks and mitigate existing ones.
ms.assetid: 713fd6de-16af-49d2-8940-763c4a6e414b
title: Avoiding Buffer Overruns
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>Avoiding Buffer Overruns</h1>
<p>A buffer overrun is one of the most common sources of security risk. A buffer overrun is essentially caused by treating unchecked, external input as trustworthy data. The act of copying this data, using operations such as <a href="/previous-versions/windows/desktop/legacy/aa366535(v=vs.85)"><strong>CopyMemory</strong></a>, <strong>strcat</strong>, <strong>strcpy</strong>, or <strong>wcscpy</strong>, can create unanticipated results, which allows for system corruption. In the best of cases, your application will abort with a core dump, segmentation fault, or access violation. In the worst of cases, an attacker can exploit the buffer overrun by introducing and executing other malicious code in your process. Copying unchecked, input data into a stack-based buffer is the most common cause of exploitable faults.</p>
<p>Buffer overruns can occur in a variety of ways. The following list provides a brief introduction to a few types of buffer overrun situations and offers some ideas and resources to help you avoid creating new risks and mitigate existing ones:</p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted -->Static buffer overruns</p>
<!-- raw HTML omitted -->
<p>A static buffer overrun occurs when a buffer, which has been declared on the stack, is written to with more data than it was allocated to hold. The less apparent versions of this error occur when unverified user input data is copied directly to a static variable, causing potential stack corruption.</p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted -->Heap overruns</p>
<!-- raw HTML omitted -->
<p>Heap overruns, like static buffer overruns, can lead to memory and stack corruption. Because heap overruns occur in heap memory rather than on the stack, some people consider them to be less able to cause serious problems; nevertheless, heap overruns require real programming care and are just as able to allow system risks as static buffer overruns.</p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted -->Array indexing errors</p>
<!-- raw HTML omitted -->
<p>Array indexing errors also are a source of memory overruns. Careful bounds checking and index management will help prevent this type of memory overrun.</p>
<!-- raw HTML omitted -->
<p>Preventing buffer overruns is primarily about writing good code. Always validate all your inputs and fail gracefully when necessary. For more information about writing secure code, see the following resources:</p>
<ul>
<li>Maguire, Steve [1993], <em>Writing Solid Code</em>, ISBN 1-55615-551-4, Microsoft Press, Redmond, Washington.</li>
<li>Howard, Michael and LeBlanc, David [2003], <em>Writing Secure Code</em>, 2d ed., ISBN 0-7356-1722-8, Microsoft Press, Redmond, Washington.</li>
</ul>
<blockquote>
<p>[!Note]<br />
These resources may not be available in some languages and countries.</p>
</blockquote>
<p>Â </p>
<p>Safe string handling is a long-standing issue that continues to be addressed both by following good programming practices and often by using and retrofitting existing systems with secure, string-handling functions. An example of such a set of functions for the Windows shell starts with <a href="/windows/win32/api/strsafe/nf-strsafe-stringcbcata"><strong>StringCbCat</strong></a>.</p>
<p>Â </p>
<p>Â </p>
</body>
