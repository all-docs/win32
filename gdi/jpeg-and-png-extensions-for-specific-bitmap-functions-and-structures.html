<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>JPEG and PNG Extensions for Specific Bitmap Functions and Structures</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: On certain versions of Microsoft Windows, the StretchDIBits and SetDIBitsToDevice functions allow JPEG and PNG images to be passed as the source image to printer devices.
ms.assetid: a38a807d-44df-40a2-8af7-0ce5e532cba2
title: JPEG and PNG Extensions for Specific Bitmap Functions and Structures
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>JPEG and PNG Extensions for Specific Bitmap Functions and Structures</h1>
<p>On certain versions of Microsoft Windows, the <a href="/windows/desktop/api/Wingdi/nf-wingdi-stretchdibits"><strong>StretchDIBits</strong></a> and <a href="/windows/desktop/api/Wingdi/nf-wingdi-setdibitstodevice"><strong>SetDIBitsToDevice</strong></a> functions allow JPEG and PNG images to be passed as the source image to printer devices. This extension is not intended as a means to supply general JPEG and PNG decompression to applications, but rather to allow applications to send JPEG- and PNG-compressed images directly to printers having hardware support for JPEG and PNG images.</p>
<p>The <a href="/windows/win32/api/wingdi/ns-wingdi-bitmapinfoheader"><strong>BITMAPINFOHEADER</strong></a>, <a href="/windows/desktop/api/Wingdi/ns-wingdi-bitmapv4header"><strong>BITMAPV4HEADER</strong></a> and <a href="/windows/desktop/api/Wingdi/ns-wingdi-bitmapv5header"><strong>BITMAPV5HEADER</strong></a> structures are extended to allow specification of <strong>biCompression</strong> values indicating that the bitmap data is a JPEG or PNG image. These compression values are only valid for <a href="/windows/desktop/api/Wingdi/nf-wingdi-setdibitstodevice"><strong>SetDIBitsToDevice</strong></a> and <a href="/windows/desktop/api/Wingdi/nf-wingdi-stretchdibits"><strong>StretchDIBits</strong></a> when the <em>hdc</em> parameter specifies a printer device. To support metafile spooling of the printer, the application should not rely on the return value to determine whether the device supports the JPEG or PNG file. The application must issue QUERYESCSUPPORT with the corresponding escape before calling <strong>SetDIBitsToDevice</strong> and <strong>StretchDIBits</strong>. If the validation escape fails, the application must then fall back on its own JPEG or PNG support to decompress the image into a bitmap.</p>
<p>Â </p>
<p>Â </p>
</body>
