<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>WM_PAINT message</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: The WM_PAINT message is sent when the system or another application makes a request to paint a portion of an application's window.
ms.assetid: afebaa07-cf00-47db-a919-46436f164881
title: WM_PAINT message (Winuser.h)
ms.topic: reference
ms.custom: snippet-project
ms.date: 05/31/2018</h2>
<h1>WM_PAINT message</h1>
<p>The <strong>WM_PAINT</strong> message is sent when the system or another application makes a request to paint a portion of an application's window. The message is sent when the <a href="/windows/desktop/api/Winuser/nf-winuser-updatewindow"><strong>UpdateWindow</strong></a> or <a href="/windows/desktop/api/Winuser/nf-winuser-redrawwindow"><strong>RedrawWindow</strong></a> function is called, or by the <a href="/windows/win32/api/winuser/nf-winuser-dispatchmessage"><strong>DispatchMessage</strong></a> function when the application obtains a <strong>WM_PAINT</strong> message by using the <a href="/windows/win32/api/winuser/nf-winuser-getmessage"><strong>GetMessage</strong></a> or <a href="/windows/win32/api/winuser/nf-winuser-peekmessagea"><strong>PeekMessage</strong></a> function.</p>
<p>A window receives this message through its <a href="/windows/win32/api/winuser/nc-winuser-wndproc"><strong>WindowProc</strong></a> function.</p>
<pre lang="C++"><code>LRESULT CALLBACK WindowProc(
  HWND hwnd, 
  UINT  uMsg, 
  WPARAM wParam, 
  LPARAM lParam     
);
</code></pre>
<h2>Parameters</h2>
<!-- raw HTML omitted -->
<p><em>wParam</em></p>
<!-- raw HTML omitted -->
<p>This parameter is not used.</p>
<!-- raw HTML omitted -->
<p><em>lParam</em></p>
<!-- raw HTML omitted -->
<p>This parameter is not used.</p>
<!-- raw HTML omitted -->
<h2>Return value</h2>
<p>An application returns zero if it processes this message.</p>
<h2>Example</h2>
<pre lang="c"><code>LRESULT CALLBACK WindowProc(HWND hwnd, UINT uMsg, WPARAM wParam, LPARAM lParam)
{
    switch (uMsg)
    {
    case WM_DESTROY:
        PostQuitMessage(0);
        return 0;

    case WM_PAINT:
        {
            PAINTSTRUCT ps;
            HDC hdc = BeginPaint(hwnd, &amp;ps);

            // All painting occurs here, between BeginPaint and EndPaint.
            FillRect(hdc, &amp;ps.rcPaint, (HBRUSH) (COLOR_WINDOW+1));
            EndPaint(hwnd, &amp;ps);
        }
        return 0;
    }

    return DefWindowProc(hwnd, uMsg, wParam, lParam);
}

</code></pre>
<p>Example from <a href="https://github.com/microsoft/Windows-classic-samples/blob/18cbd05ee44455cd7552804dcf2c9d6db619b412/Samples/Win7Samples/begin/LearnWin32/HelloWorld/cpp/main.cpp">Windows Classic Samples</a> on GitHub.</p>
<h2>Remarks</h2>
<p>The <strong>WM_PAINT</strong> message is generated by the system and should not be sent by an application. To force a window to draw into a specific device context, use the <a href="wm-print.html"><strong>WM_PRINT</strong></a> or <a href="wm-printclient.html"><strong>WM_PRINTCLIENT</strong></a> message. Note that this requires the target window to support the <strong>WM_PRINTCLIENT</strong> message. Most common controls support the <strong>WM_PRINTCLIENT</strong> message.</p>
<p>The <a href="/windows/desktop/api/winuser/nf-winuser-defwindowproca"><strong>DefWindowProc</strong></a>  function validates the update region. The function may also send the <a href="wm-ncpaint.html"><strong>WM_NCPAINT</strong></a> message to the window procedure if the window frame must be painted and send the <a href="../winmsg/wm-erasebkgnd.html"><strong>WM_ERASEBKGND</strong></a> message if the window background must be erased.</p>
<p>The system sends this message when there are no other messages in the application's message queue. <a href="/windows/win32/api/winuser/nf-winuser-dispatchmessage"><strong>DispatchMessage</strong></a> determines where to send the message; <a href="/windows/win32/api/winuser/nf-winuser-getmessage"><strong>GetMessage</strong></a> determines which message to dispatch. <strong>GetMessage</strong> returns the <strong>WM_PAINT</strong> message when there are no other messages in the application's message queue, and <strong>DispatchMessage</strong> sends the message to the appropriate window procedure.</p>
<p>A window may receive internal paint messages as a result of calling <a href="/windows/desktop/api/Winuser/nf-winuser-redrawwindow"><strong>RedrawWindow</strong></a> with the RDW_INTERNALPAINT flag set. In this case, the window may not have an update region. An application may call the <a href="/windows/desktop/api/Winuser/nf-winuser-getupdaterect"><strong>GetUpdateRect</strong></a> function to determine whether the window has an update region. If <strong>GetUpdateRect</strong> returns zero, the application need not call the <a href="/windows/desktop/api/Winuser/nf-winuser-beginpaint"><strong>BeginPaint</strong></a> and <a href="/windows/desktop/api/Winuser/nf-winuser-endpaint"><strong>EndPaint</strong></a> functions.</p>
<p>An application must check for any necessary internal painting by looking at its internal data structures for each <strong>WM_PAINT</strong> message, because a <strong>WM_PAINT</strong> message may have been caused by both a non-NULL update region and a call to <a href="/windows/desktop/api/Winuser/nf-winuser-redrawwindow"><strong>RedrawWindow</strong></a> with the RDW_INTERNALPAINT flag set.</p>
<p>The system sends an internal <strong>WM_PAINT</strong> message only once. After an internal <strong>WM_PAINT</strong> message is returned from <a href="/windows/win32/api/winuser/nf-winuser-getmessage"><strong>GetMessage</strong></a> or <a href="/windows/win32/api/winuser/nf-winuser-peekmessagea"><strong>PeekMessage</strong></a> or is sent to a window by <a href="/windows/desktop/api/Winuser/nf-winuser-updatewindow"><strong>UpdateWindow</strong></a>, the system does not post or send further <strong>WM_PAINT</strong> messages until the window is invalidated or until <a href="/windows/desktop/api/Winuser/nf-winuser-redrawwindow"><strong>RedrawWindow</strong></a> is called again with the RDW_INTERNALPAINT flag set.</p>
<p>For some common controls, the default <strong>WM_PAINT</strong> message processing checks the <em>wParam</em> parameter. If <em>wParam</em> is non-NULL, the control assumes that the value is an HDC and paints using that device context.</p>
<h2>Requirements</h2>
<table>
<thead>
<tr>
<th>Requirement</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Minimum supported client<!-- raw HTML omitted --></td>
<td>WindowsÂ 2000 Professional [desktop apps only]<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Minimum supported server<!-- raw HTML omitted --></td>
<td>WindowsÂ 2000 Server [desktop apps only]<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Header<!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted -->Winuser.h (include Windows.h)<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<h2>See also</h2>
<!-- raw HTML omitted -->
<p><a href="painting-and-drawing.html">Painting and Drawing Overview</a></p>
<!-- raw HTML omitted -->
<p><a href="painting-and-drawing-messages.html">Painting and Drawing Messages</a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/api/Winuser/nf-winuser-beginpaint"><strong>BeginPaint</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/api/winuser/nf-winuser-defwindowproca"><strong>DefWindowProc</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/win32/api/winuser/nf-winuser-dispatchmessage"><strong>DispatchMessage</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/api/Winuser/nf-winuser-endpaint"><strong>EndPaint</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/win32/api/winuser/nf-winuser-getmessage"><strong>GetMessage</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/api/Winuser/nf-winuser-getupdaterect"><strong>GetUpdateRect</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/win32/api/winuser/nf-winuser-peekmessagea"><strong>PeekMessage</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/api/Winuser/nf-winuser-redrawwindow"><strong>RedrawWindow</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/api/Winuser/nf-winuser-updatewindow"><strong>UpdateWindow</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="../winmsg/wm-erasebkgnd.html"><strong>WM_ERASEBKGND</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="wm-ncpaint.html"><strong>WM_NCPAINT</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="wm-print.html"><strong>WM_PRINT</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="wm-printclient.html"><strong>WM_PRINTCLIENT</strong></a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
