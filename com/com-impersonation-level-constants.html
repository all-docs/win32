<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Impersonation Level Constants</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<p>title: Impersonation Level Constants (RpcDce.h)
description: Specifies an impersonation level, which indicates the amount of authority given to the server when it is impersonating the client.
ms.assetid: ea5a3b46-b607-4192-a3cc-b2ec55ca94a6
topic_type:</p>
<ul>
<li>apiref
api_name:</li>
<li>RPC_C_IMP_LEVEL_DEFAULT</li>
<li>RPC_C_IMP_LEVEL_ANONYMOUS</li>
<li>RPC_C_IMP_LEVEL_IDENTIFY</li>
<li>RPC_C_IMP_LEVEL_IMPERSONATE</li>
<li>RPC_C_IMP_LEVEL_DELEGATE
api_location:</li>
<li>RpcDce.h
api_type:</li>
<li>HeaderDef
ms.topic: reference
ms.date: 05/31/2018</li>
</ul>
<hr />
<h1>Impersonation Level Constants</h1>
<p>Specifies an impersonation level, which indicates the amount of authority given to the server when it is impersonating the client.</p>
<table>
<thead>
<tr>
<th align="left">Constant/value</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --> <!-- raw HTML omitted --><strong>RPC_C_IMP_LEVEL_DEFAULT</strong><!-- raw HTML omitted --> <!-- raw HTML omitted -->0<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td align="left">DCOM can choose the impersonation level using its normal security blanket negotiation algorithm. For more information, see <a href="security-blanket-negotiation.html">Security Blanket Negotiation</a>.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td align="left"><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --> <!-- raw HTML omitted --><strong>RPC_C_IMP_LEVEL_ANONYMOUS</strong><!-- raw HTML omitted --> <!-- raw HTML omitted -->1<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td align="left">The client is anonymous to the server. The server process can impersonate the client, but the impersonation token will not contain any information and cannot be used.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td align="left"><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --> <!-- raw HTML omitted --><strong>RPC_C_IMP_LEVEL_IDENTIFY</strong><!-- raw HTML omitted --> <!-- raw HTML omitted -->2<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td align="left">The server can obtain the client's identity. The server can impersonate the client for ACL checking, but it cannot access system objects as the client. <!-- raw HTML omitted --></td>
</tr>
<tr>
<td align="left"><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --> <!-- raw HTML omitted --><strong>RPC_C_IMP_LEVEL_IMPERSONATE</strong><!-- raw HTML omitted --> <!-- raw HTML omitted -->3<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td align="left">The server process can impersonate the client's security context while acting on behalf of the client. This level of impersonation can be used to access local resources such as files. When impersonating at this level, the impersonation token can only be passed across one machine boundary. The <a href="schannel.html">Schannel</a> authentication service only supports this level of impersonation. <!-- raw HTML omitted --></td>
</tr>
<tr>
<td align="left"><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --> <!-- raw HTML omitted --><strong>RPC_C_IMP_LEVEL_DELEGATE</strong><!-- raw HTML omitted --> <!-- raw HTML omitted -->4<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td align="left">The server process can impersonate the client's security context while acting on behalf of the client. The server process can also make outgoing calls to other servers while acting on behalf of the client, using cloaking. The server may use the client's security context on other machines to access local and remote resources as the client. When impersonating at this level, the impersonation token can be passed across any number of computer boundaries.<!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<h2>Remarks</h2>
<p><a href="/windows/desktop/api/winbase/nf-winbase-getusernamea"><strong>GetUserName</strong></a> will fail while impersonating at identify level. The workaround is to impersonate, call <a href="/windows/desktop/api/processthreadsapi/nf-processthreadsapi-openthreadtoken"><strong>OpenThreadToken</strong></a>, revert, call <a href="/windows/desktop/api/securitybaseapi/nf-securitybaseapi-gettokeninformation"><strong>GetTokenInformation</strong></a>, and finally, call <a href="/windows/desktop/api/winbase/nf-winbase-lookupaccountsida"><strong>LookupAccountSid</strong></a>. Using <a href="/windows/desktop/api/combaseapi/nf-combaseapi-cosetproxyblanket"><strong>CoSetProxyBlanket</strong></a>, the client sets the impersonation level</p>
<p>Using <a href="/windows/desktop/api/combaseapi/nf-combaseapi-cosetproxyblanket"><strong>CoSetProxyBlanket</strong></a>, the client sets the impersonation level and proxy identity that will be available when a server calls <a href="/windows/desktop/api/combaseapi/nf-combaseapi-coimpersonateclient"><strong>CoImpersonateClient</strong></a>. The identity the server will see when impersonating takes place is described in <a href="cloaking.html">Cloaking</a>. Note that when making a call while impersonating, the callee will normally receive the caller's process token, not the caller's impersonation token. To receive the caller's impersonation token, the caller must enable cloaking.</p>
<h2>Requirements</h2>
<table>
<thead>
<tr>
<th>Requirement</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Minimum supported client<!-- raw HTML omitted --></td>
<td>Windows 2000 Professional [desktop apps only]<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Minimum supported server<!-- raw HTML omitted --></td>
<td>Windows 2000 Server [desktop apps only]<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Header<!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted -->RpcDce.h<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<h2>See also</h2>
<!-- raw HTML omitted -->
<p><a href="cloaking.html">Cloaking</a></p>
<!-- raw HTML omitted -->
</body>
