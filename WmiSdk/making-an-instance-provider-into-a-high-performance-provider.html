<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Making an Instance Provider into a High-Performance Provider</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: Writing a WMI high-performance provider to create performance counters is not recommended.
ms.assetid: 6a22d6f7-d9e2-45fa-876d-921a4bc4f574
ms.tgt_platform: multiple
title: Making an Instance Provider into a High-Performance Provider
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>Making an Instance Provider into a High-Performance Provider</h1>
<p>Writing a WMI high-performance provider to create performance counters is not recommended. Starting with WindowsÂ Vista, the WMI <a href="/windows/desktop/CIMWin32Prov/performance-counter-classes">Performance Counter Classes</a> are no longer migrated into the Windows performance libraries by the AutoDiscovery/AutoPurge (ADAP) reverse adapter. To create a performance counter provider, use <a href="/windows/desktop/PerfCtrs/performance-counters-portal">Performance Counters Version 2.0</a>. After performance library objects are created, the <a href="wmiperfclass-provider.html">WMIPerfClass Provider</a> parses the objects and creates or refreshes a WMI class derived from <a href="/windows/desktop/CIMWin32Prov/win32-perf"><strong>Win32_Perf</strong></a> for each performance object. The <a href="wmiperfinst-provider.html">WMIPerfInst Provider</a> then dynamically provides raw and formatted performance counter data to the WMI performance classes.</p>
<p>The following high-level procedure provides the steps required to create a high-performance provider.</p>
<p><strong>To create a high-performance provider</strong></p>
<ol>
<li>Register your provider with WMI. For more information, see <a href="registering-a-high-performance-provider.html">Registering a High-Performance Provider</a>.</li>
<li>Implement your provider. For more information, see <a href="writing-an-instance-provider.html">Writing an Instance Provider</a>.</li>
<li>Implement the high-performance interface. For more information, see <a href="implementing-the-high-performance-interface.html">Implementing the High-Performance Interface</a>.</li>
<li>Derive and write your Managed Object Format (MOF) schema to obtain raw performance data. For more information, see <a href="supporting-the-win32-perfrawdata-class.html">Supporting the Win32_PerfRawData Class</a>.</li>
<li>Derive and write your MOF schema to obtain precalculated data. By supporting this class, the provider is not required to perform the calculations. This data will be the same that appears in the System Monitor in Perfmon. For more information, see <a href="supporting-the-win32-perfformatteddata-class.html">Supporting the Win32_PerfFormattedData Class</a>.</li>
</ol>
<h2>Related topics</h2>
<!-- raw HTML omitted -->
<p><a href="developing-a-wmi-provider.html">Developing a WMI Provider</a></p>
<!-- raw HTML omitted -->
<p><a href="performance-libraries-and-wmi.html">Performance Libraries and WMI</a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
