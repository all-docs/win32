<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Return Values on Function Failure</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: The manifest constant SOCKET_ERROR is provided for checking function failure. Although use of this constant is not mandatory, it is recommended. The following example illustrates the use of the SOCKET_ERROR constant.
ms.assetid: b46203dc-5666-413b-90fe-8432318f3037
title: Return Values on Function Failure
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>Return Values on Function Failure</h1>
<p>The manifest constant <strong>SOCKET_ERROR</strong> is provided for checking function failure. Although use of this constant is not mandatory, it is recommended. The following example illustrates the use of the <strong>SOCKET_ERROR</strong> constant.</p>
<p>Typical BSD Style (will not work on Windows)</p>
<pre lang="C++"><code>        r = recv(ClientSocket, recvbuf, recvbuflen, 0);
        if (r == -1     /* or r &lt; 0 */
            &amp;&amp; errno == EWOULDBLOCK) {
            printf(&quot;recv failed with error: EWOULDBLOCK\n&quot;);
        }    
</code></pre>
<p>Windows Style</p>
<pre lang="C++"><code>        iResult = recv(ClientSocket, recvbuf, recvbuflen, 0);
        if (iResult == SOCKET_ERROR ) {
            iError = WSAGetLastError();
            if (iError == WSAEWOULDBLOCK)
                printf(&quot;recv failed with error: WSAEWOULDBLOCK\n&quot;);
            else
                printf(&quot;recv failed with error: %ld\n&quot;, iError);

            closesocket(ClientSocket);
            WSACleanup();
            return 1;
        }    
</code></pre>
<h2>Related topics</h2>
<!-- raw HTML omitted -->
<p><a href="error-codes-errno-h-errno-and-wsagetlasterror-2.html">Error Codes - errno, h_errno and WSAGetLastError</a></p>
<!-- raw HTML omitted -->
<p><a href="handling-winsock-errors.html">Handling Winsock Errors</a></p>
<!-- raw HTML omitted -->
<p><a href="porting-socket-applications-to-winsock.html">Porting Socket Applications to Winsock</a></p>
<!-- raw HTML omitted -->
<p><a href="winsock-programming-considerations.html">Winsock Programming Considerations</a></p>
<!-- raw HTML omitted -->
<p><a href="windows-sockets-error-codes-2.html">Windows Sockets Error Codes</a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
