<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Transport Mapping Between API and SPI Functions</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: The Winsock Transport SPI is similar to the Winsock API in that all of the basic socket functions appear.
ms.assetid: 37ef8a69-2aa0-4824-8ca9-4b84158086db
title: Transport Mapping Between API and SPI Functions
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>Transport Mapping Between API and SPI Functions</h1>
<p>The Winsock Transport SPI is similar to the Winsock API in that all of the basic socket functions appear. When a new version of a Winsock function and the original version both exist in the API, only the new version will show up in the SPI. This is illustrated in the following list.</p>
<ul>
<li><a href="/windows/desktop/api/Winsock2/nf-winsock2-connect"><strong>connect</strong></a> and <a href="/windows/desktop/api/Winsock2/nf-winsock2-wsaconnect"><strong>WSAConnect</strong></a> both map to <a href="/previous-versions/windows/hardware/network/ff566275(v=vs.85)"><strong>WSPConnect</strong></a></li>
<li><a href="/windows/desktop/api/Winsock2/nf-winsock2-accept"><strong>accept</strong></a> and <a href="/windows/desktop/api/Winsock2/nf-winsock2-wsaaccept"><strong>WSAAccept</strong></a> map to <a href="/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspaccept"><strong>WSPAccept</strong></a></li>
<li><a href="/windows/desktop/api/Winsock2/nf-winsock2-socket"><strong>socket</strong></a> and <a href="/windows/desktop/api/Winsock2/nf-winsock2-wsasocketa"><strong>WSASocket</strong></a> map to <a href="/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspsocket"><strong>WSPSocket</strong></a></li>
</ul>
<p>Other API functions that are collapsed into the enhanced versions in SPI include:</p>
<ul>
<li><a href="/windows/desktop/api/Winsock2/nf-winsock2-send"><strong>send</strong></a></li>
<li><a href="/windows/desktop/api/winsock/nf-winsock-sendto"><strong>sendto</strong></a></li>
<li><a href="/windows/desktop/api/winsock/nf-winsock-recv"><strong>recv</strong></a></li>
<li><a href="/windows/desktop/api/winsock/nf-winsock-recvfrom"><strong>recvfrom</strong></a></li>
<li><a href="/windows/desktop/api/winsock/nf-winsock-ioctlsocket"><strong>ioctlsocket</strong></a></li>
</ul>
<p>Support functions like <a href="/windows/desktop/api/winsock/nf-winsock-htonl"><strong>htonl</strong></a>, <a href="/windows/desktop/api/winsock/nf-winsock-htons"><strong>htons</strong></a>, <a href="/windows/desktop/api/winsock/nf-winsock-ntohl"><strong>ntohl</strong></a>, and <a href="/windows/desktop/api/winsock/nf-winsock-ntohs"><strong>ntohs</strong></a> are implemented in the Ws2_32.dll, and are not passed down to service providers. The same holds true for the WSA versions of these functions.</p>
<p>Windows Sockets service provider enumeration and the blocking hook-related functions are realized in the Ws2_32.dll, thus <a href="/windows/desktop/api/Winsock2/nf-winsock2-wsaenumprotocolsa"><strong>WSAEnumProtocols</strong></a>, <a href="/windows/desktop/api/winsock2/nf-winsock2-wsaisblocking">WSAIsBlocking</a>, <a href="/windows/desktop/api/winsock2/nf-winsock2-wsasetblockinghook">WSASetBlockingHook</a>, and <a href="/windows/desktop/api/winsock2/nf-winsock2-wsaunhookblockinghook">WSAUnhookBlockingHook</a> do not appear as SPI functions.</p>
<p>Because error codes are returned along with SPI functions, equivalents of <a href="/windows/desktop/api/winsock/nf-winsock-wsagetlasterror"><strong>WSAGetLastError</strong></a> and <a href="/windows/desktop/api/winsock/nf-winsock-wsasetlasterror"><strong>WSASetLastError</strong></a> are not required in the SPI.</p>
<p>The event object manipulation and wait functions, including <a href="/windows/desktop/api/Winsock2/nf-winsock2-wsacreateevent"><strong>WSACreateEvent</strong></a>, <a href="/windows/desktop/api/Winsock2/nf-winsock2-wsacloseevent"><strong>WSACloseEvent</strong></a>, <a href="/windows/desktop/api/Winsock2/nf-winsock2-wsasetevent"><strong>WSASetEvent</strong></a>, <a href="/windows/desktop/api/Winsock2/nf-winsock2-wsaresetevent"><strong>WSAResetEvent</strong></a>, and <a href="/windows/desktop/api/Winsock2/nf-winsock2-wsawaitformultipleevents"><strong>WSAWaitForMultipleEvents</strong></a> are mapped directly to native Windows services and thus are not present in the SPI.</p>
<p>All the TCP/IP-specific name conversion and resolution functions in Windows Sockets 1.1 such as <strong>GetXbyY</strong>, <strong>WSAAsyncGetXByY</strong>, and <a href="/windows/desktop/api/winsock/nf-winsock-wsacancelasyncrequest"><strong>WSACancelAsyncRequest</strong></a>, as well as <a href="/windows/desktop/api/winsock/nf-winsock-gethostname"><strong>gethostname</strong></a> are implemented within the Ws2_32.dll in terms of the new name resolution facilities. For more information, see <a href="compatible-name-resolution-for-tcp-ip-in-the-windows-sockets-1-1-spi-2.html">Compatible Name Resolution for TCP/IP in the Windows Sockets 1.1 SPI</a>. Conversion functions such as <a href="/windows/win32/api/winsock2/nf-winsock2-inet_addr"><strong>inet_addr</strong></a> and <a href="/windows/win32/api/winsock2/nf-winsock2-inet_ntoa"><strong>inet_ntoa</strong></a> are implemented within the Ws2_32.dll.</p>
<p>Â </p>
<p>Â </p>
</body>
