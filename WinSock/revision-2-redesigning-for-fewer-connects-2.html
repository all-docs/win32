<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Revision Two: Redesigning for Fewer Connects</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: In this revision, the sample application is redesigned to eliminate unnecessary connects.
ms.assetid: 0db6ded4-0a59-454e-824e-8cd7f0dc9fec
title: 'Revision Two: Redesigning for Fewer Connects'
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>Revision Two: Redesigning for Fewer Connects</h1>
<p>In this revision, the sample application is redesigned to eliminate unnecessary connects.</p>
<blockquote>
<p>[!WARNING]
This examples of the application also provide intentionally poor performance, in order to illustrate performance improvements possible with changes to code. Do not use this code sample in your application; it is for illustration purposes only.</p>
</blockquote>
<p>Â </p>
<pre lang="C++"><code>ComputeNext( Map );
bind( s, ... );
connect( s, ... );
for(int i=0 ; i &lt; ROWS ; ++i)
  for(int j=0 ; j &lt; COLS ; ++j)
  {
    BYTE tmp[3];
    tmp[0] = i;
    tmp[1] = j;
    tmp[2] = Map[i][j];
    send( s, tmp, 3 );
    recv( s, &amp;byRet, 1 );
  }
closesocket( s );
</code></pre>
<h2>Remaining Problems</h2>
<p>The changes in Revision Two redesigned the application to make only one connect per update. The application still includes the following performance issues:</p>
<ul>
<li>The application is still serialized and chatty.</li>
<li>The application still has a fat design; there are many sends that require no operation in this design.</li>
<li>The sends are still only 3 bytes, which is poor streaming.</li>
</ul>
<h2>Key Performance Metrics</h2>
<p>The following performance metrics are expressed in Round Trip Time (RTT), Goodput, and Protocol Overhead. See the <a href="network-terminology-2.html">Network Terminology</a> topic for an explanation of these terms.</p>
<p>This version reflects the following performance metrics:</p>
<ul>
<li>Cell Time â€” 1*RTT</li>
<li>Goodput â€” 4 bytes/RTT</li>
<li>Protocol Overhead â€” 96.8%</li>
</ul>
<h2>Related topics</h2>
<!-- raw HTML omitted -->
<p><a href="improving-a-slow-application-2.html">Improving a Slow Application</a></p>
<!-- raw HTML omitted -->
<p><a href="network-terminology-2.html">Network Terminology</a></p>
<!-- raw HTML omitted -->
<p><a href="the-baseline-version-a-very-poor-performing-application-2.html">The Baseline Version: A Very Poor Performing Application</a></p>
<!-- raw HTML omitted -->
<p><a href="revision-1-cleaning-up-the-obvious-2.html">Revision 1: Cleaning up the Obvious</a></p>
<!-- raw HTML omitted -->
<p><a href="revision-3-compressed-block-send-2.html">Revision 3: Compressed Block Send</a></p>
<!-- raw HTML omitted -->
<p><a href="future-improvements-2.html">Future Improvements</a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
