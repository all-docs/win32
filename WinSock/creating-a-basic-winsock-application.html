<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Creating a Basic Winsock Application</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: How to create a basic Windows Sockets (Winsock) application.
ms.assetid: 56af2e95-ea82-49e4-b335-86dcf4c38780
title: Creating a Basic Winsock Application
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>Creating a Basic Winsock Application</h1>
<p><strong>To create a basic Winsock application</strong></p>
<ol>
<li>
<p>Create a new empty project.</p>
</li>
<li>
<p>Add an empty C++ source file to the project.</p>
</li>
<li>
<p>Ensure that the build environment refers to the Include, Lib, and Src directories of the Microsoft Windows Software Development Kit (SDK) or the earlier Platform Software Development Kit (SDK).</p>
</li>
<li>
<p>Ensure that the build environment links to the Winsock Library file Ws2_32.lib. Applications that use Winsock must be linked with the Ws2_32.lib library file. The #pragma comment indicates to the linker that the <em>Ws2_32.lib</em> file is needed.</p>
</li>
<li>
<p>Begin programming the Winsock application. Use the Winsock API by including the Winsock 2 header files. The <em>Winsock2.h</em> header file contains most of the Winsock functions, structures, and definitions. The <em>Ws2tcpip.h</em> header file contains definitions introduced in the WinSock 2 Protocol-Specific Annex document for TCP/IP that includes newer functions and structures used to retrieve IP addresses.</p>
<blockquote>
<p>[!Note]<br />
Stdio.h is used for standard input and output, specifically the <strong>printf()</strong> function.</p>
</blockquote>
<p>Â </p>
</li>
</ol>
<pre lang="C++"><code>#include &lt;winsock2.h&gt;
#include &lt;ws2tcpip.h&gt;
#include &lt;stdio.h&gt;

#pragma comment(lib, &quot;Ws2_32.lib&quot;)

int main() {
  return 0;
}

</code></pre>
<blockquote>
<p>[!Note]</p>
<p>The <em>Iphlpapi.h</em> header file is required if an application is using the IP Helper APIs. When the <em>Iphlpapi.h</em> header file is required, the #include line for the <em>Winsock2.h</em> header file should be placed before the #include line for the <em>Iphlpapi.h</em> header file.</p>
<p>The <em>Winsock2.h</em> header file internally includes core elements from the <em>Windows.h</em> header file, so there is not usually an #include line for the <em>Windows.h</em> header file in Winsock applications. If an #include line is needed for the <em>Windows.h</em> header file, this should be preceded with the #define WIN32_LEAN_AND_MEAN macro. For historical reasons, the <em>Windows.h</em> header defaults to including the <em>Winsock.h</em> header file for Windows Sockets 1.1. The declarations in the <em>Winsock.h</em> header file will conflict with the declarations in the <em>Winsock2.h</em> header file required by Windows Sockets 2.0. The WIN32_LEAN_AND_MEAN macro prevents the <em>Winsock.h</em> from being included by the <em>Windows.h</em> header. An example illustrating this is shown below.</p>
</blockquote>
<p>Â </p>
<pre lang="C++"><code>#ifndef WIN32_LEAN_AND_MEAN
#define WIN32_LEAN_AND_MEAN
#endif

#include &lt;windows.h&gt;
#include &lt;winsock2.h&gt;
#include &lt;ws2tcpip.h&gt;
#include &lt;iphlpapi.h&gt;
#include &lt;stdio.h&gt;

#pragma comment(lib, &quot;Ws2_32.lib&quot;)

int main() {
  return 0;
}

</code></pre>
<p>Next Step: <a href="initializing-winsock.html">Initializing Winsock</a></p>
<h2>Related topics</h2>
<!-- raw HTML omitted -->
<p><a href="getting-started-with-winsock.html">Getting Started With Winsock</a></p>
<!-- raw HTML omitted -->
<p><a href="about-clients-and-servers.html">About Servers and Clients</a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
