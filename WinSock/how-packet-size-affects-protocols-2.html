<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>How Packet Size Affects Protocols</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: Media packet size issues discussed in the topic, About Media Packet Size, affect the various PF_IPX protocols differently.
ms.assetid: 7f0643b8-6bb2-4dbb-b306-d9b2e0d0e03c
title: How Packet Size Affects Protocols
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>How Packet Size Affects Protocols</h1>
<p>Media packet size issues discussed in the topic, <a href="about-media-packet-size-2.html">About Media Packet Size</a>, affect the various PF_IPX protocols differently. A common strategy for handling various router and media size constraints is to use the full media size when the remote station's network number matches the local station, and fall back to the minimum packet size otherwise.</p>
<h2>Parameters</h2>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted -->NSPROTO_IPX</p>
<!-- raw HTML omitted -->
<p>Provides a datagram service; each datagram must reside within the maximum packet size. Winsock sets the maximum datagram packet size to the local media packet size minus the IPX header. Keep in mind, however, that if the packet is routed, it may hit router restrictions en route. Make sure your application can fall back to 546-byte datagrams.</p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted -->NSPROTO_SPX</p>
<!-- raw HTML omitted -->
<p>Provides stream and sequenced-packet services. Winsock IPX/SPX lets data streams and messages span multiple packets, so packet size does not limit the amount of data handled by <a href="/windows/desktop/api/Winsock2/nf-winsock2-send"><strong>send</strong></a> and <a href="/windows/desktop/api/winsock/nf-winsock-recv"><strong>recv</strong></a>. However, the underlying media size must be set correctly or the first large packet will be undeliverable and the connection will reset. If the target station is on the local network, Winsock sets its packet size to the media packet size. Otherwise, it defaults to 512 bytes. This size can be changed immediately after <a href="/windows/desktop/api/Winsock2/nf-winsock2-connect"><strong>connect</strong></a> or <a href="/windows/desktop/api/Winsock2/nf-winsock2-accept"><strong>accept</strong></a> through <a href="/windows/desktop/api/winsock/nf-winsock-setsockopt"><strong>setsockopt</strong></a>.</p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted -->NSPROTO_SPXII</p>
<!-- raw HTML omitted -->
<p>SPXII features large Internet packet negotiation to maintain a best-fit size for packets and does not require programmer intervention. However, if the remote station does not support SPXII and negotiates down to standard SPX, the NSPROTO_SPX rules are in effect.</p>
<table>
<thead>
<tr>
<th>Protocol</th>
<th>Media</th>
<th>Type</th>
<th>Data packet size</th>
</tr>
</thead>
<tbody>
<tr>
<td>NSPROTO_IPX</td>
<td>Ethernet</td>
<td>Ethernet II</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td>802.3</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td>802.2</td>
<td>1466</td>
</tr>
<tr>
<td></td>
<td></td>
<td>SNAP</td>
<td></td>
</tr>
<tr>
<td></td>
<td>Token Ring</td>
<td>4 megabit</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td>16 megabit</td>
<td></td>
</tr>
<tr>
<td>NSPROTO_SPX</td>
<td>Ethernet</td>
<td>Ethernet II</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td>802.3</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td>802.2</td>
<td>1454</td>
</tr>
<tr>
<td></td>
<td></td>
<td>SNAP</td>
<td></td>
</tr>
<tr>
<td></td>
<td>Token Ring</td>
<td>4 megabit</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td>16 megabit</td>
<td></td>
</tr>
</tbody>
</table>
<p>Â </p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
