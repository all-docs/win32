<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Initializing Winsock</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: All processes (applications or DLLs) that call Winsock functions must initialize the use of the Windows Sockets DLL before making other Winsock functions calls. This also makes certain that Winsock is supported on the system.
ms.assetid: 300858d8-bed3-4a3c-abb5-2cecd100e5d7
title: Initializing Winsock
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>Initializing Winsock</h1>
<p>All processes (applications or DLLs) that call Winsock functions must initialize the use of the Windows Sockets DLL before making other Winsock functions calls. This also makes certain that Winsock is supported on the system.</p>
<p><strong>To initialize Winsock</strong></p>
<ol>
<li>
<p>Create a <a href="/windows/desktop/api/winsock/ns-winsock-wsadata"><strong>WSADATA</strong></a> object called wsaData.</p>
<pre lang="C++"><code>WSADATA wsaData;
</code></pre>
</li>
<li>
<p>Call <a href="/windows/desktop/api/winsock/nf-winsock-wsastartup"><strong>WSAStartup</strong></a> and return its value as an integer and check for errors.</p>
<pre lang="C++"><code>int iResult;

// Initialize Winsock
iResult = WSAStartup(MAKEWORD(2,2), &amp;wsaData);
if (iResult != 0) {
    printf(&quot;WSAStartup failed: %d\n&quot;, iResult);
    return 1;
}
</code></pre>
</li>
</ol>
<p>The <a href="/windows/desktop/api/winsock/nf-winsock-wsastartup"><strong>WSAStartup</strong></a> function is called to initiate use of WS2_32.dll.</p>
<p>The <a href="/windows/desktop/api/winsock/ns-winsock-wsadata"><strong>WSADATA</strong></a> structure contains information about the Windows Sockets implementation. The MAKEWORD(2,2) parameter of <a href="/windows/desktop/api/winsock/nf-winsock-wsastartup"><strong>WSAStartup</strong></a> makes a request for version 2.2 of Winsock on the system, and sets the passed version as the highest version of Windows Sockets support that the caller can use.</p>
<p>Next Step for a Client: <a href="creating-a-socket-for-the-client.html">Creating a Socket for the Client</a></p>
<p>Next Step for a Server: <a href="creating-a-socket-for-the-server.html">Creating a Socket for the Server</a></p>
<h2>Related topics</h2>
<!-- raw HTML omitted -->
<p><a href="getting-started-with-winsock.html">Getting Started With Winsock</a></p>
<!-- raw HTML omitted -->
<p><a href="creating-a-basic-winsock-application.html">Creating a Basic Winsock Application</a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
