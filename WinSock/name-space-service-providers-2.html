<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Namespace Service Providers</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: A namespace provider implements an interface mapping between the Winsock namespace SPI and the native programmatic interface of an existing name service such as DNS, X.500, or NetWare Directory Services (NDS).
ms.assetid: 9b35aa58-9011-4e0d-8c93-02714952b4a5
title: Namespace Service Providers
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>Namespace Service Providers</h1>
<p>A namespace provider implements an interface mapping between the Winsock namespace SPI and the native programmatic interface of an existing name service such as DNS, X.500, or NetWare Directory Services (NDS). While a namespace provider supports exactly one namespace, it is possible for multiple providers for a given namespace to be installed. It is also possible for a single DLL to create an instance of multiple namespace providers. As namespace providers are installed, a catalog of <a href="/windows/desktop/api/Winsock2/ns-winsock2-wsanamespace_infow"><strong>WSANAMESPACE_INFO</strong></a> structures is maintained. An application may use <a href="/windows/desktop/api/Winsock2/nf-winsock2-wsaenumnamespaceprovidersa"><strong>WSAEnumNameSpaceProviders</strong></a> to discover which namespaces are supported on a computer.</p>
<p>On WindowsÂ Vista and later, an enhanced <a href="/windows/desktop/api/Winsock2/ns-winsock2-wsanamespace_infoexw"><strong>WSANAMESPACE_INFOEX</strong></a> structure and <a href="/windows/desktop/api/Winsock2/nf-winsock2-wsaenumnamespaceprovidersexa"><strong>WSAEnumNameSpaceProvidersEx</strong></a> function are provided.</p>
<p>On 64-bit platforms, similar <a href="/windows/desktop/api/Ws2spi/nf-ws2spi-wscenumnamespaceproviders32"><strong>WSCEnumNameSpaceProviders32</strong></a> and <a href="/windows/desktop/api/Ws2spi/nf-ws2spi-wscenumnamespaceprovidersex32"><strong>WSCEnumNameSpaceProvidersEx32</strong></a> functions are provided to enumerate the 32-bit catalog.</p>
<p>Refer to <a href="winsock-namespace-service-provider-requirements.html">Winsock Namespace Service Provider Requirements</a> for detailed information.</p>
<h2>Legacy GetXbyY Service Providers</h2>
<p>Windows Sockets 2 fully supports the TCP/IP-specific name resolution facilities found in Windows Sockets version 1.1. It does this by including the set of <strong>GetXbyY</strong> functions in the SPI. However, the treatment of this set of functions is somewhat different from the rest of the SPI functions. The <strong>GetXbyY</strong> functions appearing in the SPI are prefaced with GETXBYYSP_, and are summarized in the following table.</p>
<p>Berkeley Style Functions</p>
<table>
<thead>
<tr>
<th>SPI function name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>GETXBYYSP_gethostbyaddr</td>
<td>Supplies a <a href="/windows/desktop/api/winsock/ns-winsock-hostent"><strong>hostent</strong></a> structure for the specified host address.</td>
</tr>
<tr>
<td>GETXBYYSP_gethostbyname</td>
<td>Supplies a <a href="/windows/desktop/api/winsock/ns-winsock-hostent"><strong>hostent</strong></a> structure for the specified host name.</td>
</tr>
<tr>
<td>GETXBYYSP_getprotobyname</td>
<td>Supplies a <a href="/windows/desktop/api/winsock/ns-winsock-protoent"><strong>protoent</strong></a> structure for the specified protocol name.</td>
</tr>
<tr>
<td>GETXBYYSP_getprotobynumber</td>
<td>Supplies a <a href="/windows/desktop/api/winsock/ns-winsock-protoent"><strong>protoent</strong></a> structure for the specified protocol number.</td>
</tr>
<tr>
<td>GETXBYYSP_getservbyname</td>
<td>Supplies a <a href="/windows/desktop/api/winsock/ns-winsock-servent"><strong>servent</strong></a> structure for the specified service nam.e</td>
</tr>
<tr>
<td>GETXBYYSP_getservbyport</td>
<td>Supplies a <a href="/windows/desktop/api/winsock/ns-winsock-servent"><strong>servent</strong></a> structure for the service at the specified port.</td>
</tr>
<tr>
<td>GETXBYYSP_gethostname</td>
<td>Returns the standard host name for the local computer.</td>
</tr>
</tbody>
</table>
<p>Â </p>
<p>Async Style Functions</p>
<table>
<thead>
<tr>
<th>SPI function name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>GETXBYYSP_WSAAsyncGetHostByAddr</td>
<td>Supplies a <a href="/windows/desktop/api/winsock/ns-winsock-hostent"><strong>hostent</strong></a> structure for the specified host address.</td>
</tr>
<tr>
<td>GETXBYYSP_WSAAsyncGetHostByName</td>
<td>Supplies a <a href="/windows/desktop/api/winsock/ns-winsock-hostent"><strong>hostent</strong></a> structure for the specified host name.</td>
</tr>
<tr>
<td>GETXBYYSP_WSAAsyncGetProtoByName</td>
<td>Supplies a <a href="/windows/desktop/api/winsock/ns-winsock-protoent"><strong>protoent</strong></a> structure for the specified protocol name.</td>
</tr>
<tr>
<td>GETXBYYSP_WSAAsyncGetProtoByNumber</td>
<td>Supplies a <a href="/windows/desktop/api/winsock/ns-winsock-protoent"><strong>protoent</strong></a> structure for the specified protocol number.</td>
</tr>
<tr>
<td>GETXBYYSP_WSAAsyncGetServByName</td>
<td>Supplies a <a href="/windows/desktop/api/winsock/ns-winsock-servent"><strong>servent</strong></a> structure for the specified service name.</td>
</tr>
<tr>
<td>GETXBYYSP_WSAAsyncGetServByPort</td>
<td>Supplies a <a href="/windows/desktop/api/winsock/ns-winsock-servent"><strong>servent</strong></a> structure for the service at the specified port.</td>
</tr>
<tr>
<td>GETXBYYSP_WSACancelAsyncRequest</td>
<td>Cancels an asynchronous <strong>GetXbyY</strong> operation.</td>
</tr>
</tbody>
</table>
<p>Â </p>
<p>The syntax and semantics of these <strong>GetXbyY</strong> functions in the SPI are exactly the same as those documented in the API Specification and are, therefore, not repeated here.</p>
<p>The Windows Sockets 2 DLL allows exactly one service provider to offer these services. Therefore, there is no need to include pointers to these functions in the procedure table received from service providers at startup. In Windows environments the path to the DLL that implements these functions is retrieved from the value found in the following registry path. This registry entry does not exist by default:</p>
<p><strong>HKEY_LOCAL_MACHINE</strong>\<strong>System</strong>\<strong>CurrentControlSet</strong>\<strong>Services</strong>\<strong>WinSock2</strong>\<strong>Parameters</strong>\<strong>GetXByYLibraryPath</strong></p>
<h2>Built-In Default GetXbyY Service Provider</h2>
<p>A default <strong>GetXbyY</strong> service provider is integrated into the standard Windows Sockets 2 run-time components. This default provider implements all of the above functions, thus it is not required for these functions to be implemented by any namespace provider. However, a namespace provider is free to provide any or all of these functions (and thus override the defaults) by simply storing the string which is the path to the DLL that implements these functions in the indicated registry key. Any of the <strong>GetXbyY</strong> functions not exported by the named provider DLL will be supplied through the built-in defaults. Note, however, that if a provider elects to supply any of the async version of the <strong>GetXbyY</strong> functions, he should supply all of the async functions so that the cancel operation will work appropriately.</p>
<p>The current implementation of the default <strong>GetXbyY</strong> service provider resides within the Wsock32.dll. Depending on how the TCP/IP settings have been established through Control Panel, name resolution will occur using either DNS or local host files. When DNS is used, the default <strong>GetXbyY</strong> service provider uses standard Windows Sockets 1.1 API calls to communicate with the DNS server. These transactions will occur using whatever TCP/IP stack is configured as the default TCP/IP stack. Two special cases however, deserve special mention.</p>
<p>The default implementation of GETXBYYSP_gethostname obtains the local host name from the registry. This will correspond to the name assigned to &quot;My Computer&quot;. The default implementation of GETXBYYSP_gethostbyname and GETXBYYSP_WSAAsyncGetHostByName always compares the supplied host name with the local host name. If they match, the default implementation uses a private interface to probe the Microsoft TCP/IP stack in order to discover its local IP address. Thus, in order to be completely independent of the Microsoft TCP/IP stack, a namespace provider must implement both GETXBYYSP_gethostbyname and GETXBYYSP_WSAAsyncGetHostByName.</p>
<p>Â </p>
<p>Â </p>
</body>
