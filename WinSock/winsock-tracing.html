<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Winsock Tracing</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: Winsock Tracing
ms.assetid: '0c430fc2-28e7-4537-a887-4c36d24fedee'
title: Winsock Tracing
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>Winsock Tracing</h1>
<h2>Introduction</h2>
<p>Winsock tracing is a troubleshooting feature that can be enabled in retail binaries to trace certain Windows socket events with minimal overhead. The goal of adding retail tracing to Windows Sockets is to allow for better diagnostic capabilities for developers and product support. Winsock network event tracing supports tracing socket operations for IPv4 and IPv6 applications. Winsock catalog change tracing supports tracing changes made to the Winsock catalog by layered service providers (LSPs). Winsock tracing is supported on WindowsÂ Vista and later.</p>
<blockquote>
<p>[!Note]<br />
Layered Service Providers are deprecated. Starting with WindowsÂ 8 and Windows ServerÂ 2012, use <a href="../fwp/windows-filtering-platform-start-page.html">Windows Filtering Platform</a>.</p>
</blockquote>
<p>Â </p>
<p>When an unexpected error occurs on a socket, the main clue to diagnose the problem is the error code returned. Very often, the returned error code does not explain why the error happened, especially when the error is initiated by the underlying network transport. Winsock tracing provides a more verbose tracing level which can log additional information to catch buffer corruption and poorly written applications.</p>
<p>Winsock tracing uses Event Tracing for Windows (ETW), a general-purpose, high-speed tracing facility provided by the operating system. Using a buffering and logging mechanism implemented in the kernel, ETW provides a tracing mechanism for events raised by both user-mode applications and kernel-mode device drivers. Additionally, ETW gives you the ability to enable and disable logging dynamically, making it easy to perform detailed tracing in production environments without requiring reboots or application restarts. The logging mechanism uses buffers that are written to disk by an asynchronous writer thread. This allows large-scale server applications to write events with minimum disturbance. ETW was first introduced on WindowsÂ 2000. Support for Winsock tracing using ETW was added on WindowsÂ Vista and later. For general information on ETW, see <a href="/archive/msdn-magazine/2007/april/event-tracing-improve-debugging-and-performance-tuning-with-etw">Improve Debugging And Performance Tuning With ETW</a>.</p>
<p>Winsock tracing can only be enabled at the operating system level for all processes and threads running on a computer. Winsock tracing currently cannot be enabled for just a single process or thread. When Winsock network event tracing is enabled, all socket applications (both IPv4 and IPv6) on a computer are traced.</p>
<p>The following topics describe Winsock tracing in more detail:</p>
<ul>
<li><a href="winsock-tracing-levels.html">Winsock Tracing Levels</a></li>
<li><a href="control-of-winsock-tracing.html">Control of Winsock Tracing</a></li>
<li><a href="winsock-tracing-event-details.html">Winsock Network Event Tracing Details</a></li>
<li><a href="winsock-layered-service-provider-tracing-event-details.html">Winsock Catalog Change Tracing Details</a></li>
</ul>
<h2>Related topics</h2>
<!-- raw HTML omitted -->
<p><a href="/archive/msdn-magazine/2007/april/event-tracing-improve-debugging-and-performance-tuning-with-etw">Improve Debugging And Performance Tuning With ETW</a></p>
<!-- raw HTML omitted -->
<p><a href="debug-and-trace-facilities-2.html">Debug and Trace Facilities</a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
