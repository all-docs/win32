<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Client Logon Sessions</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: A server with the SE_TCB_NAME privilege, such as a Windows service running in the LocalSystem Account, can call the LogonUser function to authenticate a client on the computer that the server is running on.
ms.assetid: 27328497-8f04-42e8-aadd-4c33b9907b94
title: Client Logon Sessions
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>Client Logon Sessions</h1>
<p>A server with the SE_TCB_NAME privilege, such as a Windows service running in the <a href="/windows/desktop/Services/localsystem-account">LocalSystem Account</a>, can call the <a href="/windows/desktop/api/winbase/nf-winbase-logonusera"><strong>LogonUser</strong></a> function to <a href="/windows/desktop/SecGloss/a-gly"><em>authenticate</em></a> a client on the computer that the server is running on. The <strong>LogonUser</strong> function starts a new logon <a href="/windows/desktop/SecGloss/s-gly"><em>session</em></a> and returns a <a href="/windows/desktop/SecGloss/p-gly"><em>primary access token</em></a> that contains the client's security information. You can use this primary token in calling the <a href="/windows/win32/api/securitybaseapi/nf-securitybaseapi-impersonateloggedonuser"><strong>ImpersonateLoggedOnUser</strong></a> function to impersonate the client or in calling the <a href="/windows/desktop/api/processthreadsapi/nf-processthreadsapi-createprocessasusera"><strong>CreateProcessAsUser</strong></a> function to create a process that runs in the <a href="/windows/desktop/SecGloss/s-gly"><em>security context</em></a> of the client.</p>
<p>The advantage of authenticating the client in this way is that the server impersonating the authenticated client, or a <a href="/windows/desktop/SecGloss/p-gly"><em>process</em></a> created in the context of the authenticated client, can connect to remote network resources as the client. If this authentication is not done, the server can connect to network resources only if it has acquired the client's account name and password to pass to the <a href="/windows/desktop/api/winnetwk/nf-winnetwk-wnetaddconnection2a"><strong>WNetAddConnection2</strong></a> function.</p>
<p>The disadvantage of authenticating the client in this way is that the server must have acquired the client's <a href="/windows/desktop/SecGloss/c-gly"><em>credentials</em></a> (domain name, user name, and password). If a remote client supplies these credentials to the server, it is the responsibility of the client and server to ensure that the credentials are transmitted in a secure manner.</p>
<p>Â </p>
<p>Â </p>
</body>
