<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>WINBIO_PRESENCE structure</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<p>title: WINBIO_PRESENCE structure (Winbio_types.h)
description: Contains information about the presence of an individual whose presence is being monitored.
ms.assetid: 810D452E-DDFA-4AB2-AEFB-0C170C0C18D4
keywords:</p>
<ul>
<li>WINBIO_PRESENCE structure Windows Biometric Framework API</li>
<li>PWINBIO_PRESENCE structure pointer Windows Biometric Framework API
topic_type:</li>
<li>apiref
api_name:</li>
<li>WINBIO_PRESENCE
api_location:</li>
<li>winbio_types.h
api_type:</li>
<li>HeaderDef
ms.topic: reference
ms.date: 05/31/2018</li>
</ul>
<hr />
<h1>WINBIO_PRESENCE structure</h1>
<p>Contains information about the presence of an individual whose presence is being monitored.</p>
<h2>Syntax</h2>
<pre lang="C++"><code>typedef struct _WINBIO_PRESENCE {
  WINBIO_BIOMETRIC_TYPE      Factor;
  WINBIO_BIOMETRIC_SUBTYPE   SubFactor;
  HRESULT                    Status;
  WINBIO_REJECT_DETAIL       RejectDetail;
  WINBIO_IDENTITY            Identity;
  ULONGLONG                  TrackingId;
  WINBIO_PROTECTION_TICKET   Ticket;
  WINBIO_PRESENCE_PROPERTIES Properties;
} WINBIO_PRESENCE, *PWINBIO_PRESENCE;
</code></pre>
<h2>Members</h2>
<!-- raw HTML omitted -->
<p><strong>Factor</strong></p>
<!-- raw HTML omitted -->
<p>The biometric factor used to monitor the presence of the individual.</p>
<!-- raw HTML omitted -->
<p><strong>SubFactor</strong></p>
<!-- raw HTML omitted -->
<p>The biometric subfactor qualifier for the biometric factor used to monitor the presence of the individual.</p>
<!-- raw HTML omitted -->
<p><strong>Status</strong></p>
<!-- raw HTML omitted -->
<p>The status of the identification procedure for the individual.</p>
<!-- raw HTML omitted -->
<p><strong>RejectDetail</strong></p>
<!-- raw HTML omitted -->
<p>Additional information about the failure to recognize an individual, including feedback that explains how to correct the failure.</p>
<!-- raw HTML omitted -->
<p><strong>Identity</strong></p>
<!-- raw HTML omitted -->
<p>The identity of the individual whose presence is being monitored, once that individual has been identified.</p>
<!-- raw HTML omitted -->
<p><strong>TrackingId</strong></p>
<!-- raw HTML omitted -->
<p>An integer that is generated by the adapter and uniquely identifies the individual. The tracking identifier that the adapter assigns to a particular individual is guaranteed to be constant as long as that person remains in the camera frame.</p>
<!-- raw HTML omitted -->
<p><strong>Ticket</strong></p>
<!-- raw HTML omitted -->
<p>Reserved. Set to 0 by the adapter.</p>
<!-- raw HTML omitted -->
<p><strong>Properties</strong></p>
<!-- raw HTML omitted -->
<p>Factor-specific information about the position of an individual.</p>
<!-- raw HTML omitted -->
<h2>Remarks</h2>
<p>The <a href="/windows/desktop/api/Winbio_adapter/nc-winbio_adapter-pibio_engine_identify_all_fn"><strong>EngineAdapterIdentifyAll</strong></a> function creates an array of <strong>WINBIO_PRESENCE</strong> structures and sends this array to the biometric service. The biometric service uses the array to update its internal model of humans near the computer.</p>
<p>Depending on the results of this update, the biometric service may generate a <a href="/windows/desktop/api/Winbio/ns-winbio-winbio_async_result"><strong>WINBIO_ASYNC_RESULT</strong></a> structure for the <a href="/windows/desktop/api/winbio/nf-winbio-winbiomonitorpresence"><strong>WinBioMonitorPresence</strong></a> function for any clients with active presence monitors. The <strong>WINBIO_ASYNC_RESULT.Operation</strong> member of the structure contains <strong>WINBIO_OPERATION_MONITOR_PRESENCE</strong>, and the <strong>WINBIO_ASYNC_RESULT.Parameters.MonitorPresence.ChangeType</strong> member provides additional information about the state of the individual.</p>
<p>When an individual that the engine adapter associates with a particular tracking identifier appears in the input stream for the first time, the biometric service generates a client-side <a href="/windows/desktop/api/Winbio/ns-winbio-winbio_async_result"><strong>WINBIO_ASYNC_RESULT</strong></a> structure where the <strong>WINBIO_ASYNC_RESULT.Parameters.MonitorPresence.ChangeType</strong> member is <strong>WINBIO_CHANGE_TYPE_ARRIVAL</strong>. This structure is sent to your application callback function or application message queue before any other <strong>WINBIO_ASYNC_RESULT</strong> structures where the <strong>WINBIO_ASYNC_RESULT.Parameters.MonitorPresence.PresenceArray</strong> includes a <strong>WINBIO_PRESENCE</strong> structure with the same value for <strong>WINBIO_PRESENCE.TrackingId</strong>.</p>
<p>The following combinations of values in the array of <strong>WINBIO_PRESENCE</strong> structures that the <strong>WINBIO_ASYNC_RESULT.Parameters.MonitorPresence.PresenceArray</strong> member indicate specific kinds of changes in the state of an individual.</p>
<ul>
<li>
<p>When an individual is visible in the camera frame, but the engine is still trying to identify the individual, the members of the <strong>WINBIO_PRESENCE</strong> structure have the values in the following table.</p>
<table>
<thead>
<tr>
<th>Member</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>TrackingId</strong></td>
<td>An integer that identifies the individual to the engine.</td>
</tr>
<tr>
<td><strong>Status</strong></td>
<td><strong>S_OK</strong></td>
</tr>
<tr>
<td><strong>Identity.Type</strong></td>
<td><strong>WINBIO_ID_TYPE_NULL</strong></td>
</tr>
</tbody>
</table>
<p>In this case, the biometric service extends the expiry time for the individual, and does not generate a client-side <a href="/windows/desktop/api/Winbio/ns-winbio-winbio_async_result"><strong>WINBIO_ASYNC_RESULT</strong></a> structure for the tracking identifier where the <strong>WINBIO_ASYNC_RESULT.Parameters.MonitorPresence.ChangeType</strong> member is <strong>WINBIO_CHANGE_TYPE_RECOGNIZE</strong>.</p>
<p>The first time that a <a href="/windows/desktop/api/Winbio/ns-winbio-winbio_async_result"><strong>WINBIO_ASYNC_RESULT</strong></a> structure includes <strong>WINBIO_PRESENCE</strong> structure where the <strong>Status</strong> member is <strong>S_OK</strong> and the <strong>Identity.Type</strong> member is <strong>WINBIO_ID_TYPE_NULL</strong> after one or more <strong>WINBIO_ASYNC_RESULT</strong> structures included a <strong>WINBIO_PRESENCE</strong> structure with a <strong>Status</strong> member of <strong>WINBIO_E_BAD_CAPTURE</strong>, the presence monitor generates a single <strong>WINBIO_ASYNC_RESULT</strong> structure for the tracking identifier where the <strong>WINBIO_ASYNC_RESULT.Parameters.MonitorPresence.ChangeType</strong> member is <strong>WINBIO_CHANGE_TYPE_TRACK</strong>. This <strong>WINBIO_ASYNC_RESULT</strong> structure where the <strong>WINBIO_ASYNC_RESULT.Parameters.MonitorPresence.ChangeType</strong> member is <strong>WINBIO_CHANGE_TYPE_TRACK</strong> informs the client that the problem that caused the <strong>WINBIO_E_BAD_CAPTURE</strong> error has resolved. For more information about the circumstances where a <strong>WINBIO_PRESENCE</strong> structure has <strong>Status</strong> member of <strong>WINBIO_E_BAD_CAPTURE</strong>, see the description about how the engine adapter provides feedback to the user to correct recognition failures later in these Remarks.</p>
</li>
<li>
<p>When an individual is visible in the camera frame, but the engine is still trying to identify the individual and wants to provide feedback to the user about how to correct a recognition failure, the members of the <strong>WINBIO_PRESENCE</strong> structure have the values in the following table.</p>
<table>
<thead>
<tr>
<th>Member</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>TrackingId</strong></td>
<td>An integer that identifies the individual to the engine.</td>
</tr>
<tr>
<td><strong>Status</strong></td>
<td><strong>WINBIO_E_BAD_CAPTURE</strong></td>
</tr>
<tr>
<td><strong>Identity.Type</strong></td>
<td><strong>WINBIO_ID_TYPE_NULL</strong></td>
</tr>
<tr>
<td><strong>Properties.FacialFeatures.BoundingBox</strong>, if the value of <strong>Factor</strong> is <strong>WINBIO_TYPE_FACIAL_FEATURES</strong></td>
<td>The location of the face of the individual within the camera frame.</td>
</tr>
<tr>
<td><strong>Properties.Iris.BoundingBox</strong>, if the value of <strong>Factor</strong> is <strong>WINBIO_TYPE_IRIS</strong></td>
<td>The location of the iris or irises of the individual within the camera frame.</td>
</tr>
</tbody>
</table>
<p>In this case, the biometric service extends the expiry time for the individual and generates a <a href="/windows/desktop/api/Winbio/ns-winbio-winbio_async_result"><strong>WINBIO_ASYNC_RESULT</strong></a> structure for the tracking identifier where the <strong>WINBIO_ASYNC_RESULT.Parameters.MonitorPresence.ChangeType</strong> member is <strong>WINBIO_CHANGE_TYPE_TRACK</strong>.</p>
</li>
<li>
<p>When an individual is visible in the camera frame, and the engine adapter determines the identity of the individual, the members of the <strong>WINBIO_PRESENCE</strong> structure have the values in the following table.</p>
<table>
<thead>
<tr>
<th>Member</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>TrackingId</strong></td>
<td>An integer that identifies the individual to the engine.</td>
</tr>
<tr>
<td><strong>Status</strong></td>
<td><strong>S_OK</strong></td>
</tr>
<tr>
<td><strong>Identity.Type</strong></td>
<td><strong>WINBIO_ID_TYPE_SID</strong></td>
</tr>
<tr>
<td><strong>Identity.Value.AccountSid</strong></td>
<td>The security identifier (SID) of the individual.</td>
</tr>
</tbody>
</table>
<p>In this case, the biometric service associates the tracking identifier with the SID for the individual and generates a client-side <a href="/windows/desktop/api/Winbio/ns-winbio-winbio_async_result"><strong>WINBIO_ASYNC_RESULT</strong></a> structure for the tracking identifier where the <strong>WINBIO_ASYNC_RESULT.Parameters.MonitorPresence.ChangeType</strong> member is <strong>WINBIO_CHANGE_TYPE_RECOGNIZE</strong>. The biometric service does not generate additional client-side <strong>WINBIO_ASYNC_RESULT</strong> structures for the tracking identifier unless the individual leaves the camera frame.</p>
</li>
<li>
<p>When an individual is visible in the camera frame, but the engine adapter determines for certain that the individual is not enrolled, the members of the <strong>WINBIO_PRESENCE</strong> structure have the values in the following table.</p>
<table>
<thead>
<tr>
<th>Member</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>TrackingId</strong></td>
<td>An integer that identifies the individual to the engine.</td>
</tr>
<tr>
<td><strong>Status</strong></td>
<td><strong>WINBIO_E_UNKNOWN_ID</strong></td>
</tr>
<tr>
<td><strong>Identity.Type</strong></td>
<td><strong>WINBIO_ID_TYPE_NULL</strong></td>
</tr>
</tbody>
</table>
<p>In this case, the biometric service associates the tracking identifier of the individual with an identity of UNKNOWN, and generates a client-side <a href="/windows/desktop/api/Winbio/ns-winbio-winbio_async_result"><strong>WINBIO_ASYNC_RESULT</strong></a> structure for the tracking identifier where the <strong>WINBIO_ASYNC_RESULT.Parameters.MonitorPresence.ChangeType</strong> member is <strong>WINBIO_CHANGE_TYPE_RECOGNIZE</strong>. The biometric service does not generate additional client-side <strong>WINBIO_ASYNC_RESULT</strong> structures for the tracking identifier unless the individual leaves the camera frame.</p>
</li>
</ul>
<p>When an individual that the engine adapter associates with a particular tracking identifier leaves the camera frame and stops appearing in the values that the <a href="/windows/desktop/api/Winbio_adapter/nc-winbio_adapter-pibio_engine_identify_all_fn"><strong>EngineAdapterIdentifyAll</strong></a> function returns, the tracking identifier eventually expires. When the tracking identifier expires, the biometric service generates a client-side <a href="/windows/desktop/api/Winbio/ns-winbio-winbio_async_result"><strong>WINBIO_ASYNC_RESULT</strong></a> structure where the <strong>WINBIO_ASYNC_RESULT.Parameters.MonitorPresence.ChangeType</strong> member is <strong>WINBIO_CHANGE_TYPE_DEPART</strong>. The engine adapter can prevent the biometric service from generating this structure with the <strong>WINBIO_CHANGE_TYPE_DEPART</strong> value by including a <strong>WINBIO_PRESENCE</strong> structure in the array that <strong>EngineAdapterIdentifyAll</strong> returns, where the <strong>WINBIO_PRESENCE.Status</strong> member is <strong>S_OK</strong> and the <strong>WINBIO_PRESENCE.Identity.Type</strong> member is <strong>WINBIO_ID_TYPE_NULL</strong> as described earlier in these Remarks. This action extends the expiry time for the tracking identifier without causing any client-side activity.</p>
<h2>Requirements</h2>
<table>
<thead>
<tr>
<th>Requirement</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Minimum supported client<!-- raw HTML omitted --></td>
<td>Windows 10 [desktop apps only]<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Minimum supported server<!-- raw HTML omitted --></td>
<td>Windows Server 2016 [desktop apps only]<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Header<!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted -->Winbio_types.h (include Winbio.h for client applications or Winbio_adapters.h for adapters)<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<h2>See also</h2>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/api/Winbio/ns-winbio-winbio_async_result"><strong>WINBIO_ASYNC_RESULT</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/api/winbio/nf-winbio-winbiomonitorpresence"><strong>WinBioMonitorPresence</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/api/Winbio_adapter/nc-winbio_adapter-pibio_engine_identify_all_fn"><strong>EngineAdapterIdentifyAll</strong></a></p>
<!-- raw HTML omitted -->
</body>
