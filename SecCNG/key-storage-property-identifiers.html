<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Key Storage Property Identifiers</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: Used to identify a key storage property.
ms.assetid: 407f0e42-07c8-4ec6-81c6-f8bde005adb0
title: Key Storage Property Identifiers (Ncrypt.h)
ms.topic: reference
ms.date: 11/13/2024</h2>
<h1>Key Storage Property Identifiers</h1>
<p>The following values are used to identify a key storage property.</p>
<h2>Identifiers</h2>
<h3>NCRYPT_ALGORITHM_GROUP_PROPERTY</h3>
<p><code>L&quot;Algorithm Group&quot;</code></p>
<p>A null-terminated Unicode string that contains the name of the object's algorithm group. This property only applies to keys. The following identifiers are returned by the Microsoft key storage provider.</p>
<table>
<thead>
<tr>
<th>Identifier</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>NCRYPT_RSA_ALGORITHM_GROUP</strong></td>
<td>&quot;RSA&quot;</td>
<td>The RSA algorithm group.</td>
</tr>
<tr>
<td><strong>NCRYPT_DH_ALGORITHM_GROUP</strong></td>
<td>&quot;DH&quot;</td>
<td>The Diffie-Hellman algorithm group.</td>
</tr>
<tr>
<td><strong>NCRYPT_DSA_ALGORITHM_GROUP</strong></td>
<td>&quot;DSA&quot;</td>
<td>The DSA algorithm group.</td>
</tr>
<tr>
<td><strong>NCRYPT_ECDSA_ALGORITHM_GROUP</strong></td>
<td>&quot;ECDSA&quot;</td>
<td>The elliptic curve DSA algorithm group.</td>
</tr>
<tr>
<td><strong>NCRYPT_ECDH_ALGORITHM_GROUP</strong></td>
<td>&quot;ECDH&quot;</td>
<td>The elliptic curve Diffie-Hellman algorithm group.</td>
</tr>
</tbody>
</table>
<h3>NCRYPT_ALGORITHM_PROPERTY</h3>
<p><code>L&quot;Algorithm Name&quot;</code></p>
<p>A null-terminated Unicode string that contains the name of the object's algorithm. This can be one of the predefined <a href="cng-algorithm-identifiers.html">CNG Algorithm Identifiers</a> or another registered algorithm identifier. This property only applies to keys.</p>
<h3>NCRYPT_ASSOCIATED_ECDH_KEY</h3>
<p><code>L&quot;SmartCardAssociatedECDHKey&quot;</code></p>
<p>An <strong>LPWSTR</strong> value that indicates the container name of the <strong>Elliptic Curve Diffie-Hellman (ECDH)</strong> key to use during logon for a given handle to an <strong>Elliptic Curve Digital Signature Algorithm (ECDSA)</strong> key. If there are no ECDH keys on the card, the <a href="/windows/win32/SecGloss/k-gly">key storage provider</a> (KSP) returns <code>NTE_NOT_FOUND</code>. This property applies to ECDSA keys for logon with smart cards. The property is supported by the Microsoft Smart Card key storage provider and not by the Microsoft Software key storage provider.</p>
<p><strong>Windows Server 2008 and Windows Vista:</strong> This value is not supported.</p>
<h3>NCRYPT_BLOCK_LENGTH_PROPERTY</h3>
<p><code>L&quot;Block Length&quot;</code></p>
<p>A <strong>DWORD</strong> that contains the length, in bytes, of the encryption block. This property only applies to keys that support encryption.</p>
<h3>NCRYPT_CERTIFICATE_PROPERTY</h3>
<p><code>L&quot;SmartCardKeyCertificate&quot;</code></p>
<p>A <a href="/windows/win32/SecGloss/b-gly"><em>BLOB</em></a> that contains an X.509 certificate that is associated with the key.</p>
<p><strong>Windows Server 2008 R2, Windows 7, Windows Server 2008 and Windows Vista:</strong> A <a href="/windows/win32/SecGloss/b-gly"><em>BLOB</em></a> that contains the <a href="/windows/win32/SecGloss/s-gly"><em>smart card</em></a> key <a href="/windows/win32/SecGloss/c-gly"><em>certificate</em></a>. This property is not supported by the Microsoft Software Key Storage Provider.</p>
<h3>NCRYPT_DH_PARAMETERS_PROPERTY</h3>
<p><code>L&quot;DHParameters&quot;</code></p>
<p>Specifies parameters to use with a Diffie-Hellman key. This data type is a pointer to a <a href="/windows/win32/api/Bcrypt/ns-bcrypt-bcrypt_dh_parameter_header">BCRYPT_DH_PARAMETER_HEADER</a> structure. This property can only be set and must be set for the key before the key is completed.</p>
<h3>NCRYPT_EXPORT_POLICY_PROPERTY</h3>
<p><code>L&quot;Export Policy&quot;</code></p>
<p>A <strong>DWORD</strong> that contains a set of flags that specify the export policy for a persisted key. This property only applies to keys. This can contain zero or a combination of one or more of the following values.</p>
<table>
<thead>
<tr>
<th>Identifier</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>NCRYPT_ALLOW_EXPORT_FLAG</strong></td>
<td>0x00000001</td>
<td>The private key can be exported.</td>
</tr>
<tr>
<td><strong>NCRYPT_ALLOW_PLAINTEXT_EXPORT_FLAG</strong></td>
<td>0x00000002</td>
<td>The private key can be exported in plaintext form.</td>
</tr>
<tr>
<td><strong>NCRYPT_ALLOW_ARCHIVING_FLAG</strong></td>
<td>0x00000004</td>
<td>The private key can be exported once for archiving purposes. This flag only applies to the original key handle on which it is set. This policy can only be applied to the original key handle. After the key handle has been closed, the key can no longer be exported for archiving purposes.</td>
</tr>
<tr>
<td><strong>NCRYPT_ALLOW_PLAINTEXT_ARCHIVING_FLAG</strong></td>
<td>0x00000008</td>
<td>The private key can be exported once in plaintext form for archiving purposes. This flag only applies to the original key handle on which it is set. This policy can only be applied to the original key handle. After the key handle has been closed, the key can no longer be exported for archiving purposes.</td>
</tr>
</tbody>
</table>
<h3>NCRYPT_IMPL_TYPE_PROPERTY</h3>
<p><code>L&quot;Impl Type&quot;</code></p>
<p>A <strong>DWORD</strong> that contains a set of flags that define implementation details of the provider. This property only applies to key storage providers. This can contain zero or a combination of one or more of the following values.</p>
<table>
<thead>
<tr>
<th>Identifier</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>NCRYPT_IMPL_HARDWARE_FLAG</strong></td>
<td>0x00000001</td>
<td>The provider is hardware based.</td>
</tr>
<tr>
<td><strong>NCRYPT_IMPL_SOFTWARE_FLAG</strong></td>
<td>0x00000002</td>
<td>The provider is software based.</td>
</tr>
<tr>
<td><strong>NCRYPT_IMPL_REMOVABLE_FLAG</strong></td>
<td>0x00000008</td>
<td>The provider is removable.</td>
</tr>
<tr>
<td><strong>NCRYPT_IMPL_HARDWARE_RNG_FLAG</strong></td>
<td>0x00000010</td>
<td>The provider is a hardware based random number generator.</td>
</tr>
</tbody>
</table>
<h3>NCRYPT_KEY_TYPE_PROPERTY</h3>
<p><code>L&quot;Key Type&quot;</code></p>
<p>A <strong>DWORD</strong> that contains a set of flags that define the key type. This property only applies to keys. This can contain zero or the following value.</p>
<table>
<thead>
<tr>
<th>Identifier</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>NCRYPT_MACHINE_KEY_FLAG</strong></td>
<td>0x00000020</td>
<td>The key applies to the local computer. If this flag is not present, the key applies to the current user.</td>
</tr>
</tbody>
</table>
<h3>NCRYPT_KEY_USAGE_PROPERTY</h3>
<p><code>L&quot;Key Usage&quot;</code></p>
<p>A <strong>DWORD</strong> that contains a set of flags that define the usage details for a key. This property only applies to keys. This can contain zero or a combination of one or more of the following values.</p>
<table>
<thead>
<tr>
<th>Identifier</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>NCRYPT_ALLOW_DECRYPT_FLAG</strong></td>
<td>0x00000001</td>
<td>The key can be used for decryption.</td>
</tr>
<tr>
<td><strong>NCRYPT_ALLOW_SIGNING_FLAG</strong></td>
<td>0x00000002</td>
<td>The key can be used for signing.</td>
</tr>
<tr>
<td><strong>NCRYPT_ALLOW_KEY_AGREEMENT_FLAG</strong></td>
<td>0x00000004</td>
<td>The key can be used for secret agreement encryption.</td>
</tr>
<tr>
<td><strong>NCRYPT_ALLOW_KEY_ATTESTATION_FLAG</strong></td>
<td>0x00000010</td>
<td>Indicates the key is a key with attestation.</td>
</tr>
<tr>
<td><strong>NCRYPT_ALLOW_ALL_USAGES</strong></td>
<td>0x00ffffff</td>
<td>The key can be used for any purpose.</td>
</tr>
</tbody>
</table>
<h3>NCRYPT_LAST_MODIFIED_PROPERTY</h3>
<p><code>L&quot;Modified&quot;</code></p>
<p>Indicates when the key was last modified. This data type is a pointer to a <a href="/windows/win32/api/minwinbase/ns-minwinbase-filetime">FILETIME</a> structure. This property only applies to persisted keys.</p>
<h3>NCRYPT_LENGTH_PROPERTY</h3>
<p><code>L&quot;Length&quot;</code></p>
<p>A <strong>DWORD</strong> that contains the length, in bits, of the key. This property only applies to keys.</p>
<h3>NCRYPT_LENGTHS_PROPERTY</h3>
<p><code>L&quot;Lengths&quot;</code></p>
<p>Indicates the key sizes that are supported by the key. This data type is a pointer to an <a href="/windows/win32/api/Ncrypt/ns-ncrypt-ncrypt_supported_lengths">NCRYPT_SUPPORTED_LENGTHS</a> structure that contains this information. This property only applies to keys.</p>
<h3>NCRYPT_MAX_NAME_LENGTH_PROPERTY</h3>
<p><code>L&quot;Max Name Length&quot;</code></p>
<p>A <strong>DWORD</strong> that contains the maximum length, in characters, of the name of a persistent key. This property only applies to a provider.</p>
<p>This property is primarily intended to be used by key storage providers that store their keys on a device that has a limited amount of available memory, such as a smart card.</p>
<h3>NCRYPT_NAME_PROPERTY</h3>
<p><code>L&quot;Name&quot;</code></p>
<p>A pointer to a null-terminated Unicode string that contains the name of the object.</p>
<h3>NCRYPT_PIN_PROMPT_PROPERTY</h3>
<p><code>L&quot;SmartCardPinPrompt&quot;</code></p>
<p>This value is not supported.</p>
<h3>NCRYPT_PIN_PROPERTY</h3>
<p><code>L&quot;SmartCardPin&quot;</code></p>
<p>A pointer to a null-terminated Unicode string that contains the PIN. The PIN is used for a smart card key or the password for a password-protected key stored in a software-based KSP. This property can only be set. Microsoft KSPs will cache this value so that the user is only prompted once per process.</p>
<h3>NCRYPT_PROVIDER_HANDLE_PROPERTY</h3>
<p><code>L&quot;Provider Handle&quot;</code></p>
<p>An <strong>NCRYPT_PROV_HANDLE</strong> that contains the handle of the CNG key storage provider. When you are finished using the handle, you must call <a href="/windows/win32/api/Ncrypt/nf-ncrypt-ncryptfreeobject">NCryptFreeObject</a> to release it.</p>
<h3>NCRYPT_READER_PROPERTY</h3>
<p><code>L&quot;SmartCardReader&quot;</code></p>
<p>A pointer to a null-terminated Unicode string that contains the name of the smart card reader. This property can only be set.</p>
<h3>NCRYPT_ROOT_CERTSTORE_PROPERTY</h3>
<p><code>L&quot;SmartcardRootCertStore&quot;</code></p>
<p>An <strong>HCERTSTORE</strong> that represents the smart card root certificate store.</p>
<h3>NCRYPT_SCARD_PIN_ID</h3>
<p><code>L&quot;SmartCardPinId&quot;</code></p>
<p>A pointer to the <code>PIN_ID</code> value associated with a given <a href="/windows/win32/SecGloss/c-gly">cryptographic key</a> on a <a href="/windows/win32/SecGloss/s-gly">smart card</a>. This is a read-only property. The <code>PIN_ID</code> data type is defined in <code>Cardmod.h</code>.</p>
<p><strong>Windows Server 2008 and Windows Vista:</strong> This value is not supported.</p>
<blockquote>
<p>[!NOTE]
The <code>Cardmod.h</code> C header file provides additional information that is relevant to this API. This file contains the function prototypes and structures that Microsoft smart card minidriver API specifies. This API is available through the <a href="https://www.microsoft.com/download/details.aspx?id=30688">Microsoft Cryptographic Provider Development Kit (CPDK)</a>.</p>
</blockquote>
<h3>NCRYPT_SCARD_PIN_INFO</h3>
<p><code>L&quot;SmartCardPinInfo&quot;</code></p>
<p>A pointer to <strong>PIN_INFO</strong> structure of the PIN associated with a given cryptographic key on the smart card. The caller provides the key handle. This property is a read-only property. The <code>PIN_INFO</code> structure is defined in <code>Cardmod.h</code>.</p>
<p><strong>Windows Server 2008 and Windows Vista:</strong> This value is not supported.</p>
<h3>NCRYPT_SECURE_PIN_PROPERTY</h3>
<p><code>L&quot;SmartCardSecurePin&quot;</code></p>
<p>A pointer to a null-terminated Unicode string that contains the smart card session PIN. This property can only be set.</p>
<p><strong>Windows Vista:</strong> This property is not supported.</p>
<h3>NCRYPT_SECURITY_DESCR_PROPERTY</h3>
<p><code>L&quot;Security Descr&quot;</code></p>
<p>A pointer to a <a href="/windows/win32/api/winnt/ns-winnt-security_descriptor">SECURITY_DESCRIPTOR</a> structure that contains access control information for the key. This property only applies to persistent keys. The <em>dwFlags</em> parameter of the <a href="/windows/win32/api/Ncrypt/nf-ncrypt-ncryptgetproperty">NCryptGetProperty</a> or <a href="/windows/win32/api/Ncrypt/nf-ncrypt-ncryptsetproperty">NCryptSetProperty</a> function identifies the part of the security descriptor to get or set.</p>
<h3>NCRYPT_SECURITY_DESCR_SUPPORT_PROPERTY</h3>
<p><code>L&quot;Security Descr Support&quot;</code></p>
<p>Indicates whether the provider supports security descriptors for keys. This property is a <strong>DWORD</strong> that contains 1 if the provider supports security descriptors for keys. If this property contains any other value, or if the <a href="/windows/win32/api/Ncrypt/nf-ncrypt-ncryptgetproperty">NCryptGetProperty</a> function returns <code>NTE_NOT_SUPPORTED</code>, then the provider does not support security descriptors for keys. This property only applies to providers.</p>
<h3>NCRYPT_SMARTCARD_GUID_PROPERTY</h3>
<p><code>L&quot;SmartCardGuid&quot;</code></p>
<p>A BLOB that contains the identifier of the smart card.</p>
<h3>NCRYPT_UI_POLICY_PROPERTY</h3>
<p><code>L&quot;UI Policy&quot;</code></p>
<p>If used with the <a href="/windows/win32/api/Ncrypt/nf-ncrypt-ncryptsetproperty">NCryptSetProperty</a> or <a href="/windows/win32/api/Ncrypt/nf-ncrypt-ncryptgetproperty">NCryptGetProperty</a> function, this is a pointer to an <a href="/windows/win32/api/Ncrypt/ns-ncrypt-ncrypt_ui_policy">NCRYPT_UI_POLICY</a> structure that contains the strong key user interface policy for the key. This property only applies to persistent keys. This property can only be set when the key is being generated. Once the <a href="/windows/win32/api/Ncrypt/nf-ncrypt-ncryptfinalizekey">NCryptFinalizeKey</a> function has been called for this key, this property becomes read-only.</p>
<p>A key storage provider can receive this parameter through an <a href="https://www.bing.com/search?q=**NCryptSetPropertyFn**">NCryptSetPropertyFn</a> callback function. The parameter value is an <strong>NCRYPT_UI_POLICY_BLOB</strong> structure that contains the same information. Similarly, when an application makes a request through <strong>NCryptSetPropertyFn</strong> to the provider to return this property, the provider is expected to return an <strong>NCRYPT_UI_POLICY_BLOB</strong> structure.</p>
<h3>NCRYPT_UNIQUE_NAME_PROPERTY</h3>
<p><code>L&quot;Unique Name&quot;</code></p>
<p>A pointer to a null-terminated Unicode string that contains the unique name of the object. This is an alternate name that can be used when accessing the key. This property is used when it is thought that the key name originally passed to <a href="/windows/win32/api/Ncrypt/nf-ncrypt-ncryptcreatepersistedkey">NCryptCreatePersistedKey</a> is not unique enough to reliably identify the persisted key. The Microsoft key storage provider will return the file name of the key as this property.</p>
<h3>NCRYPT_USE_CONTEXT_PROPERTY</h3>
<p><code>L&quot;Use Context&quot;</code></p>
<p>A pointer to a null-terminated Unicode string that describes the context of the operation. This property is not persistent and can be set on either a provider or a key. A key does not have access to the <code>NCRYPT_USE_CONTEXT_PROPERTY</code> property of the provider because the property is specific only to the handle it is set for.</p>
<p>An example where this property would be used in the context of a provider is a key storage provider that needs to prompt the user during a call to <a href="/windows/win32/api/Ncrypt/nf-ncrypt-ncryptopenkey">NCryptOpenKey</a> (for example, &quot;Insert your smart card in the reader.&quot;). Because the key handle is not available until after <strong>NCryptOpenKey</strong> returns, the application should set this property on the provider handle prior to calling <strong>NCryptOpenKey</strong>.</p>
<p>An example where this property would be used in the context of a key handle is a key storage provider that needs to prompt the user during an operation using the key (for example, &quot;This application needs to use this key to sign a document.&quot;). The provider could then relay this context information to the user in any user interface shown during the operation.</p>
<h3>NCRYPT_USE_COUNT_ENABLED_PROPERTY</h3>
<p><code>L&quot;Enabled Use Count&quot;</code></p>
<p>Indicates whether the provider supports usage counting for keys. This property is a <strong>DWORD</strong> that contains 1 if the provider supports usage counting for keys. If this property contains any other value, or if the <a href="/windows/win32/api/Ncrypt/nf-ncrypt-ncryptgetproperty">NCryptGetProperty</a> function returns <code>NTE_NOT_SUPPORTED</code>, then the provider does not support usage counting for keys. This property only applies to providers.</p>
<h3>NCRYPT_USE_COUNT_PROPERTY</h3>
<p><code>L&quot;Use Count&quot;</code></p>
<p>A <a href="/windows/win32/api/winnt/ns-winnt-ularge_integer~r1">ULARGE_INTEGER</a> variable that contains the number of operations that the specified <a href="/windows/win32/SecGloss/p-gly">private key</a> has performed. This property is optional and may not be supported by all providers. Providers that support this property on keys should also support the <strong>NCRYPT_USE_COUNT_ENABLED_PROPERTY</strong> property on the provider handle. The Microsoft key storage provider does not support this property. This property only applies to persistent keys.</p>
<h3>NCRYPT_USER_CERTSTORE_PROPERTY</h3>
<p><code>L&quot;SmartCardUserCertStore&quot;</code></p>
<p>An <strong>HCERTSTORE</strong> that represents the smart card user certificate store.</p>
<h3>NCRYPT_VBS_ROOT_PUB_PROPERTY</h3>
<p><code>L&quot;VBS_ROOT_PUB&quot;</code></p>
<p>A new property of the <strong>MS_KEY_STORAGE_PROVIDER</strong> provider. This property enables the retrieval of the public part of the root Signing Key (IDKS) of Virtualization Based Security (VBS).</p>
<h3>NCRYPT_VERSION_PROPERTY</h3>
<p><code>L&quot;Version&quot;</code></p>
<p>A <strong>DWORD</strong> that contains the software version of the provider. The high word contains the major version and the low word contains the minor version. For example, <code>0x00030033 = 3.51</code>. This property only applies to providers.</p>
<h3>NCRYPT_WINDOW_HANDLE_PROPERTY</h3>
<p><code>L&quot;HWND Handle&quot;</code></p>
<p>A pointer to the window handle (<strong>HWND</strong>) to be used as the parent of any user interface that is displayed.</p>
<p>Because undesirable behavior can happen when a user interface is shown by using a <strong>NULL</strong> window handle for the parent, we strongly recommend that a key storage provider not display a user interface unless this property is set.</p>
<p>The following values are used to define limits of property data.</p>
<table>
<thead>
<tr>
<th>Constant</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>NCRYPT_MAX_PROPERTY_DATA</strong></td>
<td>0x100000</td>
<td>Specifies the maximum size of a property value, in bytes.</td>
</tr>
<tr>
<td><strong>NCRYPT_MAX_PROPERTY_NAME</strong></td>
<td>64</td>
<td>Specifies the maximum size of a property name, in characters.</td>
</tr>
</tbody>
</table>
<h2>Requirements</h2>
<table>
<thead>
<tr>
<th>Requirement</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Minimum supported client</td>
<td>Windows Vista [desktop apps only]</td>
</tr>
<tr>
<td>Minimum supported server</td>
<td>Windows Server 2008 [desktop apps only]</td>
</tr>
<tr>
<td>Header</td>
<td><code>Ncrypt.h</code></td>
</tr>
</tbody>
</table>
<h2>See also</h2>
<ul>
<li>
<p><a href="/windows/desktop/api/Ncrypt/nf-ncrypt-ncryptgetproperty">NCryptGetProperty</a></p>
</li>
<li>
<p><a href="/windows/desktop/api/Ncrypt/nf-ncrypt-ncryptsetproperty">NCryptSetProperty</a></p>
</li>
<li>
<p><a href="https://www.microsoft.com/download/details.aspx?id=30688">Microsoft Cryptographic Provider Development Kit (CPDK)</a></p>
</li>
</ul>
</body>
