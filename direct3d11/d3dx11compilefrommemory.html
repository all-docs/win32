<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>D3DX11CompileFromMemory function</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<p>title: D3DX11CompileFromMemory function (D3DX11async.h)
description: Note The D3DX (D3DX 9, D3DX 10, and D3DX 11) utility library is deprecated for Windows 8 and is not supported for Windows Store apps. Note Instead of using this function, we recommend that you compile offline by using the Fxc.exe command-line compiler or use one of the HLSL compile APIs, like the D3DCompile API. Compile a shader or an effect that is loaded in memory.
ms.assetid: 3396560f-f411-4c66-9f22-03c0050c74b0
keywords:</p>
<ul>
<li>D3DX11CompileFromMemory function Direct3D 11
topic_type:</li>
<li>apiref
api_name:</li>
<li>D3DX11CompileFromMemory
api_location:</li>
<li>D3DX11.lib</li>
<li>D3DX11.dll
api_type:</li>
<li>LibDef
ms.topic: reference
ms.date: 05/31/2018</li>
</ul>
<hr />
<h1>D3DX11CompileFromMemory function</h1>
<blockquote>
<p>[!Note]<br />
The D3DX (D3DX 9, D3DX 10, and D3DX 11) utility library is deprecated for Windows 8 and is not supported for Windows Store apps.</p>
</blockquote>
<blockquote>
<p>[!Note]<br />
Instead of using this function, we recommend that you compile offline by using the Fxc.exe command-line compiler or use one of the HLSL compile APIs, like the <a href="/windows/desktop/direct3dhlsl/d3dcompile"><strong>D3DCompile</strong></a> API.</p>
</blockquote>
<p>Compile a shader or an effect that is loaded in memory.</p>
<h2>Syntax</h2>
<pre lang="C++"><code>HRESULT D3DX11CompileFromMemory(
  _In_        LPCSTR             pSrcData,
  _In_        SIZE_T             SrcDataLen,
  _In_        LPCSTR             pFileName,
  _In_  const D3D10_SHADER_MACRO *pDefines,
  _In_        LPD3D10INCLUDE     pInclude,
  _In_        LPCSTR             pFunctionName,
  _In_        LPCSTR             pProfile,
  _In_        UINT               Flags1,
  _In_        UINT               Flags2,
  _In_        ID3DX11ThreadPump  *pPump,
  _Out_       ID3D10Blob         **ppShader,
  _Out_       ID3D10Blob         **ppErrorMsgs,
  _Out_       HRESULT            *pHResult
);
</code></pre>
<h2>Parameters</h2>
<!-- raw HTML omitted -->
<p><em>pSrcData</em> [in]</p>
<!-- raw HTML omitted -->
<p>Type: <strong><a href="/windows/desktop/WinProg/windows-data-types"><strong>LPCSTR</strong></a></strong></p>
<p>Pointer to the shader in memory.</p>
<!-- raw HTML omitted -->
<p><em>SrcDataLen</em> [in]</p>
<!-- raw HTML omitted -->
<p>Type: <strong><a href="/windows/desktop/WinProg/windows-data-types"><strong>SIZE_T</strong></a></strong></p>
<p>Size of the shader in memory.</p>
<!-- raw HTML omitted -->
<p><em>pFileName</em> [in]</p>
<!-- raw HTML omitted -->
<p>Type: <strong><a href="/windows/desktop/WinProg/windows-data-types"><strong>LPCSTR</strong></a></strong></p>
<p>The name of the file that contains the shader code.</p>
<!-- raw HTML omitted -->
<p><em>pDefines</em> [in]</p>
<!-- raw HTML omitted -->
<p>Type: <strong>const <a href="/windows/desktop/api/d3dcommon/ns-d3dcommon-d3d_shader_macro"><strong>D3D10_SHADER_MACRO</strong></a>*</strong></p>
<p>Optional. Pointer to an array of macro definitions (see <a href="/windows/desktop/api/d3dcommon/ns-d3dcommon-d3d_shader_macro"><strong>D3D10_SHADER_MACRO</strong></a>). The last structure in the array serves as a terminator and must have all members set to 0. If not used, set <em>pDefines</em> to <strong>NULL</strong>.</p>
<!-- raw HTML omitted -->
<p><em>pInclude</em> [in]</p>
<!-- raw HTML omitted -->
<p>Type: <strong><a href="/previous-versions/windows/desktop/legacy/bb173775(v=vs.85)"><strong>LPD3D10INCLUDE</strong></a></strong></p>
<p>Optional. Pointer to an interface for handling include files. Setting this to <strong>NULL</strong> will cause a compile error if a shader contains a #include.</p>
<!-- raw HTML omitted -->
<p><em>pFunctionName</em> [in]</p>
<!-- raw HTML omitted -->
<p>Type: <strong><a href="/windows/desktop/WinProg/windows-data-types"><strong>LPCSTR</strong></a></strong></p>
<p>Name of the shader-entry point function where shader execution begins. When you compile an effect, <strong>D3DX11CompileFromMemory</strong> ignores <em>pFunctionName</em>; we recommend that you set <em>pFunctionName</em> to <strong>NULL</strong> because it is good programming practice to set a pointer parameter to <strong>NULL</strong> if the called function will not use it.</p>
<!-- raw HTML omitted -->
<p><em>pProfile</em> [in]</p>
<!-- raw HTML omitted -->
<p>Type: <strong><a href="/windows/desktop/WinProg/windows-data-types"><strong>LPCSTR</strong></a></strong></p>
<p>A string that specifies the shader model; can be any profile in shader model 2, shader model 3, shader model 4, or shader model 5. The profile can also be for effect type (for example, fx_4_1).</p>
<!-- raw HTML omitted -->
<p><em>Flags1</em> [in]</p>
<!-- raw HTML omitted -->
<p>Type: <strong><a href="/windows/desktop/WinProg/windows-data-types"><strong>UINT</strong></a></strong></p>
<p>Shader <a href="/windows/desktop/direct3dhlsl/d3dcompile-constants"><strong>compile flags</strong></a>.</p>
<!-- raw HTML omitted -->
<p><em>Flags2</em> [in]</p>
<!-- raw HTML omitted -->
<p>Type: <strong><a href="/windows/desktop/WinProg/windows-data-types"><strong>UINT</strong></a></strong></p>
<p>Effect <a href="/windows/desktop/direct3dhlsl/d3dcompile-effect-constants"><strong>compile flags</strong></a>. When you compile a shader and not an effect file, <strong>D3DX11CompileFromMemory</strong> ignores <em>Flags2</em>; we recommend that you set <em>Flags2</em> to zero because it is good programming practice to set a nonpointer parameter to zero if the called function will not use it.</p>
<!-- raw HTML omitted -->
<p><em>pPump</em> [in]</p>
<!-- raw HTML omitted -->
<p>Type: <strong><a href="id3dx11threadpump.html"><strong>ID3DX11ThreadPump</strong></a>*</strong></p>
<p>A pointer to a thread pump interface (see <a href="id3dx11threadpump.html"><strong>ID3DX11ThreadPump Interface</strong></a>). Use <strong>NULL</strong> to specify that this function should not return until it is completed.</p>
<!-- raw HTML omitted -->
<p><em>ppShader</em> [out]</p>
<!-- raw HTML omitted -->
<p>Type: <strong><a href="/windows/desktop/api/d3dcommon/nn-d3dcommon-id3d10blob"><strong>ID3D10Blob</strong></a>**</strong></p>
<p>A pointer to memory which contains the compiled shader, as well as any embedded debug and symbol-table information.</p>
<!-- raw HTML omitted -->
<p><em>ppErrorMsgs</em> [out]</p>
<!-- raw HTML omitted -->
<p>Type: <strong><a href="/windows/desktop/api/d3dcommon/nn-d3dcommon-id3d10blob"><strong>ID3D10Blob</strong></a>**</strong></p>
<p>A pointer to memory which contains a listing of errors and warnings that occurred during compilation. These errors and warnings are identical to the debug output from a debugger.</p>
<!-- raw HTML omitted -->
<p><em>pHResult</em> [out]</p>
<!-- raw HTML omitted -->
<p>Type: <strong><a href="https://msdn.microsoft.com/library/Bb401631(v=MSDN.10).aspx"><strong>HRESULT</strong></a>*</strong></p>
<p>A pointer to the return value. May be <strong>NULL</strong>. If <em>pPump</em> is not <strong>NULL</strong>, then <em>pHResult</em> must be a valid memory location until the asynchronous execution completes.</p>
<!-- raw HTML omitted -->
<h2>Return value</h2>
<p>Type: <strong><a href="https://msdn.microsoft.com/library/Bb401631(v=MSDN.10).aspx"><strong>HRESULT</strong></a></strong></p>
<p>The return value is one of the values listed in <a href="d3d11-graphics-reference-returnvalues.html">Direct3D 11 Return Codes</a>.</p>
<p><strong>D3DX11CompileFromMemory</strong> returns E_INVALIDARG if you supply non-<strong>NULL</strong> to the <em>pHResult</em> parameter when you supply <strong>NULL</strong> to the <em>pPump</em> parameter. For more information about this situation, see Remarks.</p>
<h2>Remarks</h2>
<p>For more information about <strong>D3DX11CompileFromMemory</strong>, see <a href="/windows/desktop/direct3dhlsl/d3dcompile"><strong>D3DCompile</strong></a>.</p>
<p>You must supply <strong>NULL</strong> to the <em>pHResult</em> parameter if you also supply <strong>NULL</strong> to the <em>pPump</em> parameter. Otherwise, you cannot subsequently create a shader by using the compiled shader code that <strong>D3DX11CompileFromMemory</strong> returns in the memory that the <em>ppShader</em> parameter points to. To create a shader from complied shader code, you call one of the following <a href="/windows/desktop/api/D3D11/nn-d3d11-id3d11device"><strong>ID3D11Device</strong></a> interface methods:</p>
<ul>
<li><a href="/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createcomputeshader"><strong>CreateComputeShader</strong></a></li>
<li><a href="/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createdomainshader"><strong>CreateDomainShader</strong></a></li>
<li><a href="/windows/desktop/api/D3D11/nf-d3d11-id3d11device-creategeometryshader"><strong>CreateGeometryShader</strong></a></li>
<li><a href="/windows/desktop/api/D3D11/nf-d3d11-id3d11device-creategeometryshaderwithstreamoutput"><strong>CreateGeometryShaderWithStreamOutput</strong></a></li>
<li><a href="/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createhullshader"><strong>CreateHullShader</strong></a></li>
<li><a href="/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createpixelshader"><strong>CreatePixelShader</strong></a></li>
<li><a href="/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createvertexshader"><strong>CreateVertexShader</strong></a></li>
</ul>
<p>In addition, if you supply a non-<strong>NULL</strong> value to <em>pHResult</em> when you supply <strong>NULL</strong> to <em>pPump</em>, <strong>D3DX11CompileFromMemory</strong> returns the E_INVALIDARG error code.</p>
<h2>Requirements</h2>
<table>
<thead>
<tr>
<th>Requirement</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header<!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted -->D3DX11async.h<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Library<!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted -->D3DX11.lib<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<h2>See also</h2>
<!-- raw HTML omitted -->
<p><a href="d3d11-graphics-reference-d3dx11-functions.html">D3DX Functions</a></p>
<!-- raw HTML omitted -->
</body>
