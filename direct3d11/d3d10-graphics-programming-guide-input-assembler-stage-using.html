<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Using System-Generated Values</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>title: Using System-Generated Values
description: System-generated values are generated by the IA stage (based on user-supplied input semantics) to allow certain efficiencies in shader operations.
ms.assetid: eed1e377-4b0e-4958-b6d4-945b2a952ad8
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>Using System-Generated Values</h1>
<p>System-generated values are generated by the IA stage (based on user-supplied input <a href="/windows/desktop/direct3dhlsl/dx-graphics-hlsl-semantics">semantics</a>) to allow certain efficiencies in shader operations.</p>
<p>By attaching data, such as an instance id (visible to VS), a vertex id (visible to VS), or a primitive id (visible to GS/PS), a subsequent shader stage may look for these system values to optimize processing in that stage. For instance, the VS stage may look for the instance id to grab additional per-vertex data for the shader or to perform other operations; the GS and PS stages may use the primitive id to grab per-primitive data in the same way.</p>
<ul>
<li><a href="#vertexid">VertexID</a></li>
<li><a href="#primitiveid">PrimitiveID</a></li>
<li><a href="#instanceid">InstanceID</a></li>
<li><a href="#example">Example</a></li>
<li><a href="#related-topics">Related topics</a></li>
</ul>
<h2>VertexID</h2>
<p>A vertex id is used by each shader stage to identify each vertex. It is a 32-bit unsigned integer whose default value is 0. It is assigned to a vertex when the primitive is processed by the IA stage. Attach the vertex-id semantic to the shader input declaration to inform the IA stage to generate a per-vertex id.</p>
<p>The IA will add a vertex id to each vertex for use by shader stages. For each draw call, the vertex id is incremented by 1. Across indexed draw calls, the count resets back to the start value. For <a href="/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-drawindexed"><strong>ID3D11DeviceContext::DrawIndexed</strong></a> and <a href="/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-drawindexedinstanced"><strong>ID3D11DeviceContext::DrawIndexedInstanced</strong></a>, the vertex id represents the index value. If the vertex id overflows (exceeds 2Â³Â²â€“ 1), it wraps to 0.</p>
<p>For all primitive types, vertices have a vertex id associated with them (regardless of adjacency).</p>
<h2>PrimitiveID</h2>
<p>A primitive id is used by each shader stage to identify each primitive. It is a 32-bit unsigned integer whose default value is 0. It is assigned to a primitive when the primitive is processed by the IA stage. To inform the IA stage to generate a primitive id, attach the primitive-id semantic to the shader input declaration.</p>
<p>The IA stage will add a primitive id to each primitive for use by the geometry shader or the pixel shader stage (whichever is the first stage active after the IA stage). For each indexed draw call, the primitive id is incremented by 1, however, the primitive id resets to 0 whenever a new instance begins. All other draw calls do not change the value of the instance id. If the instance id overflows (exceeds 2Â³Â²â€“ 1), it wraps to 0.</p>
<p>The pixel shader stage does not have a separate input for a primitive id; however, any pixel shader input that specifies a primitive id uses a constant interpolation mode.</p>
<p>There is no support for automatically generating a primitive id for adjacent primitives. For primitive types with adjacency, such as a triangle strip with adjacency, a primitive id is only maintained for the interior primitives (the non-adjacent primitives), just like the set of primitives in a triangle strip without adjacency.</p>
<h2>InstanceID</h2>
<p>An instance id is used by each shader stage to identify the instance of the geometry that is currently being processed. It is a 32-bit unsigned integer whose default value is 0.</p>
<p>The IA stage will add an instance id to each vertex if the vertex shader input declaration includes the instance id semantic. For each indexed draw call, instance id is incremented by 1. All other draw calls do not change the value of instance id. If instance id overflows (exceeds 2Â³Â²â€“ 1), it wraps to 0.</p>
<h2>Example</h2>
<p>The following illustration shows how system values are attached to an instanced triangle strip in the IA stage.</p>
<p><img src="images/d3d10-ia-example.png" alt="illustration of system values for an instanced triangle strip" /></p>
<p>These tables show the system values generated for both instances of the same triangle strip. The first instance (instance U) is shown in blue, the second instance (instance V) is shown in green. The solid lines connect the vertices in the primitives, the dashed lines connect the adjacent vertices.</p>
<p>The following tables show the system-generated values for the instance U.</p>
<table>
<thead>
<tr>
<th>Vertex Data</th>
<th>C,U</th>
<th>D,U</th>
<th>E,U</th>
<th>F,U</th>
<th>G,U</th>
<th>H,U</th>
<th>I,U</th>
<th>J,U</th>
<th>K,U</th>
<th>L,U</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>VertexID</strong></td>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
<td>6</td>
<td>7</td>
<td>8</td>
<td>9</td>
</tr>
<tr>
<td><strong>InstanceID</strong></td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
</tbody>
</table>
<p>Â </p>
<table>
<thead>
<tr>
<th></th>
<th>Value</th>
<th>Value</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>PrimitiveID</strong></td>
<td>0</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td><strong>InstanceID</strong></td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
</tbody>
</table>
<p>Â </p>
<p>The following tables show the system-generated values for the instance V.</p>
<table>
<thead>
<tr>
<th>Vertex Data</th>
<th>C,V</th>
<th>D,V</th>
<th>E,V</th>
<th>F,V</th>
<th>G,V</th>
<th>H,V</th>
<th>I,V</th>
<th>J,V</th>
<th>K,V</th>
<th>L,V</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>VertexID</strong></td>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
<td>6</td>
<td>7</td>
<td>8</td>
<td>9</td>
</tr>
<tr>
<td><strong>InstanceID</strong></td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>Â </p>
<table>
<thead>
<tr>
<th></th>
<th>Value</th>
<th>Value</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>PrimitiveID</strong></td>
<td>0</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td><strong>InstanceID</strong></td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>Â </p>
<p>The input assembler generates the ids (vertex, primitive, and instance); notice also that each instance is given a unique instance id. The data ends with the strip cut, which separates each instance of the triangle strip.</p>
<h2>Related topics</h2>
<!-- raw HTML omitted -->
<p><a href="d3d10-graphics-programming-guide-input-assembler-stage.html">Input-Assembler Stage</a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
