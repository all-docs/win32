<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Performing Memory File I/O</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<p>title: Performing Memory File I/O
description: Performing Memory File I/O
ms.assetid: c0a5c8a0-978f-47d9-8ef0-ad391b9d1e63
keywords:</p>
<ul>
<li>multimedia file I/O,memory</li>
<li>file I/O,memory</li>
<li>input and output (I/O),memory</li>
<li>I/O (input and output),memory</li>
<li>memory I/O</li>
<li>mmioOpen function
ms.topic: article
ms.date: 4/26/2023
ms.custom: UpdateFrequency5</li>
</ul>
<hr />
<h1>Performing Memory File I/O</h1>
<p>[The feature associated with this page, <a href="/windows/win32/multimedia/multimedia-file-i-o">Multimedia File I/O</a>, is a legacy feature. It has been superseded by <a href="/windows/win32/medfound/source-reader">Source Reader</a>. <strong>Source Reader</strong> has been optimized for Windows 10 and Windows 11. Microsoft strongly recommends that new code use <strong>Source Reader</strong> instead of <strong>Multimedia File I/O</strong>, when possible. Microsoft suggests that existing code that uses the legacy APIs be rewritten to use the new APIs if possible.]</p>
<p>The multimedia file I/O services let you treat a block of memory as a file. This can be useful if you already have a file image in memory. Memory files let you reduce the number of special-case conditions in your code because, for I/O purposes, you can treat memory files as if they were disk-based files. You can also use memory files with the clipboard.</p>
<p>As with I/O buffers, memory files can use memory allocated by the application or by the file I/O manager. In addition, memory files can be either expandable or nonexpandable. When the file I/O manager reaches the end of an expandable memory file, it expands the memory file by a predefined increment.</p>
<p>To open a memory file, use the <a href="/windows/win32/api/mmiscapi/nf-mmiscapi-mmioopen"><strong>mmioOpen</strong></a> function with the <em>szFilename</em> parameter set to <strong>NULL</strong> and the MMIO_READWRITE flag set in the <em>dwOpenFlags</em> parameter. Set the <em>lpmmioinfo</em> parameter to point to an <a href="/previous-versions//dd757322(v=vs.85)"><strong>MMIOINFO</strong></a> structure that has been set up as follows:</p>
<ol>
<li>Set the <strong>pIOProc</strong> member to <strong>NULL</strong>.</li>
<li>Set the <strong>fccIOProc</strong> member to FOURCC_MEM.</li>
<li>Set the <strong>pchBuffer</strong> member to point to the memory block. To request that the file I/O manager allocate the memory block, set <strong>pchBuffer</strong> to <strong>NULL</strong>.</li>
<li>Set the <strong>cchBuffer</strong> member to the initial size of the memory block.</li>
<li>Set the <strong>adwInfo</strong> member to the minimum expansion size of the memory block. For a nonexpandable memory file, set <strong>adwInfo</strong> to <strong>NULL</strong>.</li>
<li>Set all other members to zero.</li>
</ol>
<p>There are no restrictions on allocating memory for use as a nonexpandable memory file.</p>
<p>Â </p>
<p>Â </p>
</body>
