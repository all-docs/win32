<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Managing Data Blocks by Polling</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<p>title: Managing Data Blocks by Polling
description: Managing Data Blocks by Polling
ms.assetid: 0a517f1d-4993-49b8-be86-bc63e5687cba
keywords:</p>
<ul>
<li>waveform audio,polling data blocks</li>
<li>audio data blocks,polling</li>
<li>polling audio data blocks</li>
<li>WAVEHDR structure
ms.topic: article
ms.date: 4/26/2023
ms.custom: UpdateFrequency5</li>
</ul>
<hr />
<h1>Managing Data Blocks by Polling</h1>
<p>[The feature associated with this page, <a href="/windows/win32/multimedia/waveform-audio">Waveform Audio</a>, is a legacy feature. It has been superseded by <a href="/windows/win32/coreaudio/wasapi">WASAPI</a> and <a href="/windows/uwp/audio-video-camera/audio-graphs">Audio Graphs</a>. <strong>WASAPI</strong> and <strong>Audio Graphs</strong> have been optimized for Windows 10 and Windows 11. Microsoft strongly recommends that new code use <strong>WASAPI</strong> and <strong>Audio Graphs</strong> instead of <strong>Waveform Audio</strong>, when possible. Microsoft suggests that existing code that uses the legacy APIs be rewritten to use the new APIs if possible.]</p>
<p>In addition to using a callback function, you can poll the <strong>dwFlags</strong> member of a <a href="/windows/win32/api/mmeapi/ns-mmeapi-wavehdr"><strong>WAVEHDR</strong></a> structure to determine when an audio device is finished with a data block. Sometimes it is better to poll <strong>dwFlags</strong> than to wait for another mechanism to receive messages from the drivers. For example, after you call the <a href="/windows/win32/api/mmeapi/nf-mmeapi-waveoutreset"><strong>waveOutReset</strong></a> function to release pending data blocks, you can immediately poll to be sure that the data blocks have been released before calling <a href="/windows/win32/api/mmeapi/nf-mmeapi-waveoutunprepareheader"><strong>waveOutUnprepareHeader</strong></a> and freeing the memory for the data block.</p>
<p>You can use the WHDR_DONE flag to test the <strong>dwFlags</strong> member. As soon as the WHDR_DONE flag is set in the <strong>dwFlags</strong> member of the <strong>WAVEHDR</strong> structure, the driver is finished with the data block.</p>
<p>Â </p>
<p>Â </p>
</body>
