<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Obtaining and Setting the Video Format</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<p>title: Obtaining and Setting the Video Format
description: Obtaining and Setting the Video Format
ms.assetid: 0e6baf24-7a79-45ab-9fc7-69334419956d
keywords:</p>
<ul>
<li>capGetVideoFormat macro</li>
<li>capGetVideoFormatSize macro
ms.topic: article
ms.date: 05/31/2018</li>
</ul>
<hr />
<h1>Obtaining and Setting the Video Format</h1>
<p>The <a href="/windows/win32/api/wingdi/ns-wingdi-bitmapinfo"><strong>BITMAPINFO</strong></a> structure is of variable length to accommodate standard and compressed data formats. Because this structure is of variable length, applications must always query the size of the structure and allocate memory before retrieving the current video format. The following example uses the <a href="/windows/desktop/api/Vfw/nf-vfw-capgetvideoformatsize"><strong>capGetVideoFormatSize</strong></a> macro to retrieve the buffer size and then calls the <a href="/windows/desktop/api/Vfw/nf-vfw-capgetvideoformat"><strong>capGetVideoFormat</strong></a> macro to retrieve the current video format.</p>
<pre lang="C++"><code>LPBITMAPINFO lpbi;
DWORD dwSize;

dwSize = capGetVideoFormatSize(hWndC);
lpbi = GlobalAllocPtr (GHND, dwSize);
capGetVideoFormat(hWndC, lpbi, dwSize); 

// Access the video format and then free the allocated memory.
 
</code></pre>
<p>Applications can use the <a href="/windows/desktop/api/Vfw/nf-vfw-capsetvideoformat"><strong>capSetVideoFormat</strong></a> macro (or the <a href="wm-cap-set-videoformat.html"><strong>WM_CAP_SET_VIDEOFORMAT</strong></a> message) to send a <a href="/windows/win32/api/wingdi/ns-wingdi-bitmapinfo"><strong>BITMAPINFO</strong></a> header structure to the capture window. Because video formats are device specific, your application should check the return value to determine if the format was accepted.</p>
<h2>Related topics</h2>
<!-- raw HTML omitted -->
<p><a href="using-video-capture.html">Using Video Capture</a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
