<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Configuring Compressors and Decompressors</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<p>title: Configuring Compressors and Decompressors
description: Configuring Compressors and Decompressors
ms.assetid: 9cd63470-1591-4de0-b011-d7979539d936
keywords:</p>
<ul>
<li>video compression manager (VCM),configuring compressors</li>
<li>VCM (video compression manager),configuring compressors</li>
<li>ICQueryConfigure macro
ms.topic: article
ms.date: 4/26/2023
ms.custom: UpdateFrequency5</li>
</ul>
<hr />
<h1>Configuring Compressors and Decompressors</h1>
<p>[The feature associated with this page, <a href="/windows/win32/multimedia/video-compression-manager">Video Compression Manager</a>, is a legacy feature. Microsoft strongly recommends that new code does not use this feature.]</p>
<p>The following example uses the <a href="/windows/desktop/api/Vfw/nf-vfw-icqueryconfigure"><strong>ICQueryConfigure</strong></a> macro to demonstrate how to test whether a compressor supports the configuration dialog box and to display it if it does.</p>
<pre lang="C++"><code>// If the compressor handles a configuration dialog box, display it 
// using our application window as the parent window. 

if (ICQueryConfigure(hIC)) ICConfigure(hIC, hwndApp); 
 
</code></pre>
<p>The following example shows how to obtain the state data using the <a href="/windows/desktop/api/Vfw/nf-vfw-icgetstate"><strong>ICGetState</strong></a> macro.</p>
<pre lang="C++"><code>dwStateSize = ICGetStateSize(hIC);    // gets size of buffer required 
h = GlobalAlloc(GHND, dwStateSize);   // allocates buffer 
ICGetState(hIC, (LPVOID)lpData, dwStateSize);  // gets the state data 
 
// Store the state data as required. 
 
</code></pre>
<p>The following example shows how to restore state data using the <a href="/windows/desktop/api/Vfw/nf-vfw-icsetstate"><strong>ICSetState</strong></a> macro. State data restored by applications should not contain any changes to the state data obtained from a driver.</p>
<pre lang="C++"><code>ICSetState(hIC, (LPVOID)lpData, dwStateSize); // sets new state data 
 
</code></pre>
<p>Â </p>
<p>Â </p>
</body>
