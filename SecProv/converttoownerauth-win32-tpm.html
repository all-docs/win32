<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>ConvertToOwnerAuth method of the Win32_Tpm class</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<p>description: Translates a user-provided passphrase input into a 20-byte owner authorization that can be used to interact with the TPM. Methods such as TakeOwnership and ResetAuthLockOut require the resulting owner authorization value.
ms.assetid: 69eed934-1668-495a-b5b7-cd4a87df1ab3
title: ConvertToOwnerAuth method of the Win32_Tpm class
ms.topic: reference
ms.date: 05/31/2018
topic_type:</p>
<ul>
<li>APIRef</li>
<li>kbSyntax
api_name:</li>
<li>Win32_Tpm.ConvertToOwnerAuth
api_type:</li>
<li>COM
api_location:</li>
<li>Win32_tpm.dll</li>
</ul>
<hr />
<h1>ConvertToOwnerAuth method of the Win32_Tpm class</h1>
<p>The <strong>ConvertToOwnerAuth</strong> method of the <a href="win32-tpm.html"><strong>Win32_Tpm</strong></a> class translates a user-provided passphrase input into a 20-byte owner authorization that can be used to interact with the TPM. Methods such as <a href="takeownership-win32-tpm.html"><strong>TakeOwnership</strong></a> and <a href="resetauthlockout-win32-tpm.html"><strong>ResetAuthLockOut</strong></a> require the resulting owner authorization value.</p>
<p>The conversion process follows the specifications from the <a href="https://www.trustedcomputinggroup.org/">Trusted Computing Group</a>.</p>
<h2>Syntax</h2>
<pre lang="mof"><code>uint32 ConvertToOwnerAuth(
  [in]Â Â string OwnerPassPhrase,
  [out]Â string OwnerAuth
);
</code></pre>
<h2>Parameters</h2>
<!-- raw HTML omitted -->
<p><em>OwnerPassPhrase</em> [in]</p>
<!-- raw HTML omitted -->
<p>Type: <strong>string</strong></p>
<p>A string to convert to an owner authorization value. The string can contain any number of alphanumeric characters.</p>
<!-- raw HTML omitted -->
<p><em>OwnerAuth</em> [out]</p>
<!-- raw HTML omitted -->
<p>Type: <strong>string</strong></p>
<p>A string derived from the <em>OwnerPassPhrase</em> parameter. This value is a 20-byte binary value encoded to a 28-byte base64 <strong>null</strong>-terminated string.</p>
<!-- raw HTML omitted -->
<h2>Return value</h2>
<p>Type: <strong>uint32</strong></p>
<p>All TPM errors as well as errors specific to TPM Base Services can be returned.</p>
<p>The following tables lists some of the common return codes.</p>
<table>
<thead>
<tr>
<th>Return code/value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted --><strong>S_OK</strong><!-- raw HTML omitted --> <!-- raw HTML omitted -->0 (0x0)<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td>The method was successful.<!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<p>Â </p>
<h2>Remarks</h2>
<p>A Unicode UTF-16LE encoded string is converted to the 20-byte TPM owner authorization value by taking the SHA-1 hash of the string's binary representation. The <strong>null</strong> termination of the Unicode string is not included in the hash. No salt is used in the SHA-1 hash.</p>
<p>For example, to convert the TPM owner passphrase &quot;1Sample&quot; to a TPM owner authorization value, the SHA-1 hash is taken from the following byte stream:</p>
<p><code>0x31 0x00 0x53 0x00 0x61 0x00 0x6D 0x00 0x70 0x00 0x6C 0x00 0x65 0x00</code></p>
<p>To convert a zero-length passphrase to an owner authorization value, the SHA-1 hash is taken of the <strong>NULL</strong> byte stream.</p>
<p>Managed Object Format (MOF) files contain the definitions for Windows Management Instrumentation (WMI) classes. MOF files are not installed as part of the Windows SDK. They are installed on the server when you add the associated role by using the Server Manager. For more information about MOF files, see <a href="../wmisdk/managed-object-format--mof-.html">Managed Object Format (MOF)</a>.</p>
<h2>Requirements</h2>
<table>
<thead>
<tr>
<th>Requirement</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Minimum supported client<!-- raw HTML omitted --></td>
<td>WindowsÂ Vista [desktop apps only]<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Minimum supported server<!-- raw HTML omitted --></td>
<td>Windows ServerÂ 2008 [desktop apps only]<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Namespace<!-- raw HTML omitted --></td>
<td>Root\CIMV2\Security\MicrosoftTpm<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>MOF<!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted -->Win32_tpm.mof<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
<tr>
<td>DLL<!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted -->Win32_tpm.dll<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<h2>See also</h2>
<!-- raw HTML omitted -->
<p><a href="win32-tpm.html"><strong>Win32_Tpm</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="takeownership-win32-tpm.html"><strong>TakeOwnership</strong></a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
