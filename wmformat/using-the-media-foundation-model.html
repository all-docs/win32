<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Using the Media Foundation Event Model</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<p>title: Using the Media Foundation Event Model
description: Using the Media Foundation Event Model
ms.assetid: c07425dc-25d0-430b-a1f6-6373303a0cc7
keywords:</p>
<ul>
<li>Windows Media Format SDK,DRM Media Foundation event model</li>
<li>Windows Media Format SDK,Media Foundation event model</li>
<li>Windows Media Format SDK,DRM event model</li>
<li>digital rights management (DRM),Media Foundation event model</li>
<li>DRM (digital rights management),Media Foundation event model</li>
<li>digital rights management (DRM),event model</li>
<li>DRM (digital rights management),event model</li>
<li>digital rights management (DRM),IWMDRMEventGenerator interface</li>
<li>DRM (digital rights management),IWMDRMEventGenerator interface</li>
<li>Media Foundation</li>
<li>IWMDRMEventGenerator
ms.topic: article
ms.date: 4/26/2023
ms.custom: UpdateFrequency5</li>
</ul>
<hr />
<h1>Using the Media Foundation Event Model</h1>
<p>[The feature associated with this page, <a href="/windows/win32/wmformat/windows-media-format-11-sdk">Windows Media Format 11 SDK</a>, is a legacy feature. It has been superseded by <a href="/windows/win32/medfound/source-reader">Source Reader</a> and <a href="/windows/win32/medfound/sink-writer">Sink Writer</a>. <strong>Source Reader</strong> and <strong>Sink Writer</strong> have been optimized for Windows 10 and Windows 11. Microsoft strongly recommends that new code use <strong>Source Reader</strong> and <strong>Sink Writer</strong> instead of <strong>Windows Media Format 11 SDK</strong>, when possible. Microsoft suggests that existing code that uses the legacy APIs be rewritten to use the new APIs if possible.]</p>
<p>The asynchronous methods supported by the Windows Media DRM Client Extended APIs use the same event model that is used by the Media Foundation SDK. Each object that supports asynchronous methods implements the <a href="iwmdrmeventgenerator.html"><strong>IWMDRMEventGenerator</strong></a> interface, which can be used to retrieve an event when an asynchronous operation is complete.</p>
<p>The <strong>IWMDRMEventGenerator</strong> interface inherits from the <strong>IMFMediaEventGenerator</strong> interface, which is documented in the Media Foundation SDK documentation.</p>
<p>The example code in the <a href="drm-individualization-example.html">DRM Individualization Example</a> uses the <strong>IMFMediaEventGenerator::GetEvent</strong> method to retrieve events from the queue one at a time. Using <strong>GetEvent</strong> is more straightforward than using <strong>IMFMediaEventGenerator::BeginGetEvent</strong> and <strong>IMFMediaEventGenerator::EndGetEvent</strong> with a callback, which makes the code examples easier to understand. Whether you use <strong>GetEvent</strong> in your code or implement <strong>IMFAsyncCallback</strong> and use <strong>BeginGetEvent</strong> and <strong>EndGetEvent</strong>, the logic to handle the event after it has been received is the same.</p>
<p>Several of the asynchronous methods generate events that contain references to objects that can be used to obtain more detailed status information. In these cases, the generated event has an <strong>IUnknown</strong> pointer as its value, which can be queried to retrieve the status interface. The following list summarizes the relationships between asynchronous calls, generated events, and other interfaces.</p>
<ul>
<li>The <a href="iwmdrmlicensemanagement-backuplicenses.html"><strong>IWMDRMLicenseManagement::BackupLicenses</strong></a> method generates <strong>MEWMDRMLicenseBackupProgress</strong> events with associated <a href="iwmdrmlicensebackuprestorestatus.html"><strong>IWMDRMLicenseBackupRestoreStatus</strong></a> interfaces.</li>
<li>The <a href="iwmdrmlicensemanagement-restorelicenses.html"><strong>IWMDRMLicenseManagement::RestoreLicenses</strong></a> method generates <strong>MEWMDRMLicenseRestoreProgress</strong> events with associated <a href="iwmdrmlicensebackuprestorestatus.html"><strong>IWMDRMLicenseBackupRestoreStatus</strong></a> interfaces.</li>
<li>The <a href="iwmdrmsecurity-performsecurityupdate.html"><strong>IWMDRMSecurity::PerformSecurityUpdate</strong></a> method, when used to perform individualization, generates <strong>MEWMDRMIndividualizationProgress</strong> events with associated <a href="iwmdrmindividualizationstatus.html"><strong>IWMDRMIndividualizationStatus</strong></a> interfaces.</li>
<li>The <a href="iwmdrmlicensemanagement-acquirelicense.html"><strong>IWMDRMLicenseManagement::AcquireLicense</strong></a> method, when used to prepare data for non-silent license acquisition, generates an <strong>MEWMDRMLicenseAcquisitionCompleted</strong> event with an associated <a href="iwmdrmnonsilentlicenseaquisition.html"><strong>IWMDRMNonSilentLicenseAquisition</strong></a> interface.</li>
</ul>
<h2>Related topics</h2>
<!-- raw HTML omitted -->
<p><a href="drm-individualization-example.html"><strong>DRM Individualization Example</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="drm-getting-started.html"><strong>Getting Started</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="https://www.microsoft.com/?ref=go">Media Foundation SDK Documentation</a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
