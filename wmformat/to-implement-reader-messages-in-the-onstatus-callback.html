<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>To Implement Reader Messages in the OnStatus Callback</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<p>title: To Implement Reader Messages in the OnStatus Callback
description: To Implement Reader Messages in the OnStatus Callback
ms.assetid: f0535e02-a283-48bf-9242-ebcc17a6fb66
keywords:</p>
<ul>
<li>Advanced Systems Format (ASF),implementing reader messages</li>
<li>ASF (Advanced Systems Format),implementing reader messages</li>
<li>Advanced Systems Format (ASF),OnStatus callback</li>
<li>ASF (Advanced Systems Format),OnStatus callback</li>
<li>Advanced Systems Format (ASF),asynchronous readers</li>
<li>ASF (Advanced Systems Format),asynchronous readers</li>
<li>asynchronous readers,implementing reader messages</li>
<li>OnStatus callback method,implementing reader messages
ms.topic: article
ms.date: 4/26/2023
ms.custom: UpdateFrequency5</li>
</ul>
<hr />
<h1>To Implement Reader Messages in the OnStatus Callback</h1>
<p>[The feature associated with this page, <a href="/windows/win32/wmformat/windows-media-format-11-sdk">Windows Media Format 11 SDK</a>, is a legacy feature. It has been superseded by <a href="/windows/win32/medfound/source-reader">Source Reader</a> and <a href="/windows/win32/medfound/sink-writer">Sink Writer</a>. <strong>Source Reader</strong> and <strong>Sink Writer</strong> have been optimized for Windows 10 and Windows 11. Microsoft strongly recommends that new code use <strong>Source Reader</strong> and <strong>Sink Writer</strong> instead of <strong>Windows Media Format 11 SDK</strong>, when possible. Microsoft suggests that existing code that uses the legacy APIs be rewritten to use the new APIs if possible.]</p>
<p>To use the asynchronous reader to deliver content from an ASF file, you must implement a minimum of two callback methods, <a href="/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmstatuscallback-onstatus"><strong>IWMStatusCallback::OnStatus</strong></a> and <a href="/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmreadercallback-onsample"><strong>IWMReaderCallback::OnSample</strong></a>. This section describes how to implement <strong>IWMStatusCallback::OnStatus</strong> to receive and respond to status messages sent by the reader. <strong>OnStatus</strong> is used by other objects in the Windows Media Format SDK. For general information about <strong>OnStatus</strong>, see <a href="using-the-onstatus-callback.html">Using the OnStatus Callback</a>.</p>
<p>When using the asynchronous reader, you must trap the following messages in <strong>IWMStatusCallback::OnStatus</strong>.</p>
<table>
<thead>
<tr>
<th>Status message</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>WMT_OPENED</td>
<td>Sent when file opening operations are complete.</td>
</tr>
<tr>
<td>WMT_CLOSED</td>
<td>Sent when file closing operations are complete.</td>
</tr>
</tbody>
</table>
<p>Â </p>
<p>You should use the status messages listed above to control execution of your reading application. For example, you must wait until receiving the <strong>WMT_OPENED</strong> message to start the reader or call other methods that require the reader to have a file ready. Frequently, applications built with the asynchronous reader use an event to signal the completion of asynchronous calls and proceed with processing. For more information about using events for signaling completion of operations, see <a href="using-events-with-asynchronous-calls.html">Using Events with Asynchronous Calls</a>.</p>
<p>Many other messages are sent to <strong>OnStatus</strong> by the reader object to enable the application to respond to the status of reading operations. The possible status message values are defined in the <a href="/previous-versions/windows/desktop/api/Wmsdkidl/ne-wmsdkidl-wmt_status"><strong>WMT_STATUS</strong></a> enumeration type.</p>
<h2>Related topics</h2>
<!-- raw HTML omitted -->
<p><a href="/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmstatuscallback-onstatus"><strong>IWMStatusCallback::OnStatus</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="reading-files-with-the-asynchronous-reader.html"><strong>Reading Files with the Asynchronous Reader</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="using-the-onstatus-callback.html"><strong>Using the OnStatus Callback</strong></a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
