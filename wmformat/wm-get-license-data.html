<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>WM_GET_LICENSE_DATA structure</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<p>title: WM_GET_LICENSE_DATA structure (Drmexternals.h)
description: The WM_GET_LICENSE_DATA structure contains information about where to acquire a DRM license.
ms.assetid: 7e8053d5-f3f5-4519-97f5-6dbd89982f3a
keywords:</p>
<ul>
<li>WM_GET_LICENSE_DATA structure windows Media Format
topic_type:</li>
<li>apiref
api_name:</li>
<li>WM_GET_LICENSE_DATA
api_location:</li>
<li>Drmexternals.h
api_type:</li>
<li>HeaderDef
ms.topic: reference
ms.date: 4/26/2023
ms.custom: UpdateFrequency5</li>
</ul>
<hr />
<h1>WM_GET_LICENSE_DATA structure</h1>
<p>[The feature associated with this page, <a href="/windows/win32/wmformat/windows-media-format-11-sdk">Windows Media Format 11 SDK</a>, is a legacy feature. It has been superseded by <a href="/windows/win32/medfound/source-reader">Source Reader</a> and <a href="/windows/win32/medfound/sink-writer">Sink Writer</a>. <strong>Source Reader</strong> and <strong>Sink Writer</strong> have been optimized for Windows 10 and Windows 11. Microsoft strongly recommends that new code use <strong>Source Reader</strong> and <strong>Sink Writer</strong> instead of <strong>Windows Media Format 11 SDK</strong>, when possible. Microsoft suggests that existing code that uses the legacy APIs be rewritten to use the new APIs if possible.]</p>
<p>The <strong>WM_GET_LICENSE_DATA</strong> structure contains information about where to acquire a <a href="wmformat-glossary.html"><em>DRM</em></a> <a href="wmformat-glossary.html"><em>license</em></a>.</p>
<h2>Syntax</h2>
<pre lang="C++"><code>typedef struct _WMGetLicenseData {
  DWORD   dwSize;
  HRESULT hr;
  WCHAR   *wszURL;
  WCHAR   *wszLocalFilename;
  BYTE    *pbPostData;
  DWORD   dwPostDataSize;
} WM_GET_LICENSE_DATA;
</code></pre>
<h2>Members</h2>
<!-- raw HTML omitted -->
<p><strong>dwSize</strong></p>
<!-- raw HTML omitted -->
<p><strong>DWORD</strong> containing the size of the <strong>WM_GET_LICENSE_DATA</strong> structure, in bytes.</p>
<!-- raw HTML omitted -->
<p><strong>hr</strong></p>
<!-- raw HTML omitted -->
<p><strong>HRESULT</strong> return code.</p>
<!-- raw HTML omitted -->
<p><strong>wszURL</strong></p>
<!-- raw HTML omitted -->
<p>Wide-character null-terminated string containing the license acquisition URL. Use this string and the <strong>pbPostData</strong> string in non-silent license acquisition.</p>
<!-- raw HTML omitted -->
<p><strong>wszLocalFilename</strong></p>
<!-- raw HTML omitted -->
<p>Wide-character null-terminated string containing a local HTML page that is generated by the DRM component. When this string is loaded into a browser, it automatically redirects the HTTP request to the license acquisition URL, along with the necessary post data. Use of this local URL is now deprecated. The recommended approach is to use the <strong>wszURL</strong> and <strong>pbPostData</strong> strings.</p>
<!-- raw HTML omitted -->
<p><strong>pbPostData</strong></p>
<!-- raw HTML omitted -->
<p>Pointer to a byte array containing the data to be posted to the license acquisition URL. You must add the following string to the beginning of the <strong>pbPostData</strong> string: &quot;nonsilent=1&amp;challenge=&quot;. The resulting string should then be appended to <strong>wszURL</strong> when you form the HTTP request.</p>
<!-- raw HTML omitted -->
<p><strong>dwPostDataSize</strong></p>
<!-- raw HTML omitted -->
<p><strong>DWORD</strong> that indicates the size of <strong>pbPostData</strong> without the &quot;nonsilent=1&amp;challenge=&quot; string referred to in <strong>pbPostData</strong>.</p>
<!-- raw HTML omitted -->
<h2>Remarks</h2>
<p>This filled-in structure is returned in the <em>pValue</em> parameter of the <a href="/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmstatuscallback-onstatus"><strong>IWMStatusCallback::OnStatus</strong></a> method if <strong>WMT_STATUS</strong> equals <strong>WMT_NO_RIGHTS_EX</strong> or <strong>WMT_ACQUIRE_LICENSE</strong>. For WMT_NO_RIGHTS_EX events, the <strong>hr</strong> member will be NS_E_LICENSE_REQUIRED, NS_E_LICENSE_OUTOFDATE, or NS_E_LICENSE_INCORRECT_RIGHTS. Any of these errors indicates that a new license must be acquired by navigating to the URL in the <strong>wszURL</strong> member.</p>
<p>For WMT_ACQUIRE_LICENSE events, the <strong>hr</strong> member will pass the SUCCEEDED macro if a license was successfully acquired. If this event is received after an attempt at silent acquisition, and <strong>hr</strong> equals NS_E_DRM_LICENSE_NOTACQUIRED, it indicates that only non-silent acquisition is supported by the license server for this license.</p>
<p>The Audioplayer sample application demonstrates how to correctly use the information returned in this structure.</p>
<h2>Requirements</h2>
<table>
<thead>
<tr>
<th>Requirement</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Minimum supported client<!-- raw HTML omitted --></td>
<td>Windows 2000 Professional [desktop apps only]<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Minimum supported server<!-- raw HTML omitted --></td>
<td>Windows 2000 Server [desktop apps only]<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Version<!-- raw HTML omitted --></td>
<td>Windows Media Format 7 SDK, or later versions of the SDK<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Header<!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted -->Drmexternals.h<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<h2>See also</h2>
<!-- raw HTML omitted -->
<p><a href="/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmdrmreader-acquirelicense"><strong>IWMDRMReader::AcquireLicense</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="structures.html"><strong>Structures</strong></a></p>
<!-- raw HTML omitted -->
</body>
