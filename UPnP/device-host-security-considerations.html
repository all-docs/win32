<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Device Host Security Considerations</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>title: Device Host Security Considerations
description: Using the device host creates security issues.
ms.assetid: 7cb445ea-5df4-4030-babd-62527b4d6210
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>Device Host Security Considerations</h1>
<p>Using the device host creates security issues because of the following:</p>
<ul>
<li>Devices hosted on a computer running Windows XP sends announcements on all networks.</li>
<li>Devices hosted on a computer running Windows XP allow control of devices from all networks.</li>
</ul>
<p>This increases the risk to home consumers, because devices such as a media player or a bridged lighting or HVAC system hosted on a computer running Windows XP are visible and can be controlled from control points outside the home.</p>
<p>When you are creating a hosted device, you need to take into consideration some security issues.</p>
<ul>
<li>To reduce the scope of discovery and attack of UPnP-based devices, the TTL of all SSDP messages is 1. This means that a registered device is only discovered by control points on the same network. You can configure a higher TTL in the registry.</li>
<li>Registering a non-running device requires pre-registering the device .dll with COM, which requires administrator privilege.</li>
<li>Registering a running device requires Administrator, Local Service, or Local System privilege.</li>
<li>When the device host is started, it is run as <a href="/windows/desktop/Services/localservice-account">LocalService</a>. This gives the device the ability to generate audits and read the <strong>HKEY_LOCAL_MACHINE</strong> registry key. The device does have access to <strong>HKEY_CURRENT_USER</strong>. The LocalService account can use resources to which LocalService has been granted access, as well as those that grant access to AuthenticatedUser. The device has restricted file system access.</li>
<li>The file system ACLs must be updated to allow <a href="/windows/desktop/Services/localservice-account">LocalService</a> access to the resource directory.</li>
<li>If your device must have more security access, you can create your own process for the device and register it by using <a href="/windows/desktop/api/Upnphost/nf-upnphost-iupnpregistrar-registerrunningdevice"><strong>IUPnPRegistrar::RegisterRunningDevice</strong></a>.</li>
</ul>
<p>Â </p>
<p>Â </p>
</body>
