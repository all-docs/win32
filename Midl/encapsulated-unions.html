<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Encapsulated Unions</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<p>title: Encapsulated Unions
description: A union that is contained with its discriminant in a structure within is an encapsulated union.
ms.assetid: d32c18b4-b2f6-4ce2-94fe-a495a3c15d14
keywords:</p>
<ul>
<li>data types MIDL , encapsulated unions
ms.topic: article
ms.date: 05/31/2018</li>
</ul>
<hr />
<h1>Encapsulated Unions</h1>
<p>A union that is contained with its discriminant in a structure within is an encapsulated union. The encapsulated union is indicated by the presence of the <a href="switch.html"><strong>switch</strong></a> keyword. This type of union is so named because the MIDL compiler automatically encapsulates the union and its discriminant in a structure for transmission during a remote procedure call.</p>
<p>If the union tag is missing (U1_TYPE in the example above), the compiler will generate the structure with the union field named <em>tagged_union</em>.</p>
<p>The shape of unions must be the same across platforms to ensure interconnectivity.</p>
<p>For a description of the form of an encapsulated union, see <a href="union.html"><strong>union</strong></a>.</p>
<h2>Examples</h2>
<pre lang="syntax"><code>typedef union _S1_TYPE switch (long l1) U1_TYPE 
{ 
    case 1024: 
        float f1; 
    case 2048: 
        double d2; 
} S1_TYPE; 
 
/* in generated header file */ 
typedef struct _S1_TYPE 
{ 
    long l1; 
    union 
    { 
        float f1; 
        double d2; 
    } U1_TYPE; 
} S1_TYPE;
</code></pre>
<p>For related information, see <a href="midl-base-types.html">MIDL Base Types</a>, <a href="char-idl.html"><strong>char</strong></a>, <strong>[</strong><a href="context-handle.html"><strong>context_handle</strong></a><strong>]</strong>, <a href="enum.html"><strong>enum</strong></a>, <strong>[</strong><a href="first-is.html"><strong>first_is</strong></a><strong>]</strong>, <strong>[</strong><a href="handle.html"><strong>handle</strong></a><strong>]</strong>, <strong>[</strong><a href="ignore.html"><strong>ignore</strong></a><strong>]</strong>, <a href="int.html"><strong>int</strong></a>, <strong>[</strong><a href="ignore.html"><strong>ignore</strong></a><strong>]</strong>, <strong>[</strong><a href="last-is.html"><strong>last_is</strong></a><strong>]</strong>, <strong>[</strong><a href="length-is.html"><strong>length_is</strong></a><strong>]</strong>, <strong>[</strong><a href="max-is.html"><strong>max_is</strong></a><strong>]</strong>, <strong>[</strong><a href="ms-union-attrib.html"><strong>ms_union</strong></a><strong>]</strong>, <a href="nonencapsulated-unions.html">Nonencapsulated Unions</a>, <strong>[</strong><a href="ptr.html"><strong>ptr</strong></a><strong>]</strong>, <strong>[</strong><a href="ref.html"><strong>ref</strong></a><strong>]</strong>, <strong>[</strong><a href="size-is.html"><strong>size_is</strong></a><strong>]</strong>, <strong>[</strong><a href="string.html"><strong>string</strong></a><strong>]</strong>, <a href="struct.html"><strong>struct</strong></a>, <a href="switch.html"><strong>switch</strong></a>, <strong>[</strong><a href="switch-is.html"><strong>switch_is</strong></a><strong>]</strong>, <strong>[</strong><a href="switch-type.html"><strong>switch_type</strong></a><strong>]</strong>, <strong>[</strong><a href="transmit-as.html"><strong>transmit_as</strong></a><strong>]</strong>, <a href="union.html"><strong>union</strong></a>, and <strong>[</strong><a href="unique.html"><strong>unique</strong></a><strong>]</strong></p>
<p>Â </p>
<p>Â </p>
</body>
