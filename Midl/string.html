<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>string attribute</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<p>title: string attribute
description: The \ string\ attribute indicates that the one-dimensional char, wchar_t, byte (or equivalent) array or the pointer to such an array must be treated as a string.
ms.assetid: 379cd59e-7540-4188-9b5c-6c25a8928999
keywords:</p>
<ul>
<li>string attribute MIDL
topic_type:</li>
<li>apiref
api_name:</li>
<li>string
api_type:</li>
<li>NA
ms.topic: reference
ms.date: 05/31/2018</li>
</ul>
<hr />
<h1>string attribute</h1>
<p>The <strong>[string]</strong> attribute indicates that the one-dimensional <a href="char-idl.html"><strong>char</strong></a>, <a href="wchar-t.html"><strong>wchar_t</strong></a>, <a href="byte.html"><strong>byte</strong></a> (or equivalent) array or the pointer to such an array must be treated as a string. The string can also be an array (or a pointer to an array) of constructs whose fields are all of the type <strong>byte</strong>.</p>
<pre lang="syntax"><code>typedef [ string [[ , type-attribute-list ]] ] type-specifier declarator-list; 

typedef [ struct | union ] 
{
    [ string [[ , field-attribute-list ]] ] type-specifier declarator-list;
    ...
};

[ string [[ , function-attribute-list ]] ] type-specifier ptr-decl function-name(
  [[ [ parameter-attribute-list ] ]] type-specifier [[standard-declarator]]
  , ...);

[[ [ function-attribute-list ] ]] type-specifier [[ptr-decl]] function-name(
    [ string [[ , parameter-attribute-list ]] ] type-specifier [[standard-declarator]]
  , ...);
</code></pre>
<h2>Parameters</h2>
<!-- raw HTML omitted -->
<p><em>type-attribute-list</em></p>
<!-- raw HTML omitted -->
<p>Specifies one or more attributes that apply to a type. Valid type attributes include <strong>[</strong><a href="handle.html"><strong>handle</strong></a><strong>]</strong>, <strong>[</strong><a href="switch-type.html"><strong>switch_type</strong></a><strong>]</strong>, <strong>[</strong><a href="transmit-as.html"><strong>transmit_as</strong></a><strong>]</strong>; the pointer attribute <strong>[</strong><a href="ref.html"><strong>ref</strong></a><strong>]</strong>, <strong>[</strong><a href="unique.html"><strong>unique</strong></a><strong>]</strong>, or <strong>[</strong><a href="ptr.html"><strong>ptr</strong></a><strong>]</strong>; and the usage attributes <strong>[</strong><a href="context-handle.html"><strong>context_handle</strong></a><strong>]</strong>, <strong>[string]</strong>, and <strong>[</strong><a href="ignore.html"><strong>ignore</strong></a><strong>]</strong>. Separate multiple attributes with commas.</p>
<!-- raw HTML omitted -->
<p><em>type-specifier</em></p>
<!-- raw HTML omitted -->
<p>Specifies a <a href="midl-base-types.html">base type</a>, <a href="struct.html"><strong>struct</strong></a> type, or type identifier. An optional storage specification can precede <em>type-specifier</em>.</p>
<!-- raw HTML omitted -->
<p><em>standard-declarator</em></p>
<!-- raw HTML omitted -->
<p>Specifies a standard C declarator, such as an identifier, a pointer declarator, or an array declarator. For more information, see <a href="array-and-sized-pointer-attributes.html">Array and Sized-Pointer Attributes</a>, <a href="arrays-1.html"><strong>arrays</strong></a>., and <a href="/windows/desktop/Rpc/arrays-and-pointers">Arrays and Pointers</a>.</p>
<!-- raw HTML omitted -->
<p><em>declarator-list</em></p>
<!-- raw HTML omitted -->
<p>Specifies standard C declarators, such as identifiers, pointer declarators, and array declarators. For more information, see <a href="array-and-sized-pointer-attributes.html">Array and Sized-Pointer Attributes</a>, <a href="arrays-1.html"><strong>arrays</strong></a>., and <a href="/windows/desktop/Rpc/arrays-and-pointers">Arrays and Pointers</a>. The <em>declarator-list</em> consists of one or more declarators separated by commas. The parameter-name identifier in the function declarator is optional.</p>
<!-- raw HTML omitted -->
<p><em>field-attribute-list</em></p>
<!-- raw HTML omitted -->
<p>Specifies zero or more field attributes that apply to the structure, union member, or function parameter. The two valid field attributes are <strong>[</strong><a href="max-is.html"><strong>max_is</strong></a><strong>]</strong> and <strong>[</strong><a href="size-is.html"><strong>size_is</strong></a><strong>]</strong>; the usage attributes <strong>[string]</strong>, <strong>[ignore]</strong>, and <strong>[context_handle]</strong>, the pointer attribute <strong>[</strong><a href="ref.html"><strong>ref</strong></a><strong>]</strong>, <strong>[unique]</strong>, or <strong>[</strong><a href="ptr.html"><strong>ptr</strong></a><strong>]</strong>, and the union attribute <strong>[switch_type]</strong>. Separate multiple field attributes with commas.</p>
<!-- raw HTML omitted -->
<p><em>function-attribute-list</em></p>
<!-- raw HTML omitted -->
<p>Specifies zero or more attributes that apply to the function. Valid function attributes are <strong>[</strong><a href="callback.html"><strong>callback</strong></a><strong>]</strong>, <strong>[</strong><a href="local.html"><strong>local</strong></a><strong>]</strong>; the pointer attribute <strong>[ref]</strong>, <strong>[unique]</strong>, or <strong>[ptr]</strong>; and the usage attributes <strong>[string]</strong>, <strong>[ignore]</strong>, and <strong>[context_handle]</strong>.</p>
<!-- raw HTML omitted -->
<p><em>ptr-decl</em></p>
<!-- raw HTML omitted -->
<p>Specifies an optional pointer declarator to which the <strong>[string]</strong> attribute applies. A pointer declarator is the same as the pointer declarator used in C; it is constructed from the * designator, modifiers such as <strong>far</strong>, and the qualifier <a href="const.html"><strong>const</strong></a>.</p>
<!-- raw HTML omitted -->
<p><em>function-name</em></p>
<!-- raw HTML omitted -->
<p>Specifies the name of the remote procedure.</p>
<!-- raw HTML omitted -->
<p><em>parameter-attribute-list</em></p>
<!-- raw HTML omitted -->
<p>Consists of zero or more attributes appropriate for the specified parameter type. Parameter attributes can take the directional attributes <strong>[in]</strong> and <strong>[out]</strong>; the field attributes <strong>[</strong><a href="max-is.html"><strong>max_is</strong></a><strong>]</strong> and <strong>[</strong><a href="size-is.html"><strong>size_is</strong></a><strong>]</strong>; the pointer attribute <strong>[ref]</strong>, <strong>[unique]</strong>, or <strong>[ptr]</strong>; and the usage attributes <strong>[context_handle]</strong> and <strong>[string]</strong>. The usage attribute <strong>[ignore]</strong> cannot be used as a parameter attribute. Separate multiple attributes with commas.</p>
<!-- raw HTML omitted -->
<h2>Remarks</h2>
<p>If the <strong>[string]</strong> attribute is used with an array whose bounds are determined at run time, you must also specify a <strong>[size_is]</strong> or <strong>[max_is]</strong> attribute, as in the following example:</p>
<pre lang="syntax"><code>/* a string that can hold up to MAX_STRING_LENGTH characters */
typedef [string, max_is(MAX_STRING_LENGTH)] char line[];
</code></pre>
<p>The <strong>[string]</strong> attribute cannot be used with attributes that specify the range of transmitted elements, such as <strong>[first_is]</strong>, <strong>[last_is]</strong>, and <strong>[length_is]</strong>.</p>
<p>When used on multidimensional arrays, the <strong>[string]</strong> attribute applies to the rightmost array.</p>
<p>To define a counted string, do not use the <strong>[string]</strong> attribute. Use a character array or character-based pointer such as the following:</p>
<pre lang="syntax"><code>typedef struct 
{ 
    unsigned short size; 
    unsigned short length; 
    [size_is(size), length_is(length)] char string[*]; 
} counted_string;
</code></pre>
<p>The <strong>[string]</strong> attribute specifies that the stub should use a language-supplied method to determine the length of strings.</p>
<p>When declaring strings in C, you must allocate space for an extra character that marks the end of the string.</p>
<h2>Examples</h2>
<pre lang="syntax"><code>/* a string type that can hold up to 80 characters */ 
typedef [string] char line[81]; 
 
HRESULT Proc1([in, string] char * pszName);
</code></pre>
<h2>See also</h2>
<!-- raw HTML omitted -->
<p><a href="arrays-1.html"><strong>arrays</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="midl-base-types.html">MIDL Base Types</a></p>
<!-- raw HTML omitted -->
<p><a href="callback.html"><strong>callback</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="char-idl.html"><strong>char</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="const.html"><strong>const</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="context-handle.html"><strong>context_handle</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="enum.html"><strong>enum</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="first-is.html"><strong>first_is</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="handle.html"><strong>handle</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="interface-definition-idl-file.html">Interface Definition (IDL) File</a></p>
<!-- raw HTML omitted -->
<p><a href="ignore.html"><strong>ignore</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="last-is.html"><strong>last_is</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="length-is.html"><strong>length_is</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="local.html"><strong>local</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="max-is.html"><strong>max_is</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="pointer-default.html"><strong>pointer_default</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="ptr.html"><strong>ptr</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="ref.html"><strong>ref</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="size-is.html"><strong>size_is</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="struct.html"><strong>struct</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="switch-type.html"><strong>switch_type</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="transmit-as.html"><strong>transmit_as</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="union.html"><strong>union</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="unique.html"><strong>unique</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="wchar-t.html"><strong>wchar_t</strong></a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
