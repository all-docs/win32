<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>encode attribute</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<p>title: encode attribute
description: The \ encode\ ACF attribute specifies that a procedure or a data type needs serialization support.
ms.assetid: 2661021d-8a26-4216-935b-ca40b6f8b9ec
keywords:</p>
<ul>
<li>encode attribute MIDL
topic_type:</li>
<li>apiref
api_name:</li>
<li>encode
api_type:</li>
<li>NA
ms.topic: reference
ms.date: 05/31/2018</li>
</ul>
<hr />
<h1>encode attribute</h1>
<p>The <strong>[encode]</strong> ACF attribute specifies that a procedure or a data type needs serialization support.</p>
<pre lang="syntax"><code>[ 
    encode 
    [ , interface-attribute-list] 
] 
interface interface-name
{
    interface-definition
}

[ encode [ , op-attribute-list] ] proc-name

typedef [encode [ , type-attribute-list] ] type-name
</code></pre>
<h2>Parameters</h2>
<!-- raw HTML omitted -->
<p><em>interface-attribute-list</em></p>
<!-- raw HTML omitted -->
<p>Specifies other attributes that apply to the interface as a whole.</p>
<!-- raw HTML omitted -->
<p><em>interface-name</em></p>
<!-- raw HTML omitted -->
<p>Specifies the name of the interface.</p>
<!-- raw HTML omitted -->
<p><em>interface-definition</em></p>
<!-- raw HTML omitted -->
<p>Specifies IDL statements which form the definition of the interface.</p>
<!-- raw HTML omitted -->
<p><em>op-attribute-list</em></p>
<!-- raw HTML omitted -->
<p>Specifies other operational attributes that apply to the procedure such as <strong>[</strong><a href="decode.html"><strong>decode</strong></a><strong>]</strong>.</p>
<!-- raw HTML omitted -->
<p><em>proc-name</em></p>
<!-- raw HTML omitted -->
<p>Specifies the name of the procedure.</p>
<!-- raw HTML omitted -->
<p><em>type-attribute-list</em></p>
<!-- raw HTML omitted -->
<p>Specifies other attributes that apply to the type such as <strong>[</strong><a href="decode.html"><strong>decode</strong></a><strong>]</strong> and <strong>[</strong><a href="allocate.html"><strong>allocate</strong></a><strong>]</strong>.</p>
<!-- raw HTML omitted -->
<p><em>type-name</em></p>
<!-- raw HTML omitted -->
<p>Specifies a type defined in the IDL file.</p>
<!-- raw HTML omitted -->
<h2>Remarks</h2>
<p>The <strong>[encode]</strong> attribute causes the MIDL compiler to generate code that an application can use to serialize data into a buffer. The <strong>[</strong><a href="decode.html"><strong>decode</strong></a><strong>]</strong> attribute generates the code for unmarshaling data from a buffer.</p>
<p>Use the <strong>[encode]</strong> and <strong>[</strong><a href="decode.html"><strong>decode</strong></a><strong>]</strong> attributes in an ACF to generate serialization code for procedures or types defined in the IDL file of an interface. When used as an interface attribute, <strong>[encode]</strong> applies to all the types and procedures defined in the IDL file. When used as an operational attribute, <strong>[encode]</strong> applies only to the specified procedure. When used as a type attribute, <strong>[encode]</strong> applies only to the specified type.</p>
<p>When the <strong>[encode]</strong> or <strong>[</strong><a href="decode.html"><strong>decode</strong></a><strong>]</strong> attribute is applied to a procedure, the MIDL compiler generates a serialization stub in a similar fashion as remote stubs are generated for remote routines. A procedure can be either a remote or a serializing procedure, but it cannot be both. The prototype of the generated routine is sent to the STUB.H file while the stub itself goes into the STUB_C.C file.</p>
<p>The MIDL compiler generates two functions for each type the <strong>[encode]</strong> attribute applies to, and one additional function for each type the <strong>[</strong><a href="decode.html"><strong>decode</strong></a><strong>]</strong> attribute applies to. For example, for a user-defined type named MyType, the compiler generates code for the MyType_Encode, MyType_Decode, and MyType_AlignSize functions. For these functions, the compiler writes prototypes to STUB.H and source code to STUB_C.C.</p>
<p>For additional information about serialization handles and encoding or decoding data, see <a href="/windows/desktop/Rpc/serialization-services">Serialization Services</a>.</p>
<h2>Examples</h2>
<pre lang="syntax"><code>/* 
    ACF file example; 
    Assumes MyType1, MyType2, MyType3, MyProc1, MyProc2, MyProc3 defined 
    in IDL file  
    MyType1, MyType2, MyProc1, MyProc2 have encode and decode 
    serialization support 
    MyType3 and MyProc3 have encode serialization support only 
*/ 
[ 
    encode, 
    implicit_handle(handle_t bh) 
]    
interface regress 
{ 
    typedef [ decode ] MyType1; 
    typedef [ encode, decode ] MyType2; 
    [ decode ] MyProcc1(); 
    [ encode ] MyProc2(); 
}
</code></pre>
<h2>See also</h2>
<!-- raw HTML omitted -->
<p><a href="application-configuration-file-acf-.html">Application Configuration File (ACF)</a></p>
<!-- raw HTML omitted -->
<p><a href="allocate.html"><strong>allocate</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="decode.html"><strong>decode</strong></a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
