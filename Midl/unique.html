<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>unique attribute</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<p>title: unique attribute
description: The \ unique\ attribute specifies a unique pointer.
ms.assetid: 0d668148-e65a-478f-9e47-2528d3caa84c
keywords:</p>
<ul>
<li>unique attribute MIDL
topic_type:</li>
<li>apiref
api_name:</li>
<li>unique
api_type:</li>
<li>NA
ms.topic: reference
ms.date: 05/31/2018</li>
</ul>
<hr />
<h1>unique attribute</h1>
<p>The <strong>[unique]</strong> attribute specifies a unique pointer.</p>
<pre lang="syntax"><code>pointer_default(unique)

typedef [ unique [[ , type-attribute-list ]] ] type-specifier declarator-list; 

typedef struct-or-union-declarator 
{
    [ unique [[ , field-attribute-list ]] ] type-specifier declarator-list;
    ...}

[ unique [[ , function-attribute-list ]] ] type-specifier ptr-decl function-name(
    [[ [ parameter-attribute-list ] ]] type-specifier [[declarator]]
    , ...);

[[ [ function-attribute-list ] ]] type-specifier [[ptr-decl]] function-name(
    [ unique [[ , parameter-attribute-list ]] ] type-specifier [[declarator]]
    , ...);
</code></pre>
<h2>Parameters</h2>
<!-- raw HTML omitted -->
<p><em>type-attribute-list</em></p>
<!-- raw HTML omitted -->
<p>Specifies one or more attributes that apply to the type. Valid type attributes include <strong>[</strong><a href="handle.html"><strong>handle</strong></a><strong>]</strong>, <strong>[</strong><a href="switch-type.html"><strong>switch_type</strong></a><strong>]</strong>, <strong>[</strong><a href="transmit-as.html"><strong>transmit_as</strong></a><strong>]</strong>; the pointer attribute <strong>[</strong><a href="ref.html"><strong>ref</strong></a><strong>]</strong>, <strong>[unique]</strong>, or <strong>[</strong><a href="ptr.html"><strong>ptr</strong></a><strong>]</strong>; and the usage attributes <strong>[</strong><a href="context-handle.html"><strong>context_handle</strong></a><strong>]</strong>, <strong>[</strong><a href="string.html"><strong>string</strong></a><strong>]</strong>, and <strong>[</strong><a href="ignore.html"><strong>ignore</strong></a><strong>]</strong>. Separate multiple attributes with commas.</p>
<!-- raw HTML omitted -->
<p><em>type-specifier</em></p>
<!-- raw HTML omitted -->
<p>Specifies a <a href="midl-base-types.html">base type</a>, <a href="struct.html"><strong>struct</strong></a>, <a href="union.html"><strong>union</strong></a>, <a href="enum.html"><strong>enum</strong></a> type, or type identifier. An optional storage specification can precede <em>type-specifier</em>.</p>
<!-- raw HTML omitted -->
<p><em>declarator and declarator-list</em></p>
<!-- raw HTML omitted -->
<p>Specifies standard C declarators, such as identifiers, pointer declarators, and array declarators. For more information, see <a href="array-and-sized-pointer-attributes.html">Array and Sized-Pointer Attributes</a>, <a href="arrays-1.html"><strong>arrays</strong></a>., and <a href="/windows/desktop/Rpc/arrays-and-pointers">Arrays and Pointers</a>. The <em>declarator-list</em> consists of one or more declarators separated by commas. The parameter-name identifier in the function declarator is optional.</p>
<!-- raw HTML omitted -->
<p><em>struct-or-union-declarator</em></p>
<!-- raw HTML omitted -->
<p>Specifies a MIDL <a href="struct.html"><strong>struct</strong></a> or <a href="union.html"><strong>union</strong></a> declarator.</p>
<!-- raw HTML omitted -->
<p><em>field-attribute-list</em></p>
<!-- raw HTML omitted -->
<p>Specifies zero or more field attributes that apply to the structure member, union member, or function parameter. Valid field attributes include <strong>[</strong><a href="first-is.html"><strong>first_is</strong></a><strong>]</strong>, <strong>[</strong><a href="last-is.html"><strong>last_is</strong></a><strong>]</strong>, <strong>[</strong><a href="length-is.html"><strong>length_is</strong></a><strong>]</strong>, <strong>[</strong><a href="max-is.html"><strong>max_is</strong></a><strong>]</strong>, <strong>[</strong><a href="size-is.html"><strong>size_is</strong></a><strong>]</strong>; the usage attributes <strong>[string]</strong>, <strong>[ignore]</strong>, and <strong>[context_handle]</strong>; the pointer attribute <strong>[ref]</strong>, <strong>[unique]</strong>, or <strong>[ptr]</strong>; and the union attribute <strong>[switch_type]</strong>. Separate multiple field attributes with commas.</p>
<!-- raw HTML omitted -->
<p><em>function-attribute-list</em></p>
<!-- raw HTML omitted -->
<p>Specifies zero or more attributes that apply to the function. Valid function attributes are <strong>[</strong><a href="callback.html"><strong>callback</strong></a><strong>]</strong>, <strong>[</strong><a href="local.html"><strong>local</strong></a><strong>]</strong>; the pointer attribute <strong>[ref]</strong>, <strong>[unique]</strong>, or <strong>[ptr]</strong>; and the usage attributes <strong>[string]</strong>, <strong>[ignore]</strong>, and <strong>[context_handle]</strong>.</p>
<!-- raw HTML omitted -->
<p><em>ptr-decl</em></p>
<!-- raw HTML omitted -->
<p>Specifies at least one pointer declarator to which the <strong>[unique]</strong> attribute applies. A pointer declarator is the same as the pointer declarator used in C; it is constructed from the * designator, modifiers such as <strong>far</strong>, and the qualifier <a href="const.html"><strong>const</strong></a>.</p>
<!-- raw HTML omitted -->
<p><em>function-name</em></p>
<!-- raw HTML omitted -->
<p>Specifies the name of the remote procedure.</p>
<!-- raw HTML omitted -->
<p><em>parameter-attribute-list</em></p>
<!-- raw HTML omitted -->
<p>Consists of zero or more attributes appropriate for the specified parameter type. Parameter attributes can take the directional attributes <strong>[in]</strong> and <strong>[out]</strong>; the field attributes <strong>[first_is]</strong>, <strong>[last_is]</strong>, <strong>[length_is]</strong>, <strong>[max_is]</strong>, <strong>[size_is]</strong>, and <strong>[switch_type]</strong>; the pointer attribute <strong>[ref]</strong>, <strong>unique</strong>, or <a href="ptr.html"><strong>ptr</strong></a>; and the usage attributes <strong>[context_handle]</strong> and <strong>[string]</strong>. The usage attribute <strong>[ignore]</strong> cannot be used as a parameter attribute. Separate multiple attributes with commas.</p>
<!-- raw HTML omitted -->
<h2>Remarks</h2>
<p>Pointer attributes can be applied as a type attribute; as a field attribute that applies to a structure member, union member, or parameter; or as a function attribute that applies to the function return type. The pointer attribute can also appear with the <strong>[</strong><a href="pointer-default.html"><strong>pointer_default</strong></a><strong>]</strong> keyword.</p>
<p>A unique pointer has the following characteristics:</p>
<ul>
<li>Can have the value <strong>NULL</strong>.</li>
<li>Can change during a call from <strong>NULL</strong> to non-<strong>NULL</strong>, from non-<strong>NULL</strong> to <strong>NULL</strong>, or from one non-<strong>NULL</strong> value to another.</li>
<li>Can allocate new memory on the client. When the unique pointer changes from <strong>NULL</strong> to non-<strong>NULL</strong>, data returned from the server is written into new storage.</li>
<li>Can use existing memory on the client without allocating new memory. When a unique pointer changes during a call from one non-<strong>NULL</strong> value to another, the pointer is assumed to point to a data object of the same type. Data returned from the server is written into existing storage specified by the value of the unique pointer before the call.</li>
<li>Can orphan memory on the client. Memory referenced by a non-<strong>NULL</strong> unique pointer may never be freed if the unique pointer changes to <strong>NULL</strong> during a call and the client does not have another means of dereferencing the storage.</li>
<li>Does not cause aliasing. Like storage pointed to by a reference pointer, storage pointed to by a unique pointer cannot be reached from any other name in the function.</li>
</ul>
<p>The stubs call the user-supplied memory-management functions <a href="/windows/desktop/Rpc/the-midl-user-allocate-function"><strong>midl_user_allocate</strong></a> and <a href="/windows/desktop/Rpc/the-midl-user-free-function"><strong>midl_user_free</strong></a> to allocate and deallocate memory required for unique pointers and their referents.</p>
<p>The following restrictions apply to unique pointers:</p>
<ul>
<li>The <strong>[unique]</strong> attribute cannot be applied to binding-handle parameters ( <a href="handle-t.html"><strong>handle_t</strong></a>) and context-handle parameters.</li>
<li>The <strong>[unique]</strong> attribute cannot be applied to <strong>[</strong><a href="out-idl.html"><strong>out</strong></a><strong>]</strong>-only top-level pointer parameters (parameters that have only the <strong>[out]</strong> directional attribute).</li>
<li>By default, top-level pointers in parameter lists are <strong>[</strong><a href="ref.html"><strong>ref</strong></a><strong>]</strong> pointers. This is true even if the interface specifies <strong>pointer_default(unique)</strong>. Top-level parameters in parameter lists must be specified with the <strong>[unique]</strong> attribute to be a unique pointer.</li>
<li>Unique pointers cannot be used to describe the size of an array or union arm because unique pointers can have the value <strong>NULL</strong>. This restriction prevents the error that results if a <strong>NULL</strong> value is used as the array size or the union-arm size.</li>
</ul>
<h2>Examples</h2>
<pre lang="syntax"><code>pointer_default(unique) 
 
typedef [unique, string] unsigned char * MY_STRING_TYPE; 
 
[unique] char * MyFunction([in, out, unique] long * plNumber);
</code></pre>
<h2>See also</h2>
<!-- raw HTML omitted -->
<p><a href="arrays-1.html"><strong>arrays</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/Rpc/arrays-and-pointers">Arrays and Pointers</a></p>
<!-- raw HTML omitted -->
<p><a href="array-and-sized-pointer-attributes.html">Array and Sized-Pointer Attributes</a></p>
<!-- raw HTML omitted -->
<p><a href="midl-base-types.html">MIDL Base Types</a></p>
<!-- raw HTML omitted -->
<p><a href="callback.html"><strong>callback</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="const.html"><strong>const</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="context-handle.html"><strong>context_handle</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="enum.html"><strong>enum</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="first-is.html"><strong>first_is</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="handle.html"><strong>handle</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="handle-t.html"><strong>handle_t</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="ignore.html"><strong>ignore</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="last-is.html"><strong>last_is</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="length-is.html"><strong>length_is</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="local.html"><strong>local</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="max-is.html"><strong>max_is</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/Rpc/the-midl-user-allocate-function">midl_user_allocate</a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/Rpc/the-midl-user-free-function">midl_user_free</a></p>
<!-- raw HTML omitted -->
<p><a href="out-idl.html"><strong>out</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="pointer-default.html"><strong>pointer_default</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="ptr.html"><strong>ptr</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="ref.html"><strong>ref</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="size-is.html"><strong>size_is</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="string.html"><strong>string</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="struct.html"><strong>struct</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="switch-type.html"><strong>switch_type</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="transmit-as.html"><strong>transmit_as</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="union.html"><strong>union</strong></a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
