<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>ref attribute</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<p>title: ref attribute
description: The \ ref\ attribute identifies a reference pointer. It is used simply to represent a level of indirection.
ms.assetid: db4ff938-0f38-4f77-bb65-f728ffd609e0
keywords:</p>
<ul>
<li>ref attribute MIDL
topic_type:</li>
<li>apiref
api_name:</li>
<li>ref
api_type:</li>
<li>NA
ms.topic: reference
ms.date: 05/31/2018</li>
</ul>
<hr />
<h1>ref attribute</h1>
<p>The <strong>[ref]</strong> attribute identifies a reference pointer. It is used simply to represent a level of indirection.</p>
<pre lang="syntax"><code>pointer_default(ref)

typedef [ ref [[ , type-attribute-list ]] ] type-specifier declarator-list; 

typedef [ struct | union ] 
{
    [ ref [[ , field-attribute-list ]] ] type-specifier declarator-list;
    ...}

[[ [ function-attribute-list ] ]] type-specifier [[ptr-decl]] function-name(
    [ ref [[ , parameter-attribute-list ]] ] type-specifier [[standard-declarator]]
    , ...);
</code></pre>
<h2>Parameters</h2>
<!-- raw HTML omitted -->
<p><em>type-attribute-list</em></p>
<!-- raw HTML omitted -->
<p>Specifies one or more attributes that apply to the type. Valid type attributes include <strong>[</strong><a href="handle.html"><strong>handle</strong></a><strong>]</strong>, <strong>[</strong><a href="switch-type.html"><strong>switch_type</strong></a><strong>]</strong>, <strong>[</strong><a href="transmit-as.html"><strong>transmit_as</strong></a><strong>]</strong>; the pointer attributes <strong>[ref]</strong>, <strong>[</strong><a href="unique.html"><strong>unique</strong></a><strong>]</strong>, or <strong>[</strong><a href="ptr.html"><strong>ptr</strong></a><strong>]</strong>; and the usage attributes <strong>[</strong><a href="context-handle.html"><strong>context_handle</strong></a><strong>]</strong>, <strong>[</strong><a href="string.html"><strong>string</strong></a><strong>]</strong>, and <strong>[</strong><a href="ignore.html"><strong>ignore</strong></a><strong>]</strong>. Separate multiple attributes with commas.</p>
<!-- raw HTML omitted -->
<p><em>type-specifier</em></p>
<!-- raw HTML omitted -->
<p>Specifies a <a href="midl-base-types.html">base type</a>, <a href="struct.html"><strong>struct</strong></a>, <a href="union.html"><strong>union</strong></a>, or <a href="enum.html"><strong>enum</strong></a> type or type identifier. An optional storage specification can precede <em>type-specifier</em>.</p>
<!-- raw HTML omitted -->
<p><em>standard-declarator</em></p>
<!-- raw HTML omitted -->
<p>Specifies a standard C declarator, such as an identifier, a pointer declarator, or an array declarator. For more information, see <a href="array-and-sized-pointer-attributes.html">Array and Sized-Pointer Attributes</a>, <a href="arrays-1.html"><strong>arrays</strong></a>, and <a href="/windows/desktop/Rpc/arrays-and-pointers">Arrays and Pointers</a>.</p>
<!-- raw HTML omitted -->
<p><em>declarator-list</em></p>
<!-- raw HTML omitted -->
<p>Specifies standard C declarators, such as identifiers, pointer declarators, and array declarators. For more information, see <a href="array-and-sized-pointer-attributes.html">Array and Sized-Pointer Attributes</a>, <a href="arrays-1.html"><strong>arrays</strong></a>, and <a href="/windows/desktop/Rpc/arrays-and-pointers">Arrays and Pointers</a>. The <em>declarator-list</em> consists of one or more declarators separated by commas. The parameter-name identifier in the function declarator is optional.</p>
<!-- raw HTML omitted -->
<p><em>field-attribute-list</em></p>
<!-- raw HTML omitted -->
<p>Specifies zero or more field attributes that apply to the structure, union member, or function parameter. Valid field attributes include <strong>[</strong><a href="first-is.html"><strong>first_is</strong></a><strong>]</strong>, <strong>[</strong><a href="last-is.html"><strong>last_is</strong></a><strong>]</strong>, <strong>[</strong><a href="length-is.html"><strong>length_is</strong></a><strong>]</strong>, <strong>[</strong><a href="max-is.html"><strong>max_is</strong></a><strong>]</strong>, <strong>[</strong><a href="size-is.html"><strong>size_is</strong></a><strong>]</strong>; the usage attributes <strong>[</strong><a href="string.html"><strong>string</strong></a><strong>]</strong>, <strong>[</strong><a href="ignore.html"><strong>ignore</strong></a><strong>]</strong>, and <strong>[</strong><a href="context-handle.html"><strong>context_handle</strong></a><strong>]</strong>; the pointer attribute <strong>[ref]</strong>, <strong>[</strong><a href="unique.html"><strong>unique</strong></a><strong>]</strong>, or <strong>[</strong><a href="ptr.html"><strong>ptr</strong></a><strong>]</strong>; and the union attribute <strong>[</strong><a href="switch-type.html"><strong>switch_type</strong></a><strong>]</strong>. Separate multiple field attributes with commas.</p>
<!-- raw HTML omitted -->
<p><em>function-attribute-list</em></p>
<!-- raw HTML omitted -->
<p>Specifies zero or more attributes that apply to the function. Valid function attributes are <strong>[</strong><a href="callback.html"><strong>callback</strong></a><strong>]</strong>, <strong>[</strong><a href="local.html"><strong>local</strong></a><strong>]</strong>; the pointer attribute <strong>[ref]</strong>, <strong>[</strong><a href="unique.html"><strong>unique</strong></a><strong>]</strong>, or <strong>[</strong><a href="ptr.html"><strong>ptr</strong></a><strong>]</strong>; and the usage attributes <strong>[</strong><a href="string.html"><strong>string</strong></a><strong>]</strong>, <strong>[</strong><a href="ignore.html"><strong>ignore</strong></a><strong>]</strong>, and <strong>[</strong><a href="context-handle.html"><strong>context_handle</strong></a><strong>]</strong>.</p>
<!-- raw HTML omitted -->
<p><em>ptr-decl</em></p>
<!-- raw HTML omitted -->
<p>Specifies at least one pointer declarator to which the <strong>[ref]</strong> attribute applies. A pointer declarator is the same as the pointer declarator used in C; it is constructed from the * designator, modifiers such as <strong>far</strong>, and the qualifier <a href="const.html"><strong>const</strong></a>.</p>
<!-- raw HTML omitted -->
<p><em>function-name</em></p>
<!-- raw HTML omitted -->
<p>Specifies the name of the remote procedure.</p>
<!-- raw HTML omitted -->
<p><em>parameter-attribute-list</em></p>
<!-- raw HTML omitted -->
<p>Consists of zero or more attributes appropriate for the specified parameter type. Parameter attributes can take the directional attributes <strong>[</strong><a href="in.html"><strong>in</strong></a><strong>]</strong> and <strong>[</strong><a href="out-idl.html"><strong>out</strong></a><strong>]</strong>; the field attributes <strong>[</strong><a href="first-is.html"><strong>first_is</strong></a><strong>]</strong>, <strong>[</strong><a href="last-is.html"><strong>last_is</strong></a><strong>]</strong>, <strong>[</strong><a href="length-is.html"><strong>length_is</strong></a><strong>]</strong>, <strong>[</strong><a href="max-is.html"><strong>max_is</strong></a><strong>]</strong>, <strong>[</strong><a href="size-is.html"><strong>size_is</strong></a><strong>]</strong>, and <strong>[</strong><a href="switch-type.html"><strong>switch_type</strong></a><strong>]</strong>; the pointer attribute <strong>[ref]</strong>, <strong>[</strong><a href="unique.html"><strong>unique</strong></a><strong>]</strong>, or <strong>[</strong><a href="ptr.html"><strong>ptr</strong></a><strong>]</strong>; and the usage attributes <strong>[</strong><a href="context-handle.html"><strong>context_handle</strong></a><strong>]</strong> and <strong>[</strong><a href="string.html"><strong>string</strong></a><strong>]</strong>. The usage attribute <strong>[</strong><a href="ignore.html"><strong>ignore</strong></a><strong>]</strong> cannot be used as a parameter attribute. Separate multiple attributes with commas.</p>
<!-- raw HTML omitted -->
<h2>Remarks</h2>
<p>A pointer attribute can be applied as a type attribute, as a field attribute that applies to a structure member, union member, or parameter; or as a function attribute that applies to the function return type. The pointer attribute can also appear with the <strong>[</strong><a href="pointer-default.html"><strong>pointer_default</strong></a><strong>]</strong> keyword.</p>
<p>A reference pointer has the following characteristics:</p>
<ul>
<li>Always points to valid storage; never has the value <strong>NULL</strong>. A reference pointer can always be dereferenced.</li>
<li>Never changes during a call. A reference pointer always points to the same storage on the client before and after the call.</li>
<li>Does not allocate new memory on the client. Data returned from the server is written into existing storage specified by the value of the reference pointer before the call.</li>
<li>Does not cause aliasing. Storage pointed to by a reference pointer cannot be reached from any other name in the function.</li>
</ul>
<p>A reference pointer cannot be used as the type of a pointer returned by a function.</p>
<p>If no attribute is specified for a top-level pointer parameter, it is treated as a reference pointer.</p>
<h2>Examples</h2>
<pre lang="syntax"><code>[unique] char * GetFirstName( 
    [in, ref] char * pszFullName);
</code></pre>
<h2>See also</h2>
<!-- raw HTML omitted -->
<p><a href="arrays-1.html"><strong>arrays</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/Rpc/arrays-and-pointers">Arrays and Pointers</a></p>
<!-- raw HTML omitted -->
<p><a href="array-and-sized-pointer-attributes.html">Array and Sized-Pointer Attributes</a></p>
<!-- raw HTML omitted -->
<p><a href="midl-base-types.html">MIDL Base Types</a></p>
<!-- raw HTML omitted -->
<p><a href="callback.html"><strong>callback</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="const.html"><strong>const</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="context-handle.html"><strong>context_handle</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="enum.html"><strong>enum</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="first-is.html"><strong>first_is</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="handle.html"><strong>handle</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="ignore.html"><strong>ignore</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="last-is.html"><strong>last_is</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="length-is.html"><strong>length_is</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="local.html"><strong>local</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="max-is.html"><strong>max_is</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="out-idl.html"><strong>out</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="ptr.html"><strong>ptr</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="size-is.html"><strong>size_is</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="string.html"><strong>string</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="struct.html"><strong>struct</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="switch-type.html"><strong>switch_type</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="transmit-as.html"><strong>transmit_as</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="union.html"><strong>union</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="unique.html"><strong>unique</strong></a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
