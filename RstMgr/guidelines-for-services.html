<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Guidelines for Services</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>title: Guidelines for Services
description: Services should adhere to these guidelines to ensure that the Restart Manager can shut down and restart services if necessary to install updates. Applications can use the guidelines that are described in Guidelines for Applications.
ms.assetid: 69a98f82-71bb-4780-8a3f-294cc5629900
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>Guidelines for Services</h1>
<p>Services should adhere to these guidelines to ensure that the Restart Manager can shut down and restart services if necessary to install updates. Applications can use the guidelines that are described in <a href="guidelines-for-applications.html">Guidelines for Applications</a>.</p>
<ul>
<li>
<p>Services should be capable of being shut down and restarted using the <a href="/windows/desktop/Services/service-control-manager">Service Control Manager</a> without requiring a system restart. The exceptions to this guideline are critical system processes that run in the context of lsass.exe or services.exe.</p>
</li>
<li>
<p>Restart Manager honors service dependencies. When a service is shut down and restarted, its dependent services are shut down and restarted.</p>
</li>
<li>
<p>Services should specify the recovery interval and reset period in the <a href="/windows/desktop/Services/service-control-manager">Service Control Manager (SCM)</a>. The recovery interval is the time, in msecs, after the last failure that the SCM waits before taking the recovery action. The reset period is the time, in seconds, after the last failure that the Service Control Manager waits before resetting the failure count to 0. Services can use <a href="/windows/desktop/api/winsvc/nf-winsvc-changeserviceconfig2a"><strong>ChangeServiceConfig2</strong></a> function to change the configuration settings.</p>
<p><a href="critical-system-services.html">Critical services</a> should use the following recovery settings to specify that the service be restarted one minute after the first failure to restart the service, restarted two minutes after the second failure, and that the computer be restarted one minute after the third failure. The failure count is reset to 0 after 300 seconds.</p>
<!-- raw HTML omitted -->
<p><a href="critical-system-services.html">Critical services</a> should be started before non-critical services. Services that are not critical services should use the following recovery settings to specify that the service be restarted two minutes after the first failure to restart the service. The service is not restarted after the second failure, and an administrator would need to intervene in this case. The failure count is reset to 0 after 900 seconds.</p>
<!-- raw HTML omitted -->
</li>
</ul>
<p>Â </p>
<p>Â </p>
</body>
