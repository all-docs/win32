<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Virtual Directory Cleanup</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>title: Virtual Directory Cleanup
description: BITS extends IIS virtual directories to support uploads.
ms.assetid: 8214904e-8a95-4c4b-a1c5-91e84031587f
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>Virtual Directory Cleanup</h1>
<p>BITS extends IIS virtual directories to support uploads. Each virtual directory has a session time-out property (the IIS <a href="bits-iis-extension-properties.html">BITSSessionTimeout</a> metabase property) that specifies the period of time in which the BITS client must make progress in uploading the file. If no progress is made during that period (the timer is reset when progress is made), BITS closes the session. The default session time-out is 14 days.</p>
<p>BITS adds a work item to the <a href="/windows/desktop/TaskSchd/task-scheduler-start-page">Task Scheduler</a> for each virtual directory you create and enable. The work item deletes resources associated with the closed sessions. By default, the cleanup occurs every 12 hours. If two virtual directories point to the same physical directory, the cleanup process initiated by one of the directories deletes the resources associated with all closed sessions in the physical directory.</p>
<p>Use the BITS Extension tab or the <a href="/windows/desktop/TaskSchd/task-scheduler-start-page">Task Scheduler</a> interfaces to change the cleanup schedule as appropriate for your application. You can also call the <a href="/windows/desktop/api/Bitscfg/nf-bitscfg-ibitsextensionsetup-getcleanuptask"><strong>IBITSExtensionSetup::GetCleanupTask</strong></a> method to retrieve an interface pointer to the cleanup task associated with the virtual directory.</p>
<blockquote>
<p>[!Note]<br />
If the Task Scheduler is disabled after the virtual directory is enabled, the virtual directory cleanup process will not work.</p>
</blockquote>
<p>Â </p>
<p>Â </p>
<p>Â </p>
</body>
