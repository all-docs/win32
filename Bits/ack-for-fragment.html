<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Ack for Fragment</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<p>title: Ack for Fragment
description: Use the Ack for Fragment packet to acknowledge the client's Fragment request.
ms.assetid: f5466489-2d5e-4850-a39c-37bc4923a7ac
keywords:</p>
<ul>
<li>Ack for Fragment BITS
topic_type:</li>
<li>apiref
api_name:</li>
<li>Ack for Fragment
api_type:</li>
<li>NA
ms.topic: reference
ms.date: 05/31/2018</li>
</ul>
<hr />
<h1>Ack for Fragment</h1>
<p>Use the <strong>Ack for Fragment</strong> packet to acknowledge the client's <a href="fragment.html"><strong>Fragment</strong></a> request.</p>
<pre lang="syntax"><code>reason-code reason-description
BITS-Packet-Type: Ack
BITS-Session-Id: {guid}
BITS-Received-Content-Range: range
BITS-Reply-URL: url
Content-Length: length
BITS-Error-Code: error-code
BITS-Error-Context: error-context
</code></pre>
<h2>Headers</h2>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted -->reason-code</p>
<!-- raw HTML omitted -->
<p>Replace reason-code with an HTTP reason code. The following table shows the typical reason codes for a response to a <a href="fragment.html"><strong>Fragment</strong></a> request. For a list of HTTP reason codes, see <a href="https://www.ietf.org/rfc/rfc2616.txt">RFC 2616</a>.</p>
<table>
<thead>
<tr>
<th>Reason code</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>200<!-- raw HTML omitted --></td>
<td>OK. The request was successful.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>416<!-- raw HTML omitted --></td>
<td>Range-Not-Satisfiable. The client sent a fragment whose range is not contiguous with the previous fragment.<!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted -->reason-description</p>
<!-- raw HTML omitted -->
<p>Replace reason-description with the HTTP description associated with the reason code. For example, set reason-description to OK if reason-code is 200.</p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted -->BITS-Packet-Type</p>
<!-- raw HTML omitted -->
<p>Identifies this response packet as an Ack packet.</p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted -->BITS-Received-Content-Range</p>
<!-- raw HTML omitted -->
<p>Zero-based offset to the next byte the server expects the client to send. For example, if the fragment contained the range 128 212, you would set range to 213.</p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted -->BITS-Session-Id</p>
<!-- raw HTML omitted -->
<p>String GUID that identifies the session to the client. Replace {guid} with the session identifier that the client sent in the <a href="fragment.html"><strong>Fragment</strong></a> request packet. If you do not recognize the session identifier, set the BITS-Error-Code header to BG_E_SESSION_NOT_FOUND.</p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted -->BITS-Reply-URL</p>
<!-- raw HTML omitted -->
<p>Contains the URL to the reply data of an upload-reply job. Include this header in the final fragment response after the upload is complete and you receive a response from the server application, if applicable.</p>
<p>Use the Content-Range header from the Fragment request to determine whether the upload is complete. The upload is complete if the end offset of the range value equals the total-length value minus one.</p>
<p>The BITS server posts the upload file to the server application after it determines the upload is complete. The server application processes the file and generates the reply. The BITS server sets the value of BITS-Reply-URL to the URL of the reply file from the server application.</p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted -->Content-Length</p>
<!-- raw HTML omitted -->
<p>Replace length with the number of bytes included in the body of the response. Content-Length is required, even if the body of the response does not include content.</p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted -->BITS-Error-Code</p>
<!-- raw HTML omitted -->
<p>Replace error-code with a hexadecimal number that represents an HRESULT value associated with a server-side error. Only include this header if reason-code is not 200 or 201.</p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted -->BITS-Error-Context</p>
<!-- raw HTML omitted -->
<p>Replace error-context with a hexadecimal number that represents the context in which the error occurred. Specify the hexadecimal number for <a href="/windows/win32/api/bits/ne-bits-bg_error_context"><strong>BG_ERROR_CONTEXT_REMOTE_FILE</strong></a> (0x5) if the server generated the error. Otherwise, specify the hexadecimal number for <strong>BG_ERROR_CONTEXT_REMOTE_APPLICATION</strong> (0x7) if the error was generated by the application to which the upload file is passed. Include this header only if the reason-code is not 200 or 201.</p>
<!-- raw HTML omitted -->
<h2>Remarks</h2>
<p>If the session is for an upload-reply job, there may be a delay before the client receives the final <strong>Ack for Fragment</strong> response. The length of the delay depends on the amount of time the server application (application to which the server posts the upload file) takes to generate the reply.</p>
<h2>See also</h2>
<!-- raw HTML omitted -->
<p><a href="create-session.html"><strong>Create-Session</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="fragment.html"><strong>Fragment</strong></a></p>
<!-- raw HTML omitted -->
</body>
