<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Cloud Filter Functions</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: The following functions are used in creating and maintaining placeholder files and directories.
ms.assetid: 68B667E2-E8C6-41F9-A0E2-C8CDF60D6472
title: Cloud Filter Functions
ms.topic: article
ms.date: 03/01/2023</h2>
<h1>Cloud Filter Functions</h1>
<p>The following functions are used in creating and maintaining placeholder files and directories.</p>
<h2>In this section</h2>
<table>
<thead>
<tr>
<th>Topic</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="/windows/win32/api/cfapi/nf-cfapi-cfclosehandle"><strong>CfCloseHandle</strong></a></td>
<td>Closes the file or directory handle returned by <a href="/windows/win32/api/cfapi/nf-cfapi-cfopenfilewithoplock"><strong>CfOpenFileWithOplock</strong></a>. This should not be used with standard Win32 file handles, only on handles used within CfApi.h.</td>
</tr>
<tr>
<td><a href="/windows/win32/api/cfapi/nf-cfapi-cfconnectsyncroot"><strong>CfConnectSyncRoot</strong></a></td>
<td>Initiates bi-directional communication between a sync provider and the sync filter API.</td>
</tr>
<tr>
<td><a href="/windows/win32/api/cfapi/nf-cfapi-cfconverttoplaceholder"><strong>CfConvertToPlaceholder</strong></a></td>
<td>Converts a normal file/directory to a placeholder file/directory.</td>
</tr>
<tr>
<td><a href="/windows/win32/api/cfapi/nf-cfapi-cfcreateplaceholders"><strong>CfCreatePlaceholders</strong></a></td>
<td>Creates one or more new placeholder files or directories under a sync root tree.</td>
</tr>
<tr>
<td><a href="/windows/win32/api/cfapi/nf-cfapi-cfdisconnectsyncroot"><strong>CfDisconnectSyncRoot</strong></a></td>
<td>Disconnects a communication channel created by <a href="/windows/win32/api/cfapi/nf-cfapi-cfconnectsyncroot"><strong>CfConnectSyncRoot</strong></a>.</td>
</tr>
<tr>
<td><a href="/windows/win32/api/cfapi/nf-cfapi-cfexecute"><strong>CfExecute</strong></a></td>
<td>The main entry point for all connection key based placeholder operations. It is intended to be used by a sync provider to respond to various callbacks from the platform.</td>
</tr>
<tr>
<td><a href="/windows/win32/api/cfapi/nf-cfapi-cfgetcorrelationvector"><strong>CfGetCorrelationVector</strong></a></td>
<td>Allows the sync provider to query the current correlation vector for a given placeholder file.</td>
</tr>
<tr>
<td><a href="/windows/win32/api/cfapi/nf-cfapi-cfgetplaceholderinfo"><strong>CfGetPlaceholderInfo</strong></a></td>
<td>Gets various characteristics of a placeholder file or folder.</td>
</tr>
<tr>
<td><a href="/windows/win32/api/cfapi/nf-cfapi-cfgetplaceholderrangeinfo"><strong>CfGetPlaceholderRangeInfo</strong></a></td>
<td>Gets range information about a placeholder file or folder.</td>
</tr>
<tr>
<td><a href="/windows/win32/api/cfapi/nf-cfapi-cfgetplaceholderrangeinfoforhydration"><strong>CfGetPlaceholderRangeInfoForHydration</strong></a></td>
<td>Gets range information about a placeholder file or folder. This range information is identical to what <strong>CfGetPlaceholderRangeInfo</strong> returns. However, it doesnâ€™t take a <em>fileHandle</em> as a parameter. Instead, it uses <em>ConnectionKey</em>, <em>TransferKey</em>, and <em>FileId</em> to identify the file and the stream for which range information is being requested.</td>
</tr>
<tr>
<td><a href="/windows/win32/api/cfapi/nf-cfapi-cfgetplaceholderstatefromattributetag"><strong>CfGetPlaceholderStateFromAttributeTag</strong></a></td>
<td>Gets a set of placeholder states based on the <em>FileAttributes</em> and <em>ReparseTag</em> values of the file.</td>
</tr>
<tr>
<td><a href="/windows/win32/api/cfapi/nf-cfapi-cfgetplaceholderstatefromfileinfo"><strong>CfGetPlaceholderStateFromFileInfo</strong></a></td>
<td>Gets a set of placeholder states based on the various information of the file.</td>
</tr>
<tr>
<td><a href="/windows/win32/api/cfapi/nf-cfapi-cfgetplaceholderstatefromfinddata"><strong>CfGetPlaceholderStateFromFindData</strong></a></td>
<td>Gets a set of placeholder states based on the WIN32_FIND_DATA structure.</td>
</tr>
<tr>
<td><a href="/windows/win32/api/cfapi/nf-cfapi-cfgetplatforminfo"><strong>CfGetPlatformInfo</strong></a></td>
<td>Gets the platform version information.</td>
</tr>
<tr>
<td><a href="/windows/win32/api/cfapi/nf-cfapi-cfgetsyncrootinfobyhandle"><strong>CfGetSyncRootInfoByHandle</strong></a></td>
<td>Gets various characteristics of the sync root containing a given file specified by a file handle.</td>
</tr>
<tr>
<td><a href="/windows/win32/api/cfapi/nf-cfapi-cfgetsyncrootinfobypath"><strong>CfGetSyncRootInfoByPath</strong></a></td>
<td>Gets various sync root information given a file under the sync root.</td>
</tr>
<tr>
<td><a href="/windows/win32/api/cfapi/nf-cfapi-cfgettransferkey"><strong>CfGetTransferKey</strong></a></td>
<td>Initiates a transfer of data into a placeholder file or folder.</td>
</tr>
<tr>
<td><a href="/windows/win32/api/cfapi/nf-cfapi-cfgetwin32handlefromprotectedhandle"><strong>CfGetWin32HandleFromProtectedHandle</strong></a></td>
<td>Converts a protected handle to a Win32 handle so that it can be used with all handle-based Win32 APIs.</td>
</tr>
<tr>
<td><a href="/windows/win32/api/cfapi/nf-cfapi-cfhydrateplaceholder"><strong>CfHydratePlaceholder</strong></a></td>
<td>Hydrates a placeholder file by ensuring that the specified byte range is present on-disk in the placeholder. This is valid for files only.</td>
</tr>
<tr>
<td><a href="/windows/win32/api/cfapi/nf-cfapi-cfopenfilewithoplock"><strong>CfOpenFileWithOplock</strong></a></td>
<td>Opens an asynchronous opaque handle to a file or directory (for both normal and placeholder files) and sets up a proper oplock on it based on the open flags.</td>
</tr>
<tr>
<td><a href="/windows/win32/api/cfapi/nf-cfapi-cfquerysyncproviderstatus"><strong>CfQuerySyncProviderStatus</strong></a></td>
<td>Queries a sync provider to get the status of the provider.</td>
</tr>
<tr>
<td><a href="/windows/win32/api/cfapi/nf-cfapi-cfreferenceprotectedhandle"><strong>CfReferenceProtectedHandle</strong></a></td>
<td>Allows the caller to reference a protected handle to a Win32 handle which can be used with non-CfApi Win32 APIs.</td>
</tr>
<tr>
<td><a href="/windows/win32/api/cfapi/nf-cfapi-cfregistersyncroot"><strong>CfRegisterSyncRoot</strong></a></td>
<td>Performs a one time sync root registration.</td>
</tr>
<tr>
<td><a href="/windows/win32/api/cfapi/nf-cfapi-cfreleaseprotectedhandle"><strong>CfReleaseProtectedHandle</strong></a></td>
<td>Releases a protected handle referenced by <a href="/windows/win32/api/cfapi/nf-cfapi-cfreferenceprotectedhandle"><strong>CfReferenceProtectedHandle</strong></a>.</td>
</tr>
<tr>
<td><a href="/windows/win32/api/cfapi/nf-cfapi-cfreleasetransferkey"><strong>CfReleaseTransferKey</strong></a></td>
<td>Releases a transfer key obtained by <a href="/windows/win32/api/cfapi/nf-cfapi-cfgettransferkey"><strong>CfGetTransferKey</strong></a>.</td>
</tr>
<tr>
<td><a href="/windows/win32/api/cfapi/nf-cfapi-cfreportproviderprogress"><strong>CfReportProviderProgress</strong></a></td>
<td>Allows a sync provider to report progress out-of-band.</td>
</tr>
<tr>
<td><a href="/windows/win32/api/cfapi/nf-cfapi-cfreportsyncstatus"><strong>CfReportSyncStatus</strong></a></td>
<td>Allows a sync provider to notify the platform of its status on a specified sync root without having to connect with a call to <a href="/windows/win32/api/cfapi/nf-cfapi-cfconnectsyncroot"><strong>CfConnectSyncRoot</strong></a> first.</td>
</tr>
<tr>
<td><a href="/windows/win32/api/cfapi/nf-cfapi-cfrevertplaceholder"><strong>CfRevertPlaceholder</strong></a></td>
<td>Reverts a placeholder back to a regular file, stripping away all special characteristics such as the reparse tag, the file identity, etc.</td>
</tr>
<tr>
<td><a href="/windows/win32/api/cfapi/nf-cfapi-cfsetcorrelationvector"><strong>CfSetCorrelationVector</strong></a></td>
<td>Allows a sync provider to instruct the platform to use a specific correlation vector for telemetry purposes on a placeholder file. This is optional.</td>
</tr>
<tr>
<td><a href="/windows/win32/api/cfapi/nf-cfapi-cfsetinsyncstate"><strong>CfSetInSyncState</strong></a></td>
<td>Sets the in-sync state for a placeholder file or folder.</td>
</tr>
<tr>
<td><a href="/windows/win32/api/cfapi/nf-cfapi-cfsetpinstate"><strong>CfSetPinState</strong></a></td>
<td>This sets the pin state of a placeholder, used to represent a user s intent. Any application (not just the sync provider) can call this function.</td>
</tr>
<tr>
<td><a href="/windows/win32/api/cfapi/nf-cfapi-cfunregistersyncroot"><strong>CfUnregisterSyncRoot</strong></a></td>
<td>Unregisters a previously registered sync root.</td>
</tr>
<tr>
<td><a href="/windows/win32/api/cfapi/nf-cfapi-cfupdateplaceholder"><strong>CfUpdatePlaceholder</strong></a></td>
<td>Updates characteristics of the placeholder file or directory.</td>
</tr>
<tr>
<td><a href="/windows/win32/api/cfapi/nf-cfapi-cfupdatesyncproviderstatus"><strong>CfUpdateSyncProviderStatus</strong></a></td>
<td>Updates the current status of the sync provider.</td>
</tr>
</tbody>
</table>
</body>
