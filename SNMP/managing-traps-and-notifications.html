<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Managing Traps and Notifications</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>title: Managing Traps and Notifications
description: The WinSNMP application must register to receive traps and notifications by calling the SnmpRegister function with SNMPAPI_ON. The application can unregister and disable traps and notifications by calling the function with SNMPAPI_OFF.
ms.assetid: 2bccba35-bf5c-4e5c-94e4-59980f2b9776
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>Managing Traps and Notifications</h1>
<p>The WinSNMP application must register to receive traps and notifications by calling the <a href="/windows/desktop/api/Winsnmp/nf-winsnmp-snmpregister"><strong>SnmpRegister</strong></a> function with SNMPAPI_ON. The application can unregister and disable traps and notifications by calling the function with SNMPAPI_OFF.</p>
<p>Several options are available when the application calls <strong>SnmpRegister</strong>. The application can register or unregister for the following traps and notifications:</p>
<ul>
<li>One type of trap or notification</li>
<li>All traps and notifications</li>
<li>All sources of trap and notification requests</li>
<li>Traps and notifications from all management entities</li>
<li>Traps and notifications for every context</li>
</ul>
<p>To register and receive a predefined trap or notification type, the application must define an object identifier (an <a href="/windows/desktop/api/Winsnmp/ns-winsnmp-smioid"><strong>smiOID</strong></a> structure) for each predefined type. The structure must contain a pattern-matching sequence for the type of trap or notification. RFC 1907, &quot;Management Information Base for Version 2 of the Simple Network Management Protocol (SNMPv2),&quot; defines trap and notification object identifiers.</p>
<p>To retrieve outstanding trap data and notifications for a WinSNMP session, a WinSNMP application must call the <a href="/windows/desktop/api/Winsnmp/nf-winsnmp-snmprecvmsg"><strong>SnmpRecvMsg</strong></a> function with the session handle returned by the <a href="/windows/desktop/api/Winsnmp/nf-winsnmp-snmpcreatesession"><strong>SnmpCreateSession</strong></a> function.</p>
<p>For more information, see <a href="sending-snmp-messages.html">Sending SNMP Messages</a> and <a href="receiving-snmp-messages.html">Receiving SNMP Messages</a>. For additional information about allocation and deallocation of resources for traps and notifications, see <a href="allocating-winsnmp-memory-objects.html">Allocating WinSNMP Memory Objects</a>.</p>
<p>Â </p>
<p>Â </p>
</body>
