<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Hooks</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: This section discusses hooks. A hook is a point in the system message-handling mechanism where an application can install a subroutine to monitor the message traffic.
ms.assetid: 'vs|winui|~\winui\windowsuserinterface\windowing\hooks.htm'
title: Hooks
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>Hooks</h1>
<p>A hook is a point in the system message-handling mechanism where an application can install a subroutine to monitor the message traffic in the system and process certain types of messages before they reach the target window procedure.</p>
<h3>In This Section</h3>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="about-hooks.html">Hook Overview</a></td>
<td>Discusses how hooks should be used.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="using-hooks.html">Using Hooks</a></td>
<td>Demonstrates how to perform tasks associated with hooks.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="hook-reference.html">Hook Reference</a></td>
<td>Contains the API reference.<!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<h3>Hook Functions</h3>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="/windows/win32/api/winuser/nf-winuser-callmsgfiltera"><strong>CallMsgFilter</strong></a></td>
<td>Passes the specified message and hook code to the hook procedures associated with the <a href="about-hooks.html"><strong>WH_SYSMSGFILTER</strong></a> and <strong>WH_MSGFILTER</strong> hook procedures.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winuser/nf-winuser-callnexthookex"><strong>CallNextHookEx</strong></a></td>
<td>Passes the hook information to the next hook procedure in the current hook chain. A hook procedure can call this function either before or after processing the hook information. <!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="callwndproc.html"><em>CallWndProc</em></a></td>
<td>An application-defined or library-defined callback function used with the <a href="/windows/win32/api/winuser/nf-winuser-setwindowshookexa"><strong>SetWindowsHookEx</strong></a> function. The system calls this function before calling the window procedure to process a message sent to the thread.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winuser/nc-winuser-hookproc"><em>CallWndRetProc</em></a></td>
<td>An application-defined or library-defined callback function used with the <a href="/windows/win32/api/winuser/nf-winuser-setwindowshookexa"><strong>SetWindowsHookEx</strong></a> function. The system calls this function after the <a href="/windows/win32/api/winuser/nf-winuser-sendmessage"><strong>SendMessage</strong></a> function is called. The hook procedure can examine the message; it cannot modify it. <!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="cbtproc.html"><strong>CBTProc</strong></a></td>
<td>An application-defined or library-defined callback function used with the <a href="/windows/win32/api/winuser/nf-winuser-setwindowshookexa"><strong>SetWindowsHookEx</strong></a> function. The system calls this function before activating, creating, destroying, minimizing, maximizing, moving, or sizing a window; before completing a system command; before removing a mouse or keyboard event from the system message queue; before setting the keyboard focus; or before synchronizing with the system message queue. A computer-based training (CBT) application uses this hook procedure to receive useful notifications from the system. <!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="debugproc.html"><em>DebugProc</em></a></td>
<td>An application-defined or library-defined callback function used with the <a href="/windows/win32/api/winuser/nf-winuser-setwindowshookexa"><strong>SetWindowsHookEx</strong></a> function. The system calls this function before calling the hook procedures associated with any type of hook. The system passes information about the hook to be called to the <a href="debugproc.html"><em>DebugProc</em></a> hook procedure, which examines the information and determines whether to allow the hook to be called. <!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="foregroundidleproc.html"><em>ForegroundIdleProc</em></a></td>
<td>An application-defined or library-defined callback function used with the <a href="/windows/win32/api/winuser/nf-winuser-setwindowshookexa"><strong>SetWindowsHookEx</strong></a> function. The system calls this function whenever the foreground thread is about to become idle. <!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/winmsg/getmsgproc"><em>GetMsgProc</em></a></td>
<td>An application-defined or library-defined callback function used with the <a href="/windows/win32/api/winuser/nf-winuser-setwindowshookexa"><strong>SetWindowsHookEx</strong></a> function. The system calls this function whenever the <a href="/windows/win32/api/winuser/nf-winuser-getmessage"><strong>GetMessage</strong></a> or <a href="/windows/win32/api/winuser/nf-winuser-peekmessagea"><strong>PeekMessage</strong></a> function has retrieved a message from an application message queue. Before returning the retrieved message to the caller, the system passes the message to the hook procedure. <!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="journalplaybackproc.html"><em>JournalPlaybackProc</em></a></td>
<td>An application-defined or library-defined callback function used with the <a href="/windows/win32/api/winuser/nf-winuser-setwindowshookexa"><strong>SetWindowsHookEx</strong></a> function. Typically, an application uses this function to play back a series of mouse and keyboard messages recorded previously by the <a href="/windows/win32/winmsg/journalrecordproc"><em>JournalRecordProc</em></a> hook procedure. As long as a <a href="journalplaybackproc.html"><em>JournalPlaybackProc</em></a> hook procedure is installed, regular mouse and keyboard input is disabled. <!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/winmsg/journalrecordproc"><em>JournalRecordProc</em></a></td>
<td>An application-defined or library-defined callback function used with the <a href="/windows/win32/api/winuser/nf-winuser-setwindowshookexa"><strong>SetWindowsHookEx</strong></a> function. The function records messages the system removes from the system message queue. Later, an application can use a <a href="journalplaybackproc.html"><em>JournalPlaybackProc</em></a> hook procedure to play back the messages. <!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/winmsg/keyboardproc"><em>KeyboardProc</em></a></td>
<td>An application-defined or library-defined callback function used with the <a href="/windows/win32/api/winuser/nf-winuser-setwindowshookexa"><strong>SetWindowsHookEx</strong></a> function. The system calls this function whenever an application calls the <a href="/windows/win32/api/winuser/nf-winuser-getmessage"><strong>GetMessage</strong></a> or <a href="/windows/win32/api/winuser/nf-winuser-peekmessagea"><strong>PeekMessage</strong></a> function and there is a keyboard message (<a href="/windows/desktop/inputdev/wm-keyup"><strong>WM_KEYUP</strong></a> or <a href="/windows/desktop/inputdev/wm-keydown"><strong>WM_KEYDOWN</strong></a>) to be processed. <!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/winmsg/lowlevelkeyboardproc"><em>LowLevelKeyboardProc</em></a></td>
<td>An application-defined or library-defined callback function used with the <a href="/windows/win32/api/winuser/nf-winuser-setwindowshookexa"><strong>SetWindowsHookEx</strong></a> function. The system calls this function every time a new keyboard input event is about to be posted into a thread input queue.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/winmsg/lowlevelmouseproc"><em>LowLevelMouseProc</em></a></td>
<td>An application-defined or library-defined callback function used with the <a href="/windows/win32/api/winuser/nf-winuser-setwindowshookexa"><strong>SetWindowsHookEx</strong></a> function. The system calls this function every time a new mouse input event is about to be posted into a thread input queue.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/winmsg/messageproc"><em>MessageProc</em></a></td>
<td>An application-defined or library-defined callback function used with the <a href="/windows/win32/api/winuser/nf-winuser-setwindowshookexa"><strong>SetWindowsHookEx</strong></a> function. The system calls this function after an input event occurs in a dialog box, message box, menu, or scroll bar, but before the message generated by the input event is processed. The hook procedure can monitor messages for a dialog box, message box, menu, or scroll bar created by a particular application or all applications.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/winmsg/mouseproc"><em>MouseProc</em></a></td>
<td>An application-defined or library-defined callback function used with the <a href="/windows/win32/api/winuser/nf-winuser-setwindowshookexa"><strong>SetWindowsHookEx</strong></a> function. The system calls this function whenever an application calls the <a href="/windows/win32/api/winuser/nf-winuser-getmessage"><strong>GetMessage</strong></a> or <a href="/windows/win32/api/winuser/nf-winuser-peekmessagea"><strong>PeekMessage</strong></a> function and there is a mouse message to be processed. <!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winuser/nf-winuser-setwindowshookexa"><strong>SetWindowsHookEx</strong></a></td>
<td>Installs an application-defined hook procedure into a hook chain. You would install a hook procedure to monitor the system for certain types of events. These events are associated either with a specific thread or with all threads in the same desktop as the calling thread.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/winmsg/shellproc"><em>ShellProc</em></a></td>
<td>An application-defined or library-defined callback function used with the <a href="/windows/win32/api/winuser/nf-winuser-setwindowshookexa"><strong>SetWindowsHookEx</strong></a> function. The function receives notifications of Shell events from the system.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/winmsg/sysmsgproc"><em>SysMsgProc</em></a></td>
<td>An application-defined or library-defined callback function used with the <a href="/windows/win32/api/winuser/nf-winuser-setwindowshookexa"><strong>SetWindowsHookEx</strong></a> function. The system calls this function after an input event occurs in a dialog box, message box, menu, or scroll bar, but before the message generated by the input event is processed. The function can monitor messages for any dialog box, message box, menu, or scroll bar in the system. <!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winuser/nf-winuser-unhookwindowshookex"><strong>UnhookWindowsHookEx</strong></a></td>
<td>Removes a hook procedure installed in a hook chain by the <a href="/windows/win32/api/winuser/nf-winuser-setwindowshookexa"><strong>SetWindowsHookEx</strong></a> function. <!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<h3>Hook Notifications</h3>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="wm-canceljournal.html"><strong>WM_CANCELJOURNAL</strong></a></td>
<td>Posted to an application when a user cancels the application's journaling activities. The message is posted with a <strong>NULL</strong> window handle. <!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="wm-queuesync.html"><strong>WM_QUEUESYNC</strong></a></td>
<td>Sent by a CBT application to separate user-input messages from other messages sent through the <a href="about-hooks.html"><strong>WH_JOURNALPLAYBACK</strong></a> procedure. <!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<h3>Hook Structures</h3>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="/windows/win32/api/winuser/ns-winuser-cbt_createwnda"><strong>CBT_CREATEWND</strong></a></td>
<td>Contains information passed to a <strong>WH_CBT</strong> hook procedure, <a href="cbtproc.html"><strong>CBTProc</strong></a>, before a window is created.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winuser/ns-winuser-cbtactivatestruct"><strong>CBTACTIVATESTRUCT</strong></a></td>
<td>Contains information passed to a <strong>WH_CBT</strong> hook procedure, <a href="cbtproc.html"><strong>CBTProc</strong></a>, before a window is activated. <!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winuser/ns-winuser-cwpretstruct"><strong>CWPRETSTRUCT</strong></a></td>
<td>Defines the message parameters passed to a <strong>WH_CALLWNDPROCRET</strong> hook procedure, <a href="/windows/win32/api/winuser/nc-winuser-hookproc"><em>CallWndRetProc</em></a>. <!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winuser/ns-winuser-cwpstruct"><strong>CWPSTRUCT</strong></a></td>
<td>Defines the message parameters passed to a <strong>WH_CALLWNDPROC</strong> hook procedure, <a href="callwndproc.html"><em>CallWndProc</em></a>. <!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winuser/ns-winuser-debughookinfo"><strong>DEBUGHOOKINFO</strong></a></td>
<td>Contains debugging information passed to a <strong>WH_DEBUG</strong> hook procedure, <a href="debugproc.html"><em>DebugProc</em></a>. <!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winuser/ns-winuser-eventmsg"><strong>EVENTMSG</strong></a></td>
<td>Contains information about a hardware message sent to the system message queue. This structure is used to store message information for the <a href="journalplaybackproc.html"><em>JournalPlaybackProc</em></a> callback function. <!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winuser/ns-winuser-kbdllhookstruct"><strong>KBDLLHOOKSTRUCT</strong></a></td>
<td>Contains information about a low-level keyboard input event. <!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winuser/ns-winuser-mousehookstruct"><strong>MOUSEHOOKSTRUCT</strong></a></td>
<td>Contains information about a mouse event passed to a <strong>WH_MOUSE</strong> hook procedure, <a href="/windows/win32/winmsg/mouseproc"><em>MouseProc</em></a>. <!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winuser/ns-winuser-mousehookstructex"><strong>MOUSEHOOKSTRUCTEX</strong></a></td>
<td>Contains information about a mouse event passed to a <strong>WH_MOUSE</strong> hook procedure, <a href="/windows/win32/winmsg/mouseproc"><em>MouseProc</em></a>. <!-- raw HTML omitted --></td>
</tr>
<tr>
<td><a href="/windows/win32/api/winuser/ns-winuser-msllhookstruct"><strong>MSLLHOOKSTRUCT</strong></a></td>
<td>Contains information about a low-level mouse input event. <!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<h2>Related topics</h2>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/api/winuser/nf-winuser-setwineventhook"><strong>SetWinEventHook</strong></a></p>
<!-- raw HTML omitted -->
</body>
