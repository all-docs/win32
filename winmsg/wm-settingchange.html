<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>WM_SETTINGCHANGE message</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: A message that is sent to all top-level windows when the SystemParametersInfo function changes a system-wide setting or when policy settings have changed.
ms.assetid: 77174e06-a25b-440a-9e9c-4fd5979c433c
title: WM_SETTINGCHANGE message (Winuser.h)
ms.topic: reference
ms.date: 05/31/2018</h2>
<h1>WM_SETTINGCHANGE message</h1>
<p>A message that is sent to all top-level windows when the <a href="/windows/win32/api/winuser/nf-winuser-systemparametersinfoa"><strong>SystemParametersInfo</strong></a> function changes a system-wide setting or when policy settings have changed.</p>
<p>Applications should send <strong>WM_SETTINGCHANGE</strong> to all top-level windows when they make changes to system parameters. (This message cannot be sent directly to a window.) To send the <strong>WM_SETTINGCHANGE</strong> message to all top-level windows, use the <a href="/windows/win32/api/winuser/nf-winuser-sendmessagetimeouta"><strong>SendMessageTimeout</strong></a> function with the <em>hwnd</em> parameter set to <strong>HWND_BROADCAST</strong>.</p>
<p>A window receives this message through its <a href="/windows/win32/api/winuser/nc-winuser-wndproc"><strong>WindowProc</strong></a> function.</p>
<pre lang="C++"><code>#define WM_WININICHANGE                 0x001A
#define WM_SETTINGCHANGE                WM_WININICHANGE
</code></pre>
<h2>Parameters</h2>
<!-- raw HTML omitted -->
<p><em>wParam</em></p>
<!-- raw HTML omitted -->
<p>When the system sends this message as a result of a <a href="/windows/win32/api/winuser/nf-winuser-systemparametersinfoa"><strong>SystemParametersInfo</strong></a> call, the <em>wParam</em> parameter is the value of the <em>uiAction</em> parameter passed to the <strong>SystemParametersInfo</strong> function. For a list of values, see <strong>SystemParametersInfo</strong>.</p>
<p>When the system sends this message as a result of a change in policy settings, this parameter indicates the type of policy that was applied. This value is 1 if computer policy was applied or zero if user policy was applied.</p>
<p>When the system sends this message as a result of a change in locale settings, this parameter is zero.</p>
<p>When an application sends this message, this parameter must be <strong>NULL</strong>.</p>
<!-- raw HTML omitted -->
<p><em>lParam</em></p>
<!-- raw HTML omitted -->
<p>When the system sends this message as a result of a <a href="/windows/win32/api/winuser/nf-winuser-systemparametersinfoa"><strong>SystemParametersInfo</strong></a> call, <em>lParam</em> is a pointer to a string that indicates the area containing the system parameter that was changed. This parameter does not usually indicate which specific system parameter changed. (Note that some applications send this message with <em>lParam</em> set to <strong>NULL</strong>.) In general, when you receive this message, you should check and reload any system parameter settings that are used by your application.</p>
<p>This string can be the name of a registry key or the name of a section in the Win.ini file. When the string is a registry name, it typically indicates only the leaf node in the registry, not the full path.</p>
<p>When the system sends this message as a result of a change in policy settings, this parameter points to the string &quot;Policy&quot;.</p>
<p>When the system sends this message as a result of a change in locale settings, this parameter points to the string &quot;intl&quot;.</p>
<p>To effect a change in the environment variables for the system or the user, broadcast this message with <em>lParam</em> set to the string &quot;Environment&quot;.</p>
<!-- raw HTML omitted -->
<h2>Return value</h2>
<p>Type: <strong>LRESULT</strong></p>
<p>If you process this message, return zero.</p>
<h2>Remarks</h2>
<p>The <em>lParam</em> parameter indicates which system metric has changed, for example, &quot;ConvertibleSlateMode&quot; if the CONVERTIBLESLATEMODE indicator was toggled or &quot;SystemDockMode&quot; if the DOCKED indicator was toggled.</p>
<h2>Requirements</h2>
<table>
<thead>
<tr>
<th>Requirement</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Minimum supported client<!-- raw HTML omitted --></td>
<td>WindowsÂ 2000 Professional [desktop apps only]<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Minimum supported server<!-- raw HTML omitted --></td>
<td>WindowsÂ 2000 Server [desktop apps only]<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Header<!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted -->Winuser.h (include Windows.h)<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<h2>See also</h2>
<!-- raw HTML omitted -->
<p><a href="/previous-versions/windows/desktop/Policy/policy-events">Policy Events</a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/win32/api/winuser/nf-winuser-sendmessagetimeouta"><strong>SendMessageTimeout</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/win32/api/winuser/nf-winuser-systemparametersinfoa"><strong>SystemParametersInfo</strong></a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
