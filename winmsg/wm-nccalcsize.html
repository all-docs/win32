<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>WM_NCCALCSIZE message</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: Sent when the size and position of a window's client area must be calculated. By processing this message, an application can control the content of the window's client area when the size or position of the window changes.
ms.assetid: d2d5825e-02a5-44b8-8615-55b7259d24ba
title: WM_NCCALCSIZE message (Winuser.h)
ms.topic: reference
ms.date: 05/31/2018</h2>
<h1>WM_NCCALCSIZE message</h1>
<p>Sent when the size and position of a window's client area must be calculated. By processing this message, an application can control the content of the window's client area when the size or position of the window changes.</p>
<p>A window receives this message through its <a href="/windows/win32/api/winuser/nc-winuser-wndproc"><strong>WindowProc</strong></a> function.</p>
<pre lang="C++"><code>#define WM_NCCALCSIZE                   0x0083
</code></pre>
<h2>Parameters</h2>
<!-- raw HTML omitted -->
<p><em>wParam</em></p>
<!-- raw HTML omitted -->
<p>If <em>wParam</em> is <strong>TRUE</strong>, it specifies that the application should indicate which part of the client area contains valid information. The system copies the valid information to the specified area within the new client area.</p>
<p>If <em>wParam</em> is <strong>FALSE</strong>, the application does not need to indicate the valid part of the client area.</p>
<!-- raw HTML omitted -->
<p><em>lParam</em></p>
<!-- raw HTML omitted -->
<p>If <em>wParam</em> is <strong>TRUE</strong>, <em>lParam</em> points to an <a href="/windows/win32/api/winuser/ns-winuser-nccalcsize_params"><strong>NCCALCSIZE_PARAMS</strong></a> structure that contains information an application can use to calculate the new size and position of the client rectangle.</p>
<p>If <em>wParam</em> is <strong>FALSE</strong>, <em>lParam</em> points to a <a href="/windows/win32/api/windef/ns-windef-rect"><strong>RECT</strong></a> structure. On entry, the structure contains the proposed window rectangle for the window. On exit, the structure should contain the screen coordinates of the corresponding window client area.</p>
<!-- raw HTML omitted -->
<h2>Return value</h2>
<p>Type: <strong>LRESULT</strong></p>
<p>If the <em>wParam</em> parameter is <strong>FALSE</strong>, the application should return zero.</p>
<p>If <em>wParam</em> is <strong>TRUE</strong>, the application should return zero or a combination of the following values.</p>
<p>If <em>wParam</em> is <strong>TRUE</strong> and an application returns zero, the old client area is preserved and is aligned with the upper-left corner of the new client area.</p>
<table>
<thead>
<tr>
<th>Return code/value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted --><strong>WVR_ALIGNTOP</strong><!-- raw HTML omitted --> <!-- raw HTML omitted -->0x0010<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td>Specifies that the client area of the window is to be preserved and aligned with the top of the new position of the window. For example, to align the client area to the upper-left corner, return the WVR_ALIGNTOP and <strong>WVR_ALIGNLEFT</strong> values.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted --><strong>WVR_ALIGNRIGHT</strong><!-- raw HTML omitted --> <!-- raw HTML omitted -->0x0080<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td>Specifies that the client area of the window is to be preserved and aligned with the right side of the new position of the window. For example, to align the client area to the lower-right corner, return the <strong>WVR_ALIGNRIGHT</strong> and WVR_ALIGNBOTTOM values.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted --><strong>WVR_ALIGNLEFT</strong><!-- raw HTML omitted --> <!-- raw HTML omitted -->0x0020<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td>Specifies that the client area of the window is to be preserved and aligned with the left side of the new position of the window. For example, to align the client area to the lower-left corner, return the <strong>WVR_ALIGNLEFT</strong> and <strong>WVR_ALIGNBOTTOM</strong> values.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted --><strong>WVR_ALIGNBOTTOM</strong><!-- raw HTML omitted --> <!-- raw HTML omitted -->0x0040<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td>Specifies that the client area of the window is to be preserved and aligned with the bottom of the new position of the window. For example, to align the client area to the top-left corner, return the WVR_ALIGNTOP and <strong>WVR_ALIGNLEFT</strong> values.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted --><strong>WVR_HREDRAW</strong><!-- raw HTML omitted --> <!-- raw HTML omitted -->0x0100<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td>Used in combination with any other values, except <strong>WVR_VALIDRECTS</strong>, causes the window to be completely redrawn if the client rectangle changes size horizontally. This value is similar to <a href="about-window-classes.html">CS_HREDRAW</a>Â class style<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted --><strong>WVR_VREDRAW</strong><!-- raw HTML omitted --> <!-- raw HTML omitted -->0x0200<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td>Used in combination with any other values, except <strong>WVR_VALIDRECTS</strong>, causes the window to be completely redrawn if the client rectangle changes size vertically. This value is similar to <a href="about-window-classes.html">CS_VREDRAW</a>Â class style<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted --><strong>WVR_REDRAW</strong><!-- raw HTML omitted --> <!-- raw HTML omitted -->0x0300<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td>This value causes the entire window to be redrawn. It is a combination of <strong>WVR_HREDRAW</strong> and <strong>WVR_VREDRAW</strong> values.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted --><strong>WVR_VALIDRECTS</strong><!-- raw HTML omitted --> <!-- raw HTML omitted -->0x0400<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td>This value indicates that, upon return from <a href="wm-nccalcsize.html"><strong>WM_NCCALCSIZE</strong></a>, the rectangles specified by the <strong>rgrc</strong>[1] and <strong>rgrc</strong>[2] members of the <a href="/windows/win32/api/winuser/ns-winuser-nccalcsize_params"><strong>NCCALCSIZE_PARAMS</strong></a> structure contain valid destination and source area rectangles, respectively. The system combines these rectangles to calculate the area of the window to be preserved. The system copies any part of the window image that is within the source rectangle and clips the image to the destination rectangle. Both rectangles are in parent-relative or screen-relative coordinates. This flag cannot be combined with any other flags. <!-- raw HTML omitted --> This return value allows an application to implement more elaborate client-area preservation strategies, such as centering or preserving a subset of the client area.<!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<p>Â </p>
<h2>Remarks</h2>
<p>The window may be redrawn, depending on whether the <a href="about-window-classes.html">CS_HREDRAW</a> or CS_VREDRAW class style is specified. This is the default, backward-compatible processing of this message by the <a href="/windows/desktop/api/winuser/nf-winuser-defwindowproca"><strong>DefWindowProc</strong></a> function (in addition to the usual client rectangle calculation described in the preceding table).</p>
<p>When <em>wParam</em> is <strong>TRUE</strong>, simply returning 0 without processing the <a href="/windows/win32/api/winuser/ns-winuser-nccalcsize_params"><strong>NCCALCSIZE_PARAMS</strong></a> rectangles will cause the client area to resize to the size of the window, including the window frame. This will remove the window frame and caption items from your window, leaving only the client area displayed.</p>
<p>Starting with Windows Vista, removing the standard frame by simply returning 0 when the <em>wParam</em> is <strong>TRUE</strong> does not affect frames that are extended into the client area using the <a href="/windows/win32/api/dwmapi/nf-dwmapi-dwmextendframeintoclientarea"><strong>DwmExtendFrameIntoClientArea</strong></a> function. Only the standard frame will be removed.</p>
<h2>Requirements</h2>
<table>
<thead>
<tr>
<th>Requirement</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Minimum supported client<!-- raw HTML omitted --></td>
<td>WindowsÂ 2000 Professional [desktop apps only]<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Minimum supported server<!-- raw HTML omitted --></td>
<td>WindowsÂ 2000 Server [desktop apps only]<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Header<!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted -->Winuser.h (include Windows.h)<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<h2>See also</h2>
<!-- raw HTML omitted -->
<p><strong>Reference</strong></p>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/api/winuser/nf-winuser-defwindowproca"><strong>DefWindowProc</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/win32/api/winuser/nf-winuser-movewindow"><strong>MoveWindow</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/win32/api/winuser/nf-winuser-setwindowpos"><strong>SetWindowPos</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/win32/api/winuser/ns-winuser-nccalcsize_params"><strong>NCCALCSIZE_PARAMS</strong></a></p>
<!-- raw HTML omitted -->
<p><strong>Conceptual</strong></p>
<!-- raw HTML omitted -->
<p><a href="windows.html">Windows</a></p>
<!-- raw HTML omitted -->
<p><strong>Other Resources</strong></p>
<!-- raw HTML omitted -->
<p><a href="/windows/win32/api/windef/ns-windef-rect"><strong>RECT</strong></a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
