<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>WM_QUERYDRAGICON message</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: Sent to a minimized (iconic) window.
ms.assetid: e4f0e638-f606-4745-888b-14a846c7fd37
title: WM_QUERYDRAGICON message (Winuser.h)
ms.topic: reference
ms.date: 05/31/2018</h2>
<h1>WM_QUERYDRAGICON message</h1>
<p>Sent to a minimized (iconic) window. The window is about to be dragged by the user but does not have an icon defined for its class. An application can return a handle to an icon or cursor. The system displays this cursor or icon while the user drags the icon.</p>
<p>A window receives this message through its <a href="/windows/win32/api/winuser/nc-winuser-wndproc"><strong>WindowProc</strong></a> function.</p>
<pre lang="C++"><code>#define WM_QUERYDRAGICON                0x0037
</code></pre>
<h2>Parameters</h2>
<!-- raw HTML omitted -->
<p><em>wParam</em></p>
<!-- raw HTML omitted -->
<p>This parameter is not used.</p>
<!-- raw HTML omitted -->
<p><em>lParam</em></p>
<!-- raw HTML omitted -->
<p>This parameter is not used.</p>
<!-- raw HTML omitted -->
<h2>Return value</h2>
<p>Type: <strong>LRESULT</strong></p>
<p>An application should return a handle to a cursor or icon that the system is to display while the user drags the icon. The cursor or icon must be compatible with the display driver's resolution. If the application returns <strong>NULL</strong>, the system displays the default cursor.</p>
<h2>Remarks</h2>
<p>When the user drags the icon of a window without a class icon, the system replaces the icon with a default cursor. If the application requires a different cursor to be displayed during dragging, it must return a handle to the cursor or icon compatible with the display driver's resolution. If an application returns a handle to a color cursor or icon, the system converts the cursor or icon to black and white. The application can call the <a href="/windows/win32/api/winuser/nf-winuser-loadcursora"><strong>LoadCursor</strong></a> or <a href="/windows/win32/api/winuser/nf-winuser-loadicona"><strong>LoadIcon</strong></a> function to load a cursor or icon from the resources in its executable (.exe) file and to retrieve this handle.</p>
<p>If a dialog box procedure handles this message, it should cast the desired return value to a <strong>BOOL</strong> and return the value directly. The <strong>DWL_MSGRESULT</strong> value set by the <a href="/windows/win32/api/winuser/nf-winuser-setwindowlonga"><strong>SetWindowLong</strong></a> function is ignored.</p>
<h2>Requirements</h2>
<table>
<thead>
<tr>
<th>Requirement</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Minimum supported client<!-- raw HTML omitted --></td>
<td>WindowsÂ 2000 Professional [desktop apps only]<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Minimum supported server<!-- raw HTML omitted --></td>
<td>WindowsÂ 2000 Server [desktop apps only]<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Header<!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted -->Winuser.h (include Windows.h)<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<h2>See also</h2>
<!-- raw HTML omitted -->
<p><strong>Reference</strong></p>
<!-- raw HTML omitted -->
<p><a href="/windows/win32/api/winuser/nf-winuser-loadcursora"><strong>LoadCursor</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/win32/api/winuser/nf-winuser-loadicona"><strong>LoadIcon</strong></a></p>
<!-- raw HTML omitted -->
<p><strong>Conceptual</strong></p>
<!-- raw HTML omitted -->
<p><a href="windows.html">Windows</a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
