<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>glStencilOp function</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<p>title: glStencilOp function (Gl.h)
description: The glStencilOp function sets the stencil test actions.
ms.assetid: 16809735-5624-49cf-bfa5-9908d008b234
keywords:</p>
<ul>
<li>glStencilOp function OpenGL
topic_type:</li>
<li>apiref
api_name:</li>
<li>glStencilOp
api_location:</li>
<li>opengl32.dll
api_type:</li>
<li>DllExport
ms.topic: reference
ms.date: 05/31/2018</li>
</ul>
<hr />
<h1>glStencilOp function</h1>
<p>The <strong>glStencilOp</strong> function sets the stencil test actions.</p>
<h2>Syntax</h2>
<pre lang="C++"><code>void WINAPI glStencilOp(
   GLenum fail,
   GLenum zfail,
   GLenum zpass
);
</code></pre>
<h2>Parameters</h2>
<!-- raw HTML omitted -->
<p><em>fail</em></p>
<!-- raw HTML omitted -->
<p>The action to take when the stencil test fails. The following six symbolic constants are accepted.</p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --> <!-- raw HTML omitted --><strong>GL_KEEP</strong><!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td>Keeps the current value.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --> <!-- raw HTML omitted --><strong>GL_ZERO</strong><!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td>Sets the stencil buffer value to zero.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --> <!-- raw HTML omitted --><strong>GL_REPLACE</strong><!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td>Sets the stencil buffer value to <em>ref</em>, as specified by <strong>glStencilFunc</strong>.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --> <!-- raw HTML omitted --><strong>GL_INCR</strong><!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td>Increments the current stencil buffer value. Clamps to the maximum representable unsigned value.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --> <!-- raw HTML omitted --><strong>GL_DECR</strong><!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td>Decrements the current stencil buffer value. Clamps to zero.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --> <!-- raw HTML omitted --><strong>GL_INVERT</strong><!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td>Bitwise inverts the current stencil buffer value.<!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<!-- raw HTML omitted -->
<p><em>zfail</em></p>
<!-- raw HTML omitted -->
<p>Stencil action when the stencil test passes, but the depth test fails. Accepts the same symbolic constants as <em>fail.</em></p>
<!-- raw HTML omitted -->
<p><em>zpass</em></p>
<!-- raw HTML omitted -->
<p>Stencil action when both the stencil test and the depth test pass, or when the stencil test passes and either there is no depth buffer or depth testing is not enabled. Accepts the same symbolic constants as <em>fail</em>.</p>
<!-- raw HTML omitted -->
<h2>Return value</h2>
<p>This function does not return a value.</p>
<h2>Error codes</h2>
<p>The following error codes can be retrieved by the <a href="glgeterror.html"><strong>glGetError</strong></a> function.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted --><strong>GL_INVALID_ENUM</strong><!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td><em>fail</em>, <em>zfail</em>, or <em>zpass</em> was any value other than the six defined constant values.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted --><strong>GL_INVALID_OPERATION</strong><!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td>The function was called between a call to <a href="glbegin.html"><strong>glBegin</strong></a> and the corresponding call to <a href="glend.html"><strong>glEnd</strong></a>.<!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<h2>Remarks</h2>
<p>Stenciling, like <em>z</em>-buffering, enables and disables drawing on a per-pixel basis. You draw into the stencil planes using OpenGL drawing primitives, then render geometry and images, using the stencil planes to mask out portions of the screen. Stenciling is typically used in multipass rendering algorithms to achieve special effects, such as decals, outlining, and constructive solid geometry rendering.</p>
<p>The stencil test conditionally eliminates a pixel based on the outcome of a comparison between the value in the stencil buffer and a reference value. The test is enabled with <a href="glenable.html"><strong>glEnable</strong></a> and <a href="gldisable.html"><strong>glDisable</strong></a> calls with argument GL_STENCIL_TEST, and controlled with <a href="glstencilfunc.html"><strong>glStencilFunc</strong></a>.</p>
<p>The <strong>glStencilOp</strong> function takes three arguments that indicate what happens to the stored stencil value while stenciling is enabled. If the stencil test fails, no change is made to the pixel's color or depth buffers, and <em>fail</em> specifies what happens to the stencil buffer contents.</p>
<p>Stencil buffer values are treated as unsigned integers. When incremented and decremented, values are clamped to 0 and 2<em>n</em> 1, where <em>n</em> is the value returned by querying GL_STENCIL_BITS.</p>
<p>The other two arguments to <strong>glStencilOp</strong> specify stencil buffer actions should subsequent depth buffer tests succeed (<em>zpass</em>) or fail (<em>zfail</em>). (See <a href="gldepthfunc.html"><strong>glDepthFunc</strong></a>.) They are specified using the same six symbolic constants as <em>fail</em>. Note that <em>zfail</em> is ignored when there is no depth buffer, or when the depth buffer is not enabled. In these cases, <em>fail</em> and <em>zpass</em> specify stencil action when the stencil test fails and passes, respectively.</p>
<p>Initially the stencil test is disabled. If there is no stencil buffer, no stencil modification can occur and it is as if the stencil tests always pass, regardless of any call to <strong>glStencilOp</strong>.</p>
<p>The following functions retrieve information related to <strong>glStencilOp</strong>:</p>
<p><a href="glgetbooleanv--glgetdoublev--glgetfloatv--glgetintegerv.html"><strong>glGet</strong></a> with argument GL_STENCIL_FAIL</p>
<p><strong>glGet</strong> with argument GL_STENCIL_PASS_DEPTH_PASS</p>
<p><strong>glGet</strong> with argument GL_STENCIL_PASS_DEPTH_FAIL</p>
<p><strong>glGet</strong> with argument GL_STENCIL_BITS</p>
<p><a href="glisenabled.html"><strong>glIsEnabled</strong></a> with argument GL_STENCIL_TEST</p>
<h2>Requirements</h2>
<table>
<thead>
<tr>
<th>Requirement</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Minimum supported client<!-- raw HTML omitted --></td>
<td>Windows 2000 Professional [desktop apps only]<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Minimum supported server<!-- raw HTML omitted --></td>
<td>Windows 2000 Server [desktop apps only]<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Header<!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted -->Gl.h<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Library<!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted -->Opengl32.lib<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
<tr>
<td>DLL<!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted -->Opengl32.dll<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<h2>See also</h2>
<!-- raw HTML omitted -->
<p><a href="glalphafunc.html"><strong>glAlphaFunc</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="glbegin.html"><strong>glBegin</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="glblendfunc.html"><strong>glBlendFunc</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="gldepthfunc.html"><strong>glDepthFunc</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="glenable.html"><strong>glEnable</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="glend.html"><strong>glEnd</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="glisenabled.html"><strong>glIsEnabled</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="gllogicop.html"><strong>glLogicOp</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="glstencilfunc.html"><strong>glStencilFunc</strong></a></p>
<!-- raw HTML omitted -->
</body>
