<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>PBT_APMSUSPEND event</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: Notifies applications that the computer is about to enter a suspended state.
ms.assetid: 61b177a0-4cff-4740-bed8-a46c06c43be8
title: PBT_APMSUSPEND event (WinUser.h)
ms.topic: reference
ms.date: 05/31/2018</h2>
<h1>PBT_APMSUSPEND event</h1>
<p>Notifies applications that the computer is about to enter a suspended state. This event is typically broadcast when all applications and installable drivers have returned <strong>TRUE</strong> to a previous <a href="pbt-apmquerysuspend.html">PBT_APMQUERYSUSPEND</a> event.</p>
<p>A window receives this event through the <a href="wm-powerbroadcast.html"><strong>WM_POWERBROADCAST</strong></a> message. The <em>wParam</em> and <em>lParam</em> parameters are set as described following.</p>
<pre lang="C++"><code>LRESULT 
CALLBACK 
WindowProc( HWND hwnd,      // handle to window
            UINT uMsg,      // WM_POWERBROADCAST
            WPARAM wParam,  // PBT_APMSUSPEND
            LPARAM lParam); // zero
</code></pre>
<h2>Parameters</h2>
<p><em>hwnd</em></p>
<p>A handle to window.</p>
<p><em>uMsg</em></p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --> <!-- raw HTML omitted --><strong><a href="wm-powerbroadcast.html"><strong>WM_POWERBROADCAST</strong></a></strong><!-- raw HTML omitted --> <!-- raw HTML omitted -->536 (0x218)<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td>Message identifier.<!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<p><em>wParam</em></p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --> <!-- raw HTML omitted --><strong>PBT_APMSUSPEND</strong><!-- raw HTML omitted --> <!-- raw HTML omitted -->4 (0x4)<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td>Event identifier.<!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<p><em>lParam</em></p>
<p>Reserved: must be zero.</p>
<h2>Return value</h2>
<p>No return value.</p>
<h2>Remarks</h2>
<p>An application should process this event by completing all tasks necessary to save data.</p>
<p>The system allows approximately two seconds for an application to handle this notification. If an application is still performing operations after its time allotment has expired, the system may interrupt the application.</p>
<h2>Requirements</h2>
<table>
<thead>
<tr>
<th>Requirement</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Minimum supported client<!-- raw HTML omitted --></td>
<td>Windows XP [desktop apps only]<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Minimum supported server<!-- raw HTML omitted --></td>
<td>Windows Server 2003 [desktop apps only]<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Header<!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted -->WinUser.h (include Windows.h)<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<h2>See also</h2>
<ul>
<li><a href="system-sleep-criteria.html">System sleep criteria</a></li>
<li><a href="system-wake-up-events.html">System wake-up events</a></li>
<li><a href="power-management-events.html">Power management events</a></li>
<li><a href="pbt-apmquerysuspend.html">PBT_APMQUERYSUSPEND</a></li>
<li><a href="/windows/desktop/api/WinBase/nf-winbase-setsystempowerstate">SetSystemPowerState</a></li>
<li><a href="wm-powerbroadcast.html">WM_POWERBROADCAST</a></li>
</ul>
</body>
