<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Logical and Physical Stores</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: Default system stores, including MY, CA, and ROOT, are implemented as logical collection stores with a number of predefined physical stores as their member stores.
ms.assetid: 1d82b94b-4842-454a-aca4-823cd264ac52
title: Logical and Physical Stores
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>Logical and Physical Stores</h1>
<p>Default system stores, including MY, CA, and ROOT, are implemented as logical collection stores with a number of predefined physical stores as their member stores. The member physical stores of a system store are opened automatically when the system store is opened. A user can add additional physical stores to any system store collection. The CryptoAPI function <a href="/windows/desktop/api/Wincrypt/nf-wincrypt-certregisterphysicalstore"><strong>CertRegisterPhysicalStore</strong></a> adds a new physical store to a system store collection. <a href="/windows/desktop/api/Wincrypt/nf-wincrypt-certunregisterphysicalstore"><strong>CertUnregisterPhysicalStore</strong></a> disassociates a physical store from a logical system store. <a href="/windows/desktop/api/Wincrypt/nf-wincrypt-certregistersystemstore"><strong>CertRegisterSystemStore</strong></a> creates a new system store under a registry hKey, while <a href="/windows/desktop/api/Wincrypt/nf-wincrypt-certunregistersystemstore"><strong>CertUnregisterSystemStore</strong></a> removes a system store from the registry.</p>
<p>In CryptoAPI, system stores are logical stores with associated physical stores. All the certificates in an existing system store remain available, and the physical addition of new certificates is made in the physical stores that make up the logical system store.</p>
<p>Users who prefer to continue to use physical system stores and not convert to logical stores can open system stores with the CERT_STORE_PROV_SYSTEM_REGISTRY provider. This provider will continue to use each system store as a single, physical store.</p>
<p>The functions <a href="/windows/desktop/api/Wincrypt/nf-wincrypt-certenumsystemstorelocation"><strong>CertEnumSystemStoreLocation</strong></a>, <a href="/windows/desktop/api/Wincrypt/nf-wincrypt-certenumsystemstore"><strong>CertEnumSystemStore</strong></a>, and <a href="/windows/desktop/api/Wincrypt/nf-wincrypt-certenumphysicalstore"><strong>CertEnumPhysicalStore</strong></a> list system store locations, available system stores, and all physical stores that are members of a system store.</p>
<p>System stores can also be relocated. By default, a system store is opened relative to a registry subkey following a predefined pattern. For more information, see <a href="system-store-locations.html">System Store Locations</a>. Setting CERT_SYSTEM_STORE_RELOCATE_FLAG in the <em>dwFlags</em> parameter passed to <a href="/windows/desktop/api/Wincrypt/nf-wincrypt-certopenstore"><strong>CertOpenStore</strong></a> places a system store in the registry under a user-specified registry subkey instead of the predefined one.</p>
<p>Â </p>
<p>Â </p>
</body>
