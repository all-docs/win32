<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Creating a Signed Message</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: Depicts the tasks that must be accomplished to create a signed message.
ms.assetid: 61896022-28c2-4f70-977a-c990b4b23c55
title: Creating a Signed Message
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>Creating a Signed Message</h1>
<p>The following illustration depicts the tasks that must be accomplished to create a signed message. The steps are listed following the illustration.</p>
<p><img src="images/signdmsg.png" alt="signing a message" /></p>
<p><strong>To create a signed message</strong></p>
<ol>
<li>
<p>Create the data (if necessary) and get a pointer to it.</p>
</li>
<li>
<p>Open a <a href="../secgloss/c-gly.html"><em>certificate store</em></a> that contains the signer's certificate.</p>
</li>
<li>
<p>Get the <a href="../secgloss/p-gly.html"><em>private key</em></a> for the certificate. A property must be set on the certificate before using it, to tie a certificate to a particular <a href="../secgloss/c-gly.html"><em>CSP</em></a>, and, within that CSP, to a particular private key. This needs to be set once.</p>
</li>
<li>
<p>Choose a hashing algorithm for the digest operation. We recommend that the hashing algorithm be selected from a configurable location that can be subsequently updated without requiring changes to code.</p>
</li>
<li>
<p>Send the data through the hashing function by using the hashing algorithm, thus creating a <a href="../secgloss/h-gly.html"><em>hash</em></a> (digest) of the data.</p>
</li>
<li>
<p>Using the <a href="../secgloss/p-gly.html"><em>private key</em></a> obtained through the property on the certificate, encrypt the digest, creating the signature.</p>
</li>
<li>
<p>Include the following in the signed message:</p>
<ul>
<li>The signed data</li>
<li>The hash algorithm</li>
<li>The signature</li>
<li>The signer identifier (certificate issuer and serial number)</li>
<li>The signer's certificate (optional)</li>
</ul>
</li>
</ol>
<p>For a detailed procedure and example, see <a href="procedure-for-signing-data.html">Procedure for Signing Data</a> and <a href="example-c-program-signing-a-message-and-verifying-a-message-signature.html">Example C Program: Signing a Message and Verifying a Message Signature</a>.</p>
<p>Â </p>
<p>Â </p>
</body>
