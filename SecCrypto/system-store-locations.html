<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>System Store Locations</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: A system store is a collection that consists of one or more physical sibling stores.
ms.assetid: 41fe9366-4c17-43bb-91d6-934c7aa87a2d
title: System Store Locations
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>System Store Locations</h1>
<p>A system store is a collection that consists of one or more physical sibling stores. For each system store, there are predefined physical sibling stores. After opening a system store such as MY at CERT_SYSTEM_STORE_CURRENT_USER, the store provider calls <a href="/windows/desktop/api/Wincrypt/nf-wincrypt-certopenstore"><strong>CertOpenStore</strong></a> to open each of the physical stores in the system store collection. In the open process, each of these physical stores is added to the system store collection using <a href="/windows/desktop/api/Wincrypt/nf-wincrypt-certaddstoretocollection"><strong>CertAddStoreToCollection</strong></a>. All certificates in those physical stores are available through the logical system store collection.</p>
<p>For each system store location, the predefined systems stores are:</p>
<ul>
<li>MY</li>
<li>Root</li>
<li>Trust</li>
<li>CA</li>
</ul>
<p>In CERT_SYSTEM_STORE_CURRENT_USER, there is also a predefined UserDS store. A smart card store is planned for this location.</p>
<p>Here are the system stores followed by further remarks:</p>
<ul>
<li><a href="#cert_system_store_current_user">CERT_SYSTEM_STORE_CURRENT_USER</a></li>
<li><a href="#cert_system_store_local_machine">CERT_SYSTEM_STORE_LOCAL_MACHINE</a></li>
<li><a href="#cert_system_store_current_service">CERT_SYSTEM_STORE_CURRENT_SERVICE</a></li>
<li><a href="#cert_system_store_services">CERT_SYSTEM_STORE_SERVICES</a></li>
<li><a href="#cert_system_store_users">CERT_SYSTEM_STORE_USERS</a></li>
<li><a href="#cert_system_current_user_group_policy">CERT_SYSTEM_CURRENT_USER_GROUP_POLICY</a></li>
<li><a href="#cert_system_local_machine_group_policy">CERT_SYSTEM_LOCAL_MACHINE_GROUP_POLICY</a></li>
<li><a href="#cert_system_store_local_machine_enterprise">CERT_SYSTEM_STORE_LOCAL_MACHINE_ENTERPRISE</a></li>
<li><a href="#remarks">Remarks</a></li>
</ul>
<h3>CERT_SYSTEM_STORE_CURRENT_USER</h3>
<p>CERT_SYSTEM_STORE_CURRENT_USER system stores are at the following registry location:</p>
<pre><code>HKEY_CURRENT_USER
Â Â Â Software
Â Â Â Â Â Â Microsoft
Â Â Â Â Â Â Â Â Â SystemCertificates
</code></pre>
<p>The predefined physical stores associated with those system stores are as follows.</p>
<table>
<thead>
<tr>
<th>System store</th>
<th>Physical store</th>
</tr>
</thead>
<tbody>
<tr>
<td>MY</td>
<td>.Default</td>
</tr>
<tr>
<td>Root</td>
<td>.Default.LocalMachine<!-- raw HTML omitted --> .SmartCard<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Trust</td>
<td>.Default.GroupPolicy<!-- raw HTML omitted --> .LocalMachine<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>CA</td>
<td>.Default.GroupPolicy<!-- raw HTML omitted --> .LocalMachine<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>UserDS</td>
<td>.UserCertificate</td>
</tr>
</tbody>
</table>
<p>Â </p>
<h3>CERT_SYSTEM_STORE_LOCAL_MACHINE</h3>
<p>CERT_SYSTEM_STORE_LOCAL_MACHINE system stores are at the following registry location:</p>
<pre><code>HKEY_LOCAL_MACHINE
Â Â Â Software
Â Â Â Â Â Â Microsoft
Â Â Â Â Â Â Â Â Â SystemCertificates
</code></pre>
<p>The predefined physical stores are associated with those system stores are as follows.</p>
<table>
<thead>
<tr>
<th>System store</th>
<th>Physical store</th>
</tr>
</thead>
<tbody>
<tr>
<td>MY</td>
<td>.Default</td>
</tr>
<tr>
<td>Root</td>
<td>.Default.AuthRoot<!-- raw HTML omitted --> .GroupPolicy<!-- raw HTML omitted --> .Enterprise<!-- raw HTML omitted --> .SmartCard<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Trust</td>
<td>.Default.GroupPolicy<!-- raw HTML omitted --> .Enterprise<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>CA</td>
<td>.Default.GroupPolicy<!-- raw HTML omitted --> .Enterprise <!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<p>Â </p>
<h3>CERT_SYSTEM_STORE_CURRENT_SERVICE</h3>
<p>CERT_SYSTEM_STORE_CURRENT_SERVICE system stores are at the following registry location:</p>
<pre><code>HKEY_LOCAL_MACHINE
Â Â Â Software
Â Â Â Â Â Â Microsoft
Â Â Â Â Â Â Â Â Â Cryptography
Â Â Â Â Â Â Â Â Â Â Â Â Services
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ServiceName
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â SystemCertificates
</code></pre>
<p>The predefined physical stores associated with those system stores are as follows.</p>
<table>
<thead>
<tr>
<th>System store</th>
<th>Physical store</th>
</tr>
</thead>
<tbody>
<tr>
<td>MY</td>
<td>.Default</td>
</tr>
<tr>
<td>Root</td>
<td>.Default.LocalMachine<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Trust</td>
<td>.Default.LocalMachine<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>CA</td>
<td>.Default.LocalMachine<!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<p>Â </p>
<h3>CERT_SYSTEM_STORE_SERVICES</h3>
<p>CERT_SYSTEM_STORE_SERVICES system stores are at the following registry location:</p>
<pre><code>HKEY_LOCAL_MACHINE
Â Â Â Software
Â Â Â Â Â Â Microsoft
Â Â Â Â Â Â Â Â Â Cryptography
Â Â Â Â Â Â Â Â Â Â Â Â Services
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ServiceName
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â SystemCertificates
</code></pre>
<p>The predefined physical stores associated with those system stores are as follows.</p>
<table>
<thead>
<tr>
<th>System store</th>
<th>Physical store</th>
</tr>
</thead>
<tbody>
<tr>
<td>ServiceName\MY</td>
<td>.Default</td>
</tr>
<tr>
<td>ServiceName\Root</td>
<td>.Default.LocalMachine<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>ServiceName\Trust</td>
<td>.Default.LocalMachine<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>ServiceName\CA</td>
<td>.Default.LocalMachine<!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<p>Â </p>
<h3>CERT_SYSTEM_STORE_USERS</h3>
<p>CERT_SYSTEM_STORE_USERS system stores are at the following registry location:</p>
<pre><code>HKEY_USERS
Â Â Â UserName
Â Â Â Â Â Â Software
Â Â Â Â Â Â Â Â Â Microsoft
Â Â Â Â Â Â Â Â Â Â Â Â SystemCertificates
</code></pre>
<p>The predefined physical stores associated with those system stores are as follows.</p>
<table>
<thead>
<tr>
<th>System store</th>
<th>Physical store</th>
</tr>
</thead>
<tbody>
<tr>
<td>userid\MY</td>
<td>.Default.LocalMachine<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>userid\Root</td>
<td>.Default.LocalMachine<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>userid\Trust</td>
<td>.Default.LocalMachine<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>userid\CA</td>
<td>.Default.LocalMachine<!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<p>Â </p>
<h3>CERT_SYSTEM_CURRENT_USER_GROUP_POLICY</h3>
<p>CERT_SYSTEM_CURRENT_USER_GROUP_POLICY system stores are at the following registry location:</p>
<pre><code>HKEY_CURRENT_USER
Â Â Â Software
Â Â Â Â Â Â Policy
Â Â Â Â Â Â Â Â Â Microsoft
Â Â Â Â Â Â Â Â Â Â Â Â SystemCertificates
</code></pre>
<h3>CERT_SYSTEM_LOCAL_MACHINE_GROUP_POLICY</h3>
<p>CERT_SYSTEM_LOCAL_MACHINE_GROUP_POLICY system stores are at the following registry location:</p>
<pre><code>HKEY_LOCAL_MACHINE
Â Â Â Software
Â Â Â Â Â Â Policy
Â Â Â Â Â Â Â Â Â Microsoft
Â Â Â Â Â Â Â Â Â Â Â Â SystemCertificates
</code></pre>
<h3>CERT_SYSTEM_STORE_LOCAL_MACHINE_ENTERPRISE</h3>
<p>CERT_SYSTEM_STORE_LOCAL_MACHINE_ENTERPRISE contains certificates shared across domains in the enterprise and downloaded from the global enterprise directory. To synchronize the client's enterprise store, the enterprise directory is polled every eight hours and certificates are downloaded automatically in the background.</p>
<p>The predefined physical stores associated with these system stores are as follows.</p>
<table>
<thead>
<tr>
<th>System store</th>
<th>Physical store</th>
</tr>
</thead>
<tbody>
<tr>
<td>MY</td>
<td>.Default</td>
</tr>
<tr>
<td>Root</td>
<td>.Default</td>
</tr>
<tr>
<td>Trust</td>
<td>.Default</td>
</tr>
<tr>
<td>CA</td>
<td>.Default</td>
</tr>
</tbody>
</table>
<p>Â </p>
<h3>Remarks</h3>
<p>Additional physical stores can be associated with a system store by using <a href="/windows/desktop/api/Wincrypt/nf-wincrypt-certregisterphysicalstore"><strong>CertRegisterPhysicalStore</strong></a>.</p>
<p>CERT_SYSTEM_STORE_SERVICE and CERT_SYSTEM_STORE_USERS stores are opened by prefixing the name of the store in the string passed to <em>pvPara</em> with the service or user name such as <em>ServiceName</em>\<strong>Trust</strong> or <strong>.Default</strong>\<strong>MY</strong>. The CERT_SYSTEM_STORE_SERVICES or CERT_SYSTEM_STORE_USERS location can open the same store in CERT_SYSTEM_CURRENT_SERVICE or CERT_SYSTEM_STORE_CURRENT_USER by using the textual <a href="../secgloss/s-gly.html"><em>security identifier</em></a> (SID) of the current service or user.</p>
<p>Stores in CERT_SYSTEM_STORE_USER_GROUP_POLICY and CERT_SYSTEM_LOCAL_MACHINE_GROUP_POLICY in a network setting are downloaded to the client computer from the Group Policy Template (GPT) during computer startup or user logon. These stores can be updated on the client computer after startup or logon when the GPT is changed on the domain server by an administrator. The <a href="/windows/desktop/api/Wincrypt/nf-wincrypt-certcontrolstore"><strong>CertControlStore</strong></a> function allows an application to be notified when stores in either of these locations have changed.</p>
<p>The following system store locations can be opened remotely:</p>
<ul>
<li>CERT_SYSTEM_STORE_LOCAL_MACHINE</li>
<li>CERT_SYSTEM_STORE_LOCAL_MACHINE_GROUP_POLICY</li>
<li>CERT_SYSTEM_STORE_SERVICES</li>
<li>CERT_SYSTEM_STORE_USERS</li>
</ul>
<p>System store locations are opened remotely by prefixing the store name in the string passed to <em>pvPara</em> with the computer name. Examples of remote system store names are:</p>
<ul>
<li><em>ComputerName</em>\<strong>CA</strong></li>
<li>\\<em>ComputerName</em>\<strong>CA</strong></li>
<li><em>ComputerName</em>\<em>ServiceName</em>\<strong>Trust</strong></li>
<li>\\<em>ComputerName</em>\<em>ServiceName</em>\<strong>Trust</strong></li>
</ul>
<p>Â </p>
<p>Â </p>
</body>
