<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>W3C Logging</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>title: W3C Logging
description: W3C extended logging is type of server side logging that can be enabled on the server session or URL group.
ms.assetid: a08b8f9e-2247-43c6-b253-81f72001d8d2
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>W3C Logging</h1>
<p>W3C extended logging is type of server side logging that can be enabled on the server session or URL group. When W3C logging is enabled on a URL group, logging is performed only on requests that are routed to the URL Group. A separate log file is created for each URL group configured to enable W3C logging.</p>
<p>When W3C logging is enabled on the server session it functions as centralized form of logging for all the URL groups under the server session. A single log file is maintained for all of the URL groups in the server session.</p>
<p>The following table lists the fields that can be logged by the HTTP Server API. The table contains a subset of the <a href="http-log-field--constants.html"><strong>HTTP_LOG_FIELD</strong></a> constants. Some of the fields listed below are auto generated by HTTP Server API internally and therefore not contained in the <a href="/windows/desktop/api/Http/ns-http-http_log_fields_data"><strong>HTTP_LOG_FIELDS_DATA</strong></a> structure. The &quot;Appears As&quot; column contains the text that appears in the log file. The data in the table is in the order of occurrence in the log file record.</p>
<p>Fields that are not marked &quot;HTTP Server API generated&quot; have to be passed inside <a href="/windows/desktop/api/Http/ns-http-http_log_fields_data"><strong>HTTP_LOG_FIELDS_DATA</strong></a> structure by application. Application could generate those fields from the <a href="/previous-versions/windows/desktop/legacy/aa364545(v=vs.85)"><strong>HTTP_REQUEST</strong></a> structure passed to it.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Appears As</th>
<th>Description</th>
<th>HTTP_LOG_FIELDS_DATA Member</th>
<th>HTTP_LOG_FIELDS constants</th>
</tr>
</thead>
<tbody>
<tr>
<td>Date</td>
<td>date</td>
<td>The date on which the activity occurred.</td>
<td>HTTP Server API generated.</td>
<td>HTTP_LOG_FIELD_DATE</td>
</tr>
<tr>
<td>Time</td>
<td>time</td>
<td>The time, in coordinated universal time (UTC), at which the activity occurred.</td>
<td>HTTP Server API generated.</td>
<td>HTTP_LOG_FIELD_TIME</td>
</tr>
<tr>
<td>Service Name and Instance Number</td>
<td>s-sitename</td>
<td>The Internet service name and instance number that was running on the client.</td>
<td>ServiceName</td>
<td>HTTP_LOG_FIELD_SITE_NAME</td>
</tr>
<tr>
<td>Server Name</td>
<td>s-computername</td>
<td>The name of the server on which the log file entry was generated.</td>
<td>ServerName</td>
<td>HTTP_LOG_FIELD_COMPUTER_NAME</td>
</tr>
<tr>
<td>Server IP Address</td>
<td>s-ip</td>
<td>The IP address of the server on which the log file entry was generated.</td>
<td>ServerIp</td>
<td>HTTP_LOG_FIELD_SERVER_IP</td>
</tr>
<tr>
<td>Method</td>
<td>cs-method</td>
<td>The requested verb, for example, a GET method.</td>
<td>Method</td>
<td>HTTP_LOG_FIELD_METHOD</td>
</tr>
<tr>
<td>URI Stem</td>
<td>cs-uri-stem</td>
<td>The target of the verb, for example, Default.htm.</td>
<td>UriStem</td>
<td>HTTP_LOG_FIELD_URI_STEM</td>
</tr>
<tr>
<td>URI Query</td>
<td>cs-uri-query</td>
<td>The query, if any, that the client was trying to perform. A Universal Resource Identifier (URI) query is necessary only for dynamic pages.</td>
<td>UriQuery</td>
<td>HTTP_LOG_FIELD_URI_QUERY</td>
</tr>
<tr>
<td>Server Port</td>
<td>s-port</td>
<td>The server port number that is configured for the service.</td>
<td>ServerPort</td>
<td>HTTP_LOG_FIELD_SERVER_PORT</td>
</tr>
<tr>
<td>User Name</td>
<td>cs-username</td>
<td>The name of the authenticated user that accessed the server. Anonymous users are indicated by a hyphen.</td>
<td>UserName</td>
<td>HTTP_LOG_FIELD_USER_NAME</td>
</tr>
<tr>
<td>Client IP Address</td>
<td>c-ip</td>
<td>The IP address of the client that made the request.</td>
<td>ClientIp</td>
<td>HTTP_LOG_FIELD_CLIENT_IP</td>
</tr>
<tr>
<td>Protocol Version</td>
<td>cs-version</td>
<td>The HTTP protocol version that the client used.</td>
<td>HTTP Server API generated.</td>
<td>HTTP_LOG_FIELD_VERSION</td>
</tr>
<tr>
<td>User Agent</td>
<td>cs(User-Agent)</td>
<td>The browser type that the client used.</td>
<td>UserAgent</td>
<td>HTTP_LOG_FIELD_USER_AGENT</td>
</tr>
<tr>
<td>Cookie</td>
<td>cs(Cookie)</td>
<td>The content of the cookie sent or received, if any.</td>
<td>Cookie</td>
<td>HTTP_LOG_FIELD_COOKIE</td>
</tr>
<tr>
<td>Referrer</td>
<td>cs(Referrer)</td>
<td>The site that the user last visited. This site provided a link to the current site.</td>
<td>Referrer</td>
<td>HTTP_LOG_FIELD_REFERRER</td>
</tr>
<tr>
<td>Host</td>
<td>cs-host</td>
<td>The host header name, if any.</td>
<td>Host</td>
<td>HTTP_LOG_FIELD_HOST</td>
</tr>
<tr>
<td>HTTP Status</td>
<td>sc-status</td>
<td>The HTTP status code.</td>
<td>ProtocolStatus</td>
<td>HTTP_LOG_FIELD_STATUS</td>
</tr>
<tr>
<td>Protocol Substatus</td>
<td>sc-substatus</td>
<td>The substatus error code.</td>
<td>SubStatus</td>
<td>HTTP_LOG_FIELD_SUB_STATUS</td>
</tr>
<tr>
<td>Win32 Status</td>
<td>sc-win32-status</td>
<td>The Windows status code.</td>
<td>Win32Status</td>
<td>HTTP_LOG_FIELD_WIN32_STATUS</td>
</tr>
<tr>
<td>Bytes Sent</td>
<td>sc-bytes</td>
<td>The number of bytes sent by the server.</td>
<td>HTTP Server API generated.</td>
<td>HTTP_LOG_FIELD_BYTES_SENT</td>
</tr>
<tr>
<td>Bytes Received</td>
<td>cs-bytes</td>
<td>The number of bytes received and processed by the server.</td>
<td>HTTP Server API generated.</td>
<td>HTTP_LOG_FIELD_BYTES_RECV</td>
</tr>
<tr>
<td>Time Taken</td>
<td>time-taken</td>
<td>The length of time that the action took, in milliseconds.</td>
<td>HTTP Server API generated.</td>
<td>HTTP_LOG_FIELD_TIME_TAKEN</td>
</tr>
<tr>
<td>Stream ID</td>
<td>streamid</td>
<td>The Stream Id.</td>
<td>HTTP Server API generated.</td>
<td>HTTP_LOG_FIELD_STREAM_ID</td>
</tr>
</tbody>
</table>
<p>Â </p>
<p>The log file is a customizable ASCII text-based format. The field prefixes in the file are defined as follows:</p>
<table>
<thead>
<tr>
<th>Prefix</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>s</td>
<td>Server actions.</td>
</tr>
<tr>
<td>c</td>
<td>Client actions.</td>
</tr>
<tr>
<td>sc</td>
<td>Server-to-Client actions.</td>
</tr>
<tr>
<td>cs</td>
<td>Client-to-Server actions.</td>
</tr>
</tbody>
</table>
<p>Â </p>
<p>The application can select one or more of the W3C Extended log file fields, however, not all fields will contain information. For fields that are selected but for which there is no information, a hyphen (-) appears as a placeholder. If a field contains a nonprintable character, the HTTP Server API replaces it with a plus sign (+) to preserve the log file format. This typically occurs with virus attacks, when, for example, a malicious user sends carriage returns and line feeds that, if not replaced with the plus sign (+), would break the log file format. Fields are separated by spaces.</p>
<p>If a field is enabled by the URL group or server session, but not selected for the request, it appears in the log file with a hyphen (-) as a placeholder.</p>
<p>Log files are created when the first request arrives on the URL Group or server session, they are not created when logging is configured. The following example shows the first log file entry for a W3C log file with the Client IP, Username, Server IP, Server Port, Method, URI Stem, URI Query, Status, and User Agent fields enabled:</p>
<pre lang="syntax"><code>#Software: Microsoft HTTP Server API 2.0  
#Version: 1.0   // the log file version as it's described by &quot;https://www.w3.org/TR/WD-logfile&quot;.
#Date: 2002-05-02 17:42:15  // when the first log file entry was recorded, which is when the entire log file was created.
#Fields: date time c-ip cs-username s-ip s-port cs-method cs-uri-stem cs-uri-query sc-status cs(User-Agent)
2002-05-02 17:42:15 172.22.255.255 - 172.30.255.255 80 GET /images/picture.jpg - 200 Mozilla/4.0+(compatible;MSIE+5.5;+Windows+2000+Server)
</code></pre>
<p>The time-taken field is initialized when the HTTP Server API receives the first byte, before the request is parsed. The time-taken timestamp is stopped when the last send completion occurs. Time-taken does not reflect time across the network. The first request to the site shows a slightly longer time taken than other similar requests because the HTTP Server API opens the log file with the first request.</p>
<p>Â </p>
<p>Â </p>
</body>
