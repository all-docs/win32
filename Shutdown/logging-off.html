<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Logging Off</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: The ExitWindows function logs off the current user. You can also call the ExitWindowsEx function with the EXW_LOGOFF flag.
ms.assetid: 906d92f1-7cbe-454e-9c71-34b4383aebab
title: Logging Off
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>Logging Off</h1>
<p>The <a href="/windows/desktop/api/Winuser/nf-winuser-exitwindows"><strong>ExitWindows</strong></a> function logs off the current user. You can also call the <a href="/windows/desktop/api/Winuser/nf-winuser-exitwindowsex"><strong>ExitWindowsEx</strong></a> function with the EXW_LOGOFF flag.</p>
<p>By default, when an application uses <a href="/windows/desktop/api/Winuser/nf-winuser-exitwindows"><strong>ExitWindows</strong></a> or <a href="/windows/desktop/api/Winuser/nf-winuser-exitwindowsex"><strong>ExitWindowsEx</strong></a> to log off, the system sends the <a href="wm-queryendsession.html"><strong>WM_QUERYENDSESSION</strong></a> message to each window. Applications agree to terminate by returning <strong>TRUE</strong> when they receive this message. If any application returns <strong>FALSE</strong> when processing this message, the log-off operation is canceled. If your application handles the <strong>WM_QUERYENDSESSION</strong> message, you can allow the user to cancel the log-off operation, even if another application or the system originated the end-session request. For an example, see <a href="how-to-log-off-the-current-user.html">How to Log Off the Current User</a>.</p>
<p>When an application returns <strong>TRUE</strong> for <a href="wm-queryendsession.html"><strong>WM_QUERYENDSESSION</strong></a>, it receives the <a href="wm-endsession.html"><strong>WM_ENDSESSION</strong></a> message and it is terminated, regardless of how the other applications respond to the <strong>WM_QUERYENDSESSION</strong> message.</p>
<p>To force all applications to terminate, use <a href="/windows/desktop/api/Winuser/nf-winuser-exitwindowsex"><strong>ExitWindowsEx</strong></a>, and specify the EXW_FORCE flag. This prevents the system from sending <a href="wm-queryendsession.html"><strong>WM_QUERYENDSESSION</strong></a> messages.</p>
<p>The system also sends the CTRL_LOGOFF_EVENT control signal to every process during a log-off operation. A console application can register a <a href="/windows/console/handlerroutine"><strong>HandlerRoutine</strong></a> to process these messages.</p>
<p>If the process that called <a href="/windows/desktop/api/Winuser/nf-winuser-exitwindowsex"><strong>ExitWindowsEx</strong></a> is running in the logon session of the interactive user, all processes in the logon session are terminated. If the process calling <strong>ExitWindowsEx</strong> is in some other logon session, only the notifications are made; no processes are terminated.</p>
<h2>Related topics</h2>
<!-- raw HTML omitted -->
<p><a href="how-to-log-off-the-current-user.html">How to Log Off the Current User</a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
