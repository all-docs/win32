<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>ps_3_0</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<p>title: ps_3_0
description: Learn about ps_3_0, a programmable pixel shader, which is made up of a set of instructions that operate on pixel data.
ms.assetid: 3eabf173-9d9d-45b2-bc30-de857428f3ee
ms.topic: article
ms.date: 05/31/2018
topic_type:</p>
<ul>
<li>kbArticle
api_name:
api_type:
api_location:</li>
</ul>
<hr />
<h1>ps_3_0</h1>
<p>A programmable pixel shader is made up of a set of instructions that operate on pixel data. Registers transfer data in and out of the ALU. Additional control can be applied to modify the instruction, the results, or what data gets written out.</p>
<ul>
<li><a href="dx9-graphics-reference-asm-ps-instructions-ps-3-0.html">ps_3_0 Instructions</a> contains a list of the available instructions.</li>
<li><a href="dx9-graphics-reference-asm-ps-registers-ps-3-0.html">ps_3_0 Registers</a> lists the different types of registers used by the pixel shader ALU.</li>
<li><a href="dx9-graphics-reference-asm-ps-registers-modifiers.html">Modifiers</a> Are used to modify the way an instruction works.</li>
<li><a href="dx9-graphics-reference-asm-ps-registers-modifiers-write-mask.html">Destination Register Write Mask</a> determines what components of the destination register get written.</li>
<li><a href="dx9-graphics-reference-asm-ps-registers-modifiers-source.html">Pixel Shader Source Register Modifiers</a> alter the source register data before the instruction runs.</li>
<li><a href="dx9-graphics-reference-asm-ps-registers-modifiers-source-register-swizzling.html">Source Register Swizzling</a> gives additional control over which register components are read, copied, or written.</li>
</ul>
<h2>New Features</h2>
<p>Add a face register. Add a position register. Color registers (v#) are now fully floating point and the texture coordinate registers (t#) have been consolidated. Input declarations take the usage names, and multiple usages are permitted for components of a given register.</p>
<h2>Dynamic Flow Control</h2>
<p>The device supports dynamic flow control (<a href="if-bool---ps.html">if bool - ps</a>, <a href="break---ps.html">break - ps</a>, and <a href="break-comp---ps.html">break_comp - ps</a>). The depth of nesting ranges from 0 to 24.</p>
<h2>Number of Temporary Registers</h2>
<p>The number of temporary registers supported is 32.</p>
<h2>Static Flow Control Nesting Depth</h2>
<p>The <a href="call---ps.html">call - ps</a>/<a href="callnz-bool---ps.html">callnz</a> /<a href="callnz-pred---ps.html">call_pred</a> can be nested to a maximum depth of 4. Independently, <a href="loop---ps.html">loop - ps</a>/<a href="rep---ps.html">rep - ps</a> instructions can be nested to a maximum depth of 4.</p>
<h2>Arbitrary Swizzle</h2>
<p>Arbitrary swizzle is supported. See <a href="dx9-graphics-reference-asm-ps-registers-modifiers-source-register-swizzling.html">Source Register Swizzling</a>.</p>
<h2>Gradient Instructions</h2>
<p>Gradient instructions are supported. See <a href="dsx---ps.html">dsx - ps</a>, <a href="dsy---ps.html">dsy - ps</a>, and <a href="texldd---ps.html">texldd - ps</a>.</p>
<h2>Predication</h2>
<p>Instruction predication is supported. See <a href="dx9-graphics-reference-asm-ps-registers-predicate.html">Predicate Register</a>.</p>
<h2>Dependent Read Limit</h2>
<p>There are no dependent read limits.</p>
<h2>Texture Instruction Limit</h2>
<p>There is no limit on texture instructions.</p>
<h2>Instruction Count</h2>
<p>Each pixel shader is allowed anywhere from 512 up to the number of slots in MaxPixelShader30InstructionSlots (not more than 32768). The number of instructions run can be much higher because of the looping support. MaxPShaderInstructionsExecuted should be at least 2^16.</p>
<h2>Sampler Count</h2>
<p>The number of texture samplers available is 16.</p>
<h2>Device Caps</h2>
<p>If ps_3_0 is supported, the following caps are supported in hardware (at a minimum):</p>
<table>
<thead>
<tr>
<th>Cap</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>MaxTextureWidth, MaxTextureHeight</td>
<td>4K each</td>
</tr>
<tr>
<td>MaxTextureRepeat</td>
<td>8K</td>
</tr>
<tr>
<td>MaxAnisotropy</td>
<td>16</td>
</tr>
<tr>
<td>PixelShaderVersion</td>
<td>3_0</td>
</tr>
<tr>
<td>MaxPixelShader30InstructionSlots</td>
<td>512</td>
</tr>
<tr>
<td>The following primitive caps are set:</td>
<td>D3DPMISCCAPS_BLENDOP, D3DPMISCCAPS_CLIPPLANESCALEDPOINTS, D3DPMISCCAPS_CLIPTLVERTS, D3DPMISCCAPS_CULLCCW, D3DPMISCCAPS_CULLCW, D3DPMISCCAPS_CULLNONE, D3DPMISCCAPS_FOGINFVF, D3DPMISCCAPS_MASKZ</td>
</tr>
<tr>
<td>The following raster caps are set:</td>
<td>D3DPRASTERCAPS_MIPMAPLODBIAS, D3DPRASTERCAPS_ANISOTROPY, D3DPRASTERCAPS_COLORPERSPECTIVE, D3DPRASTERCAPS_SCISSORTEST in D3DCAPS9</td>
</tr>
<tr>
<td>Full support for depth bias including:</td>
<td>D3DPRASTERCAPS_SLOPESCALEDEPTHBIAS, D3DPRASTERCAPS_DEPTHBIAS</td>
</tr>
<tr>
<td>Full set of comparisons for depth and alpha test including:</td>
<td>All the D3DPCMPCAPS in D3DCAPS9.</td>
</tr>
<tr>
<td>Source blending modes</td>
<td>All blending modes are supported as a source (except D3DPBLENDCAPS_SRCALPHASAT, D3DPBLENDCAPS_BOTHSRCALPHA, and D3DPBLENDCAPS_BOTHINVSRCALPHA).</td>
</tr>
<tr>
<td>The following texture caps are supported:</td>
<td>D3DPTEXTURECAPS_CUBEMAP, D3DPTEXTURECAPS_MIPCUBEMAP, D3DPTEXTURECAPS_MIPMAP, D3DPTEXTURECAPS_MIPVOLUMEMAP, D3DPTEXTURECAPS_PERSPECTIVE, D3DPTEXTURECAPS_PROJECTED, D3DPTEXTURECAPS_TEXREPEATNOTSCALEDBYSIZE, D3DPTEXTURECAPS_VOLUMEMAP</td>
</tr>
<tr>
<td>The following are supported on texture filter caps, volume texture filter caps and cube texture filter caps:</td>
<td>D3DPTFILTERCAPS_MINFPOINT, D3DPTFILTERCAPS_MINFLINEAR, D3DPTFILTERCAPS_MINFANISOTROPIC (This is not required for VolumeTextureFilterCaps and CubeTextureFilterCaps ), D3DPTFILTERCAPS_MIPFPOINT, D3DPTFILTERCAPS_MIPFLINEAR, D3DPTFILTERCAPS_MAGFPOINT, D3DPTFILTERCAPS_MAGFLINEAR</td>
</tr>
<tr>
<td>The following texture address modes are supported at vertex and pixel stages:</td>
<td>D3DPTADDRESSCAPS_WRAP, D3DPTADDRESSCAPS_MIRROR, D3DPTADDRESSCAPS_CLAMP, D3DPTADDRESSCAPS_BORDER, D3DPTADDRESSCAPS_INDEPENDENTUV, D3DPTADDRESSCAPS_MIRRORONCE</td>
</tr>
<tr>
<td>All the pixel shader caps are supported.</td>
<td>DynamicFlowControlDepth = 24, NumTemps = 32, StaticFlowControlDepth = 4, NumInstructionSlots = 512. The following features are supported: predication, arbitrary swizzles, and gradient instructions. There is no dependent-read limit, and no limit on the mixture of texture and math instructions.</td>
</tr>
<tr>
<td>All the stencil operations are supported. This includes two sided stencil.</td>
<td>See <a href="/windows/desktop/direct3d9/d3dstencilop"><strong>D3DSTENCILOP</strong></a></td>
</tr>
<tr>
<td>Device support point size per vertex</td>
<td>D3DFVFCAPS_PSIZE in D3DCAPS9</td>
</tr>
<tr>
<td>Non-power of 2 texture support.</td>
<td>Either full support or conditional non-pow-2 support; device should not have the square texture only limitation as in D3DPTEXTURECAPS_SQUAREONLY.</td>
</tr>
<tr>
<td>If the device supports multiple rendertargets, the following caps are supported:</td>
<td>D3DPMISCCAPS_INDEPENDENTWRITEMASKS, D3DPMISCCAPS_MRTPOSTPIXELSHADERBLENDING</td>
</tr>
<tr>
<td>If vs_3_0 is supported</td>
<td>MaxUserClipPlanes in D3DCAPS9 is 6</td>
</tr>
</tbody>
</table>
<p>Â </p>
<h2>Related topics</h2>
<!-- raw HTML omitted -->
<p><a href="dx9-graphics-reference-asm-ps.html">Pixel Shaders</a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
