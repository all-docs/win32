<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Fragment Declaration Syntax (Direct3D 9 HLSL)</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<p>title: Fragment Declaration Syntax (Direct3D 9 HLSL)
description: Each Microsoft High Level Shader Language (HLSL) function can be converted into a shader fragment with the addition of a fragment declaration.
ms.assetid: 34ceef8c-8fb9-4c73-86cc-014b7a2ee4d7
ms.topic: article
ms.date: 05/31/2018
topic_type:</p>
<ul>
<li>kbArticle
api_name:
api_type:
api_location:</li>
</ul>
<hr />
<h1>Fragment Declaration Syntax (Direct3D 9 HLSL)</h1>
<p>Each Microsoft High Level Shader Language (HLSL) function can be converted into a shader fragment with the addition of a fragment declaration.</p>
<h2>Syntax</h2>
<pre><code>fragmentKeyword FragmentName = compile_fragment shaderProfile FunctionName();
</code></pre>
<p>where:</p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>fragmentKeyword</td>
<td>Required keyword. Either pixelfragment or vertexfragment.</td>
</tr>
<tr>
<td>FragmentName</td>
<td>An ASCII text string that specifies the compiled fragment name.</td>
</tr>
<tr>
<td>compile_fragment</td>
<td>Required keyword.</td>
</tr>
<tr>
<td>shaderProfile</td>
<td>The shader model to compile against. Any valid vertex shader profile (see <a href="/windows/desktop/direct3d9/d3dxgetvertexshaderprofile"><strong>D3DXGetVertexShaderProfile</strong></a>) or pixel shader profile (see <a href="/windows/desktop/direct3d9/d3dxgetpixelshaderprofile"><strong>D3DXGetPixelShaderProfile</strong></a>).</td>
</tr>
<tr>
<td>FunctionName()</td>
<td>The shader function name, followed by parentheses.</td>
</tr>
</tbody>
</table>
<p>Â </p>
<p>Shared fragment parameters are marked by adding an 'r_' prefix to their semantic.</p>
<pre><code>void AmbientDiffuse( float3 vPosWorld: r_PosWorld,
                     float3 vNormalWorld: r_NormalWorld,
                     out float4 vColor: COLOR0 )
{  
    // Compute the light vector
    float3 vLight = normalize( g_vLightPosition - vPosWorld );
    
    // Compute the ambient and diffuse components of illumination
    vColor = g_vLightColor * g_vMaterialAmbient;
    vColor += g_vLightColor * g_vMaterialDiffuse * saturate( dot( vLight, vNormalWorld ) );
}
vertexfragment AmbientDiffuseFragment = compile_fragment vs_1_1 AmbientDiffuse();
</code></pre>
<p>In this example, the r_PosWorld and r_NormalWorld semantics identify that these two parameters are shared parameters among other fragments.</p>
<blockquote>
<p>[!Note]<br />
Fragment linker was a Microsoft Direct3DÂ 9 technology in D3DX 9. Fragment linker was a tool (Flink.exe), a D3DX 9 API, and an HLSL enhancement. Fragment linker was dropped as of the August 2009 DirectX SDK release. Fragment linker never applied to Microsoft Direct3DÂ 10, Microsoft Direct3DÂ 10.1, or Microsoft Direct3DÂ 11.</p>
</blockquote>
<p>Â </p>
<h2>Related topics</h2>
<!-- raw HTML omitted -->
<p><a href="dx-graphics-hlsl-sm3.html">Shader Model 3 (DirectX HLSL)</a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
