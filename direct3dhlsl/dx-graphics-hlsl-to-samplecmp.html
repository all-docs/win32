<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>SampleCmp (DirectX HLSL Texture Object)</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<p>title: SampleCmp (DirectX HLSL Texture Object)
description: Samples a texture and compares a single component against the specified comparison value.
ms.assetid: e21894c4-e8c5-4c3d-92c1-727964f8fd94
ms.topic: reference
ms.date: 05/31/2018
topic_type:</p>
<ul>
<li>apiref
api_name:
api_type:
api_location:</li>
</ul>
<hr />
<h1>SampleCmp (DirectX HLSL Texture Object)</h1>
<p>Samples a texture and compares a single component against the specified comparison value.</p>
<!-- raw HTML omitted -->
<p>The comparison is a single-component comparison between the first component stored in the texture, and the comparison value passed into the method.</p>
<p>This method can be invoked only from a pixel shader; it isn't supported in a vertex or geometry shader.</p>
<h2>Parameters</h2>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><em>Object</em></p>
<!-- raw HTML omitted -->
<p>Any <a href="dx-graphics-hlsl-to-type.html">texture-object</a> type (except Texture2DMS, Texture2DMSArray, or Texture3D).</p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><em>S</em></p>
<!-- raw HTML omitted -->
<p>[in] A sampler-comparison state, which is the sampler state plus a comparison state (a comparison function and a comparison filter). See the <a href="dx-graphics-hlsl-sampler.html">sampler type</a> for details and an example.</p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><em>Location</em></p>
<!-- raw HTML omitted -->
<p>[in] The texture coordinates. The argument type is dependent on the texture-object type.</p>
<table>
<thead>
<tr>
<th>Texture-Object Type</th>
<th>Parameter Type</th>
</tr>
</thead>
<tbody>
<tr>
<td>Texture1D</td>
<td>float</td>
</tr>
<tr>
<td>Texture1DArray, Texture2D</td>
<td>float2</td>
</tr>
<tr>
<td>Texture2DArrayÂ¹, TextureCube</td>
<td>float3</td>
</tr>
<tr>
<td>TextureCubeArrayÂ¹</td>
<td>float4</td>
</tr>
</tbody>
</table>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><em>CompareValue</em></p>
<!-- raw HTML omitted -->
<p>A floating-point value to use as a comparison value.</p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><em>Offset</em></p>
<!-- raw HTML omitted -->
<p>[in] An optional texture coordinate offset, which can be used for any texture-object type; the offset is applied to the location before sampling. The texture offsets need to be static. The argument type is dependent on the texture-object type. For more info, see <a href="dx-graphics-hlsl-to-sample.html">Applying texture coordinate offsets</a>.</p>
<table>
<thead>
<tr>
<th>Texture-Object Type</th>
<th>Parameter Type</th>
</tr>
</thead>
<tbody>
<tr>
<td>Texture1D, Texture1DArray</td>
<td>int</td>
</tr>
<tr>
<td>Texture2D, Texture2DArrayÂ¹</td>
<td>int2</td>
</tr>
<tr>
<td>TextureCube, TextureCubeArrayÂ¹</td>
<td>Not supported</td>
</tr>
</tbody>
</table>
<!-- raw HTML omitted -->
<h2>Return Value</h2>
<p>Returns a floating-point value in the range [0..1].</p>
<p>For each texel fetched (based on the sampler configuration of the filter mode), <strong>SampleCmp</strong> performs a comparison of the z value (3rd component of input) from the shader against the texel value (1 if the comparison passes; otherwise 0). <strong>SampleCmp</strong> then blends these 0 and 1 results for each texel together as in normal texture filtering (not an average) and returns the resulting [0..1] value to the shader.</p>
<h2>Remarks</h2>
<p>Comparison filtering provides a basic filtering operation that is useful for percentage-closer-depth filtering.</p>
<p>When using this method on a floating-point resource (Instead of a signed-normalized or unsigned-normalized format), the comparison value is not automatically clamped between 0.0 and 1.0. Therefore, a manual clamp of the comparison value may be necessary for common shadowing techniques.</p>
<p>Use an offset only at an integer miplevel; otherwise, you may get different results depending on hardware implementation or driver settings.</p>
<h2>Minimum Shader Model</h2>
<p>This function is supported in the following shader models.</p>
<table>
<thead>
<tr>
<th>vs_4_0</th>
<th>vs_4_1Â²</th>
<th>ps_4_0</th>
<th>ps_4_1Â²</th>
<th>gs_4_0</th>
<th>gs_4_1Â²</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
<td>xÂ¹</td>
<td>x</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<ol>
<li>Texture2DArray and TextureCubeArray are available in Shader Model 4.1 or higher.</li>
<li>Shader Model 4.1 is available in Direct3D 10.1 or higher.</li>
</ol>
<blockquote>
<p>[!NOTE]<br />
<strong>SampleCmp</strong> is also available in ps 4_0_level_9_1 and 4_0_level_9_3 when you use the techniques that are described in <a href="/previous-versions/windows/apps/jj262110(v=win.10)">Implementing shadow buffers for Direct3D feature level 9</a>.</p>
</blockquote>
<h2>Related topics</h2>
<p><a href="dx-graphics-hlsl-to-type.html">Texture-Object</a></p>
</body>
