<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>gather4 (sm4.1 - asm)</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>title: gather4 (sm4.1 - asm)
description: Gathers the four texels that would be used in a bi-linear filtering operation and packs them into a single register. | gather4 (sm4.1 - asm)
ms.assetid: 219B25AE-CBF9-4B68-B2DB-6D8C3C5B4CEA
ms.topic: reference
ms.date: 05/31/2018</h2>
<h1>gather4 (sm4.1 - asm)</h1>
<p>Gathers the four texels that would be used in a bi-linear filtering operation and packs them into a single register.</p>
<table>
<thead>
<tr>
<th>gather4[_aoffimmi(u,v)] dest[.mask], srcAddress[.swizzle], srcResource[.swizzle], srcSampler.r</th>
</tr>
</thead>
</table>
<table>
<thead>
<tr>
<th>Item</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><em>dest</em><!-- raw HTML omitted --></td>
<td>[in] The address of the result of the operation.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><em>srcAddress</em><!-- raw HTML omitted --></td>
<td>[in] Contains the texture coordinates. <!-- raw HTML omitted --></td>
</tr>
<tr>
<td><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><em>srcResource</em><!-- raw HTML omitted --></td>
<td>[in] A resource register. <!-- raw HTML omitted --> The swizzle allows the returned values to be swizzled arbitrarily before they are written to <em>dest</em>. <!-- raw HTML omitted --></td>
</tr>
<tr>
<td><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><em>srcSampler</em><!-- raw HTML omitted --></td>
<td>[in] A sampler register.<!-- raw HTML omitted --> This parameter must have a .r (red) swizzle, which indicates that the value of the R channel is copied to <em>dest</em>. <!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<h2>Remarks</h2>
<p>This operation only works with single channel 2D or CubeMap textures. For 2D textures only the addressing modes of the sampler are used and the top level of any mip pyramid is used.</p>
<p>This instruction behaves like the <a href="sample--sm4---asm-.html">sample</a> instruction, but a filtered sample is not generated. The four samples that would contribute to filtering are placed into xyzw in counter clockwise order starting with the sample to the lower left of the queried location. This is the same as point sampling with (u,v) texture coordinate deltas at the following locations: (-,+),(+,+),(+,-),(-,-), where the magnitude of the deltas are always half a texel.</p>
<p>For CubeMap textures when a bi-linear footprint spans an edge texels from the neighboring face are used. Corners use the same rules as the <strong>sample</strong> instruction; that is the unkown corner is considered the average of the three impinging face corners.</p>
<p>The texture format restrictions that apply to the <strong>sample</strong> instructions also apply to the <strong>gather4</strong> instruction.</p>
<p>For hardware implementations, optimizations in traditional bilinear filtering that detect samples directly on texels and skip reading of texels that would have weight 0 cannot be leveraged with <strong>gather4</strong>. <strong>gather4</strong> always returns all requested texels.</p>
<p>This instruction applies to the following shader stages:</p>
<table>
<thead>
<tr>
<th>Vertex Shader</th>
<th>Geometry Shader</th>
<th>Pixel Shader</th>
</tr>
</thead>
<tbody>
<tr>
<td>x</td>
<td>x</td>
<td>x</td>
</tr>
</tbody>
</table>
<h2>Minimum Shader Model</h2>
<p>This function is supported in the following shader models.</p>
<table>
<thead>
<tr>
<th>Shader Model</th>
<th>Supported</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="d3d11-graphics-reference-sm5.html">Shader Model 5</a></td>
<td>yes</td>
</tr>
<tr>
<td><a href="dx-graphics-hlsl-sm4.html">Shader Model 4.1</a></td>
<td>yes</td>
</tr>
<tr>
<td><a href="dx-graphics-hlsl-sm4.html">Shader Model 4</a></td>
<td>no</td>
</tr>
<tr>
<td><a href="dx-graphics-hlsl-sm3.html">Shader Model 3 (DirectX HLSL)</a></td>
<td>no</td>
</tr>
<tr>
<td><a href="dx-graphics-hlsl-sm2.html">Shader Model 2 (DirectX HLSL)</a></td>
<td>no</td>
</tr>
<tr>
<td><a href="dx-graphics-hlsl-sm1.html">Shader Model 1 (DirectX HLSL)</a></td>
<td>no</td>
</tr>
</tbody>
</table>
<h2>Related topics</h2>
<!-- raw HTML omitted -->
<p><a href="dx-graphics-hlsl-sm4-asm.html">Shader Model 4 Assembly (DirectX HLSL)</a></p>
<!-- raw HTML omitted -->
</body>
