<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>vs_3_0</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<p>title: vs_3_0
description: Learn about vs_3_0, a programmable vertex shader, which is made up of a set of instructions that operate on vertex data.
ms.assetid: 0f40f946-3525-4203-bfe2-1cd941d8e2ec
ms.topic: article
ms.date: 05/31/2018
topic_type:</p>
<ul>
<li>kbArticle
api_name:
api_type:
api_location:</li>
</ul>
<hr />
<h1>vs_3_0</h1>
<p>A programmable vertex shader is made up of a set of instructions that operate on vertex data. Registers transfer data in and out of the ALU. Additional control can be applied to modify the instruction, the results, or what data gets written out.</p>
<p>Vertex shader version vs_3_0 extends the feature set supported by vs_2_x. Each of the features in vs_2_X that requires a cap to be set, is available in vs_3_0 without requiring the cap.</p>
<ul>
<li><a href="dx9-graphics-reference-asm-vs-instructions-vs-3-0.html">Instructions - vs_3_0</a> contains a list of the available instructions.</li>
<li><a href="dx9-graphics-reference-asm-vs-registers-vs-3-0.html">Registers - vs_3_0</a> lists the different types of registers used by the vertex shader ALU.</li>
<li><a href="dx9-graphics-reference-asm-vs-registers-modifiers.html">Vertex Shader Register Modifiers</a> are used to modify the way an instruction works.</li>
<li><a href="dx9-graphics-reference-asm-vs-registers-modifiers-source.html">Vertex Shader Source Register Modifiers</a> alter the source register data before the instruction runs.</li>
<li><a href="dx9-graphics-reference-asm-vs-registers-modifiers-source-swizzling.html">Source Register Swizzling</a> gives additional control over which register components are read, copied, or written.</li>
<li><a href="dx9-graphics-reference-asm-vs-registers-modifiers-masking.html">Destination Register Masking</a> determines what components of the destination register get written.</li>
</ul>
<h2>New Features</h2>
<p>New features of vertex shader version vs_3_0 are listed in the following sections.</p>
<h3>Indexing Registers</h3>
<p>In the earlier shader models, only the constant register bank could be indexed. In this model, the following register banks can be indexed, using the loop counter register (aL):</p>
<ul>
<li>Input register (v#)</li>
<li>Output register (o#)</li>
</ul>
<h3>Vertex Textures</h3>
<p>This shader model supports texture lookup in the vertex shader using texldl. The vertex engine has four texture sampler stages (distinct from the displacement map sampler and the texture samplers in the pixel engine) that can be used to sample textures set at those stages. See <a href="/windows/desktop/direct3d9/vertex-textures-in-vs-3-0">Vertex Textures in vs_3_0 (DirectX HLSL)</a>.</p>
<h3>Vertex Stream Frequency</h3>
<p>This feature allows a subset of the input registers to be initialized at a rate different from once per vertex. See <a href="/windows/desktop/direct3d9/efficiently-drawing-multiple-instances-of-geometry">Drawing Non-Indexed Geometry</a>.</p>
<h3>Shader Output</h3>
<p>Similar to vs_2_0, the output of the shader can vary with static flow control. Be careful with dynamic branching as this can cause shader outputs to vary per vertex. This will produce unpredictable results on different hardware.</p>
<h3>Dynamic flow control</h3>
<p>All dynamic flow control instructions are supported. The maximum nesting depth value allowed is 24. (See <a href="dx9-graphics-reference-asm-vs-instructions-flow-control.html">Flow Control Nesting Limits</a> for details.)</p>
<h3>Temporary Registers</h3>
<p>A total of 32 temporary registers (r#) is supported.</p>
<h3>Static Flow Control</h3>
<p>The maximum nesting depth for <a href="loop---vs.html">loop - vs</a>/<a href="rep---vs.html">rep - vs</a> is 4. The maximum nesting depth for <a href="call---vs.html">call - vs</a>/<a href="callnz-bool---vs.html">callnz bool - vs</a>/<a href="callnz-pred---vs.html">callnz pred - vs</a> is 4. For <a href="if-bool---vs.html">if bool - vs</a>, the maximum nesting depth value allowed is 24. (See <a href="dx9-graphics-reference-asm-vs-instructions-flow-control.html">Flow Control Nesting Limits</a> for details.)</p>
<h3>Predication</h3>
<p>Instruction predication is supported. Use <a href="setp-comp---vs.html">setp_comp - vs</a> to set the predicate register.</p>
<h3>Instruction Count</h3>
<p>Each vertex shader is allowed anywhere from 512 up to the number of slots in MaxVertexShader30InstructionSlots in <a href="/windows/desktop/api/d3d9caps/ns-d3d9caps-d3dcaps9"><strong>D3DCAPS9</strong></a>. The number of instructions run can be much higher because of the loop/rep support; however, this is capped by MaxVShaderInstructionsExecuted in D3DCAPS9 which should be at least 0xFFFF.</p>
<h3>Device Caps</h3>
<p>If Vertex Shader 3_0 is supported, the following caps are supported in hardware (at a minimum):</p>
<table>
<thead>
<tr>
<th>Cap</th>
<th>Capability</th>
</tr>
</thead>
<tbody>
<tr>
<td>Shader caps</td>
<td><!-- raw HTML omitted --><!-- raw HTML omitted -->DynamicFlowControlDepth is 24<!-- raw HTML omitted --><!-- raw HTML omitted -->NumTemps is 32<!-- raw HTML omitted --><!-- raw HTML omitted -->StaticFlowControlDepth is 4<!-- raw HTML omitted --><!-- raw HTML omitted -->Predication is supported.<!-- raw HTML omitted --><!-- raw HTML omitted --></td>
</tr>
<tr>
<td>GuardBandLeft, GuardBandTop, GuardBandRight, GuardBandBottom</td>
<td>8K</td>
</tr>
<tr>
<td>VertexShaderVersion</td>
<td>3_0</td>
</tr>
<tr>
<td>MaxVertexShaderConst</td>
<td>256</td>
</tr>
<tr>
<td>MaxVertexShader30InstructionSlots</td>
<td>512</td>
</tr>
<tr>
<td>Fog support</td>
<td>D3DPRASTERCAPS_FOGVERTEX</td>
</tr>
<tr>
<td>VertexTextureFilterCaps</td>
<td><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted -->D3DPTFILTERCAPS_MINFPOINT<!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted -->D3DPTFILTERCAPS_MAGFPOINT<!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --></td>
</tr>
<tr>
<td><!-- raw HTML omitted -->D3DDEVCAPS2_VERTEXELEMENTSCANSHARESTREAMOFFSET<!-- raw HTML omitted --></td>
<td>Vertex elements in a vertex declaration can share the same stream offset.</td>
</tr>
<tr>
<td>Vertex formats</td>
<td><!-- raw HTML omitted --><!-- raw HTML omitted -->D3DDECLTYPE_UBYTE4<!-- raw HTML omitted --><!-- raw HTML omitted -->D3DDECLTYPE_UBYTE4N<!-- raw HTML omitted --><!-- raw HTML omitted -->D3DDECLTYPE_SHORT2N<!-- raw HTML omitted --><!-- raw HTML omitted -->D3DDECLTYPE_SHORT4N<!-- raw HTML omitted --><!-- raw HTML omitted -->D3DDECLTYPE_FLOAT16_2<!-- raw HTML omitted --><!-- raw HTML omitted -->D3DDECLTYPE_FLOAT16_4<!-- raw HTML omitted --><!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<p>Â </p>
<h2>Related topics</h2>
<!-- raw HTML omitted -->
<p><a href="dx9-graphics-reference-asm-vs.html">Vertex Shaders</a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
