<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>How To: Instance a Geometry Shader</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<p>title: How To Instance a Geometry Shader
description: Geometry shader instancing allows multiple executions of the same geometry shader to be executed per primitive.
ms.assetid: e3d8616b-7129-40e9-99fc-2852914a80b0
ms.topic: article
ms.date: 05/31/2018
topic_type:</p>
<ul>
<li>kbArticle
api_name:
api_type:
api_location:</li>
</ul>
<hr />
<h1>How To: Instance a Geometry Shader</h1>
<p>Geometry shader instancing allows multiple executions of the same geometry shader to be executed per primitive. To instance a geometry shader, add an instance attribute to the main shader function and identify an instance index parameter in the shader function body.</p>
<p>To Instance a Geometry Shader:</p>
<ol>
<li>
<p>Add the <a href="sm5-attributes-instance.html">instance attribute</a> to the main function.</p>
<pre><code>[instance(24)]
</code></pre>
<p>This defines the number of instances (a maximum of 32) to be run for each primitive.</p>
</li>
<li>
<p>Attach the <a href="sv-gsinstanceid.html">SV_GSInstanceID</a> system value to a variable in the function parameter list that can be used to track the ID of the instance being executed.</p>
<pre><code>uint InstanceID : SV_GSInstanceID
</code></pre>
</li>
<li>
<p>Compile and create the shader just as you would any other geometry shader.</p>
</li>
</ol>
<p>Other details include:</p>
<ul>
<li>The maximum instance count is 32.</li>
<li>The maximum vertex count is a per-instance maximum vertex count.</li>
<li>Each instance invocation (like any geometry shader invocation) increases the invocation count and generates an implicit RestartStrip().</li>
</ul>
<h2>Related topics</h2>
<!-- raw HTML omitted -->
<p><a href="overviews-direct3d-11-hlsl-gs-features.html">Geometry Shader Features</a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
