<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>dcl_input vGSInstanceID (sm5 - asm)</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>title: dcl_input vGSInstanceID (sm5 - asm)
description: Enable geometry shader instancing.
ms.assetid: 47B9BAD5-0FFF-4DB7-B34A-7811B8A4F792
ms.topic: reference
ms.date: 05/31/2018</h2>
<h1>dcl_input vGSInstanceID (sm5 - asm)</h1>
<p>Enable geometry shader instancing.</p>
<table>
<thead>
<tr>
<th>dcl_input vGSInstanceID, instanceCount</th>
</tr>
</thead>
</table>
<table>
<thead>
<tr>
<th>Item</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><em>vGSInstanceID</em><!-- raw HTML omitted --></td>
<td>[in] The instance ID.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><em>instanceCount</em><!-- raw HTML omitted --></td>
<td>[in] The instance count.<!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<h2>Remarks</h2>
<p>The <em>instanceCount</em> parameter of the declaration specifies how many instances the geometry shader should execute for each input primitive. The maximum value for <em>instanceCount</em> is 32.</p>
<p>The maximum number of vertices declared for output, via <a href="dcl-maxoutputvertexcount.html"><strong>dcl_maxOutputVertexCount</strong></a>, applies individually to each instance.</p>
<p>The instance count in this declaration, multiplied by the maximum vertex count per instance via <a href="dcl-maxoutputvertexcount.html"><strong>dcl_maxOutputVertexCount</strong></a>, must be &lt;= 1024.</p>
<p>The amount of data that a given geometry shader instance can emit is 1024 scalars maximum, validated by counting up all scalars declared for input and multiplying by the declared output vertex count.</p>
<p>Use of geometry shader instancing effectively increases the total amount of data that can be emitted per input primitive. 1024 scalars for a single instance yields up to 1024*32 scalars of output data across all geometry shader instances for a single input primitive. However the more instances, the fewer vertices each instance can emit. A single instance (no instancing) can emit 1024 vertices. If you declare *32 instances it means each instance can only output 1024/32 = 32 vertices.</p>
<p>The geometry shader instancing declaration makes available to the program a standalone 32-bit integer input register, <em>vGSInstanceID</em>. Each geometry shader instance is identified by the value contained in <em>vGSInstanceID</em> [0,1,2...].</p>
<p><em>vGSInstanceID</em> is not part of the geometry shader input vertex array (e.g. 3 vertices when inputting a triangle). The <em>vGSInstanceID</em> register stands on its own, like vPrimitiveID.</p>
<p>When each geometry shader instance ends, there is an implicit cut in the output topology, so consecutive instances do not depend on each other.</p>
<p>Although hardware may execute each geometry shader instance in parallel, the output of all instances at the end is serialized as if all the instanced geometry shader invocations ran sequentially in a loop iterating <em>vGSInstanceID</em> from 0 to <em>instanceCount</em>-1, with implicit output topology cuts at the end of each instance.</p>
<p>This instruction applies to the following shader stages:</p>
<table>
<thead>
<tr>
<th>Vertex</th>
<th>Hull</th>
<th>Domain</th>
<th>Geometry</th>
<th>Pixel</th>
<th>Compute</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
<td></td>
<td>X</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h2>Minimum Shader Model</h2>
<p>This instruction is supported in the following shader models:</p>
<table>
<thead>
<tr>
<th>Shader Model</th>
<th>Supported</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="d3d11-graphics-reference-sm5.html">Shader Model 5</a></td>
<td>yes</td>
</tr>
<tr>
<td><a href="dx-graphics-hlsl-sm4.html">Shader Model 4.1</a></td>
<td>no</td>
</tr>
<tr>
<td><a href="dx-graphics-hlsl-sm4.html">Shader Model 4</a></td>
<td>no</td>
</tr>
<tr>
<td><a href="dx-graphics-hlsl-sm3.html">Shader Model 3 (DirectX HLSL)</a></td>
<td>no</td>
</tr>
<tr>
<td><a href="dx-graphics-hlsl-sm2.html">Shader Model 2 (DirectX HLSL)</a></td>
<td>no</td>
</tr>
<tr>
<td><a href="dx-graphics-hlsl-sm1.html">Shader Model 1 (DirectX HLSL)</a></td>
<td>no</td>
</tr>
</tbody>
</table>
<h2>Related topics</h2>
<!-- raw HTML omitted -->
<p><a href="shader-model-5-assembly--directx-hlsl-.html">Shader Model 5 Assembly (DirectX HLSL)</a></p>
<!-- raw HTML omitted -->
</body>
