<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>InterlockedCompareExchange function (HLSL reference)</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<p>title: InterlockedCompareExchange function (HLSL reference)
description: Atomically compares the destination with the comparison value. If they are identical, the destination is overwritten with the input value. The original value is set to the destination's original value.
ms.assetid: 85d1ba58-8e79-41cd-abd6-7ffff59839c7
keywords:</p>
<ul>
<li>InterlockedCompareExchange function HLSL
topic_type:</li>
<li>apiref
api_name:</li>
<li>InterlockedCompareExchange
api_type:</li>
<li>NA
ms.topic: reference
ms.date: 05/31/2018
api_location:</li>
</ul>
<hr />
<h1>InterlockedCompareExchange function (HLSL reference)</h1>
<p>Atomically compares the destination with the comparison value. If they are identical, the destination is overwritten with the input value. The original value is set to the destination's original value.</p>
<h2>Syntax</h2>
<pre lang="syntax"><code>void InterlockedCompareExchange(
  inÂ Â R dest,
  inÂ Â T compare_value,
  inÂ Â T value,
  outÂ T original_value
);
</code></pre>
<h2>Parameters</h2>
<!-- raw HTML omitted -->
<p><em>dest</em> [in]</p>
<!-- raw HTML omitted -->
<p>Type: <strong>R</strong></p>
<p>The destination address.</p>
<!-- raw HTML omitted -->
<p><em>compare_value</em> [in]</p>
<!-- raw HTML omitted -->
<p>Type: <strong>T</strong></p>
<p>The comparison value.</p>
<!-- raw HTML omitted -->
<p><em>value</em> [in]</p>
<!-- raw HTML omitted -->
<p>Type: <strong>T</strong></p>
<p>The input value.</p>
<!-- raw HTML omitted -->
<p><em>original_value</em> [out]</p>
<!-- raw HTML omitted -->
<p>Type: <strong>T</strong></p>
<p>The original value.</p>
<!-- raw HTML omitted -->
<h2>Return value</h2>
<p>This function does not return a value.</p>
<h2>Remarks</h2>
<p>Atomically compares the value referenced by <em>dest</em> with <em>compare_value</em>, stores <em>value</em> in the location referenced by <em>dest</em> if the values match, returns the original value of <em>dest</em> in <em>original_value</em>. This operation can only be performed on <strong>int</strong> or <strong>uint</strong> typed resources and shared memory variables. There are two possible uses for this function. The first is when R is a shared memory variable type. In this case, the function performs the operation on the shared memory register referenced by <em>dest</em>. The second scenario is when R is a resource variable type. In this scenario, the function performs the operation on the resource location referenced by <em>dest</em>. This operation is only available when R is readable and writable.</p>
<p>Interlocked operations do not imply any memory fence/barrier.</p>
<blockquote>
<p>[!Note]<br />
If you call <strong>InterlockedCompareExchange</strong> in a <a href="dx-graphics-hlsl-for.html"><strong>for</strong></a> or <a href="dx-graphics-hlsl-while.html"><strong>while</strong></a> compute shader loop, to properly compile, you must use the <strong>[allow_uav_condition]</strong> attribute on that loop.</p>
</blockquote>
<p>Â </p>
<h3>Minimum Shader Model</h3>
<p>This function is supported in the following shader models.</p>
<table>
<thead>
<tr>
<th>Shader Model</th>
<th>Supported</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="d3d11-graphics-reference-sm5.html">Shader Model 5</a> and higher shader models</td>
<td>yes</td>
</tr>
</tbody>
</table>
<p>Â </p>
<p>This function is supported in the following types of shaders:</p>
<table>
<thead>
<tr>
<th>Vertex</th>
<th>Hull</th>
<th>Domain</th>
<th>Geometry</th>
<th>Pixel</th>
<th>Compute</th>
</tr>
</thead>
<tbody>
<tr>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
</tr>
</tbody>
</table>
<p>Â </p>
<h2>See also</h2>
<!-- raw HTML omitted -->
<p><a href="dx-graphics-hlsl-intrinsic-functions.html">Intrinsic Functions</a></p>
<!-- raw HTML omitted -->
<p><a href="d3d11-graphics-reference-sm5.html">Shader Model 5</a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
