<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>ForceReboot Action</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: The ForceReboot action prompts the user for a restart of the system during the installation.
ms.assetid: e1bcdd59-8cbc-46f7-b908-c8cbc2ea0539
title: ForceReboot Action
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>ForceReboot Action</h1>
<p>The ForceReboot action prompts the user for a restart of the system during the installation. The ForceReboot action is different from the <a href="schedulereboot-action.html">ScheduleReboot action</a> in that the ScheduleReboot action is used to schedule a prompt to restart at the end of the installation.</p>
<p>If the installation has a user interface, the installer displays a dialog box at each ForceReboot action which prompts the user to restart the system. The user must respond to this prompt before continuing with the installation. If the installation has no user interface, the system automatically restarts at the ForceReboot action.</p>
<p>If the installer determines that a restart is necessary, it automatically prompts the user to restart at the end of the installation, whether or not there are any ForceReboot or ScheduleReboot actions in the sequence. For example, the installer automatically prompts for a restart if it needs to replace any files used during the installation.</p>
<p>Suppress certain restart prompts by setting the <a href="reboot.html"><strong>REBOOT</strong></a> property.</p>
<p>If the Windows Installer encounters the ForceReboot or <a href="schedulereboot-action.html">ScheduleReboot</a> action during a <a href="multiple-package-installations.html">multiple-package installation</a>, the installer will stop and roll back the installation. Other packages belonging to the multiple-package installation, that do not contain a ForceReboot or ScheduleReboot action, can be installed.</p>
<h2>Sequence Restrictions</h2>
<p>The following actions commonly occur together as a group in the action sequence. It is recommended that the ForceReboot action be scheduled to come after this group. If the ForceReboot action is scheduled before the <a href="registerproduct-action.html">RegisterProduct action</a>, the installer again requires the source of the installation package after the restart. Therefore, the preferred sequence for ForceReboot is immediately following this action sequence.</p>
<ul>
<li><a href="registerproduct-action.html">RegisterProduct</a></li>
<li><a href="registeruser-action.html">RegisterUser</a></li>
<li><a href="publishproduct-action.html">PublishProduct</a></li>
<li><a href="publishfeatures-action.html">PublishFeatures</a></li>
<li><a href="createshortcuts-action.html">CreateShortcuts</a></li>
<li><a href="registermimeinfo-action.html">RegisterMIMEInfo</a></li>
<li><a href="registerextensioninfo-action.html">RegisterExtensionInfo</a></li>
<li><a href="registerclassinfo-action.html">RegisterClassInfo</a></li>
<li><a href="registerprogidinfo-action.html">RegisterProgIdInfo</a></li>
</ul>
<p>The ForceReboot action must come between <a href="installinitialize-action.html">InstallInitialize</a> and <a href="installfinalize-action.html">InstallFinalize</a> in the action sequence of the <a href="installexecutesequence-table.html">InstallExecuteSequence table</a>.</p>
<h2>ActionData Messages</h2>
<p>There are no ActionData messages.</p>
<h2>Remarks</h2>
<p>The ForceReboot action must always be used with a conditional statement such that the installer triggers a restart only when necessary. For example, a restart may only be required if a particular file is replaced or a particular component is installed. Each product installation is unique and a custom action may be required to determine whether a restart is needed. The condition on the ForceReboot action commonly makes use of the <a href="afterreboot.html"><strong>AFTERREBOOT</strong></a> property.</p>
<p>ForceReboot runs system operations generated by any previous actions before prompting for a restart or restarting. For example, the system operations generated by <a href="installfiles-action.html">InstallFiles</a> and <a href="writeregistryvalues-action.html">WriteRegistryValues</a> are run before a restart.</p>
<p>The ForceReboot action writes a registry key that causes the installer to start after restarting. The location of this key is <strong>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\RunOnce</strong>.</p>
<h2>Related topics</h2>
<!-- raw HTML omitted -->
<p><a href="system-reboots.html">System Reboots</a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
