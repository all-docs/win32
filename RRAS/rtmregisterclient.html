<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>RtmRegisterClient function</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<p>title: RtmRegisterClient function (Rtm.h)
description: The RtmRegisterClient function registers a client as a handler of the specified protocol. It establishes a route change notification mechanism for the client, and sets protocol options.
ms.assetid: 70426601-695d-47ed-b71a-1df3fb8ddf10
keywords:</p>
<ul>
<li>RtmRegisterClient function RAS
topic_type:</li>
<li>apiref
api_name:</li>
<li>RtmRegisterClient
api_location:</li>
<li>Rtm.dll
api_type:</li>
<li>DllExport
ms.topic: reference
ms.date: 05/31/2018</li>
</ul>
<hr />
<h1>RtmRegisterClient function</h1>
<p>[This API has been superseded by the <a href="about-routing-table-manager-version-2.html">Routing Table Manager Version 2</a> API and will not be available beyond Windows Server 2003. Applications should use the Routing Table Manager Version 2 API.]</p>
<p>The <strong>RtmRegisterClient</strong> function registers a client as a handler of the specified protocol. It establishes a route change notification mechanism for the client, and sets protocol options.</p>
<h2>Syntax</h2>
<pre lang="C++"><code>HANDLE RtmRegisterClient(
  _In_ DWORD  ProtocolFamily,
  _In_ DWORD  RoutingProtocol,
  _In_ HANDLE ChangeEvent,
  _In_ DWORD  Flags
);
</code></pre>
<h2>Parameters</h2>
<!-- raw HTML omitted -->
<p><em>ProtocolFamily</em> [in]</p>
<!-- raw HTML omitted -->
<p>Specifies the protocol family of the routing protocol to register.</p>
<!-- raw HTML omitted -->
<p><em>RoutingProtocol</em> [in]</p>
<!-- raw HTML omitted -->
<p>Specifies the routing protocol identifier, the same as that used when registering with the router manager. See <a href="/windows/desktop/api/Routprot/nc-routprot-pregister_protocol"><strong>RegisterProtocol</strong></a>.</p>
<!-- raw HTML omitted -->
<p><em>ChangeEvent</em> [in]</p>
<!-- raw HTML omitted -->
<p>Specifies that a best route to a network in the table has changed. The routing table manager signals this event after a change to the best route to any network in the table. See <a href="rtmdequeueroutechangemessage.html"><strong>RtmDequeueRouteChangeMessage</strong></a> for more information about route-change notification.</p>
<p>This parameter is optional. If the caller specifies <strong>NULL</strong> for this parameter, the routing table manager does not notify the client of changes in best route status.</p>
<!-- raw HTML omitted -->
<p><em>Flags</em> [in]</p>
<!-- raw HTML omitted -->
<p>Specifies miscellaneous options for special handling of the routing protocol. The following value is currently supported.</p>
<table>
<thead>
<tr>
<th>Flags</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --> <!-- raw HTML omitted --><strong>RTM_PROTOCOL_SINGLE_ROUTE</strong><!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td>The routing table manager keeps only one route per destination network for the routing protocol. In other words, the routing table manager replaces route entries that have the same destination network numbers instead of adding new ones.<!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<!-- raw HTML omitted -->
<h2>Return value</h2>
<p>On successful return, a <strong>HANDLE</strong> value that identifies the client in subsequent calls to the routing table manager.</p>
<p>A <strong>NULL</strong> handle indicates that the routing table manager was unable to register the client. Call <a href="/windows/win32/api/errhandlingapi/nf-errhandlingapi-getlasterror"><strong>GetLastError</strong></a> to obtain the reason for the failure.</p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted --><strong>ERROR_CLIENT_ALREADY_EXISTS</strong><!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td>Another client has already registered to handle the specified protocol.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted --><strong>ERROR_INVALID_PARAMETER</strong><!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td>The specified protocol family is not supported, or the <em>Flags</em> parameter is invalid.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted --><strong>ERROR_NO_SYSTEM_RESOURCES</strong><!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td>Insufficient resources to carry out the operation.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted --><strong>ERROR_NOT_ENOUGH_MEMORY</strong><!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td>Insufficient memory to allocate data structures for the client.<!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<h2>Requirements</h2>
<table>
<thead>
<tr>
<th>Requirement</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Minimum supported client<!-- raw HTML omitted --></td>
<td>None supported<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Minimum supported server<!-- raw HTML omitted --></td>
<td>Windows 2000 Server [desktop apps only]<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>End of server support<!-- raw HTML omitted --></td>
<td>Windows Server 2003<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Header<!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted -->Rtm.h<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Library<!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted -->Rtm.lib<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
<tr>
<td>DLL<!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted -->Rtm.dll<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<h2>See also</h2>
<!-- raw HTML omitted -->
<p><a href="routing-table-manager-version-1-reference.html">Routing Table Manager Version 1 Reference</a></p>
<!-- raw HTML omitted -->
<p><a href="routing-table-manager-version-1-functions.html">Routing Table Manager Version 1 Functions</a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/win32/api/errhandlingapi/nf-errhandlingapi-getlasterror"><strong>GetLastError</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/api/Routprot/nc-routprot-pregister_protocol"><strong>RegisterProtocol</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="routing-table-manager-version-1-protocol-family-identifiers.html">RTMv1 Protocol Family Identifiers</a></p>
<!-- raw HTML omitted -->
<p><a href="rtmdequeueroutechangemessage.html"><strong>RtmDequeueRouteChangeMessage</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="rtmderegisterclient.html"><strong>RtmDeregisterClient</strong></a></p>
<!-- raw HTML omitted -->
</body>
