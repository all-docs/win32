<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Disconnecting</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>title: Disconnecting
description: When a RAS client application starts a connection operation, the RasDial call receives an HRASCONN connection handle to identify the connection.
ms.assetid: a0fddc69-44bb-4bb0-ae57-ebecbe85cbe9
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>Disconnecting</h1>
<p>When a RAS client application starts a connection operation, the <a href="/windows/desktop/api/Ras/nf-ras-rasdiala"><strong>RasDial</strong></a> call receives an <strong>HRASCONN</strong> connection handle to identify the connection. If the returned handle is not <strong>NULL</strong>, the client must eventually call the <a href="/windows/desktop/api/Ras/nf-ras-rashangupa"><strong>RasHangUp</strong></a> function to end the connection. If an error occurs during the connection operation, the client must call <strong>RasHangUp</strong> even though the connection was never established.</p>
<p>The application that calls <a href="/windows/desktop/api/Ras/nf-ras-rashangupa"><strong>RasHangUp</strong></a> should not exit immediately because the Remote Access Connection Manager needs time to properly terminate the connection. Instead, the application should wait until the <a href="/windows/desktop/api/Ras/nf-ras-rasgetconnectstatusa"><strong>RasGetConnectStatus</strong></a> function returns ERROR_INVALID_HANDLE, indicating that the connection has been deleted.</p>
<p>A RAS client application might need to end a connection even though it does not have the handle returned by <a href="/windows/desktop/api/Ras/nf-ras-rasdiala"><strong>RasDial</strong></a>. For example, the application that called <strong>RasDial</strong> might have exited after the connection was successfully established. In this case, the disconnecting application can use the <a href="/windows/desktop/api/Ras/nf-ras-rasenumconnectionsa"><strong>RasEnumConnections</strong></a> function to get all the current connections. For each connection, <strong>RasEnumConnections</strong> returns a <a href="/previous-versions/windows/desktop/legacy/aa376725(v=vs.85)"><strong>RASCONN</strong></a> structure that contains the <strong>HRASCONN</strong> connection handle and the phone-book entry name or phone number specified when the connection operation was started. This information can be used to display a list of connections from which the user can select the connection to end.</p>
<p>Â </p>
<p>Â </p>
</body>
