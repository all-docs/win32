<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>INapSystemHealthAgentCallback::NotifyOrphanedSoHRequest method</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<p>title: INapSystemHealthAgentCallback NotifyOrphanedSoHRequest method (NapSystemHealthAgent.h)
description: Is called if an SoHRequest was queried from the SHA, but the response never came back.
ms.assetid: 9e6fac6c-fb23-4725-ae0f-28ef8a6c4ea6
keywords:</p>
<ul>
<li>NotifyOrphanedSoHRequest method NAP</li>
<li>NotifyOrphanedSoHRequest method NAP , INapSystemHealthAgentCallback interface</li>
<li>INapSystemHealthAgentCallback interface NAP , NotifyOrphanedSoHRequest method
topic_type:</li>
<li>apiref
api_name:</li>
<li>INapSystemHealthAgentCallback.NotifyOrphanedSoHRequest
api_location:</li>
<li>NapSystemHealthAgent.h
api_type:</li>
<li>COM
ms.topic: reference
ms.date: 05/31/2018</li>
</ul>
<hr />
<h1>INapSystemHealthAgentCallback::NotifyOrphanedSoHRequest method</h1>
<blockquote>
<p>[!Note]<br />
The Network Access Protection platform is not available starting with Windows 10</p>
</blockquote>
<p>The <strong>INapSystemHealthAgentCallback::NotifyOrphanedSoHRequest</strong> method is called if an <a href="/windows/win32/api/naptypes/ns-naptypes-soh"><strong>SoHRequest</strong></a> was queried from the SHA, but the response never came back.</p>
<h2>Syntax</h2>
<pre lang="C++"><code>HRESULT NotifyOrphanedSoHRequest(
  [in] const CorrelationId *correlationId
);
</code></pre>
<h2>Parameters</h2>
<!-- raw HTML omitted -->
<p><em>correlationId</em> [in]</p>
<!-- raw HTML omitted -->
<p>A pointer to the unique <a href="/windows/win32/api/naptypes/ns-naptypes-correlationid"><strong>CorrelationId</strong></a> structure that identifies the orphaned <a href="/windows/win32/api/naptypes/ns-naptypes-soh"><strong>SoHRequest</strong></a>.</p>
<!-- raw HTML omitted -->
<h2>Return value</h2>
<p>This method can return one of these values.</p>
<table>
<thead>
<tr>
<th>Return code</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted --><strong>S_OK</strong><!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td>Indicates success.<!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<h2>Remarks</h2>
<p>This callback method is declared by the NAP system and is to be implemented by the SHA writer.</p>
<p>This method can be called by the system in the following cases:</p>
<ul>
<li>A <a href="/windows/win32/api/naptypes/ns-naptypes-soh"><strong>SoHRequest</strong></a> could not be sent on the wire.</li>
<li>A <a href="/windows/win32/api/naptypes/ns-naptypes-soh"><strong>SoHRequest</strong></a> was sent on the wire, but no <strong>SoHResponse</strong> came back, i.e. the enforcer timed out or there was no corresponding SHV on the server-side.</li>
<li>The connection went down or an enforcer went offline.</li>
</ul>
<p>This is only a best effort notification, so SHAs must not rely on this information to clean up state. There are several situations in which an SHA will not be notified:</p>
<ul>
<li>If an enforcer misbehaves, i.e. it does not notify the SHA when the connection state is down.</li>
<li>If an enforcer crashes.</li>
<li>In error conditions, i.e. the NapAgent is out of memory.</li>
</ul>
<p>SHAs may get some spurious notifications when they first bind to the NapAgent, for instance, if an SoH exchange is in progress when the SHA bound, and then it times out.</p>
<h2>Requirements</h2>
<table>
<thead>
<tr>
<th>Requirement</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Minimum supported client<!-- raw HTML omitted --></td>
<td>Windows Vista [desktop apps only]<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Minimum supported server<!-- raw HTML omitted --></td>
<td>Windows Server 2008 [desktop apps only]<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Header<!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted -->NapSystemHealthAgent.h<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
<tr>
<td>IDL<!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted -->NapSystemHealthAgent.idl<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<h2>See also</h2>
<!-- raw HTML omitted -->
<p><a href="inapsystemhealthagentcallback.html"><strong>INapSystemHealthAgentCallback</strong></a></p>
<!-- raw HTML omitted -->
</body>
