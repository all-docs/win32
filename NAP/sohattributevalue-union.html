<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>SoHAttributeValue union</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<p>title: SoHAttributeValue union (NapProtocol.h)
description: Defines the contents of the type member in a SoHAttribute structure.
ms.assetid: 53b30455-33a5-4cf5-8d4e-f0fa8e4e1a12
keywords:</p>
<ul>
<li>SoHAttributeValue union NAP
topic_type:</li>
<li>apiref
api_name:</li>
<li>SoHAttributeValue
api_location:</li>
<li>NapProtocol.h
api_type:</li>
<li>HeaderDef
ms.topic: reference
ms.date: 05/31/2018</li>
</ul>
<hr />
<h1>SoHAttributeValue union</h1>
<blockquote>
<p>[!Note]<br />
The Network Access Protection platform is not available starting with Windows 10</p>
</blockquote>
<p>The <strong>SoHAttributeValue</strong> union defines the contents of the <strong>type</strong> member in a <a href="/windows/win32/api/naptypes/ns-naptypes-sohattribute"><strong>SoHAttribute</strong></a> structure. The structure of the <strong>SoHAttributeValue</strong> union is determined by the <a href="sohattributetype-enum.html"><strong>SoHAttributeType</strong></a> specified in the <strong>type</strong> member of the <a href="/windows/win32/api/naptypes/ns-naptypes-sohattribute"><strong>SoHAttribute</strong></a> structure.</p>
<h2>Syntax</h2>
<pre lang="C++"><code>typedef union tagSoHAttributeValue {
  SystemHealthEntityId     idVal;
  struct tagIpv4Addresses {
    UINT16      count;
    Ipv4Address *addresses;
  } v4AddressesVal;
  struct tagIpv6Addresses {
    UINT16      count;
    Ipv6Address *addresses;
  } v6AddressesVal;
  ResultCodes              codesVal;
  FILETIME                 dateTimeVal;
  struct tagVendorSpecific {
    UINT32 vendorId;
    UINT16 size;
    BYTE   *vendorSpecificData;
  } vendorSpecificVal;
  UINT8                    uint8Val;
  struct tagOctetString {
    UINT16 size;
    BYTE   *data;
  } octetStringVal;
} SoHAttributeValue;
</code></pre>
<h2>Members</h2>
<!-- raw HTML omitted -->
<p><strong>idVal</strong></p>
<!-- raw HTML omitted -->
<p><strong>case(sohAttributeTypeSystemHealthId)</strong></p>
<p>A unique <a href="nap-datatypes.html">SystemHealthEntityId</a> that contains the ID of the System Health Agent (SHA) or System Health Validator (SHV) that constructed this <a href="/windows/win32/api/naptypes/ns-naptypes-soh"><strong>SoH</strong></a> packet.</p>
<!-- raw HTML omitted -->
<p><strong>v4AddressesVal</strong></p>
<!-- raw HTML omitted -->
<p><strong>case(sohAttributeTypeIpv4FixupServers)</strong></p>
<p>The IPv4 addresses of the fix-up servers in use by the NAP system.</p>
<!-- raw HTML omitted -->
<p><strong>count</strong></p>
<!-- raw HTML omitted -->
<p>The number of IPv4 addresses in the <strong>addresses</strong> member in the range 1 to <a href="nap-type-constants.html"><strong>maxIpv4CountPerSoHAttribute</strong></a>.</p>
<!-- raw HTML omitted -->
<p><strong>addresses</strong></p>
<!-- raw HTML omitted -->
<p>An array of <a href="/windows/win32/api/naptypes/ns-naptypes-ipv4address"><strong>Ipv4Address</strong></a> structures that contain the IPv4 addresses.</p>
<!-- raw HTML omitted -->
<p><strong>v6AddressesVal</strong></p>
<!-- raw HTML omitted -->
<p><strong>case(sohAttributeTypeIpv6FixupServers)</strong></p>
<p>The IPv6 addresses of the fix-up servers in use by the NAP system.</p>
<!-- raw HTML omitted -->
<p><strong>count</strong></p>
<!-- raw HTML omitted -->
<p>The number of IPv4 addresses in the <strong>addresses</strong> member in the range 1 to <a href="nap-type-constants.html"><strong>maxIpv6CountPerSoHAttribute</strong></a>.</p>
<!-- raw HTML omitted -->
<p><strong>addresses</strong></p>
<!-- raw HTML omitted -->
<p>An array of <a href="/windows/win32/api/naptypes/ns-naptypes-ipv6address"><strong>Ipv6Address</strong></a> structures that contain the IPv4 addresses.</p>
<!-- raw HTML omitted -->
<p><strong>codesVal</strong></p>
<!-- raw HTML omitted -->
<p><strong>case(sohAttributeTypeComplianceResultCodes, sohAttributeTypeErrorCodes)</strong></p>
<p>A <a href="/windows/win32/api/naptypes/ns-naptypes-resultcodes"><strong>ResultCodes</strong></a> structure that contains either the application defined compliance result codes of the client or <a href="nap-error-constants.html"><strong>NAP error constants</strong></a>. An <a href="/windows/win32/api/naptypes/ns-naptypes-soh"><strong>SoH</strong></a> packet must contain this TLV or the <strong>sohAttributeTypeFailureCategory</strong> TLV.</p>
<!-- raw HTML omitted -->
<p><strong>dateTimeVal</strong></p>
<!-- raw HTML omitted -->
<p><strong>case(sohAttributeTypeTimeOfLastUpdate, sohAttributeTypeSoHGenerationTime)</strong></p>
<p>A <a href="/windows/win32/api/minwinbase/ns-minwinbase-filetime">FILETIME</a> structure that contains the time of the last <a href="/windows/win32/api/naptypes/ns-naptypes-soh"><strong>SoH</strong></a> update or the <strong>SoH</strong> generation time.</p>
<!-- raw HTML omitted -->
<p><strong>vendorSpecificVal</strong></p>
<!-- raw HTML omitted -->
<p><strong>case(sohAttributeTypeVendorSpecific)</strong></p>
<p>Application-specific data that is defined by the vendor.</p>
<!-- raw HTML omitted -->
<p><strong>vendorId</strong></p>
<!-- raw HTML omitted -->
<p>A 4-byte identifier that defines the SHA/SHV pair ID. The first 3 bytes are the IETF-assigned SMI code of the vendor, and the last byte identifies the component itself. When implementing a SHA or SHV, do not use the ID values assigned to internal Microsoft system health components on <a href="nap-vendor-constants.html"><strong>NAP vendor constants</strong></a>.</p>
<!-- raw HTML omitted -->
<p><strong>size</strong></p>
<!-- raw HTML omitted -->
<p>The size, in bytes, of the vendor data in the range 0 to (<a href="nap-type-constants.html"><strong>maxSoHAttributeSize</strong></a> - 4).</p>
<!-- raw HTML omitted -->
<p><strong>vendorSpecificData</strong></p>
<!-- raw HTML omitted -->
<p>A pointer to the vendor specific data in network byte order.</p>
<!-- raw HTML omitted -->
<p><strong>uint8Val</strong></p>
<!-- raw HTML omitted -->
<p><strong>case(sohAttributeTypeHealthClass, sohAttributeTypeFailureCategory,sohAttributeTypeExtendedIsolationState)</strong></p>
<p>The health class, failure category, or extended isolation state of a NAP component as either a <a href="healthclassvalue-enum.html"><strong>HealthClassValue</strong></a> or <a href="/windows/win32/api/naptypes/ne-naptypes-failurecategory"><strong>FailureCategory</strong></a> value, or a <a href="/windows/win32/api/naptypes/ns-naptypes-isolationinfoex"><strong>IsolationInfoEx</strong></a> structure.</p>
<!-- raw HTML omitted -->
<p><strong>octetStringVal</strong></p>
<!-- raw HTML omitted -->
<p><strong>default</strong></p>
<p>The following attributes' values are octet strings:</p>
<ul>
<li>sohAttributeTypeSoftwareVersion</li>
<li>sohAttributeTypeClientId</li>
<li>sohAttributeTypeProductName</li>
<li>sohAttributeTypeHealthClassStatus</li>
</ul>
<p>For forward compatibility, all unrecognized attributes are returned as octet strings. <strong>data</strong> must be in network byte order.</p>
<!-- raw HTML omitted -->
<p><strong>size</strong></p>
<!-- raw HTML omitted -->
<p>The size, in bytes, of <strong>data</strong> in the range 0 to <a href="nap-type-constants.html"><strong>maxSoHAttributeSize</strong></a>.</p>
<!-- raw HTML omitted -->
<p><strong>data</strong></p>
<!-- raw HTML omitted -->
<p>A pointer to the octet string value.</p>
<!-- raw HTML omitted -->
<h2>Actual data layout</h2>
<p>Due to the nature of the SDK publishing environment, unions are not clearly represented in syntax blocks. Here is the actual syntax from the NapProtocol.h header file.</p>
<pre lang="C++"><code>#include &lt;windows.h&gt;

typedef [switch_type(SoHAttributeType)] 
   union tagSoHAttributeValue
   {
      [case(sohAttributeTypeSystemHealthId)]
         SystemHealthEntityId idVal;
   
      [case(sohAttributeTypeIpv4FixupServers)]
         struct tagIpv4Addresses
         {
            [range(1, maxIpv4CountPerSoHAttribute)] 
               UINT16 count;
            [size_is(count)] Ipv4Address* addresses;
         } v4AddressesVal;

      [case(sohAttributeTypeIpv6FixupServers)]
         struct tagIpv6Addresses
         {
            [range(1, maxIpv6CountPerSoHAttribute)]
               UINT16 count;
            [size_is(count)] Ipv6Address* addresses;
         } v6AddressesVal;

      [case(sohAttributeTypeComplianceResultCodes, 
            sohAttributeTypeErrorCodes)]
         ResultCodes codesVal;

      [case(sohAttributeTypeTimeOfLastUpdate, 
            sohAttributeTypeSoHGenerationTime)]
         FILETIME dateTimeVal;

      [case(sohAttributeTypeVendorSpecific)]
         struct tagVendorSpecific
         {
            UINT32 vendorId;
            [range(0, maxSoHAttributeSize - 4)] 
               UINT16 size;
            [size_is(size)] BYTE* vendorSpecificData;
         } vendorSpecificVal;

      [case(sohAttributeTypeHealthClass, 
            sohAttributeTypeFailureCategory,
            sohAttributeTypeExtendedIsolationState)]
         UINT8 uint8Val;

      [default]
         struct tagOctetString
         {
            [range(0, maxSoHAttributeSize)] UINT16 size;
            [size_is(size)] BYTE* data;
         } octetStringVal;

   } SoHAttributeValue;
};
</code></pre>
<h2>Remarks</h2>
<p>These attribute types are consumed by the NAP system:</p>
<ul>
<li>sohAttributeTypeSystemHealthId</li>
<li>sohAttributeTypeIpv4FixupServers</li>
<li>sohAttributeTypeIpv6FixupServers</li>
<li>sohAttributeTypeComplianceResultCodes</li>
<li>sohAttributeTypeFailureCategory</li>
</ul>
<p>The rest of the <a href="sohattributetype-enum.html"><strong>SoHAttributeTypes</strong></a> are meant purely as prescriptive guidance for usage by SHAs and SHVs.</p>
<h2>Requirements</h2>
<table>
<thead>
<tr>
<th>Requirement</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Minimum supported client<!-- raw HTML omitted --></td>
<td>Windows Vista [desktop apps only]<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Minimum supported server<!-- raw HTML omitted --></td>
<td>Windows Server 2008 [desktop apps only]<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Header<!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted -->NapProtocol.h<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
<tr>
<td>IDL<!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted -->NapProtocol.idl<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<h2>See also</h2>
<!-- raw HTML omitted -->
<p><a href="nap-reference.html">NAP Reference</a></p>
<!-- raw HTML omitted -->
<p><a href="nap-structures.html">NAP Structures</a></p>
<!-- raw HTML omitted -->
</body>
