<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>PHONE_STATE message</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: TAPI sends the PHONE_STATE message to an application whenever the status of a phone device changes.
ms.assetid: 74e74b62-8387-4056-83e6-2350b3da4077
title: PHONE_STATE message (Tapi.h)
ms.topic: reference
ms.date: 05/31/2018</h2>
<h1>PHONE_STATE message</h1>
<p>TAPI sends the <strong>PHONE_STATE</strong> message to an application whenever the status of a phone device changes.</p>
<pre lang="C++"><code>            
</code></pre>
<h2>Parameters</h2>
<!-- raw HTML omitted -->
<p><em>hPhone</em></p>
<!-- raw HTML omitted -->
<p>A handle to the phone device.</p>
<!-- raw HTML omitted -->
<p><em>dwCallbackInstance</em></p>
<!-- raw HTML omitted -->
<p>The application's callback instance provided when opening the phone device.</p>
<!-- raw HTML omitted -->
<p><em>dwParam1</em></p>
<!-- raw HTML omitted -->
<p>The phone state that has changed. This parameter uses one of the <a href="phonestate--constants.html"><strong>PHONESTATE_ constants</strong></a>.</p>
<!-- raw HTML omitted -->
<p><em>dwParam2</em></p>
<!-- raw HTML omitted -->
<p>Phone state-dependent information detailing the status change. This parameter is not used if multiple flags are set in <em>dwParam1</em>, because multiple status items have changed. The application should invoke <a href="/windows/desktop/api/Tapi/nf-tapi-phonegetstatus"><strong>phoneGetStatus</strong></a> to obtain a complete set of information.</p>
<p>If <em>dwParam1</em> is PHONESTATE_OWNER, <em>dwParam2</em> contains the new number of owners.</p>
<p>If <em>dwParam1</em> is PHONESTATE_MONITORS, <em>dwParam2</em> contains the new number of monitors.</p>
<p>If <em>dwParam1</em> is PHONESTATE_LAMP, <em>dwParam2</em> contains the button/lamp identifier of the lamp that has changed.</p>
<p>If <em>dwParam1</em> is PHONESTATE_RINGMODE, <em>dwParam2</em> contains the new ring mode.</p>
<p>If <em>dwParam1</em> is PHONESTATE_HANDSET, SPEAKER or HEADSET, <em>dwParam2</em> contains the new hookswitch mode of that hookswitch device. This parameter uses one of the <a href="phonehookswitchmode--constants.html"><strong>PHONEHOOKSWITCHMODE_ constants</strong></a>.</p>
<!-- raw HTML omitted -->
<p><em>dwParam3</em></p>
<!-- raw HTML omitted -->
<p>Unused.</p>
<!-- raw HTML omitted -->
<h2>Return value</h2>
<p>No return value.</p>
<h2>Remarks</h2>
<p>Sending the <strong>PHONE_STATE</strong> message to the application can be controlled and queried using <a href="/windows/desktop/api/Tapi/nf-tapi-phonesetstatusmessages"><strong>phoneSetStatusMessages</strong></a> and <a href="/windows/desktop/api/Tapi/nf-tapi-phonegetstatusmessages"><strong>phoneGetStatusMessages</strong></a>. By default, this message is disabled for all state changes except for PHONESTATE_REINIT, which cannot be disabled. This message is sent to all applications that have a handle to the phone, including those that called <a href="/windows/desktop/api/Tapi/nf-tapi-phoneopen"><strong>phoneOpen</strong></a> with the <em>dwPrivileges</em> parameter set to PHONEPRIVILEGE_OWNER or PHONEPRIVILEGE_MONITOR.</p>
<p>A <strong>PHONE_STATE</strong> message with an Owners and/or Monitors indication is sent to applications that already have a handle for the phone. This can be the result of another application changing ownership or monitorship of the phone device with <a href="/windows/desktop/api/Tapi/nf-tapi-phoneopen"><strong>phoneOpen</strong></a>, <a href="/windows/desktop/api/Tapi/nf-tapi-phoneclose"><strong>phoneClose</strong></a> or <a href="/windows/desktop/api/Tapi/nf-tapi-phoneshutdown"><strong>phoneShutdown</strong></a>.</p>
<h2>Requirements</h2>
<table>
<thead>
<tr>
<th>Requirement</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>TAPI version<!-- raw HTML omitted --></td>
<td>Requires TAPI 2.0 or later<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Header<!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted -->Tapi.h<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<h2>See also</h2>
<!-- raw HTML omitted -->
<p><a href="phone-close.html"><strong>PHONE_CLOSE</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/api/Tapi/ns-tapi-phonecaps"><strong>PHONECAPS</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/api/Tapi/nf-tapi-phoneclose"><strong>phoneClose</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/api/Tapi/nf-tapi-phonegetdevcaps"><strong>phoneGetDevCaps</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/api/Tapi/nf-tapi-phonegetstatus"><strong>phoneGetStatus</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/api/Tapi/nf-tapi-phonegetstatusmessages"><strong>phoneGetStatusMessages</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/api/Tapi/nf-tapi-phoneinitialize"><strong>phoneInitialize</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/api/Tapi/nf-tapi-phoneinitializeexa"><strong>phoneInitializeEx</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/api/Tapi/nf-tapi-phoneopen"><strong>phoneOpen</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/api/Tapi/nf-tapi-phonesetstatusmessages"><strong>phoneSetStatusMessages</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/api/Tapi/nf-tapi-phoneshutdown"><strong>phoneShutdown</strong></a></p>
<!-- raw HTML omitted -->
</body>
