<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Version Negotiation</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: Over time, different versions may exist for TAPI applications, TAPI, and the service providers.
ms.assetid: '39b16328-931e-4d75-a6ec-1edc97f1a287'
title: Version Negotiation
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>Version Negotiation</h1>
<p>Over time, different versions may exist for TAPI applications, TAPI, and the service providers. Optimal interoperability of a TAPI application requires knowledge of not just the application's TAPI version, but also of the TAPI DLL, TAPISVR, and service provider versions.</p>
<p>Failure to do proper version negotiation can result in serious problems. For example, some heavily used structures have data members added from one version to the next. If the structure size does not match what the application or TAPI expects, the consequences range from memory leaks to intermittent AVs.</p>
<p>For additional information, see <a href="./tapi-versioning.html">TAPI Versioning</a>.</p>
<p><strong>TAPI 2.x:</strong> Applications negotiate with TAPI and TAPISVR during <a href="/windows/win32/api/tapi/nf-tapi-lineinitializeexa"><strong>lineInitializeEx</strong></a>. Applications perform device negotiation with service providers by calling <a href="/windows/win32/api/tapi/nf-tapi-linenegotiateapiversion"><strong>lineNegotiateAPIVersion</strong></a> for each line that the application might use.</p>
<p><strong>TAPI 3.x:</strong> There is no need to perform version negotiation; however, you can use <a href="/windows/win32/api/unknwn/nf-unknwn-iunknown-queryinterface(q)"><strong>QueryInterface</strong></a> to determine if an interface is available on their version.</p>
<p>Â </p>
<p>Â </p>
</body>
