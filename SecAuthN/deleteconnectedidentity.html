<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>DeleteConnectedIdentity function</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<p>description: Deletes the user credential used for the connected identity.
ms.assetid: EB32832D-9A8C-4CEB-897A-7E9D24FF84DD
title: DeleteConnectedIdentity function (Indentitystore.h)
ms.topic: reference
ms.date: 05/31/2018
topic_type:</p>
<ul>
<li>APIRef</li>
<li>kbSyntax
api_name:</li>
<li>DeleteConnectedIdentity
api_type:</li>
<li>HeaderDef
api_location:</li>
<li>Indentitystore.h</li>
</ul>
<hr />
<h1>DeleteConnectedIdentity function</h1>
<p>Deletes the user credential used for the connected identity.</p>
<h2>Syntax</h2>
<pre lang="C++"><code>SEC_ENTRY DeleteConnectedIdentity(
  _In_     PVOID  ProviderHandle,
  _In_opt_ HANDLE UserToken,
  _In_     PSID   UserSid,
  _In_     PWSTR  IdentityUserName
);
</code></pre>
<h2>Parameters</h2>
<!-- raw HTML omitted -->
<p><em>ProviderHandle</em> [in]</p>
<!-- raw HTML omitted -->
<p>Identity provider handle.</p>
<!-- raw HTML omitted -->
<p><em>UserToken</em> [in, optional]</p>
<!-- raw HTML omitted -->
<p>Token of the connected user whose account is going to be converted to a local account. If <em>UserToken</em> is not <strong>NULL</strong>, the identity provider uses this token to load the user profile and clean up connected states. If <em>UserToken</em> is <strong>NULL</strong>, LSA is forcing the disconnection. The identity provider should clean up any global connected states on this user, but the provider does not have to clean up connected states in the user profile.</p>
<!-- raw HTML omitted -->
<p><em>UserSid</em> [in]</p>
<!-- raw HTML omitted -->
<p>The primary SID of the connected user. If <em>UserToken</em> is not <strong>NULL</strong>, this parameter is the user SID of the token. If <em>UserToken</em> is <strong>NULL</strong>, this parameter is used to identify the connected user and clean up global connected states of that user.</p>
<!-- raw HTML omitted -->
<p><em>IdentityUserName</em> [in]</p>
<!-- raw HTML omitted -->
<p>The user name of the identity.</p>
<!-- raw HTML omitted -->
<h2>Return value</h2>
<p>If the function succeeds, the function returns SEC_E_OK.</p>
<p>If the function fails, the function may return one of the following error codes.</p>
<table>
<thead>
<tr>
<th>Return value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted -->STATUS_INVALID_PARAMETER<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td>A parameter is not valid.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted -->STATUS_NO_SUCH_USER<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td>The user identified by <em>UserSid</em> does not exist, is not currently connected, or there is no identity whose user name matches <em>IdentityUserName</em>.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted -->STATUS_INSUFFICIENT_RESOURCES<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td>There is not enough memory to process the request.<!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<h2>Requirements</h2>
<table>
<thead>
<tr>
<th>Requirement</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Minimum supported client<!-- raw HTML omitted --></td>
<td>Windows 8 [desktop apps only]<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Minimum supported server<!-- raw HTML omitted --></td>
<td>Windows Server 2012 [desktop apps only]<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Header<!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted -->Indentitystore.h<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
</body>
