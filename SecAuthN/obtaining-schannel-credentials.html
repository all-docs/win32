<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Obtaining Schannel Credentials</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: Credentials are required by the Schannel authentication process; both client and server must obtain valid credentials to establish a security context for message exchange. For an example that demonstrates this procedure, see Getting credentials.
ms.assetid: ee4a9908-7ba8-4701-84a4-c50b6b989e82
title: Obtaining Schannel Credentials
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>Obtaining Schannel Credentials</h1>
<p>Credentials are required by the Schannel authentication process; both client and server must obtain valid credentials to establish a <a href="../secgloss/s-gly.html"><em>security context</em></a> for message exchange. For an example that demonstrates this procedure, see <a href="getting-a-certificate-for-schannel.html">Getting credentials</a>.</p>
<p>Your application obtains credentials by calling the <a href="/windows/win32/api/sspi/nf-sspi-acquirecredentialshandlea"><strong>AcquireCredentialsHandle</strong></a> function, which returns a handle to the requested credentials. Because credentials handles are used to store configuration information, the same handle cannot be used for both client-side and server-side operations. This means that applications that support both client and server connections must obtain a minimum of two credentials handles.</p>
<p>In WindowsÂ XP, an <a href="/windows/desktop/api/Schannel/ns-schannel-schannel_cred"><strong>SCHANNEL_CRED</strong></a> structure specifies the following:</p>
<ul>
<li>A security protocol</li>
<li>The allowable ciphers</li>
<li>Minimum and maximum cipher strengths</li>
<li>An <a href="../secgloss/x-gly.html"><em>X.509</em></a> certificate used for authentication â€” Required for server, optional for client unless server requests client authentication.</li>
</ul>
<p>Pass the <a href="/windows/desktop/api/Schannel/ns-schannel-schannel_cred"><strong>SCHANNEL_CRED</strong></a> structure (via the <em>pAuthData</em> parameter) to the <a href="/windows/win32/api/sspi/nf-sspi-acquirecredentialshandlea"><strong>AcquireCredentialsHandle</strong></a> function. This function returns the credentials handle required to establish a <a href="../secgloss/s-gly.html"><em>security context</em></a>.</p>
<p>For detailed information on setting the ciphers used with Schannel, see <a href="specifying-schannel-ciphers-and-cipher-strengths.html">Specifying Schannel Ciphers and Cipher Strengths</a>.</p>
<p>For information about certificates, see <a href="../seccrypto/cryptography-functions.html">Certificate and Certificate Store Functions</a>.</p>
<p>For an example that demonstrates opening a <a href="../secgloss/c-gly.html"><em>certificate store</em></a> and locating a certificate to use for Schannel authentication, see <a href="getting-a-certificate-for-schannel.html">Getting a Certificate</a>.</p>
<p>Â </p>
<p>Â </p>
</body>
