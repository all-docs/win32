<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Ticket-Granting Service Exchange</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: After a ticket-granting ticket (TGT) and session key have been established for the client, the client can request a separate session key and ticket for the service.
ms.assetid: b4f63642-9282-4e11-b40c-eec406b2dd2b
title: Ticket-Granting Service Exchange
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>Ticket-Granting Service Exchange</h1>
<p>After a ticket-granting ticket (TGT) and <a href="../secgloss/s-gly.html"><em>session key</em></a> have been established for the client, the client can request a separate session key and ticket for the service.</p>
<p><strong>To request a ticket for another service</strong></p>
<ol>
<li>The Kerberos client on the user's workstation requests <a href="../secgloss/c-gly.html"><em>credentials</em></a> for the service by sending, to the <a href="../secgloss/k-gly.html"><em>Key Distribution Center</em></a> (KDC), a message of type KRB_TGS_REQ (Kerberos Ticket-Granting Service Request). This message consists of the identity of the service for which the client is requesting credentials, an authenticator message encrypted with the user's new logon <a href="../secgloss/s-gly.html"><em>session key</em></a>, and the TGT obtained from the <a href="authentication-service-exchange.html">Authentication Service Exchange</a>.</li>
<li>When the KDC receives a KRB_TGS_REQ, the KDC decrypts the TGT with its secret key and extracts the user's logon session key.</li>
<li>The KDC uses the logon <a href="../secgloss/s-gly.html"><em>session key</em></a> to decrypt the user's authenticator message and evaluates it. If the authenticator passes the test, the KDC extracts the user's authorization data from the TGT and invents a session key for the user to share with the requested server.</li>
<li>The KDC encrypts one copy of the service session key with the user's logon session key.</li>
<li>The KDC embeds another copy of the service session key in a ticket, along with the user's authorization data, and encrypts the ticket with the server's <a href="../secgloss/m-gly.html"><em>master key</em></a>.</li>
<li>The KDC sends these credentials back to the client by replying with a message of type KRB_TGS_REP (Kerberos Ticket-Granting Service Reply).</li>
<li>When the client receives the reply, it decrypts the service session key with the user's logon session key and stores the service session key in its ticket cache.</li>
<li>The client extracts the ticket to the server and stores that in its ticket cache.</li>
</ol>
<p>Â </p>
<p>Â </p>
</body>
