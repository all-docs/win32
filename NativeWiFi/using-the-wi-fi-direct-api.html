<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Using the Wi-Fi Direct functions</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: Shows how to use Wi-Fi Direct functions in desktop apps.
ms.assetid: 50B95B7D-B860-44DF-8E78-1E7D2DC5A9B6
title: Using the Wi-Fi Direct functions
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>Using the Wi-Fi Direct functions</h1>
<p>This topics shows how to use Wi-Fi Direct functions in desktop apps. Starting on WindowsÂ 8 and Windows ServerÂ 2012, Wi-Fi Direct functions were added to the Native Wifi API.</p>
<p>The Wi-Fi Direct feature is based on the development of the Wi-Fi Peer-to-Peer Technical Specification v1.1 by the Wi-Fi Alliance (see <a href="https://www.wi-fi.org/">Wi-Fi Alliance Published Specifications</a>). The goal of the Wi-Fi Peer-to-Peer Technical Specification is to provide a solution for Wi-Fi device-to-device connectivity without the need for either a Wireless Access Point (wireless AP) to setup the connection or the use of the existing Wi-Fi ad hoc (IBSS) mechanism.</p>
<blockquote>
<p>[!Note]<br />
Ad hoc mode might not be available in future versions of Windows. Starting with WindowsÂ 8.1 and Windows ServerÂ 2012Â R2, use Wi-Fi Direct instead.</p>
</blockquote>
<p>Â </p>
<p>The following functions support the Wi-Fi Direct feature.</p>
<ul>
<li><a href="/windows/desktop/api/wlanapi/nf-wlanapi-wfdcancelopensession"><strong>WFDCancelOpenSession</strong></a> - Indicates that the app wants to cancel a pending <a href="/windows/desktop/api/wlanapi/nf-wlanapi-wfdstartopensession"><strong>WFDStartOpenSession</strong></a> function that has not completed.</li>
<li><a href="/windows/desktop/api/wlanapi/nf-wlanapi-wfdclosehandle"><strong>WFDCloseHandle</strong></a> - Closes a handle to the Wi-Fi Direct service.</li>
<li><a href="/windows/desktop/api/wlanapi/nf-wlanapi-wfdclosesession"><strong>WFDCloseSession</strong></a> - Closes a session after a previously successful call to the <a href="/windows/desktop/api/wlanapi/nf-wlanapi-wfdstartopensession"><strong>WFDStartOpenSession</strong></a> function.</li>
<li><a href="/windows/desktop/api/wlanapi/nf-wlanapi-wfdopenhandle"><strong>WFDOpenHandle</strong></a> - Opens a handle to the Wi-Fi Direct service and negotiates a version of the Wi-FI Direct API to use.</li>
<li><a href="/windows/desktop/api/wlanapi/nf-wlanapi-wfdopenlegacysession"><strong>WFDOpenLegacySession</strong></a> - Retrieves and applies a stored profile for a Wi-Fi Direct legacy device.</li>
<li><a href="/windows/desktop/api/wlanapi/nf-wlanapi-wfdstartopensession"><strong>WFDStartOpenSession</strong></a> - Starts an on-demand connection to a specific Wi-Fi Direct device, which has been previously paired through the Windows Pairing experience.</li>
<li><a href="/windows/desktop/api/wlanapi/nf-wlanapi-wfdupdatedevicevisibility"><strong>WFDUpdateDeviceVisibility</strong></a> - Updates device visibility for the Wi-Fi Direct device address for a given installed Wi-Fi Direct device node.</li>
<li><a href="/windows/desktop/api/wlanapi/nc-wlanapi-wfd_open_session_complete_callback"><strong>WFD_OPEN_SESSION_COMPLETE_CALLBACK</strong></a> - Defines the callback function that is called by the <a href="/windows/desktop/api/wlanapi/nf-wlanapi-wfdstartopensession"><strong>WFDStartOpenSession</strong></a> function when the <strong>WFDStartOpenSession</strong> operation completes</li>
</ul>
<p>For a desktop app, the Wi-Fi Direct feature requires that Wi-FI Direct devices be previously paired by the user with the Windows Pairing experience user interface. Once this pairing is completed, a profile is stored that allows the Wi-Fi Direct functions to be used to start a Wi-Fi Direct session to establish a connection between the Wi-Fi Direct devices.</p>
<p>In order to use Wi-Fi Direct, an app must first obtain a handle to the Wi-Fi Direct service by calling the <a href="/windows/desktop/api/wlanapi/nf-wlanapi-wfdopenhandle"><strong>WFDOpenHandle</strong></a> function. The Wi-Fi Direct (WFD) handle returned by the <strong>WFDOpenHandle</strong> function is used for subsequent Wi-Fi Direct function calls made to the Wi-Fi Direct service.</p>
<p>The <a href="/windows/desktop/api/wlanapi/nf-wlanapi-wfdstartopensession"><strong>WFDStartOpenSession</strong></a> function starts an asynchronous operation to start an on-demand connection to a specific Wi-Fi Direct device. The target Wi-Fi device must previously have been paired through the Windows Pairing experience. When the asynchronous operation completes, the callback function specified in the <em>pfnCallback</em> parameter is called.</p>
<p>Once an application is done using the Wi-Fi Direct service, the application should call the <a href="/windows/desktop/api/wlanapi/nf-wlanapi-wfdclosehandle"><strong>WFDCloseHandle</strong></a> function to signal to the Wi-Fi Direct service that the application is done using the service. This allows the Wi-Fi Direct service to release resources used by the application.</p>
<p>For more information on Wi-Fi Direct for use in Windows Store apps, see <a href="/uwp/api/Windows.Networking.Proximity.PeerFinder"><strong>PeerFinder</strong></a> and related classes in the <a href="/uwp/api/Windows.Networking.Proximity"><strong>Windows.Networking.Proximity</strong></a> namespace.</p>
<h2>Related topics</h2>
<!-- raw HTML omitted -->
<p><strong>Other resources</strong></p>
<!-- raw HTML omitted -->
<p><a href="about-native-wifi.html">About Native Wifi</a></p>
<!-- raw HTML omitted -->
<p><a href="about-the-native-wifi-api.html">About the Native Wifi API</a></p>
<!-- raw HTML omitted -->
<p><a href="about-the-wi-fi-direct-api.html">About the Wi-Fi Direct feature</a></p>
<!-- raw HTML omitted -->
<p><strong>Reference</strong></p>
<!-- raw HTML omitted -->
<p><a href="/uwp/api/Windows.Networking.Proximity.PeerFinder"><strong>PeerFinder</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/api/wlanapi/nc-wlanapi-wfd_open_session_complete_callback"><strong>WFD_OPEN_SESSION_COMPLETE_CALLBACK</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/api/wlanapi/nf-wlanapi-wfdcancelopensession"><strong>WFDCancelOpenSession</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/api/wlanapi/nf-wlanapi-wfdclosehandle"><strong>WFDCloseHandle</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/api/wlanapi/nf-wlanapi-wfdclosesession"><strong>WFDCloseSession</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/api/wlanapi/nf-wlanapi-wfdopenhandle"><strong>WFDOpenHandle</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/api/wlanapi/nf-wlanapi-wfdopenlegacysession"><strong>WFDOpenLegacySession</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/api/wlanapi/nf-wlanapi-wfdstartopensession"><strong>WFDStartOpenSession</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/api/wlanapi/nf-wlanapi-wfdupdatedevicevisibility"><strong>WFDUpdateDeviceVisibility</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/uwp/api/Windows.Networking.Proximity"><strong>Windows.Networking.Proximity</strong></a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
