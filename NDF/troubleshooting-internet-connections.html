<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Troubleshooting Internet Connections</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>title: Troubleshooting Internet Connections
description: In this scenario, a user is attempting to browse to <a href="http://www.msn.com">www.msn.com</a> using the https protocol, but is unable to connect. You can use Netsh and Network Monitor to collect and view traces in order to help determine why the connection failed.
ms.assetid: e10fcc24-4670-461c-a145-3910c102e81f
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>Troubleshooting Internet Connections</h1>
<p>In this scenario, a user is attempting to browse to <a href="http://www.msn.com">www.msn.com</a> using the https protocol, but is unable to connect. You can use Netsh and Network Monitor to collect and view traces in order to help determine why the connection failed.</p>
<p>First, you can use netsh to start a trace. Typing <strong>netsh trace start scenario = InternetClient tracefile=msn.etl</strong> starts tracing for all of the providers enabled under the InternetClient scenario, saving the results to a file named msn.etl. After using a web browser to attempt to reach <a href="http://www.msn.com">www.msn.com</a>, typing <strong>netsh trace stop</strong> terminates and correlates the trace file.</p>
<p>You can then open the msn.etl file in Network Monitor. The events are grouped by activity ID in the left pane. Using the filter <strong>description.contains(&quot;msn&quot;)</strong> will show only those events which include the string &quot;msn&quot; in their protocol description.</p>
<p><img src="images/internetclient1.png" alt="troubleshooting internet connections using network monitor (1)" /></p>
<p>Next, you can review the events in the frame summary to identify an event which looks relevant. After you select the event, right-click and point to Find Conversations, then click UTEvent to select the conversation at the UTEvent level.</p>
<p><img src="images/internetclient2.png" alt="troubleshooting internet connections using network monitor (2)" /></p>
<p>The associated normalized activity in the left pane is then highlighted, in this case UTEvent ActivityID 397.</p>
<p><img src="images/internetclient3.png" alt="troubleshooting internet connections using network monitor (3)" /></p>
<p>By using Network Monitor to view and filter the trace information, the number of events to examine has been reduced from 1989 to 96.</p>
<p>Â </p>
<p>Â </p>
</body>
