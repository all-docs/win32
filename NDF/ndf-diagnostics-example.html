<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>NDF Diagnostics Example</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>title: NDF Diagnostics Example
description: The following example shows how to launch the NDF user interface and diagnose connectivity to the website http //www.microsoft.com.
ms.assetid: 6fe3af13-7216-4ac9-91ac-c497d25521ab
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>NDF Diagnostics Example</h1>
<p>The following example shows how to launch the NDF user interface and diagnose connectivity to the website <a href="https://www.microsoft.com">https://www.microsoft.com</a>.</p>
<pre lang="C++"><code>#include &quot;ndfapi.h&quot;

NDFHANDLE hNDF;
HRESULT hr = NdfCreateWebIncident (
                    L&quot;https://www.microsoft.com&quot;,
                    &amp;hNDF);

if(SUCCEEDED(hr))
{
    NdfExecuteDiagnosis(hNDF, NULL); // launches the NDF UI
                                     // the UI is not modal to the original window
    NdfCloseIncident(hNDF);
}
</code></pre>
<p>The NDF UI can be launched as a modal window. To do so, change the second parameter of <a href="/windows/desktop/api/Ndfapi/nf-ndfapi-ndfexecutediagnosis"><strong>NdfExecuteDiagnosis</strong></a> from <strong>NULL</strong> to the handle (HWND) of the parent window.</p>
<p>This example can be modified to diagnose other areas of networking. To do so, replace the <a href="/windows/desktop/api/Ndfapi/nf-ndfapi-ndfcreatewebincident"><strong>NdfCreateWebIncident</strong></a> call with one of the other incident creation functions, such as <a href="/windows/desktop/api/Ndfapi/nf-ndfapi-ndfcreatednsincident"><strong>NdfCreateDNSIncident</strong></a> or <a href="/windows/desktop/api/Ndfapi/nf-ndfapi-ndfcreatewinsockincident"><strong>NdfCreateWinSockIncident</strong></a>.</p>
<h2>Related topics</h2>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/api/Ndfapi/nf-ndfapi-ndfcloseincident"><strong>NdfCloseIncident</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/api/Ndfapi/nf-ndfapi-ndfcreatewebincident"><strong>NdfCreateWebIncident</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/api/Ndfapi/nf-ndfapi-ndfexecutediagnosis"><strong>NdfExecuteDiagnosis</strong></a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
