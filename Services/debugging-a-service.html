<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Debugging a Service</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: You can use any one of the following methods to debug your service.
ms.assetid: 6f4ae117-2120-4c1e-b69f-641ce2e633fa
title: Debugging a Service
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>Debugging a Service</h1>
<p>You can use any one of the following methods to debug your service.</p>
<ul>
<li>
<p>Use your debugger to debug the service while it is running. First, obtain the process identifier (PID) of the service process. After you have obtained the PID, attach to the running process. For syntax information, see the documentation included with your debugger.</p>
</li>
<li>
<p>Call the <a href="/windows/desktop/api/debugapi/nf-debugapi-debugbreak"><strong>DebugBreak</strong></a> function to invoke the debugger for just-in-time debugging.</p>
</li>
<li>
<p>Specify a debugger to use when starting a program. To do so, create a key called <strong>Image File Execution Options</strong> in the following registry location:</p>
<p><strong>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion</strong></p>
<p>Create a subkey with the same name as your service (for example, MYSERV.EXE). To this subkey, add a value of type <strong>REG_SZ</strong>, named <strong>Debugger</strong>. Use the full path to the debugger as the string value. In the Services control panel applet, select your service, click <strong>Startup</strong> and check <strong>Allow Service to Interact with Desktop</strong>. The service must be an interactive service, or else the debugger cannot run on the default desktop. Note that this technique is no longer supported as of WindowsÂ Vista because all services are run in session that is reserved exclusively for services and does not support displaying a user interface.</p>
</li>
<li>
<p>Use <a href="/windows/desktop/ETW/event-tracing-portal">Event Tracing</a> to log information.</p>
</li>
</ul>
<p>To debug the initialization code of an auto-start service, you will have to temporarily install and run the service as a demand-start service.</p>
<p>At times, it may be necessary to run a service as a console application for debugging purposes. In this scenario, the <a href="/windows/desktop/api/Winsvc/nf-winsvc-startservicectrldispatchera"><strong>StartServiceCtrlDispatcher</strong></a> function will return <strong>ERROR_FAILED_SERVICE_CONTROLLER_CONNECT</strong>. Therefore, be sure to structure your code such that service-specific code is not called when this error is returned.</p>
<h2>Related topics</h2>
<!-- raw HTML omitted -->
<p><a href="https://msdn.microsoft.com/library/cc267835.aspx">Debugging a Service Application</a></p>
<!-- raw HTML omitted -->
<p><a href="https://msdn.microsoft.com/library/cc267445.aspx">Debugging Tools for Windows</a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
