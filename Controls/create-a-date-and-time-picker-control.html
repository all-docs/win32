<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>How to Create a Date and Time Picker Control</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>title: How to Create a Date and Time Picker Control
description: This topic demonstrates how to dynamically create a date and time picker (DTP) control.
ms.assetid: D4ACA939-3004-48D3-ADD9-FC5E53128BA2
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>How to Create a Date and Time Picker Control</h1>
<p>This topic demonstrates how to dynamically create a date and time picker (DTP) control. The accompanying C++ code example creates a DTP control in a modeless dialog box. It uses the <a href="date-and-time-picker-control-styles.html"><strong>DTS_SHOWNONE</strong></a> style to enable the user to simulate deactivation of the date within the control.</p>
<h2>What you need to know</h2>
<h3>Technologies</h3>
<ul>
<li><a href="window-controls.html">Windows Controls</a></li>
</ul>
<h3>Prerequisites</h3>
<ul>
<li>C/C++</li>
<li>Windows User Interface Programming</li>
</ul>
<h2>Instructions</h2>
<h3>Step 1:</h3>
<p>Register the window class by calling the <a href="/windows/desktop/api/Commctrl/nf-commctrl-initcommoncontrolsex"><strong>InitCommonControlsEx</strong></a> function and specifying the ICC_DATE_CLASSES bit in the accompanying <a href="/windows/win32/api/commctrl/ns-commctrl-initcommoncontrolsex"><strong>INITCOMMONCONTROLSEX</strong></a> structure.</p>
<pre lang="C++"><code> INITCOMMONCONTROLSEX icex;

 icex.dwSize = sizeof(icex);
 icex.dwICC = ICC_DATE_CLASSES;

 InitCommonControlsEx(&amp;icex);
</code></pre>
<h3>Step 2:</h3>
<p>To create the DTP control, use the <a href="/windows/desktop/api/winuser/nf-winuser-createwindowexa"><strong>CreateWindowEx</strong></a> function. Specify <a href="common-control-window-classes.html"><strong>DATETIMEPICK_CLASS</strong></a> as the window class, and pass the handle to the parent dialog box.</p>
<p>The following C++ code example uses the <a href="/windows/desktop/api/winuser/nf-winuser-createdialoga"><strong>CreateDialog</strong></a> function to create a modeless dialog box. It then calls <strong>CreateWindowEx</strong> to create the DTP control.</p>
<pre lang="C++"><code>  hwndDlg = CreateDialog  (g_hinst,
                           MAKEINTRESOURCE(IDD_DIALOG1),
                           hwndMain,
                           DlgProc);

  if(hwndDlg)
      hwndDP = CreateWindowEx(0,
                           DATETIMEPICK_CLASS,
                           TEXT(&quot;DateTime&quot;),
                           WS_BORDER|WS_CHILD|WS_VISIBLE|DTS_SHOWNONE,
                           20,50,220,20,
                           hwndDlg,
                           NULL,
                           g_hinst,
                           NULL);
</code></pre>
<h2>Complete example</h2>
<pre lang="C++"><code>//  CreateDatePick creates a DTP control within a dialog box.
//  Returns the handle to the new DTP control if successful, or NULL 
//  otherwise.
// 
//    hwndMain - The handle to the main window.
//    g_hinst  - global handle to the program instance.

HWND WINAPI CreateDatePick(HWND hwndMain)
{
    HWND hwndDP = NULL;
    HWND hwndDlg = NULL;

    INITCOMMONCONTROLSEX icex;

    icex.dwSize = sizeof(icex);
    icex.dwICC = ICC_DATE_CLASSES;

    InitCommonControlsEx(&amp;icex);

    hwndDlg = CreateDialog  (g_hinst,
                             MAKEINTRESOURCE(IDD_DIALOG1),
                             hwndMain,
                             DlgProc);

    if(hwndDlg)
        hwndDP = CreateWindowEx(0,
                             DATETIMEPICK_CLASS,
                             TEXT(&quot;DateTime&quot;),
                             WS_BORDER|WS_CHILD|WS_VISIBLE|DTS_SHOWNONE,
                             20,50,220,20,
                             hwndDlg,
                             NULL,
                             g_hinst,
                             NULL);

    return (hwndDP);
}

</code></pre>
<h2>Related topics</h2>
<!-- raw HTML omitted -->
<p><a href="using-date-and-time-picker.html">Using Date and Time Picker Controls</a></p>
<!-- raw HTML omitted -->
<p><a href="bumper-date-and-time-picker-date-and-time-picker-control-reference.html">Date and Time Picker Control Reference</a></p>
<!-- raw HTML omitted -->
<p><a href="date-and-time-picker-control-reference.html">Date and Time Picker</a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
