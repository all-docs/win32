<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>WM_NOTIFYFORMAT message</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<p>title: WM_NOTIFYFORMAT message (Winuser.h)
description: Determines if a window accepts ANSI or Unicode structures in the WM_NOTIFY notification message. WM_NOTIFYFORMAT messages are sent from a common control to its parent window and from the parent window to the common control.
ms.assetid: 45ddef45-3300-448d-b609-5fe931b08336
keywords:</p>
<ul>
<li>WM_NOTIFYFORMAT message Windows Controls
topic_type:</li>
<li>apiref
api_name:</li>
<li>WM_NOTIFYFORMAT
api_location:</li>
<li>Winuser.h
api_type:</li>
<li>HeaderDef
ms.topic: reference
ms.date: 05/31/2018</li>
</ul>
<hr />
<h1>WM_NOTIFYFORMAT message</h1>
<p>Determines if a window accepts ANSI or Unicode structures in the <a href="wm-notify.html"><strong>WM_NOTIFY</strong></a> notification message. <strong>WM_NOTIFYFORMAT</strong> messages are sent from a common control to its parent window and from the parent window to the common control.</p>
<h2>Parameters</h2>
<!-- raw HTML omitted -->
<p><em>wParam</em></p>
<!-- raw HTML omitted -->
<p>A handle to the window that is sending the <strong>WM_NOTIFYFORMAT</strong> message. If <em>lParam</em> is NF_QUERY, this parameter is the handle to a control. If <em>lParam</em> is NF_REQUERY, this parameter is the handle to the parent window of a control.</p>
<!-- raw HTML omitted -->
<p><em>lParam</em></p>
<!-- raw HTML omitted -->
<p>The command value that specifies the nature of the <strong>WM_NOTIFYFORMAT</strong> message. This will be one of the following values:</p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --> <!-- raw HTML omitted --><strong>NF_QUERY</strong><!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td>The message is a query to determine whether ANSI or Unicode structures should be used in <a href="wm-notify.html"><strong>WM_NOTIFY</strong></a> messages. This command is sent from a control to its parent window during the creation of a control and in response to an NF_REQUERY command.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --> <!-- raw HTML omitted --><strong>NF_REQUERY</strong><!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td>The message is a request for a control to send an NF_QUERY form of this message to its parent window. This command is sent from the parent window. The parent window is asking the control to requery it about the type of structures to use in <a href="wm-notify.html"><strong>WM_NOTIFY</strong></a> messages. If <em>lParam</em> is NF_REQUERY, the return value is the result of the requery operation.<!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<!-- raw HTML omitted -->
<h2>Return value</h2>
<p>Returns one of the following values.</p>
<table>
<thead>
<tr>
<th>Return code</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted --><strong>NFR_ANSI</strong><!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td>ANSI structures should be used in <a href="wm-notify.html"><strong>WM_NOTIFY</strong></a> messages sent by the control.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted --><strong>NFR_UNICODE</strong><!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td>Unicode structures should be used in <a href="wm-notify.html"><strong>WM_NOTIFY</strong></a> messages sent by the control. <!-- raw HTML omitted --></td>
</tr>
<tr>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted --><strong>0</strong><!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td>An error occurred.<!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<h2>Remarks</h2>
<p>When a common control is created, the control sends a <strong>WM_NOTIFYFORMAT</strong> message to its parent window to determine the type of structures to use in <a href="wm-notify.html"><strong>WM_NOTIFY</strong></a> messages. If the parent window does not handle this message, the <a href="/windows/desktop/api/winuser/nf-winuser-defwindowproca"><strong>DefWindowProc</strong></a> function responds according to the type of the parent window. That is, if the parent window is a Unicode window, <strong>DefWindowProc</strong> returns NFR_UNICODE, and if the parent window is an ANSI window, <strong>DefWindowProc</strong> returns NFR_ANSI. If the parent window is a dialog box and does not handle this message, the <a href="/windows/desktop/api/winuser/nf-winuser-defdlgprocw"><strong>DefDlgProc</strong></a> function similarly responds according to the type of the dialog box (Unicode or ANSI).</p>
<p>A parent window can change the type of structures a common control uses in <a href="wm-notify.html"><strong>WM_NOTIFY</strong></a> messages by setting <em>lParam</em> to NF_REQUERY and sending a <strong>WM_NOTIFYFORMAT</strong> message to the control. This causes the control to send an NF_QUERY form of the <strong>WM_NOTIFYFORMAT</strong> message to the parent window.</p>
<p>All common controls will send <strong>WM_NOTIFYFORMAT</strong> messages. However, the standard Windows controls (edit controls, combo boxes, list boxes, buttons, scroll bars, and static controls) do not.</p>
<h2>Requirements</h2>
<table>
<thead>
<tr>
<th>Requirement</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Minimum supported client<!-- raw HTML omitted --></td>
<td>Windows Vista [desktop apps only]<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Minimum supported server<!-- raw HTML omitted --></td>
<td>Windows Server 2003 [desktop apps only]<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Header<!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted -->Winuser.h<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
</body>
