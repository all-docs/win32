<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>LVM_SETITEMCOUNT message</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<p>title: LVM_SETITEMCOUNT message (Commctrl.h)
description: Causes the list-view control to allocate memory for the specified number of items or sets the virtual number of items in a virtual list-view control.
ms.assetid: 5e794c12-ddcb-44fc-b0d2-677352602503
keywords:</p>
<ul>
<li>LVM_SETITEMCOUNT message Windows Controls
topic_type:</li>
<li>apiref
api_name:</li>
<li>LVM_SETITEMCOUNT
api_location:</li>
<li>Commctrl.h
api_type:</li>
<li>HeaderDef
ms.topic: reference
ms.date: 05/31/2018</li>
</ul>
<hr />
<h1>LVM_SETITEMCOUNT message</h1>
<p>Causes the list-view control to allocate memory for the specified number of items or sets the virtual number of items in a <a href="list-view-controls-overview.html">virtual list-view control</a>.</p>
<h2>Parameters</h2>
<!-- raw HTML omitted -->
<p><em>wParam</em></p>
<!-- raw HTML omitted -->
<p>Number of items that the list-view control will ultimately contain.</p>
<!-- raw HTML omitted -->
<p><em>lParam</em></p>
<!-- raw HTML omitted -->
<p><a href="common-control-versions.html">Version 4.70</a>. Values that specify the behavior of the list-view control after resetting the item count. This value can be a combination of the following:</p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --> <!-- raw HTML omitted --><strong>LVSICF_NOINVALIDATEALL</strong><!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td>The list-view control will not repaint unless affected items are currently in view.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --> <!-- raw HTML omitted --><strong>LVSICF_NOSCROLL</strong><!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td>The list-view control will not change the scroll position when the item count changes.<!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<!-- raw HTML omitted -->
<h2>Return value</h2>
<p>Returns nonzero if successful, or zero otherwise.</p>
<h2>Remarks</h2>
<p>How the memory is allocated depends on how the list-view control was created. You can send this message explicitly or use the <a href="/windows/desktop/api/Commctrl/nf-commctrl-listview_setitemcount"><strong>ListView_SetItemCount</strong></a> or <a href="/windows/desktop/api/Commctrl/nf-commctrl-listview_setitemcountex"><strong>ListView_SetItemCountEx</strong></a> macros. For more information, see <a href="/windows/desktop/Controls/list-view-controls-overview">Virtual List-View Style</a>.</p>
<p>If the list-view control was created without the <a href="list-view-window-styles.html"><strong>LVS_OWNERDATA</strong></a> style, sending this message causes the control to allocate its internal data structures for the specified number of items. This prevents the control from having to allocate the data structures every time an item is added.</p>
<p>If the list-view control was created with the <a href="list-view-window-styles.html"><strong>LVS_OWNERDATA</strong></a> style (a virtual list view), sending this message sets the virtual number of items that the control contains.</p>
<p>The <em>lParam</em> parameter is intended only for list-view controls that use the <a href="list-view-window-styles.html"><strong>LVS_OWNERDATA</strong></a> and <a href="list-view-window-styles.html"><strong>LVS_REPORT</strong></a> or <a href="list-view-window-styles.html"><strong>LVS_LIST</strong></a> styles.</p>
<p>When the common control list-view is a virtualized list-view (<a href="list-view-window-styles.html"><strong>LVS_OWNERDATA</strong></a>), there is a 100,000,000 item limit on the list-view. In this scenario, <strong>LVM_SETITEMCOUNT</strong> will return FALSE when it has a <em>wParam</em> of 100,000,001.</p>
<h2>Requirements</h2>
<table>
<thead>
<tr>
<th>Requirement</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Minimum supported client<!-- raw HTML omitted --></td>
<td>Windows Vista [desktop apps only]<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Minimum supported server<!-- raw HTML omitted --></td>
<td>Windows Server 2003 [desktop apps only]<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Header<!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted -->Commctrl.h<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
</body>
