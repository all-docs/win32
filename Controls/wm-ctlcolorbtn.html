<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>WM_CTLCOLORBTN message</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<p>title: WM_CTLCOLORBTN message (Winuser.h)
description: The WM_CTLCOLORBTN message is sent to the parent window of a button before drawing the button. The parent window can change the button's text and background colors. However, only owner-drawn buttons respond to the parent window processing this message.
ms.assetid: fd2ab917-ffd6-4f71-9b1c-0ecdfe53ae8b
keywords:</p>
<ul>
<li>WM_CTLCOLORBTN message Windows Controls
topic_type:</li>
<li>apiref
api_name:</li>
<li>WM_CTLCOLORBTN
api_location:</li>
<li>Winuser.h
api_type:</li>
<li>HeaderDef
ms.topic: reference
ms.date: 05/31/2018</li>
</ul>
<hr />
<h1>WM_CTLCOLORBTN message</h1>
<p>The <strong>WM_CTLCOLORBTN</strong> message is sent to the parent window of a button before drawing the button. The parent window can change the button's text and background colors. However, only owner-drawn buttons respond to the parent window processing this message.</p>
<pre lang="C++"><code>WM_CTLCOLORBTN

    WPARAM wParam;
    LPARAM lParam; 
</code></pre>
<h2>Parameters</h2>
<!-- raw HTML omitted -->
<p><em>wParam</em></p>
<!-- raw HTML omitted -->
<p>An <strong>HDC</strong> that specifies the handle to the display context for the button.</p>
<!-- raw HTML omitted -->
<p><em>lParam</em></p>
<!-- raw HTML omitted -->
<p>An <strong>HWND</strong> that specifies the handle to the button.</p>
<!-- raw HTML omitted -->
<h2>Return value</h2>
<p>If an application processes this message, it must return a handle to a brush. The system uses the brush to paint the background of the button.</p>
<h2>Remarks</h2>
<p>If the application returns a brush that it created (for example, by using the <a href="/windows/desktop/api/wingdi/nf-wingdi-createsolidbrush"><strong>CreateSolidBrush</strong></a> or <a href="/windows/desktop/api/wingdi/nf-wingdi-createbrushindirect"><strong>CreateBrushIndirect</strong></a> function), the application must free the brush. If the application returns a system brush (for example, one that was retrieved by the <a href="/windows/desktop/api/wingdi/nf-wingdi-getstockobject"><strong>GetStockObject</strong></a> or <a href="/windows/desktop/api/winuser/nf-winuser-getsyscolorbrush"><strong>GetSysColorBrush</strong></a> function), the application does not need to free the brush.</p>
<p>By default, the <a href="/windows/desktop/api/winuser/nf-winuser-defwindowproca"><strong>DefWindowProc</strong></a> function selects the default system colors for the button. Buttons with the <a href="button-styles.html"><strong>BS_PUSHBUTTON</strong></a>, <a href="button-styles.html"><strong>BS_DEFPUSHBUTTON</strong></a>, or <a href="button-styles.html"><strong>BS_PUSHLIKE</strong></a> styles do not use the returned brush. Buttons with these styles are always drawn with the default system colors. Drawing push buttons requires several different brushes-face, highlight, and shadow-but the <strong>WM_CTLCOLORBTN</strong> message allows only one brush to be returned. To provide a custom appearance for push buttons, use an owner-drawn button. For more information, see <a href="user-controls-intro.html">Creating Owner-Drawn Controls</a>.</p>
<p>The <strong>WM_CTLCOLORBTN</strong> message is never sent between threads. It is sent only within one thread.</p>
<p>The text color of a check box or radio button applies to the box or button, its check mark, and the text. The focus rectangle for these buttons remains the system default color (typically black). The text color of a group box applies to the text but not to the line that defines the box. The text color of a push button applies only to its focus rectangle; it does not affect the color of the text.</p>
<p>If a dialog box procedure handles this message, it should cast the desired return value to a <strong>INT_PTR</strong> and return the value directly. If the dialog box procedure returns <strong>FALSE</strong>, then default message handling is performed. The DWL_MSGRESULT value set by the <a href="/windows/desktop/api/winuser/nf-winuser-setwindowlonga"><strong>SetWindowLong</strong></a> function is ignored.</p>
<h2>Requirements</h2>
<table>
<thead>
<tr>
<th>Requirement</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Minimum supported client<!-- raw HTML omitted --></td>
<td>Windows Vista [desktop apps only]<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Minimum supported server<!-- raw HTML omitted --></td>
<td>Windows Server 2003 [desktop apps only]<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Header<!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted -->Winuser.h (include Windows.h)<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<h2>See also</h2>
<!-- raw HTML omitted -->
<p><strong>Other Resources</strong></p>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/api/wingdi/nf-wingdi-realizepalette"><strong>RealizePalette</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/api/wingdi/nf-wingdi-selectpalette"><strong>SelectPalette</strong></a></p>
<!-- raw HTML omitted -->
</body>
