<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>How to Process the DTN_WMKEYDOWN Notification</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>title: How to Process the DTN_WMKEYDOWN Notification
description: This topic demonstrates how to process a DTN_WMKEYDOWN notification. Handling this notification code allows the owner of the control to provide specific responses to keystrokes within the callback fields of the control.
ms.assetid: CD521C62-CF52-4FFF-A598-E5EBA34471FB
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>How to Process the DTN_WMKEYDOWN Notification</h1>
<p>This topic demonstrates how to process a <a href="dtn-wmkeydown.html">DTN_WMKEYDOWN</a> notification. Handling this notification code allows the owner of the control to provide specific responses to keystrokes within the callback fields of the control.</p>
<h2>What you need to know</h2>
<h3>Technologies</h3>
<ul>
<li><a href="window-controls.html">Windows Controls</a></li>
</ul>
<h3>Prerequisites</h3>
<ul>
<li>C/C++</li>
<li>Windows User Interface Programming</li>
</ul>
<h2>Instructions</h2>
<p>Date and time picker (DTP) controls send the <a href="dtn-wmkeydown.html">DTN_WMKEYDOWN</a> message to report that the user has typed input in a callback field. If you want to emulate the same keyboard responses that are supported for standard DTP fields or provide custom responses, your application must include code to handle this notification.</p>
<p>The following C++ code example is an application-defined function that processes the <a href="dtn-wmkeydown.html">DTN_WMKEYDOWN</a> notification.</p>
<p><strong>Security Warning:</strong> Using <strong>lstrcmp</strong> incorrectly can compromise the security of your application. For example, before calling <strong>lstrcmp</strong> in the following code example, you should make sure the two strings are null-terminated. You should review <a href="sec-comctls.html">Security Considerations: Microsoft Windows Controls</a> before continuing.</p>
<pre lang="C++"><code>//  DoWMKeydown increments or decrements the day of month according 
//  to user keyboard input.

void WINAPI DoWMKeydown(
 HWND hwndDP,
 LPNMDATETIMEWMKEYDOWN lpDTKeystroke)
{
    int delta =1;
    if(!lstrcmp(lpDTKeystroke-&gt;pszFormat,L&quot;XX&quot;)){
        switch(lpDTKeystroke-&gt;nVirtKey){
            case VK_DOWN:
            case VK_SUBTRACT:
                delta = -1;  // fall through

            case VK_UP:
            case VK_ADD:
                lpDTKeystroke-&gt;st.wDay += (WORD) delta;
                break;
        }
    }
}
</code></pre>
<h2>Related topics</h2>
<!-- raw HTML omitted -->
<p><a href="using-date-and-time-picker.html">Using Date and Time Picker Controls</a></p>
<!-- raw HTML omitted -->
<p><a href="bumper-date-and-time-picker-date-and-time-picker-control-reference.html">Date and Time Picker Control Reference</a></p>
<!-- raw HTML omitted -->
<p><a href="date-and-time-picker-control-reference.html">Date and Time Picker</a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
