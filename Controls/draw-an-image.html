<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>How to Draw an Image</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>title: How to Draw an Image
description: This topic demonstrates how to use the ImageList_Draw function to draw an image.
ms.assetid: BE2F20F3-B7D3-4FA2-B1E9-60A47A609C36
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>How to Draw an Image</h1>
<p>This topic demonstrates how to use the <a href="/windows/desktop/api/Commctrl/nf-commctrl-imagelist_draw"><strong>ImageList_Draw</strong></a> function to draw an image.</p>
<h2>What you need to know</h2>
<h3>Technologies</h3>
<ul>
<li><a href="window-controls.html">Windows Controls</a></li>
</ul>
<h3>Prerequisites</h3>
<ul>
<li>C/C++</li>
<li>Windows User Interface Programming</li>
</ul>
<h2>Instructions</h2>
<p>To draw an image, you use the <a href="/windows/desktop/api/Commctrl/nf-commctrl-imagelist_draw"><strong>ImageList_Draw</strong></a> or <a href="/windows/desktop/api/Commctrl/nf-commctrl-imagelist_drawex"><strong>ImageList_DrawEx</strong></a> function. You specify the handle to an image list, the index of the image to draw, the handle to the destination device context, a location within the device context, and one or more drawing styles.</p>
<p>The user-defined function in the following C++ code example uses the <a href="/windows/desktop/api/Commctrl/nf-commctrl-imagelist_draw"><strong>ImageList_Draw</strong></a> function to draw an image and saves the client coordinates of the image's bounding rectangle. A subsequent function uses the bounding rectangle to determine whether the user has clicked on the image.</p>
<pre lang="C++"><code>// DrawTheImage - draws an image transparently and saves 
// the bounding rectangle of the drawn image.
// Returns TRUE if successful, or FALSE otherwise. 
// hwnd - handle to the window in which to draw the image. 
// himl - handle to the image list that contains the image. 
// cx and cy - client coordinates for the upper-left corner of the image. 
// 
// Global variables and constants 
//     g_nImage - index of the image to draw. 
//     g_rcImage - bounding rectangle of the image. 
//     CX_IMAGE and CY_IMAGE - width and height of the image. 
extern int g_nImage; 
extern RECT g_rcImage; 
 
#define CX_IMAGE 32 
#define CY_IMAGE 32 
 
BOOL DrawTheImage(HWND hwnd, HIMAGELIST himl, int cx, int cy) 
{ 
    HDC hdc; 
 
    if ((hdc = GetDC(hwnd)) == NULL) 
        return FALSE; 
    if (!ImageList_Draw(himl, g_nImage, hdc, cx, cy, ILD_TRANSPARENT)) 
        return FALSE; 
    ReleaseDC(hwnd, hdc); 
 
    SetRect(&amp;g_rcImage, cx, cy, CX_IMAGE + cx, CY_IMAGE + cy); 
 
    return TRUE; 
} 
</code></pre>
<h2>Related topics</h2>
<!-- raw HTML omitted -->
<p><a href="bumper-image-lists-image-lists-reference.html">Image Lists Reference</a></p>
<!-- raw HTML omitted -->
<p><a href="image-lists.html">About Image Lists</a></p>
<!-- raw HTML omitted -->
<p><a href="using-image-lists.html">Using Image Lists</a></p>
<!-- raw HTML omitted -->
<p>Â </p>
<p>Â </p>
</body>
