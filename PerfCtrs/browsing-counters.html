<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Browsing Counters</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: To display a dialog box that lists the performance objects and counters defined on the computer, call the PdhBrowseCounters function.
ms.assetid: f2fac1d3-f643-43c9-a445-112015baecdd
title: Browsing Counters
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>Browsing Counters</h1>
<p>To display a dialog box that lists the performance objects and counters defined on the computer, call the <a href="/windows/desktop/api/Pdh/nf-pdh-pdhbrowsecountersa"><strong>PdhBrowseCounters</strong></a> function. The dialog box lets the user browse and select performance counters. You use the <a href="/windows/win32/api/pdh/ns-pdh-pdh_browse_dlg_config_a"><strong>PDH_BROWSE_DLG_CONFIG</strong></a> structure to specify the configuration of the dialog box. For example, you can configure the dialog to return one selection or multiple selections.</p>
<p>On input, the <strong>szReturnPathBuffer</strong> member contains the default performance object and counter that is selected in the dialog box. On output, the buffer contains the performance object and counter that the user selected. You can also use the <strong>pCallBack</strong> member to specify a callback function to process the counter names returned by the dialog box.</p>
<p>Note that this dialog box can return PDH_DIALOG_CANCELLED if <strong>bSingleCounterPerDialog</strong> is <strong>FALSE</strong> and the user clicks the Close button, so your error handling would have to account for this.</p>
<p>For an example that uses the <a href="/windows/desktop/api/Pdh/nf-pdh-pdhbrowsecountersa"><strong>PdhBrowseCounters</strong></a> function, see <a href="browsing-performance-counters.html">Browsing Performance Counters</a>.</p>
<p>To retrieve a list of performance objects on the computer, you can also call the <a href="/windows/desktop/api/Pdh/nf-pdh-pdhenumobjectsa"><strong>PdhEnumObjects</strong></a> function. To retrieve a list of counters and instances for a performance object, call the <a href="/windows/desktop/api/Pdh/nf-pdh-pdhenumobjectitemsa"><strong>PdhEnumObjectItems</strong></a> function. You can also use these functions to identify the performance objects and counters contained in a log file. Repeated calls to <strong>PdhEnumObjectItems</strong> will return the same list of counters and instances until you call <strong>PdhEnumObjects</strong> to refresh the list of performance objects first. For an example that enumerates objects and counters, see <a href="enumerating-process-objects.html">Enumerating Process Objects</a>.</p>
<h2>Selecting the data source</h2>
<p>You can use <a href="/windows/desktop/api/Pdh/nf-pdh-pdhselectdatasourcea"><strong>PdhSelectDataSource</strong></a> in conjunction with <a href="/windows/desktop/api/Pdh/nf-pdh-pdhbrowsecountersa"><strong>PdhBrowseCounters</strong></a> to prompt the user to select whether the data source is in real-time or from a log file, and, if it is a log file, its name. If you do not want the data source dialog to be displayed, you can call <strong>PdhSelectDataSource</strong> to display only the file browser catalog. To do this, specify PDH_FLAGS_FILE_BROWSER_ONLY as the second parameter of the call to <strong>PdhSelectDataSource</strong>.</p>
<p>Â </p>
<p>Â </p>
</body>
