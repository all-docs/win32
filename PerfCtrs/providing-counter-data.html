<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Providing Counter Data</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: In WindowsÂ Vista, Performance Counters implemented a new architecture (version 2.0) for providing counter data.
ms.assetid: c17eda2f-3cf8-40d6-8be6-c1ce190d1a26
title: Providing Counter Data
ms.topic: article
ms.date: 08/17/2020</h2>
<h1>Providing Counter Data</h1>
<p>Software components that publish data via Windows Performance Counters are called performance data providers.</p>
<p>Windows supports two kinds of performance data providers. Legacy performance data providers (<strong>V1 providers</strong>) are implemented using an .INI file and a performance DLL. Modern performance data providers (<strong>V2 providers</strong>) use a .MAN (XML manifest) and the performance counter provider APIs.</p>
<h2>Manifests</h2>
<p>Modern performance data providers use a .MAN (XML manifest) to define the counter data and use performance counter provider APIs to manage data within the context of the provider.</p>
<p>Providers implemented using a manifest and performance counter provider APIs are often called <strong>V2 providers</strong>.</p>
<p>Windows supports user-mode V2 providers on Windows Vista or later. For user-mode details, see <a href="providing-counter-data-using-version-2-0.html">Providing Counter Data Using Version 2.0</a>.</p>
<p>Windows supports kernel-mode V2 providers on Windows 7 or later. For kernel-mode details, see <a href="/windows-hardware/drivers/devtest/kernel-mode-performance-monitoring">Kernel Mode Performance Monitoring</a>.</p>
<h2>Performance DLL (deprecated)</h2>
<p>In the legacy performance counter architecture, providers implemented a performance DLL to that ran in the consumer's process to collect and provide the counter data when a consumer requested it. The provider used an initialization (.INI) file and registry entries to define the counters and to configure the performance DLL.</p>
<p>Providers implemented using an .INI file and a performance DLL are often called <strong>V1 providers</strong>.</p>
<blockquote>
<p>[!CAUTION]
Although you can still use a performance DLL to provide counter data, this architecture is deprecated due to significant performance and reliability limitations. In addition, V1 providers are often harder to implement since they require shipping a separate DLL that must run in the consumer's process.</p>
</blockquote>
<p>For details, see <a href="providing-counter-data-using-a-performance-dll.html">Providing Counter Data Using a Performance DLL</a>.</p>
</body>
