<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Performance Data Format</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: The format of the data retrieved by the RegQueryValueEx function begins with a fixed-length header structure, PERF_DATA_BLOCK.
ms.assetid: a68fa617-834c-4ad9-b922-fac3a648ad75
title: Performance Data Format
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>Performance Data Format</h1>
<p>The format of the data retrieved by the <a href="/windows/desktop/api/winreg/nf-winreg-regqueryvalueexa"><strong>RegQueryValueEx</strong></a> function begins with a fixed-length header structure, <a href="/windows/desktop/api/Winperf/ns-winperf-perf_data_block"><strong>PERF_DATA_BLOCK</strong></a>. The <strong>PERF_DATA_BLOCK</strong> structure describes the system and the performance data. The <strong>PERF_DATA_BLOCK</strong> structure is followed by variable number of variable-length object data items. The header of each object item contains the offset of the next object item in the list. The following diagram shows the basic performance data structure.</p>
<p><img src="images/perfdata.png" alt="performance data structure" /></p>
<p>There are two formats for the object data items: one that supports multiple instances, and the other that does not support multiple instances.</p>
<p>Each object data item block contains a <a href="/windows/desktop/api/Winperf/ns-winperf-perf_object_type"><strong>PERF_OBJECT_TYPE</strong></a> structure, which describes the performance data for the object. The <strong>PERF_OBJECT_TYPE</strong> structure is followed by a list of <a href="/windows/desktop/api/Winperf/ns-winperf-perf_counter_definition"><strong>PERF_COUNTER_DEFINITION</strong></a> structures, one for each counter defined for the object. For an object with only one instance, the list of <strong>PERF_COUNTER_DEFINITION</strong> structures is followed by a single <a href="/windows/desktop/api/Winperf/ns-winperf-perf_counter_block"><strong>PERF_COUNTER_BLOCK</strong></a> structure, followed by the counter data. Each <strong>PERF_COUNTER_DEFINITION</strong> structure contains the offset from the start of the <strong>PERF_COUNTER_BLOCK</strong> structure to the corresponding counter data. The following diagram shows the structure of a performance object that does not support multiple instances.</p>
<p><img src="images/perfnoinst.png" alt="structure of performance object that does not support multiple instances" /></p>
<p>For an object type that supports multiple instances, the list of <a href="/windows/desktop/api/Winperf/ns-winperf-perf_counter_definition"><strong>PERF_COUNTER_DEFINITION</strong></a> structures is followed by a list of instance information blocks (one for each instance). Each instance information block contains a <a href="/windows/desktop/api/Winperf/ns-winperf-perf_instance_definition"><strong>PERF_INSTANCE_DEFINITION</strong></a> structure, the name of the instance, and a <a href="/windows/desktop/api/Winperf/ns-winperf-perf_counter_block"><strong>PERF_COUNTER_BLOCK</strong></a> structure. The following diagram shows the structure of a performance object that supports two instances.</p>
<p><img src="images/perfinst.png" alt="structure of a performance object that supports two instances" /></p>
<p>For an example that uses the offsets, see <a href="displaying-object-instance-and-counter-names.html">Displaying Object, Instance, and Counter Names</a>.</p>
<p>Â </p>
<p>Â </p>
</body>
