<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Creating the Application's Performance Key</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>description: An application that supports performance counters must have a Performance key under the Services key. The following example shows the values that you must include for this key.
ms.assetid: b6cdf130-699f-49bd-97b6-a580818b3fab
title: Creating the Applications Performance Key
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>Creating the Application's Performance Key</h1>
<p>An application that supports performance counters must have a <strong>Performance</strong> key under the <strong>Services</strong> key. The following example shows the values that you must include for this key.</p>
<pre><code>HKEY_LOCAL_MACHINE
Â Â Â \SYSTEM
Â Â Â Â Â Â \CurrentControlSet
Â Â Â Â Â Â Â Â Â \Services
Â Â Â Â Â Â Â Â Â Â Â Â \application-name
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â \Performance
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Library = Name of your performance DLL
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Open = Name of your Open function in your DLL
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Collect = Name of your Collect function in your DLL
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Close = Name of your Close function in your DLL
</code></pre>
<p>The <strong>Library</strong> value provides the name of the performance DLL, and the <strong>Open</strong>, <strong>Collect</strong>, and <strong>Close</strong> values provide the names of the functions exported from the performance DLL. The data type of these values is <strong>REG_SZ</strong>. When a consumer requests performance data, the system uses these values to determine which performance DLLs to load and which DLL functions to call.</p>
<p>The <strong>Library</strong> value can contain the DLL name or a full path to the DLL. If you use the <strong>REG_EXPAND_SZ</strong> data type for <strong>Library</strong>, you can specify environment variables in your path.</p>
<p>The application's service key must exist before you can run <strong>lodctr</strong> to load your counter names and help strings.</p>
<p>For additional registry values that you can create, such as specifying time out values for the <a href="/previous-versions/windows/desktop/legacy/aa372200(v=vs.85)"><strong>OpenPerformanceData</strong></a> and <a href="/windows/win32/api/winperf/nc-winperf-pm_collect_proc"><strong>CollectPerformanceData</strong></a> functions, see <a href="creating-other-registry-entries.html">Creating Other Registry Entries</a>.</p>
<p>Â </p>
<p>Â </p>
</body>
