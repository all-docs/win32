<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>STOWED_EXCEPTION_INFORMATION_V2 structure</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<p>title: STOWED_EXCEPTION_INFORMATION_V2 structure
description: Contains stowed exception info.
ms.assetid: 79267974-EE1B-4427-A6D6-265F6BC5D73A
keywords:</p>
<ul>
<li>STOWED_EXCEPTION_INFORMATION_V2 structure Windows Error Reporting</li>
<li>PSTOWED_EXCEPTION_INFORMATION_V2 structure pointer Windows Error Reporting
topic_type:</li>
<li>apiref
api_name:</li>
<li>STOWED_EXCEPTION_INFORMATION_V2
api_location:</li>
<li>none
api_type:</li>
<li>HeaderDef
ms.topic: reference
ms.date: 05/31/2018</li>
</ul>
<hr />
<h1>STOWED_EXCEPTION_INFORMATION_V2 structure</h1>
<p>Contains stowed exception info.</p>
<h2>Syntax</h2>
<pre lang="C++"><code>typedef struct _STOWED_EXCEPTION_INFORMATION_V2 {
  STOWED_EXCEPTION_INFORMATION_HEADER Header;
  HRESULT                             ResultCode;
  struct {
    DWORD ExceptionForm  :2;
    DWORD ThreadId  :30;
  };
  union {
    struct {
      PVOID ExceptionAddress;
      ULONG StackTraceWordSize;
      ULONG StackTraceWords;
      PVOID StackTrace;
    };
    struct {
      PWSTR ErrorText;
    };
  };
  ULONG                               NestedExceptionType;
  PVOID                               NestedException;
} STOWED_EXCEPTION_INFORMATION_V2, *PSTOWED_EXCEPTION_INFORMATION_V2;
</code></pre>
<h2>Members</h2>
<!-- raw HTML omitted -->
<p><strong>Header</strong></p>
<!-- raw HTML omitted -->
<p>Type: <strong><a href="stowed-exception-information-header.html"><strong>STOWED_EXCEPTION_INFORMATION_HEADER</strong></a></strong></p>
<!-- raw HTML omitted -->
<p>The <a href="stowed-exception-information-header.html"><strong>STOWED_EXCEPTION_INFORMATION_HEADER</strong></a> structure that contains info for this parent structure.</p>
<!-- raw HTML omitted -->
<p><strong>ResultCode</strong></p>
<!-- raw HTML omitted -->
<p>Type: <strong><a href="/windows/desktop/WinProg/windows-data-types"><strong>HRESULT</strong></a></strong></p>
<!-- raw HTML omitted -->
<p>The <a href="/windows/desktop/WinProg/windows-data-types"><strong>HRESULT</strong></a> code for the stowed exception.</p>
<!-- raw HTML omitted -->
<p><strong>ExceptionForm</strong></p>
<!-- raw HTML omitted -->
<p>Type: <strong><a href="/windows/desktop/WinProg/windows-data-types"><strong>DWORD</strong></a></strong></p>
<!-- raw HTML omitted -->
<p>A 2-bit value that identifies the form of the exception.</p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --> <!-- raw HTML omitted --><strong>STOWED_EXCEPTION_FORM_BINARY</strong><!-- raw HTML omitted --> <!-- raw HTML omitted -->0x01<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td>This value indicates that the form of the exception is binary.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --> <!-- raw HTML omitted --><strong>STOWED_EXCEPTION_FORM_TEXT</strong><!-- raw HTML omitted --> <!-- raw HTML omitted -->0x02<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td>This value indicates that the form of the exception is text.<!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<!-- raw HTML omitted -->
<p><strong>ThreadId</strong></p>
<!-- raw HTML omitted -->
<p>Type: <strong><a href="/windows/desktop/WinProg/windows-data-types"><strong>DWORD</strong></a></strong></p>
<!-- raw HTML omitted -->
<p>A 30-bit value that identifies the thread that raised the exception. The value is shifted to the right by 2 bits when it's stored. To convert it back to a valid thread ID, shift the value to the left by 2. For example:</p>
<pre lang="syntax"><code>DWORD ActualThreadId = (StowedException.ThreadId &lt;&lt; 2);
</code></pre>
<!-- raw HTML omitted -->
<p>(<em>unnamed struct</em>)</p>
<!-- raw HTML omitted -->
<p>The members of this nested structure are valid only if the <strong>ExceptionForm</strong> member is set to <strong>STOWED_EXCEPTION_FORM_BINARY</strong>.</p>
<!-- raw HTML omitted -->
<p><strong>ExceptionAddress</strong></p>
<!-- raw HTML omitted -->
<p>Type: <strong><a href="/windows/desktop/WinProg/windows-data-types"><strong>PVOID</strong></a></strong></p>
<!-- raw HTML omitted -->
<p>A pointer that contains the exception address.</p>
<!-- raw HTML omitted -->
<p><strong>StackTraceWordSize</strong></p>
<!-- raw HTML omitted -->
<p>Type: <strong><a href="/windows/desktop/WinProg/windows-data-types"><strong>ULONG</strong></a></strong></p>
<!-- raw HTML omitted -->
<p>Size, in bytes, of each word in the stack trace that the <strong>StackTrace</strong> member points to. This value is set to 4 for 32-bit platforms and 8 for 64-bit platforms.</p>
<!-- raw HTML omitted -->
<p><strong>StackTraceWords</strong></p>
<!-- raw HTML omitted -->
<p>Type: <strong><a href="/windows/desktop/WinProg/windows-data-types"><strong>ULONG</strong></a></strong></p>
<!-- raw HTML omitted -->
<p>The number of words in the stack trace that the <strong>StackTrace</strong> member points to. The number of words is equal to the number of elements in the array.</p>
<!-- raw HTML omitted -->
<p><strong>StackTrace</strong></p>
<!-- raw HTML omitted -->
<p>Type: <strong><a href="/windows/desktop/WinProg/windows-data-types"><strong>PVOID</strong></a></strong></p>
<!-- raw HTML omitted -->
<p>A pointer to a memory block that contains the stack trace.</p>
<!-- raw HTML omitted -->
<p>(<em>unnamed struct</em>)</p>
<!-- raw HTML omitted -->
<p>The member of this nested structure is valid only if the <strong>ExceptionForm</strong> member is set to <strong>STOWED_EXCEPTION_FORM_TEXT</strong>.</p>
<!-- raw HTML omitted -->
<p><strong>ErrorText</strong></p>
<!-- raw HTML omitted -->
<p>Type: <strong><a href="/windows/desktop/WinProg/windows-data-types"><strong>PWSTR</strong></a></strong></p>
<!-- raw HTML omitted -->
<p>A pointer to a null-terminated string that contains the error text of the exception.</p>
<!-- raw HTML omitted -->
<p><strong>NestedExceptionType</strong></p>
<!-- raw HTML omitted -->
<p>Type: <strong><a href="/windows/desktop/WinProg/windows-data-types"><strong>ULONG</strong></a></strong></p>
<!-- raw HTML omitted -->
<p>A 32-bit value that specifies the type of object that the <strong>NestedException</strong> member points to. Define the value with this byte swap type-definition macro that assumes little-endian:</p>
<pre lang="syntax"><code>#define STOWED_EXCEPTION_NESTED_TYPE(t) ((((((ULONG)(t)) &gt;&gt; 24) &amp; 0xFF) &lt;&lt;  0) | \
                                         (((((ULONG)(t)) &gt;&gt; 16) &amp; 0xFF) &lt;&lt;  8) | \
                                         (((((ULONG)(t)) &gt;&gt;  8) &amp; 0xFF) &lt;&lt; 16) | \
                                         (((((ULONG)(t)) &gt;&gt;  0) &amp; 0xFF) &lt;&lt; 24))
</code></pre>
<p>Here are some common type definitions:</p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --> <!-- raw HTML omitted --><strong>STOWED_EXCEPTION_NESTED_TYPE_NONE</strong><!-- raw HTML omitted --> <!-- raw HTML omitted -->(0x00000000)<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td>This value specifies that there is no nested exception object.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --> <!-- raw HTML omitted --><strong>STOWED_EXCEPTION_NESTED_TYPE_WIN32</strong><!-- raw HTML omitted --> <!-- raw HTML omitted -->STOWED_EXCEPTION_NESTED_TYPE('W32E')<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td>This value specifies that the <strong>NestedException</strong> member points to an <a href="/windows/desktop/api/winnt/ns-winnt-exception_record"><strong>EXCEPTION_RECORD</strong></a> object.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --> <!-- raw HTML omitted --><strong>STOWED_EXCEPTION_NESTED_TYPE_STOWED</strong><!-- raw HTML omitted --> <!-- raw HTML omitted -->STOWED_EXCEPTION_NESTED_TYPE('STOW')<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td>This value specifies that the <strong>NestedException</strong> member points to another stowed exception object. The other stowed exception object can be a <strong>STOWED_EXCEPTION_INFORMATION_V2</strong> object or a different version with a valid <strong>Header</strong> member, that is, a <strong>Header</strong> member that contains a valid <a href="stowed-exception-information-header.html"><strong>STOWED_EXCEPTION_INFORMATION_HEADER</strong></a>.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --> <!-- raw HTML omitted --><strong>STOWED_EXCEPTION_NESTED_TYPE_CLR</strong><!-- raw HTML omitted --> <!-- raw HTML omitted -->STOWED_EXCEPTION_NESTED_TYPE('CLR1')<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td>This value specifies that the <strong>NestedException</strong> member points to a 'CLR1' exception object.<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --> <!-- raw HTML omitted --><strong>STOWED_EXCEPTION_NESTED_TYPE_LEO</strong><!-- raw HTML omitted --> <!-- raw HTML omitted -->STOWED_EXCEPTION_NESTED_TYPE('LEO1')<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td>This value specifies that the <strong>NestedException</strong> member points to a language exception object.<!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<!-- raw HTML omitted -->
<p><strong>NestedException</strong></p>
<!-- raw HTML omitted -->
<p>Type: <strong><a href="/windows/desktop/WinProg/windows-data-types"><strong>PVOID</strong></a></strong></p>
<!-- raw HTML omitted -->
<p>A pointer to a nested exception type. The type of object is indicated by the <strong>NestedExceptionType</strong> member.</p>
<!-- raw HTML omitted -->
<h2>Remarks</h2>
<p><strong>STOWED_EXCEPTION_INFORMATION_V2</strong> and <a href="stowed-exception-information-header.html"><strong>STOWED_EXCEPTION_INFORMATION_HEADER</strong></a> currently aren't defined in a header that is publicly available so you need to define them in your source code before you use them.</p>
<p>The <strong>STOWED_EXCEPTION_INFORMATION_V1</strong> structure is identical to this structure except it doesn't contain the <strong>NestedExceptionType</strong> and <strong>NestedException</strong> members.</p>
<h2>Requirements</h2>
<table>
<thead>
<tr>
<th>Requirement</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Minimum supported client<!-- raw HTML omitted --></td>
<td>Windows 8.1 [desktop apps only]<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Minimum supported server<!-- raw HTML omitted --></td>
<td>Windows Server 2012 R2 [desktop apps only]<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Header<!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted -->None<!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<h2>See also</h2>
<!-- raw HTML omitted -->
<p><a href="/windows/desktop/api/winnt/ns-winnt-exception_record"><strong>EXCEPTION_RECORD</strong></a></p>
<!-- raw HTML omitted -->
<p><a href="stowed-exception-information-header.html"><strong>STOWED_EXCEPTION_INFORMATION_HEADER</strong></a></p>
<!-- raw HTML omitted -->
</body>
