<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Generating the Stub Files</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<p>title: Generating the Stub Files
description: After defining the client/server interface, you usually develop your client and server source files.
ms.assetid: e4d08bee-ab9a-4426-a1af-72a7d763797f
keywords:</p>
<ul>
<li>Remote Procedure Call RPC , tasks, generating stub files
ms.topic: article
ms.date: 05/31/2018</li>
</ul>
<hr />
<h1>Generating the Stub Files</h1>
<p>After defining the client/server interface, you usually develop your client and server source files. Next use a single makefile to generate the stub and header files. Compile and link the client and server applications. However, if this is your first exposure to the distributed computing environment, you may want to invoke the MIDL compiler now to see what MIDL generates before you continue. The MIDL compiler (Midl.exe) is automatically installed when you install the Platform Software Development Kit (SDK).</p>
<p>When you compile these files, make sure that Hello.idl and Hello.acf are in the same directory. The following command will generate the header file Hello.h, and the client and server stubs, Hello_c.c and Hello_s.c.</p>
<p><strong>midl hello.idl</strong></p>
<p>Notice that Hello.h contains function prototypes for HelloProc and Shutdown, as well as forward declarations for two memory management functions, <strong>midl_user_allocate</strong> and <strong>midl_user_free</strong>. You will provide these two functions in the server application. If data were being transmitted from the server to the client (by means of an [<strong>out</strong>] parameter) you would also need to provide these two memory management functions in the client application.</p>
<p>Note the definitions for the global handle variable, hello_IfHandle, and the client and server interface handle names, hello_v1_0_c_ifspec and hello_v1_0_s_ifspec. The client and server applications will use the interface handle names in run-time calls.</p>
<p>At this point, you don't need to do anything with the stub files Hello_c.c and hello_s.c.</p>
<pre lang="syntax"><code>/*file: hello.h */
/* this ALWAYS GENERATED file contains the definitions for the interfaces */
/* File created by MIDL compiler version 3.00.06 
/* at Tue Feb 20 11:33:32 1996 */
/* Compiler settings for hello.idl:
    Os, W1, Zp8, env=Win32, ms_ext, c_ext
    error checks: none */
//@@MIDL_FILE_HEADING(  )
#include &quot;Rpc.h&quot;
#include &quot;rpcndr.h&quot;
 
#ifndef __hello_h_
#define __hello_h_
 
#ifdef __cplusplus
extern &quot;C&quot;{
#endif 
 
/* Forward Declarations */ 
 
void __RPC_FAR * __RPC_USER MIDL_user_allocate(size_t);
void __RPC_USER MIDL_user_free( void __RPC_FAR * ); 
 
#ifndef __hello_INTERFACE_DEFINED__
#define __hello_INTERFACE_DEFINED__
 
/****************************************
 * Generated header for interface: hello
 * at Tue Feb 20 11:33:32 1996
 * using MIDL 3.00.06
 ****************************************/
/* [implicit_handle][version][uuid] */ 
 
            /* size is 0 */
void HelloProc( 
    /* [string][in] */ unsigned char __RPC_FAR *pszString);
    /* size is 0 */
void Shutdown( void);
extern handle_t hello_IfHandle;
 
extern RPC_IF_HANDLE hello_v1_0_c_ifspec;
extern RPC_IF_HANDLE hello_v1_0_s_ifspec;
#endif /* __hello_INTERFACE_DEFINED__ */
 
/* Additional Prototypes for ALL interfaces */
/* end of Additional Prototypes */
#ifdef __cplusplus
}
#endif
#endif
</code></pre>
<p>Â </p>
<p>Â </p>
</body>
