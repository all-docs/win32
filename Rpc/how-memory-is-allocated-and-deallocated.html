<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>How Memory Is Allocated and Deallocated</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>title: How Memory Is Allocated and Deallocated
description: By default, stub code generated by the MIDL compiler calls user-supplied functions to allocate and free memory. These functions, named midl_user_allocate and midl_user_free, must be supplied by the developer and linked with the application.
ms.assetid: 65af7a6d-4cfa-4175-9085-560d97cab41d
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>How Memory Is Allocated and Deallocated</h1>
<p>By default, stub code generated by the MIDL compiler calls user-supplied functions to allocate and free memory. These functions, named <a href="/windows/desktop/Midl/midl-user-allocate-1"><strong>midl_user_allocate</strong></a> and <a href="/windows/desktop/Midl/midl-user-free-1"><strong>midl_user_free</strong></a>, must be supplied by the developer and linked with the application.</p>
<p>All applications must supply implementations of <a href="/windows/desktop/Midl/midl-user-allocate-1"><strong>midl_user_allocate</strong></a> and <a href="/windows/desktop/Midl/midl-user-free-1"><strong>midl_user_free</strong></a>, even though the names of these functions may not appear explicitly in the stubs. The only exception is when you are compiling in OSF-compatibility (/osf) mode. These user-supplied functions must match a specific, defined function prototype but otherwise, can be implemented in any way that is convenient or useful for the application. Alternatively, applications can use the RpcSs Memory Management Package. The Microsoft RPC run-time library supplies this group of functions.</p>
<p>The following sections describe the RPC memory management functions.</p>
<ul>
<li><a href="/windows/desktop/Midl/midl-user-allocate-1"><strong>midl_user_allocate</strong></a></li>
<li><a href="/windows/desktop/Midl/midl-user-free-1"><strong>midl_user_free</strong></a></li>
<li><a href="rpcss-memory-management-package.html">RpcSs Memory Management Package</a></li>
</ul>
<p>Â </p>
<p>Â </p>
</body>
