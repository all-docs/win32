<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Using Arrays, Strings, and Pointers</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>title: Using Arrays, Strings, and Pointers
description: The Doctor program (see \samples\rpc\doctor in the Platform Software Development Kit (SDK)) is a good example of an application that demonstrates the design trade-offs involved with array and string attributes.
ms.assetid: 9aea94a1-ae1f-4bd6-9dd3-146edf0b5fec
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>Using Arrays, Strings, and Pointers</h1>
<p>The Doctor program (see \samples\rpc\doctor in the Platform Software Development Kit (SDK)) is a good example of an application that demonstrates the design trade-offs involved with array and string attributes. The Doctor program is a small sample version of a better-known program, Eliza, developed by artificial intelligence researcher Joseph Weizenbaum at MIT in the 1960s. The program mimics a therapist by using simple pattern-matching to respond to natural language input.</p>
<p>The Eliza program recorded the following session.</p>
<table>
<thead>
<tr>
<th>User</th>
<th>Eliza</th>
</tr>
</thead>
<tbody>
<tr>
<td>Men are all alike.</td>
<td>In what way?</td>
</tr>
<tr>
<td>They're always bugging us about something or other.</td>
<td>Can you think of a specific example?</td>
</tr>
<tr>
<td>Well, my boyfriend made me come here.</td>
<td>Your boyfriend made you come here.</td>
</tr>
<tr>
<td>He says I'm depressed much of the time.</td>
<td>I am sorry to hear that you are depressed.</td>
</tr>
<tr>
<td>It's true, I am unhappy.</td>
<td>Do you think coming here will help you not to be unhappy?</td>
</tr>
<tr>
<td>I need some help; that much seems certain.</td>
<td>What would it mean to you if you got some help?</td>
</tr>
<tr>
<td>Perhaps I could learn to get along with my mother.</td>
<td>Tell me more about your family.</td>
</tr>
<tr>
<td>My mother takes care of me.</td>
<td>Who else in your family takes care of you?</td>
</tr>
<tr>
<td>My father.</td>
<td>Your father.</td>
</tr>
<tr>
<td>You are like my father in some ways.</td>
<td>What resemblance do you see?</td>
</tr>
</tbody>
</table>
<p>Â </p>
<p>The Doctor program can be split into client-side and server-side applications. The client side prompts the patient for input and displays the doctor's response. The server side processes the patient input and generates the doctor's response. This is a classic example of a client-server application: the client is responsible for user interaction while the server handles the extensive computational load. Not much data is passed to and returned by the function but, because the data can require a significant amount of processing, the server processes it.</p>
<p>The Doctor program uses a character array for input and returns another character array as output. The table below lists four ways to pass character arrays between the client and server, and the attributes and functions needed to implement each approach.</p>
<table>
<thead>
<tr>
<th>Approach</th>
<th>Attributes or functions</th>
</tr>
</thead>
<tbody>
<tr>
<td>Counted character arrays</td>
<td>[ <a href="/windows/desktop/Midl/size-is">size_is</a>], [ <a href="/windows/desktop/Midl/length-is">length_is</a>], [ <a href="/windows/desktop/Midl/ref">ref</a>]</td>
</tr>
<tr>
<td>Stub-managed strings</td>
<td>[ <a href="/windows/desktop/Midl/string">string</a>], [ <a href="/windows/desktop/Midl/ref">ref</a>], <a href="/windows/desktop/Midl/midl-user-allocate-1">midl_user_allocate</a> on server</td>
</tr>
<tr>
<td>Stub-managed strings</td>
<td>[ <a href="/windows/desktop/Midl/string">string</a>], [ <a href="/windows/desktop/Midl/unique">unique</a>], <a href="/windows/desktop/Midl/midl-user-allocate-1">midl_user_allocate</a> on client and server</td>
</tr>
<tr>
<td>Function that returns a string</td>
<td>[ <a href="/windows/desktop/Midl/unique">unique</a>]</td>
</tr>
</tbody>
</table>
<p>Â </p>
<p>Within the constraints associated with these combinations of attributes, there are alternative ways of sending one character array from client to server and of returning another character array from server to client.</p>
<p>The following topics demonstrate the design trade-offs between the various interfaces that can manage these parameters.</p>
<ul>
<li><a href="counted-character-arrays.html">Counted Character Arrays</a></li>
<li><a href="strings.html">Strings</a></li>
<li><a href="multiple-levels-of-pointers.html">Multiple Levels of Pointers</a></li>
</ul>
<p>Â </p>
<p>Â </p>
</body>
