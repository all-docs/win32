<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Server-side Cleanup</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>title: Server-side Cleanup
description: Server-side cleanup and Remote Procedure Call (RPC).
ms.assetid: 8a48f698-82ae-464b-bdd9-f0245bbc7733
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>Server-side Cleanup</h1>
<p>Imagine the following scenario:</p>
<p>A client opens a context handle, and then either stops or loses connectivity to the server. How does the server detect that the client has failed and the context handle should be run down? There are two subscenarios: one is that the client is shut down in an orderly manner. In such case, it notifies the server that it is shutting down, and the server can clean up, including performing context run downs. If the client does not shut down in an orderly manner or it cannot notify the server, the server uses keep alives to determine whether the client is still available. On the server side, the <a href="/windows/desktop/api/Rpcdce/nf-rpcdce-rpcmgmtsetcomtimeout"><strong>RpcMgmtSetComTimeout</strong></a> function has no effect. Instead, the server uses the global per machineâ€“keep alive setting, which defaults to approximately two hours. If the client does not respond to the server's keep alives, the connection is closed. When all connections to a given client process are closed, the server cleans up and runs down outstanding context handles.</p>
<p>Â </p>
<p>Â </p>
</body>
