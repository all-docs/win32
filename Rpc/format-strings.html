<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Format Strings</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<h2>title: Format Strings
description: A format string is an interpreted token that the NDR engine understands. Format strings are often referred to as MOPs; this documentation uses the term format string throughout.
ms.assetid: 548283bd-023a-41dd-b1d0-661305d019e9
ms.topic: article
ms.date: 05/31/2018</h2>
<h1>Format Strings</h1>
<p>A format string is an interpreted token that the NDR engine understands. Format strings are often referred to as MOPs; this documentation uses the term format string throughout.</p>
<p>To be more precise, a format character is an individual (atomic) interpretable token. Each format character is one byte in size. A format string is a sequence of format characters or format characters and numerical data. The term descriptor is also used for naming common sequences; for example, a parameter format string or a parameter descriptor is a format string used to describe a parameter of a routine.</p>
<p>Format characters have suggestive symbolic names like FC_LONG or FC_STRUCT. All format string characters used by MIDL and the NDR engine are defined in the Ndrtypes.h file.</p>
<h2>Format String Tables</h2>
<p>Two primary format string tables are used by the engine: the procedure format string table, <strong>__MIDL_ProcFormatString</strong>, that keeps the procedure descriptors; and the type format string table, <strong>__MIDL_TypeFormatString</strong>, that keeps the data type descriptors. The compiler generates both into the main stub files (*_c.c, *_s.c, *_p.c). The procedure format string table is used mostly by various interpreters but it is also used for the buffer conversion regardless of the compiler mode. The type format string table is used when calling the core NDR engine to indicate specific data types to be worked on.</p>
<h2>Format String Notation</h2>
<p>The notation used in this document follows common programming description guidelines, with a bar ( | ) used to denote alternative constructs and square brackets ( [ ] ) used to indicate optional elements. Format strings are frequently stacked up for readability (accountability). Throughout this document, FC denotes a single format character. Format characters are presented in all CAPS, using their actual symbolic names. Other arbitrary fields are represented by a name and a size.</p>
<p>Angle brackets ( &lt;&gt; ) are used to denote sizes of the descriptors. The conventions shown in the following table are employed.</p>
<table>
<thead>
<tr>
<th>Notation</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td><!-- raw HTML omitted --></td>
<td>The size of descriptor is n bytes.</td>
</tr>
<tr>
<td>&lt;&gt;</td>
<td>The size of descriptor varies.</td>
</tr>
<tr>
<td>{&lt;&gt;}*</td>
<td>The descriptor is repeated any number of times (0,1,2 â€¦).</td>
</tr>
</tbody>
</table>
<p>Â </p>
<p>The following format characters have a special meaning.</p>
<table>
<thead>
<tr>
<th>Character</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>FC_END</td>
<td>Indicates the end of some format strings.</td>
</tr>
<tr>
<td>FC_PAD</td>
<td>Uninterpreted pad character.</td>
</tr>
</tbody>
</table>
<p>Â </p>
<p>Â </p>
<p>Â </p>
</body>
