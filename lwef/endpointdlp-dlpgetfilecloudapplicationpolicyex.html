<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>DlpGetFileCloudApplicationPolicyEx function</title>
<style>
table th { border: 1px solid; }
table td { border: 1px solid; }
</style>
</head>
<body>
<hr />
<p>description: Returns the enforcement level of a file uploaded to a cloud application. This function is designed to be called from external sources.
title: DlpGetFileCloudApplicationPolicyEx function (endpointdlp.h)
ms.topic: reference
ms.date: 06/14/2023
topic_type:</p>
<ul>
<li>APIRef</li>
<li>kbSyntax
api_name:</li>
<li>DlpGetFileCloudApplicationPolicyEx
api_type:</li>
<li>DllExport
api_location:</li>
<li>EndpointDlp.dll</li>
</ul>
<hr />
<h1>DlpGetFileCloudApplicationPolicyEx function</h1>
<p>Returns the enforcement level of a file uploaded to a cloud application. This function is designed to be called from external sources such as Microsoft Edge, that do not have innate acess to the User SID. The SID will be detected from the currect process where endpointDlp is located.</p>
<h2>Syntax</h2>
<pre lang="C++"><code>HRESULT WINAPI DlpGetFileCloudApplicationPolicyEx(_In_z_ LPCWSTR filePath, _In_z_ LPCWSTR cloudAppDomainName, _In_z_ LPCWSTR url, _Out_ DlpEnforcementLevel* enforcmentLevel, _Out_ DlpTraceInfo* traceInfo);
</code></pre>
<h2>Parameters</h2>
<p><code>filePath</code> [in]: A <a href="https://docs.microsoft.com/windows/win32/fileio/naming-a-file">fully qualified Win32 file path</a> for the file to be analyzed.</p>
<p><code>cloudAppDomainName</code> [in]: The domain name component of the URI for the application accessing the file.</p>
<p><code>url</code> [in]: The URL of the website associated with the function call.</p>
<p><code>enforcmentLevel</code> [out]: The enforcement level of the designated file. If the file is excluded from enforcement or isn't marked as sensitive, an &quot;off&quot; result is returned.</p>
<p><code>traceInfo</code> [out]: A reference to a Trace structure. On successful completion, this structure contains the Policy version used for evaluation and the PolicyRuleID assigned to the file. This value can be NULL.</p>
<h2>Return value</h2>
<p>Returns an <code>HRESULT</code> including, but not limited to, the following values.</p>
<table>
<thead>
<tr>
<th><code>HRESULT</code></th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>S_OK</code></td>
<td>The function completed successfully.</td>
</tr>
<tr>
<td><code>ACCESS_DENIED</code></td>
<td>The user doesn't have permission to view the designated file.</td>
</tr>
<tr>
<td></td>
<td><code>FAILED</code></td>
</tr>
</tbody>
</table>
<h2>Remarks</h2>
<p>This function can be called from multiple threads.</p>
<h2>Requirements</h2>
<table>
<thead>
<tr>
<th>Requirement</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Minimum supported client<!-- raw HTML omitted --></td>
<td>Windows 11, version 22H2 (10.0; Build 22621)</td>
</tr>
<tr>
<td>DLL<!-- raw HTML omitted --></td>
<td>EndpointDlp.dll</td>
</tr>
</tbody>
</table>
</body>
